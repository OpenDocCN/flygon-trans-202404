- en: MVC variations
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: MVC 变体
- en: MVC Variation
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: MVC 变体
- en: 'Traditional [](GLOSSARY.html) MVC [](GLOSSARY.html) is [](GLOSSARY.html) excellent
    [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html) starting [](GLOSSARY.html)
    point [](GLOSSARY.html) for [](GLOSSARY.html) discussion, but [](GLOSSARY.html)
    by [](GLOSSARY.html) no means [](GLOSSARY.html) it [](GLOSSARY.html) must [](GLOSSARY.html)
    be [](GLOSSARY.html) considered [](GLOSSARY.html) the [](GLOSSARY.html) one [](GLOSSARY.html)
    and [](GLOSSARY.html) only [](GLOSSARY.html) proper [](GLOSSARY.html) way [](GLOSSARY.html)
    of [](GLOSSARY.html) doing [](GLOSSARY.html) MVC. In [](GLOSSARY.html) fact, we
    [](GLOSSARY.html) saw [](GLOSSARY.html) how [](GLOSSARY.html) Traditional [](GLOSSARY.html)
    MVC [](GLOSSARY.html) is [](GLOSSARY.html) outdated [](GLOSSARY.html) within [](GLOSSARY.html)
    the [](GLOSSARY.html) context [](GLOSSARY.html) of [](GLOSSARY.html) modern [](GLOSSARY.html)
    UI development. New [](GLOSSARY.html) patterns [](GLOSSARY.html) have [](GLOSSARY.html)
    emerged, built [](GLOSSARY.html) around [](GLOSSARY.html) fundamental [](GLOSSARY.html)
    MVC [](GLOSSARY.html) concepts and [](GLOSSARY.html) nomenclature, but [](GLOSSARY.html)
    with [](GLOSSARY.html) additional [](GLOSSARY.html) tricks, extensions [](GLOSSARY.html)
    and [](GLOSSARY.html) alternative [](GLOSSARY.html) design choices [](GLOSSARY.html)
    to [](GLOSSARY.html) satisfy [](GLOSSARY.html) modern [](GLOSSARY.html) requirements,
    such [](GLOSSARY.html) as [](GLOSSARY.html) the [](GLOSSARY.html) following:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 传统[MVC](GLOSSARY.html)作为讨论的出发点是很优秀的，但绝不必被认为是唯一正确的MVC实现方式。事实上，我们看到了在现代UI开发背景下，传统MVC已经过时。围绕基本MVC概念和术语构建了新的模式，但增加了额外的技巧、扩展和替代设计选择，以满足现代需求，例如以下内容：
- en: a [](GLOSSARY.html) modal [](GLOSSARY.html) dialog [](GLOSSARY.html) must [](GLOSSARY.html)
    allow [](GLOSSARY.html) changing [](GLOSSARY.html) values, but [](GLOSSARY.html)
    revert [](GLOSSARY.html) them [](GLOSSARY.html) when [](GLOSSARY.html) the [](GLOSSARY.html)
    Cancel button [](GLOSSARY.html) is [](GLOSSARY.html) pressed.
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模态对话框必须允许更改值，但在按下“取消”按钮时应将其恢复。
- en: a [](GLOSSARY.html) modeless [](GLOSSARY.html) dialog [](GLOSSARY.html) allows
    [](GLOSSARY.html) changing [](GLOSSARY.html) values [](GLOSSARY.html) while [](GLOSSARY.html)
    the [](GLOSSARY.html) change [](GLOSSARY.html) is [](GLOSSARY.html) visible [](GLOSSARY.html)
    in another [](GLOSSARY.html) window, but [](GLOSSARY.html) must [](GLOSSARY.html)
    be [](GLOSSARY.html) reverted [](GLOSSARY.html) if “Restore” is [](GLOSSARY.html)
    pressed.
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无模式对话框允许在另一个窗口中可见更改的同时更改值，但如果按下“恢复”则必须恢复。
- en: prevent [](GLOSSARY.html) typing [](GLOSSARY.html) of [](GLOSSARY.html) invalid
    [](GLOSSARY.html) values, for [](GLOSSARY.html) example [](GLOSSARY.html) a [](GLOSSARY.html)
    string [](GLOSSARY.html) in [](GLOSSARY.html) a [](GLOSSARY.html) line [](GLOSSARY.html)
    edit supposed [](GLOSSARY.html) to [](GLOSSARY.html) accept [](GLOSSARY.html)
    only [](GLOSSARY.html) digits [](GLOSSARY.html) will [](GLOSSARY.html) not [](GLOSSARY.html)
    accept [](GLOSSARY.html) any [](GLOSSARY.html) key [](GLOSSARY.html) presses [](GLOSSARY.html)
    from non-digits.
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止输入无效值，例如在应该只接受数字的行编辑中输入字符串将不接受来自非数字按键的任何按键。
- en: alternatively, allow [](GLOSSARY.html) invalid [](GLOSSARY.html) entries, but
    [](GLOSSARY.html) disable [](GLOSSARY.html) the [](GLOSSARY.html) Ok [](GLOSSARY.html)
    button [](GLOSSARY.html) and [](GLOSSARY.html) mark the [](GLOSSARY.html) incorrect
    [](GLOSSARY.html) value [](GLOSSARY.html) red.
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 或者，允许[](GLOSSARY.html)无效[](GLOSSARY.html)的[](GLOSSARY.html)条目，但[](GLOSSARY.html)禁用[](GLOSSARY.html)“确定”按钮，并[](GLOSSARY.html)将不正确的值标记为红色。
- en: and [](GLOSSARY.html) so [](GLOSSARY.html) on...
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 等等...
- en: As [](GLOSSARY.html) you [](GLOSSARY.html) can [](GLOSSARY.html) see, the [](GLOSSARY.html)
    complexity [](GLOSSARY.html) of [](GLOSSARY.html) an [](GLOSSARY.html) application
    [](GLOSSARY.html) made [](GLOSSARY.html) of [](GLOSSARY.html) hundreds [](GLOSSARY.html)
    of [](GLOSSARY.html) menus, text [](GLOSSARY.html) input [](GLOSSARY.html) areas
    [](GLOSSARY.html) and [](GLOSSARY.html) buttons, plus [](GLOSSARY.html) all [](GLOSSARY.html)
    the [](GLOSSARY.html) possible [](GLOSSARY.html) logical [](GLOSSARY.html) dependencies
    [](GLOSSARY.html) among them [](GLOSSARY.html) can [](GLOSSARY.html) grow [](GLOSSARY.html)
    considerably. Unexpected [](GLOSSARY.html) interactions [](GLOSSARY.html) and
    [](GLOSSARY.html) strange [](GLOSSARY.html) communication patterns [](GLOSSARY.html)
    emerge [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html) form [](GLOSSARY.html)
    of [](GLOSSARY.html) bugs [](GLOSSARY.html) or [](GLOSSARY.html) application [](GLOSSARY.html)
    freezes. Keeping [](GLOSSARY.html) this communication [](GLOSSARY.html) network
    [](GLOSSARY.html) well [](GLOSSARY.html) organized [](GLOSSARY.html) and [](GLOSSARY.html)
    confined [](GLOSSARY.html) by [](GLOSSARY.html) enforcing [](GLOSSARY.html) a
    [](GLOSSARY.html) structure [](GLOSSARY.html) is of [](GLOSSARY.html) paramount
    [](GLOSSARY.html) importance.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你所看到的，一个由数百个菜单、文本输入区和按钮组成的应用程序的复杂性以及它们之间所有可能的逻辑依赖关系可能会大大增加。意外的交互和奇怪的通信模式以错误或应用程序冻结的形式出现。通过强制执行结构来保持这种通信网络良好组织和限制是至关重要的。
- en: Additionally [](GLOSSARY.html) you [](GLOSSARY.html) might [](GLOSSARY.html)
    have [](GLOSSARY.html) to [](GLOSSARY.html) fight [](GLOSSARY.html) your [](GLOSSARY.html)
    toolkit [](GLOSSARY.html) because [](GLOSSARY.html) it [](GLOSSARY.html) prefers
    [](GLOSSARY.html) a [](GLOSSARY.html) specific implementation [](GLOSSARY.html)
    of [](GLOSSARY.html) MVC.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 另外，你可能不得不与你的工具包作斗争，因为它更倾向于MVC的特定实现。
- en: Design [](GLOSSARY.html) aims [](GLOSSARY.html) at [](GLOSSARY.html) managing
    [](GLOSSARY.html) complexity. The [](GLOSSARY.html) MVC [](GLOSSARY.html) details
    [](GLOSSARY.html) given [](GLOSSARY.html) in [](GLOSSARY.html) this [](GLOSSARY.html)
    book [](GLOSSARY.html) are guidelines, but [](GLOSSARY.html) need [](GLOSSARY.html)
    to [](GLOSSARY.html) consider [](GLOSSARY.html) the [](GLOSSARY.html) actual [](GLOSSARY.html)
    real [](GLOSSARY.html) problem [](GLOSSARY.html) at [](GLOSSARY.html) hand. Some
    flexibility [](GLOSSARY.html) is [](GLOSSARY.html) needed. Strict [](GLOSSARY.html)
    compliance [](GLOSSARY.html) generally [](GLOSSARY.html) produces [](GLOSSARY.html)
    a [](GLOSSARY.html) benefit, and [](GLOSSARY.html) has better [](GLOSSARY.html)
    communicative [](GLOSSARY.html) consistency [](GLOSSARY.html) within [](GLOSSARY.html)
    the [](GLOSSARY.html) development [](GLOSSARY.html) team, but [](GLOSSARY.html)
    may [](GLOSSARY.html) not [](GLOSSARY.html) scale up [](GLOSSARY.html) to [](GLOSSARY.html)
    specific [](GLOSSARY.html) cases. In [](GLOSSARY.html) that [](GLOSSARY.html)
    case, reconsider [](GLOSSARY.html) the [](GLOSSARY.html) design, or [](GLOSSARY.html)
    relax [](GLOSSARY.html) some constraints, but [](GLOSSARY.html) aim [](GLOSSARY.html)
    at [](GLOSSARY.html) keeping [](GLOSSARY.html) logic [](GLOSSARY.html) encapsulated
    [](GLOSSARY.html) and [](GLOSSARY.html) object [](GLOSSARY.html) interaction simple
    [](GLOSSARY.html) and [](GLOSSARY.html) straightforward.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 设计旨在管理复杂性。本书中提供的 MVC 细节是指导方针，但需要考虑手头的实际问题。需要一定的灵活性。严格遵守通常会产生好处，并且在开发团队内具有更好的沟通一致性，但可能无法扩展到特定情况。在那种情况下，重新考虑设计，或放宽一些约束，但要保持逻辑封装和对象交互简单和直接。
- en: In [](GLOSSARY.html) this [](GLOSSARY.html) chapter [](GLOSSARY.html) we [](GLOSSARY.html)
    will [](GLOSSARY.html) examine [](GLOSSARY.html) alternative [](GLOSSARY.html)
    design [](GLOSSARY.html) in [](GLOSSARY.html) MVC [](GLOSSARY.html) able [](GLOSSARY.html)
    to [](GLOSSARY.html) deal [](GLOSSARY.html) with more [](GLOSSARY.html) complex
    [](GLOSSARY.html) use-case [](GLOSSARY.html) scenarios, constrained [](GLOSSARY.html)
    by [](GLOSSARY.html) requirements, architectural needs [](GLOSSARY.html) or [](GLOSSARY.html)
    self-documentation [](GLOSSARY.html) purposes.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将研究 MVC 中能够处理更复杂用例场景的替代设计，受到需求、架构需求或自我文档化目的的限制。
- en: Variations on the Model
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 模型的变体
- en: Variations on the Model
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 模型的变体
- en: '[Compositing Model](compositing_model.html): Aggregate [](GLOSSARY.html) data
    [](GLOSSARY.html) from [](GLOSSARY.html) multiple [](GLOSSARY.html) Models, providing
    [](GLOSSARY.html) a [](GLOSSARY.html) single [](GLOSSARY.html) point [](GLOSSARY.html)
    of [](GLOSSARY.html) access [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    View.'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[合成模型](compositing_model.html)：从多个模型中汇总数据，提供对视图的单一访问点。'
- en: '[Model Pipe](model_pipe.html): Intercept, modify, and [](GLOSSARY.html) filter
    [](GLOSSARY.html) data [](GLOSSARY.html) flow [](GLOSSARY.html) between [](GLOSSARY.html)
    Model [](GLOSSARY.html) and [](GLOSSARY.html) View.'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[模型管道](model_pipe.html)：拦截、修改和过滤模型和视图之间的数据流。'
- en: '[Application Model](03_application_model.html): Holds [](GLOSSARY.html) visual
    [](GLOSSARY.html) state [](GLOSSARY.html) to [](GLOSSARY.html) complement [](GLOSSARY.html)
    business [](GLOSSARY.html) logic [](GLOSSARY.html) state.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[应用模型](03_application_model.html)：保存视觉状态以补充业务逻辑状态。'
- en: '[Side-by-Side application model](04_side_by_side_application_model.html): Holds
    [](GLOSSARY.html) complementary [](GLOSSARY.html) information [](GLOSSARY.html)
    to [](GLOSSARY.html) the [](GLOSSARY.html) current [](GLOSSARY.html) model.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[并排应用程序模型](04_side_by_side_application_model.html): 持有与当前模型互补的信息。'
- en: '[UI Retrieving Model](ui_retrieving_model.html): Model [](GLOSSARY.html) retrieves
    [](GLOSSARY.html) information [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html)
    User [](GLOSSARY.html) through [](GLOSSARY.html) UI [](GLOSSARY.html) elements.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[UI检索模型](ui_retrieving_model.html): 模型通过用户界面元素从用户那里检索信息。'
- en: '[ModelController](model_controller.html): Aggregates [](GLOSSARY.html) Model
    [](GLOSSARY.html) and [](GLOSSARY.html) Controller [](GLOSSARY.html) logic [](GLOSSARY.html)
    in [](GLOSSARY.html) a [](GLOSSARY.html) single [](GLOSSARY.html) object.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[模型控制器](model_controller.html): 将模型和控制器逻辑聚合在一个单一对象中。'
- en: '[Local Model](local_model.md): Preserve [](GLOSSARY.html) the [](GLOSSARY.html)
    original [](GLOSSARY.html) Model [](GLOSSARY.html) state [](GLOSSARY.html) so
    [](GLOSSARY.html) that [](GLOSSARY.html) changes [](GLOSSARY.html) can [](GLOSSARY.html)
    be [](GLOSSARY.html) reverted.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[本地模型](local_model.md): 保留原始模型状态，以便可以撤销更改。'
- en: '[Value Model](value_model.html): Trivialize [](GLOSSARY.html) complex [](GLOSSARY.html)
    Model [](GLOSSARY.html) interface [](GLOSSARY.html) to [](GLOSSARY.html) a [](GLOSSARY.html)
    simple, universal [](GLOSSARY.html) interface.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[值模型](value_model.html): 将复杂的模型接口简化为简单、通用的接口。'
- en: '[Proxy Model](proxy_model.html): Acts [](GLOSSARY.html) as [](GLOSSARY.html)
    proxy, hiding [](GLOSSARY.html) complexity [](GLOSSARY.html) to [](GLOSSARY.html)
    access [](GLOSSARY.html) resources [](GLOSSARY.html) from [](GLOSSARY.html) a
    [](GLOSSARY.html) backend.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[代理模型](proxy_model.html): 充当代理，隐藏访问后端资源的复杂性。'
- en: '[Collection Model](collection_model.html): Holds [](GLOSSARY.html) and [](GLOSSARY.html)
    aggregates [](GLOSSARY.html) Model [](GLOSSARY.html) objects [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) same [](GLOSSARY.html) type.'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[集合模型](collection_model.html): 持有相同类型的模型对象和聚合模型对象。'
- en: '[View-aware Model](view_aware_model.md): A [](GLOSSARY.html) model [](GLOSSARY.html)
    that [](GLOSSARY.html) knows [](GLOSSARY.html) its [](GLOSSARY.html) views [](GLOSSARY.html)
    interface [](GLOSSARY.html) beyond [](GLOSSARY.html) simple [](GLOSSARY.html)
    notification [](GLOSSARY.html) delivery.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[视图感知模型](view_aware_model.md): 一个了解其视图接口的模型，超出简单的通知传递。'
- en: '[Caching Model](caching_model.html): Holds [](GLOSSARY.html) data [](GLOSSARY.html)
    in [](GLOSSARY.html) local [](GLOSSARY.html) cache [](GLOSSARY.html) to [](GLOSSARY.html)
    mitigate [](GLOSSARY.html) slow [](GLOSSARY.html) access.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[缓存模型](caching_model.html): 在本地缓存中保存数据以减轻访问速度慢的问题。'
- en: '[Data/Metadata Model](data_metadata_model.html): Separate [](GLOSSARY.html)
    access [](GLOSSARY.html) to [](GLOSSARY.html) slow [](GLOSSARY.html) and [](GLOSSARY.html)
    bulky [](GLOSSARY.html) data [](GLOSSARY.html) vs. fast, lean [](GLOSSARY.html)
    and [](GLOSSARY.html) descriptive.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[数据/元数据模型](data_metadata_model.html): 将访问慢且庞大的数据与快速、简洁和描述性的数据分开。'
- en: '[Recording Model](recording_model.html): Record [](GLOSSARY.html) the [](GLOSSARY.html)
    changes [](GLOSSARY.html) for [](GLOSSARY.html) later [](GLOSSARY.html) consumption.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[记录模型](recording_model.html): 记录更改以供以后使用。'
- en: '[Transactional Setting](transactional_setting.html): Setting [](GLOSSARY.html)
    multiple [](GLOSSARY.html) attributes [](GLOSSARY.html) at [](GLOSSARY.html) once
    [](GLOSSARY.html) with [](GLOSSARY.html) late [](GLOSSARY.html) notification.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[事务设置](transactional_setting.html): 一次设置多个属性，并延迟通知。'
- en: Compositing Model
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 组合模型
- en: Compositing Model
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 合成模型
- en: Motivation
  id: totrans-31
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'A [](GLOSSARY.html) Compositing [](GLOSSARY.html) Model [](GLOSSARY.html) aggregates
    [](GLOSSARY.html) data [](GLOSSARY.html) from [](GLOSSARY.html) multiple [](GLOSSARY.html)
    Model [](GLOSSARY.html) objects [](GLOSSARY.html) so [](GLOSSARY.html) that [](GLOSSARY.html)
    the View [](GLOSSARY.html) has [](GLOSSARY.html) a [](GLOSSARY.html) single [](GLOSSARY.html)
    and [](GLOSSARY.html) uniform [](GLOSSARY.html) point [](GLOSSARY.html) of [](GLOSSARY.html)
    access [](GLOSSARY.html) for [](GLOSSARY.html) its [](GLOSSARY.html) data [](GLOSSARY.html)
    source. Two [](GLOSSARY.html) different [](GLOSSARY.html) sub-types [](GLOSSARY.html)
    of [](GLOSSARY.html) a [](GLOSSARY.html) Compositing [](GLOSSARY.html) Model [](GLOSSARY.html)
    exist, each [](GLOSSARY.html) addressing a [](GLOSSARY.html) different [](GLOSSARY.html)
    use [](GLOSSARY.html) cases:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 一个[GLOSSARY.html]合成[GLOSSARY.html]模型聚合来自多个模型对象的数据，使视图具有单一且统一的数据访问点。存在两种不同的[GLOSSARY.html]合成[GLOSSARY.html]模型子类型，每种都处理不同的用例：
- en: A **Union [](GLOSSARY.html) Compositing [](GLOSSARY.html) Model** performs [](GLOSSARY.html)
    union [](GLOSSARY.html) of [](GLOSSARY.html) homogeneous [](GLOSSARY.html) data
    [](GLOSSARY.html) originating from [](GLOSSARY.html) different [](GLOSSARY.html)
    sources. For [](GLOSSARY.html) example, a [](GLOSSARY.html) Union [](GLOSSARY.html)
    Model [](GLOSSARY.html) can [](GLOSSARY.html) present [](GLOSSARY.html) data [](GLOSSARY.html)
    from multiple [](GLOSSARY.html) files, each [](GLOSSARY.html) handled [](GLOSSARY.html)
    by [](GLOSSARY.html) a [](GLOSSARY.html) SubModel.
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个**联合[GLOSSARY.html]合成[GLOSSARY.html]模型**执行来自不同来源的同质数据的并集。例如，一个[GLOSSARY.html]联合[GLOSSARY.html]模型可以呈现来自多个文件的数据，每个文件由一个子模型处理。
- en: A **Join [](GLOSSARY.html) Compositing [](GLOSSARY.html) Model** extracts [](GLOSSARY.html)
    and [](GLOSSARY.html) combines [](GLOSSARY.html) relevant information [](GLOSSARY.html)
    from [](GLOSSARY.html) heterogeneous [](GLOSSARY.html) Models [](GLOSSARY.html)
    and [](GLOSSARY.html) provides [](GLOSSARY.html) a [](GLOSSARY.html) convenient
    interface [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) result.
    For [](GLOSSARY.html) example, a `CustomerHistory` Model [](GLOSSARY.html) could
    [](GLOSSARY.html) combine [](GLOSSARY.html) Models `Customers` and `Orders`, returning
    the [](GLOSSARY.html) combined [](GLOSSARY.html) information [](GLOSSARY.html)
    to [](GLOSSARY.html) the [](GLOSSARY.html) View.
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个**联合[GLOSSARY.html]合成[GLOSSARY.html]模型**从异构模型中提取和组合相关信息，并为结果提供方便的接口。例如，一个`CustomerHistory`模型可以组合`Customers`和`Orders`模型，将组合信息返回给视图。
- en: Design
  id: totrans-35
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: The [](GLOSSARY.html) Compositing [](GLOSSARY.html) Model [](GLOSSARY.html)
    acts [](GLOSSARY.html) both [](GLOSSARY.html) as [](GLOSSARY.html) listener [](GLOSSARY.html)
    and [](GLOSSARY.html) notifier. It [](GLOSSARY.html) holds [](GLOSSARY.html) references
    to [](GLOSSARY.html) its [](GLOSSARY.html) SubModels, and [](GLOSSARY.html) registers
    [](GLOSSARY.html) onto [](GLOSSARY.html) them [](GLOSSARY.html) as [](GLOSSARY.html)
    a [](GLOSSARY.html) listener. Its [](GLOSSARY.html) life [](GLOSSARY.html) cycle
    [](GLOSSARY.html) can [](GLOSSARY.html) be temporary [](GLOSSARY.html) and [](GLOSSARY.html)
    disjoint [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) life [](GLOSSARY.html)
    cycle [](GLOSSARY.html) of [](GLOSSARY.html) its [](GLOSSARY.html) SubModels.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '[GLOSSARY.html]合成[GLOSSARY.html]模型既充当监听器又充当通知者。它持有对其子模型的引用，并将自己注册为它们的监听器。它的生命周期可以是临时的，并且与其子模型的生命周期不一致。'
- en: '![](compositing_model_design.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](compositing_model_design.png)'
- en: Notifications [](GLOSSARY.html) from [](GLOSSARY.html) individual [](GLOSSARY.html)
    SubModels [](GLOSSARY.html) are [](GLOSSARY.html) received [](GLOSSARY.html) and
    [](GLOSSARY.html) re-issued [](GLOSSARY.html) by [](GLOSSARY.html) the Compositing
    [](GLOSSARY.html) Model [](GLOSSARY.html) to [](GLOSSARY.html) notify [](GLOSSARY.html)
    the [](GLOSSARY.html) View. Vice-versa, data [](GLOSSARY.html) requests [](GLOSSARY.html)
    issued [](GLOSSARY.html) by the [](GLOSSARY.html) View [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) Compositing [](GLOSSARY.html) Model [](GLOSSARY.html) are
    [](GLOSSARY.html) routed [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    appropriate [](GLOSSARY.html) SubModel.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 个别子模型的通知由合成模型接收并重新发出以通知视图。反之，视图对合成模型发出的数据请求被路由到适当的子模型。
- en: '![](compositing_model_view_interaction.png)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![](compositing_model_view_interaction.png)'
- en: 'By [](GLOSSARY.html) its [](GLOSSARY.html) very [](GLOSSARY.html) nature, the
    [](GLOSSARY.html) Compositing [](GLOSSARY.html) Model [](GLOSSARY.html) is [](GLOSSARY.html)
    expected [](GLOSSARY.html) to [](GLOSSARY.html) be [](GLOSSARY.html) the [](GLOSSARY.html)
    only [](GLOSSARY.html) endpoint for [](GLOSSARY.html) a [](GLOSSARY.html) specific
    [](GLOSSARY.html) View, at [](GLOSSARY.html) least [](GLOSSARY.html) for [](GLOSSARY.html)
    data [](GLOSSARY.html) retrieval. The [](GLOSSARY.html) Controller, on [](GLOSSARY.html)
    the [](GLOSSARY.html) other [](GLOSSARY.html) hand, can [](GLOSSARY.html) either:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 由于其本质，合成模型被期望成为特定视图的唯一终点，至少对于数据检索而言。另一方面，控制器可以：
- en: issue [](GLOSSARY.html) change [](GLOSSARY.html) requests [](GLOSSARY.html)
    on [](GLOSSARY.html) the [](GLOSSARY.html) Compositing [](GLOSSARY.html) Model,
    which [](GLOSSARY.html) in [](GLOSSARY.html) turns [](GLOSSARY.html) forwards
    [](GLOSSARY.html) the change [](GLOSSARY.html) request [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) appropriate [](GLOSSARY.html) SubModel [](GLOSSARY.html)
    according [](GLOSSARY.html) to [](GLOSSARY.html) some [](GLOSSARY.html) criteria.
    The [](GLOSSARY.html) Compositing [](GLOSSARY.html) Model [](GLOSSARY.html) is
    [](GLOSSARY.html) therefore [](GLOSSARY.html) acting [](GLOSSARY.html) as [](GLOSSARY.html)
    a [](GLOSSARY.html) surrogate [](GLOSSARY.html) Controller
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在合成模型上发出更改请求，然后合成模型将根据某些标准将更改请求转发给适当的子模型。因此，合成模型实际上充当代理控制器。
- en: issue [](GLOSSARY.html) change [](GLOSSARY.html) requests [](GLOSSARY.html)
    directly [](GLOSSARY.html) on [](GLOSSARY.html) any [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) Submodels. The [](GLOSSARY.html) SubModel [](GLOSSARY.html)
    will [](GLOSSARY.html) then [](GLOSSARY.html) issue the [](GLOSSARY.html) notification,
    which [](GLOSSARY.html) is [](GLOSSARY.html) forwarded [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) View [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html)
    Compositing [](GLOSSARY.html) Model.
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在任何子模型上直接发出更改请求。然后子模型将发出通知，该通知由合成模型转发给视图。
- en: It [](GLOSSARY.html) is [](GLOSSARY.html) worth [](GLOSSARY.html) pointing [](GLOSSARY.html)
    out [](GLOSSARY.html) that [](GLOSSARY.html) nothing [](GLOSSARY.html) prevents
    [](GLOSSARY.html) other [](GLOSSARY.html) Views (or [](GLOSSARY.html) Controllers)
    to interact [](GLOSSARY.html) directly [](GLOSSARY.html) with [](GLOSSARY.html)
    any [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) SubModels.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 值得指出的是，没有什么阻止其他视图（或控制器）直接与任何子模型互动。
- en: The [](GLOSSARY.html) above [](GLOSSARY.html) design [](GLOSSARY.html) considerations
    [](GLOSSARY.html) are [](GLOSSARY.html) common [](GLOSSARY.html) between [](GLOSSARY.html)
    the [](GLOSSARY.html) Union [](GLOSSARY.html) and [](GLOSSARY.html) the [](GLOSSARY.html)
    Join [](GLOSSARY.html) Compositing Models. The [](GLOSSARY.html) most [](GLOSSARY.html)
    substantial [](GLOSSARY.html) difference [](GLOSSARY.html) between [](GLOSSARY.html)
    them [](GLOSSARY.html) is [](GLOSSARY.html) in [](GLOSSARY.html) their [](GLOSSARY.html)
    interface. Union [](GLOSSARY.html) Models [](GLOSSARY.html) generally [](GLOSSARY.html)
    have [](GLOSSARY.html) the [](GLOSSARY.html) same [](GLOSSARY.html) interface
    [](GLOSSARY.html) as [](GLOSSARY.html) their [](GLOSSARY.html) SubModels, and
    [](GLOSSARY.html) Views can [](GLOSSARY.html) display [](GLOSSARY.html) either
    [](GLOSSARY.html) of [](GLOSSARY.html) them [](GLOSSARY.html) transparently. Join
    [](GLOSSARY.html) Models, on [](GLOSSARY.html) the [](GLOSSARY.html) other [](GLOSSARY.html)
    hand, likely [](GLOSSARY.html) provide [](GLOSSARY.html) a [](GLOSSARY.html) different
    [](GLOSSARY.html) interface [](GLOSSARY.html) to [](GLOSSARY.html) derived [](GLOSSARY.html)
    data, and [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html) is [](GLOSSARY.html)
    designed to [](GLOSSARY.html) target [](GLOSSARY.html) only [](GLOSSARY.html)
    this [](GLOSSARY.html) interface.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 上述设计考虑在联合和连接合成模型之间是共同的。它们之间最重要的区别在于它们的接口。联合模型通常具有与其子模型相同的接口，视图可以透明地显示其中任何一个。另一方面，连接模型可能为派生数据提供不同的接口，视图设计为仅针对这个接口。
- en: Practical example
  id: totrans-45
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际示例
- en: 'A [](GLOSSARY.html) practical [](GLOSSARY.html) example [](GLOSSARY.html) of
    [](GLOSSARY.html) the [](GLOSSARY.html) Union [](GLOSSARY.html) Compositing [](GLOSSARY.html)
    Model [](GLOSSARY.html) for [](GLOSSARY.html) an [](GLOSSARY.html) AddressBook
    [](GLOSSARY.html) application is [](GLOSSARY.html) here [](GLOSSARY.html) presented.
    The `AddressBook` class [](GLOSSARY.html) aggregates [](GLOSSARY.html) a [](GLOSSARY.html)
    list [](GLOSSARY.html) of [](GLOSSARY.html) SubModels, each [](GLOSSARY.html)
    extracting [](GLOSSARY.html) data [](GLOSSARY.html) from [](GLOSSARY.html) a [](GLOSSARY.html)
    different [](GLOSSARY.html) file [](GLOSSARY.html) source:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 一个地址簿应用程序的联合合成模型的实际示例在这里呈现。`AddressBook`类聚合了一个子模型列表，每个子模型从不同的文件源提取数据：
- en: '[PRE0]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: A [](GLOSSARY.html) naive [](GLOSSARY.html) implementation [](GLOSSARY.html)
    for `AddressBookCSV` is [](GLOSSARY.html) here [](GLOSSARY.html) shown [](GLOSSARY.html)
    to [](GLOSSARY.html) illustrate [](GLOSSARY.html) its interface. The [](GLOSSARY.html)
    common [](GLOSSARY.html) base [](GLOSSARY.html) class `Model` provides [](GLOSSARY.html)
    notification [](GLOSSARY.html) services by [](GLOSSARY.html) implementing `register`,
    `unregister`, `notify_listeners`, and [](GLOSSARY.html) the listeners [](GLOSSARY.html)
    set
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '`AddressBookCSV`的一个天真实现在这里展示，以说明其接口。共同的基类`Model`通过实现`register`、`unregister`、`notify_listeners`和监听器集合提供通知服务'
- en: '[PRE1]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The `AddressBook` class [](GLOSSARY.html) is [](GLOSSARY.html) a [](GLOSSARY.html)
    Union [](GLOSSARY.html) Compositing [](GLOSSARY.html) Model [](GLOSSARY.html)
    implementing [](GLOSSARY.html) the [](GLOSSARY.html) same [](GLOSSARY.html) interface
    of [](GLOSSARY.html) the [](GLOSSARY.html) SubModels
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '`AddressBook`类[](GLOSSARY.html)是一个联合组合模型，实现了相同接口的SubModels'
- en: '[PRE2]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The [](GLOSSARY.html) class [](GLOSSARY.html) accepts [](GLOSSARY.html) an
    [](GLOSSARY.html) arbitrary [](GLOSSARY.html) number [](GLOSSARY.html) of [](GLOSSARY.html)
    SubModels [](GLOSSARY.html) at [](GLOSSARY.html) initialization, and registers
    [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html) listener [](GLOSSARY.html)
    on [](GLOSSARY.html) each [](GLOSSARY.html) of [](GLOSSARY.html) them. It [](GLOSSARY.html)
    implements [](GLOSSARY.html) the [](GLOSSARY.html) same [](GLOSSARY.html) interface,
    retrieving [](GLOSSARY.html) data [](GLOSSARY.html) from [](GLOSSARY.html) the
    [](GLOSSARY.html) SubModels: the [](GLOSSARY.html) number [](GLOSSARY.html) of
    [](GLOSSARY.html) entries [](GLOSSARY.html) is [](GLOSSARY.html) the [](GLOSSARY.html)
    sum [](GLOSSARY.html) of [](GLOSSARY.html) the SubModel [](GLOSSARY.html) entries,
    and [](GLOSSARY.html) the `get_entry` method [](GLOSSARY.html) returns [](GLOSSARY.html)
    the [](GLOSSARY.html) entry [](GLOSSARY.html) from [](GLOSSARY.html) the appropriate
    [](GLOSSARY.html) SubModel. `append_entry` is [](GLOSSARY.html) used [](GLOSSARY.html)
    to [](GLOSSARY.html) add [](GLOSSARY.html) a [](GLOSSARY.html) new [](GLOSSARY.html)
    entry [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) models. In
    [](GLOSSARY.html) this [](GLOSSARY.html) case, the [](GLOSSARY.html) new [](GLOSSARY.html)
    entry [](GLOSSARY.html) is [](GLOSSARY.html) added [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) last [](GLOSSARY.html) SubModel. Note [](GLOSSARY.html)
    how [](GLOSSARY.html) the issuing [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    notification [](GLOSSARY.html) is [](GLOSSARY.html) left [](GLOSSARY.html) to
    [](GLOSSARY.html) the [](GLOSSARY.html) SubModel. The [](GLOSSARY.html) notification
    [](GLOSSARY.html) from [](GLOSSARY.html) the SubModel [](GLOSSARY.html) is [](GLOSSARY.html)
    then [](GLOSSARY.html) forwarded [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html)
    Compositing [](GLOSSARY.html) Model [](GLOSSARY.html) it [](GLOSSARY.html) to
    [](GLOSSARY.html) its [](GLOSSARY.html) listeners.'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 该类在初始化时接受任意数量的SubModels，并在每个SubModel上注册为监听器。它实现了相同的接口，从SubModels检索数据：条目数是SubModel条目的总和，`get_entry`方法从适当的SubModel返回条目。`append_entry`用于向模型添加新条目。在这种情况下，新条目被添加到最后一个SubModel。注意通知的发出由SubModel处理。然后，Compositing
    Model将来自SubModel的通知转发给其监听器。
- en: Model Pipe
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 模型管道
- en: Model Pipe
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 模型管道
- en: Motivation
  id: totrans-55
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'The **Model [](GLOSSARY.html) Pipe** is [](GLOSSARY.html) a [](GLOSSARY.html)
    variation [](GLOSSARY.html) similar [](GLOSSARY.html) in [](GLOSSARY.html) concept
    [](GLOSSARY.html) to [](GLOSSARY.html) a [](GLOSSARY.html) UNIX [](GLOSSARY.html)
    pipe: it intercepts [](GLOSSARY.html) and [](GLOSSARY.html) manipulates [](GLOSSARY.html)
    the [](GLOSSARY.html) data [](GLOSSARY.html) flowing [](GLOSSARY.html) from [](GLOSSARY.html)
    Model [](GLOSSARY.html) to [](GLOSSARY.html) View. Like [](GLOSSARY.html) in [](GLOSSARY.html)
    a [](GLOSSARY.html) UNIX pipe, Model [](GLOSSARY.html) Pipes [](GLOSSARY.html)
    with [](GLOSSARY.html) different [](GLOSSARY.html) manipulation [](GLOSSARY.html)
    logic [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html) chained [](GLOSSARY.html)
    together [](GLOSSARY.html) to perform [](GLOSSARY.html) sequential [](GLOSSARY.html)
    alteration [](GLOSSARY.html) of [](GLOSSARY.html) data. Typical [](GLOSSARY.html)
    application [](GLOSSARY.html) of [](GLOSSARY.html) Model [](GLOSSARY.html) Pipe
    [](GLOSSARY.html) are for [](GLOSSARY.html) filtering [](GLOSSARY.html) and [](GLOSSARY.html)
    sorting.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '**模型管道**是类似于UNIX管道概念的变体：它拦截并操纵从模型流向视图的数据。就像在UNIX管道中一样，具有不同操纵逻辑的模型管道可以链接在一起以执行数据的顺序更改。模型管道的典型应用是用于过滤和排序。'
- en: Design
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: The [](GLOSSARY.html) Model [](GLOSSARY.html) Pipe [](GLOSSARY.html) encapsulates
    [](GLOSSARY.html) data [](GLOSSARY.html) transformation [](GLOSSARY.html) logic
    [](GLOSSARY.html) in [](GLOSSARY.html) a [](GLOSSARY.html) dedicated, reusable
    [](GLOSSARY.html) class. Different [](GLOSSARY.html) Pipe [](GLOSSARY.html) classes
    [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html) created, each with
    [](GLOSSARY.html) specific [](GLOSSARY.html) capabilities.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 模型管道封装了数据转换逻辑在一个专用的、可重用的类中。可以创建不同的管道类，每个具有特定的功能。
- en: '![](model_pipe_design.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![](model_pipe_design.png)'
- en: To [](GLOSSARY.html) be [](GLOSSARY.html) compatible [](GLOSSARY.html) with
    [](GLOSSARY.html) the [](GLOSSARY.html) View, a [](GLOSSARY.html) Model [](GLOSSARY.html)
    Pipe [](GLOSSARY.html) implements [](GLOSSARY.html) the [](GLOSSARY.html) same
    [](GLOSSARY.html) interface of [](GLOSSARY.html) the [](GLOSSARY.html) SubModel,
    eventually [](GLOSSARY.html) extending [](GLOSSARY.html) it [](GLOSSARY.html)
    to [](GLOSSARY.html) provide [](GLOSSARY.html) access [](GLOSSARY.html) to [](GLOSSARY.html)
    additional [](GLOSSARY.html) state it [](GLOSSARY.html) might [](GLOSSARY.html)
    contain. For [](GLOSSARY.html) example, a [](GLOSSARY.html) filtering [](GLOSSARY.html)
    Model [](GLOSSARY.html) Pipe [](GLOSSARY.html) will [](GLOSSARY.html) host [](GLOSSARY.html)
    data [](GLOSSARY.html) about [](GLOSSARY.html) the current [](GLOSSARY.html) filter
    [](GLOSSARY.html) string. Controllers [](GLOSSARY.html) acting [](GLOSSARY.html)
    on [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) Pipe [](GLOSSARY.html)
    act [](GLOSSARY.html) on [](GLOSSARY.html) this [](GLOSSARY.html) state.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 为了与视图兼容，模型管道实现了与子模型相同的接口，最终扩展它以提供对可能包含的额外状态的访问。例如，过滤模型管道将承载关于当前过滤字符串的数据。对模型管道进行操作的控制器将对这种状态进行操作。
- en: The [](GLOSSARY.html) Model [](GLOSSARY.html) Pipe [](GLOSSARY.html) is [](GLOSSARY.html)
    a [](GLOSSARY.html) listener [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    SubModel [](GLOSSARY.html) and [](GLOSSARY.html) forwards [](GLOSSARY.html) its
    [](GLOSSARY.html) events. In addition, it [](GLOSSARY.html) performs [](GLOSSARY.html)
    notification [](GLOSSARY.html) when [](GLOSSARY.html) its [](GLOSSARY.html) internal
    [](GLOSSARY.html) state [](GLOSSARY.html) changes [](GLOSSARY.html) in [](GLOSSARY.html)
    a [](GLOSSARY.html) way that [](GLOSSARY.html) modifies [](GLOSSARY.html) the
    [](GLOSSARY.html) resulting [](GLOSSARY.html) data.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 管道模型是子模型的监听器，并转发其事件。此外，当其内部状态以修改生成的数据的方式发生变化时，它会执行通知。
- en: '![](model_pipe.png)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![](model_pipe.png)'
- en: while [](GLOSSARY.html) the [](GLOSSARY.html) manipulation [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) SubModel's [](GLOSSARY.html) data [](GLOSSARY.html)
    is [](GLOSSARY.html) performed [](GLOSSARY.html) directly [](GLOSSARY.html) on
    [](GLOSSARY.html) the SubModel [](GLOSSARY.html) itself.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 而对子模型数据的操作是直接在子模型本身上执行的。
- en: 'Practical Example: Qt QSortFilterProxyModel'
  id: totrans-64
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际示例：Qt QSortFilterProxyModel
- en: 'Qt [](GLOSSARY.html) provides [](GLOSSARY.html) a [](GLOSSARY.html) Pipe [](GLOSSARY.html)
    Model [](GLOSSARY.html) with [](GLOSSARY.html) sorting [](GLOSSARY.html) and [](GLOSSARY.html)
    filtering [](GLOSSARY.html) functionality: `QSortFilterProxyModel`. It [](GLOSSARY.html)
    is [](GLOSSARY.html) worth [](GLOSSARY.html) noting [](GLOSSARY.html) that [](GLOSSARY.html)
    Qt [](GLOSSARY.html) calls [](GLOSSARY.html) this [](GLOSSARY.html) Model "Proxy
    Model", but [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html) context
    [](GLOSSARY.html) of [](GLOSSARY.html) this [](GLOSSARY.html) book, Proxy [](GLOSSARY.html)
    Model [](GLOSSARY.html) refers [](GLOSSARY.html) to [](GLOSSARY.html) a [](GLOSSARY.html)
    different Model [](GLOSSARY.html) design.'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: Qt提供了带有排序和过滤功能的管道模型：`QSortFilterProxyModel`。 值得注意的是，Qt将此模型称为“代理模型”，但在本书的上下文中，代理模型指的是不同的模型设计。
- en: The [](GLOSSARY.html) following [](GLOSSARY.html) code [](GLOSSARY.html) sets
    [](GLOSSARY.html) up [](GLOSSARY.html) a [](GLOSSARY.html) Pipe [](GLOSSARY.html)
    Model [](GLOSSARY.html) connection [](GLOSSARY.html) between `MyModel` (our implementation
    [](GLOSSARY.html) of `QAbstractItemModel`) and [](GLOSSARY.html) a [](GLOSSARY.html)
    Tree [](GLOSSARY.html) View. The [](GLOSSARY.html) Tree [](GLOSSARY.html) View
    observes [](GLOSSARY.html) the [](GLOSSARY.html) Pipe [](GLOSSARY.html) Model,
    which [](GLOSSARY.html) in [](GLOSSARY.html) turns [](GLOSSARY.html) uses `MyModel`
    as [](GLOSSARY.html) a [](GLOSSARY.html) data [](GLOSSARY.html) source.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码设置了`MyModel`（我们对`QAbstractItemModel`的实现）和树视图之间的管道模型连接。树视图观察管道模型，而管道模型又将`MyModel`用作数据源。
- en: '[PRE3]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The [](GLOSSARY.html) Model [](GLOSSARY.html) Pipe [](GLOSSARY.html) provides
    [](GLOSSARY.html) an [](GLOSSARY.html) appropriate [](GLOSSARY.html) interface
    [](GLOSSARY.html) to [](GLOSSARY.html) configure [](GLOSSARY.html) the [](GLOSSARY.html)
    filter, such [](GLOSSARY.html) as `setFilterRegExp`, and [](GLOSSARY.html) mapping
    [](GLOSSARY.html) routines `mapToSource()` and `mapFromSource()` to [](GLOSSARY.html)
    convert [](GLOSSARY.html) between [](GLOSSARY.html) index [](GLOSSARY.html) of
    [](GLOSSARY.html) an [](GLOSSARY.html) Item [](GLOSSARY.html) in [](GLOSSARY.html)
    the [](GLOSSARY.html) Model [](GLOSSARY.html) and [](GLOSSARY.html) index [](GLOSSARY.html)
    of [](GLOSSARY.html) that [](GLOSSARY.html) Item in [](GLOSSARY.html) the [](GLOSSARY.html)
    View.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 模型管道提供了一个适当的接口来配置过滤器，例如`setFilterRegExp`，以及映射例程`mapToSource()`和`mapFromSource()`来在模型中的项的索引和视图中的该项的索引之间进行转换。
- en: Note [](GLOSSARY.html) how [](GLOSSARY.html) the `tree_view.setModel()` accepts
    [](GLOSSARY.html) a `QAbstractItemModel`, which [](GLOSSARY.html) is implemented
    [](GLOSSARY.html) by [](GLOSSARY.html) both `MyModel` and [](GLOSSARY.html) by
    `QSortFilterProxyModel`. As [](GLOSSARY.html) explained earlier, this [](GLOSSARY.html)
    design [](GLOSSARY.html) allows [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html)
    to [](GLOSSARY.html) accept [](GLOSSARY.html) either [](GLOSSARY.html) Model,
    and [](GLOSSARY.html) remain [](GLOSSARY.html) unaware of [](GLOSSARY.html) the
    [](GLOSSARY.html) existence [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    pipeline.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 注意`tree_view.setModel()`如何接受`QAbstractItemModel`，这由`MyModel`和`QSortFilterProxyModel`都实现。如前所述，这种设计允许视图接受任一模型，并且保持对管道存在的无知。
- en: Application Model
  id: totrans-70
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 应用程序模型
- en: Application Model (MMVC)
  id: totrans-71
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 应用程序模型（MMVC）
- en: Motivation
  id: totrans-72
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'In [](GLOSSARY.html) Traditional [](GLOSSARY.html) MVC [](GLOSSARY.html) we
    [](GLOSSARY.html) pointed [](GLOSSARY.html) out [](GLOSSARY.html) that [](GLOSSARY.html)
    a [](GLOSSARY.html) Model [](GLOSSARY.html) object [](GLOSSARY.html) should [](GLOSSARY.html)
    not [](GLOSSARY.html) contain [](GLOSSARY.html) GUI state. In [](GLOSSARY.html)
    practice, some [](GLOSSARY.html) applications [](GLOSSARY.html) need [](GLOSSARY.html)
    to [](GLOSSARY.html) preserve [](GLOSSARY.html) and [](GLOSSARY.html) manage [](GLOSSARY.html)
    state [](GLOSSARY.html) that [](GLOSSARY.html) is only [](GLOSSARY.html) relevant
    [](GLOSSARY.html) for [](GLOSSARY.html) visualization. Traditional [](GLOSSARY.html)
    MVC [](GLOSSARY.html) has [](GLOSSARY.html) no [](GLOSSARY.html) place [](GLOSSARY.html)
    for [](GLOSSARY.html) it, but [](GLOSSARY.html) we can [](GLOSSARY.html) satisfy
    [](GLOSSARY.html) this [](GLOSSARY.html) need [](GLOSSARY.html) with [](GLOSSARY.html)
    a [](GLOSSARY.html) specialized [](GLOSSARY.html) Compositing [](GLOSSARY.html)
    Model: the **Application Model**, also [](GLOSSARY.html) known [](GLOSSARY.html)
    as [](GLOSSARY.html) Presentation [](GLOSSARY.html) Model. Its [](GLOSSARY.html)
    submodel, called **Domain [](GLOSSARY.html) Model**, will [](GLOSSARY.html) be
    [](GLOSSARY.html) kept [](GLOSSARY.html) unaware [](GLOSSARY.html) of [](GLOSSARY.html)
    such [](GLOSSARY.html) state.'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 在传统MVC中，我们指出Model对象不应包含GUI状态。在实践中，一些应用程序需要保留和管理仅与可视化相关的状态。传统MVC无法容纳它，但我们可以用专门的组合模型来满足这种需求：**应用程序模型**，也称为**演示模型**。其子模型，称为**域模型**，将对此类状态保持不知情。
- en: 'An [](GLOSSARY.html) Application [](GLOSSARY.html) Model [](GLOSSARY.html)
    is [](GLOSSARY.html) closer [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    View [](GLOSSARY.html) than [](GLOSSARY.html) a [](GLOSSARY.html) Domain [](GLOSSARY.html)
    Model, and [](GLOSSARY.html) therefore able [](GLOSSARY.html) to [](GLOSSARY.html)
    take [](GLOSSARY.html) into [](GLOSSARY.html) account [](GLOSSARY.html) specific
    [](GLOSSARY.html) needs [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    View [](GLOSSARY.html) it [](GLOSSARY.html) is [](GLOSSARY.html) addressing: in
    [](GLOSSARY.html) a scrollable [](GLOSSARY.html) area, where [](GLOSSARY.html)
    only [](GLOSSARY.html) a [](GLOSSARY.html) part [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) overall [](GLOSSARY.html) Model [](GLOSSARY.html) is [](GLOSSARY.html)
    visible [](GLOSSARY.html) it [](GLOSSARY.html) can [](GLOSSARY.html) hold information
    [](GLOSSARY.html) about [](GLOSSARY.html) the [](GLOSSARY.html) currently [](GLOSSARY.html)
    visible [](GLOSSARY.html) portion [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    Domain [](GLOSSARY.html) Model, and suppress [](GLOSSARY.html) those [](GLOSSARY.html)
    notifications [](GLOSSARY.html) reporting [](GLOSSARY.html) changes [](GLOSSARY.html)
    in [](GLOSSARY.html) data [](GLOSSARY.html) currently [](GLOSSARY.html) not [](GLOSSARY.html)
    visible, preventing [](GLOSSARY.html) a [](GLOSSARY.html) useless [](GLOSSARY.html)
    refresh. It [](GLOSSARY.html) can [](GLOSSARY.html) also [](GLOSSARY.html) be
    [](GLOSSARY.html) used [](GLOSSARY.html) to [](GLOSSARY.html) distill [](GLOSSARY.html)
    information [](GLOSSARY.html) from multiple [](GLOSSARY.html) Domain [](GLOSSARY.html)
    Models, producing [](GLOSSARY.html) something [](GLOSSARY.html) that [](GLOSSARY.html)
    is [](GLOSSARY.html) relevant [](GLOSSARY.html) for [](GLOSSARY.html) its [](GLOSSARY.html)
    View. For example, our [](GLOSSARY.html) Domain [](GLOSSARY.html) Model [](GLOSSARY.html)
    may [](GLOSSARY.html) be [](GLOSSARY.html) made [](GLOSSARY.html) of [](GLOSSARY.html)
    objects [](GLOSSARY.html) representing [](GLOSSARY.html) the [](GLOSSARY.html)
    employees [](GLOSSARY.html) in a [](GLOSSARY.html) company, company [](GLOSSARY.html)
    departments [](GLOSSARY.html) and [](GLOSSARY.html) so [](GLOSSARY.html) on, in
    [](GLOSSARY.html) a [](GLOSSARY.html) rather [](GLOSSARY.html) elaborate [](GLOSSARY.html)
    network. If [](GLOSSARY.html) the View [](GLOSSARY.html) wants [](GLOSSARY.html)
    to [](GLOSSARY.html) display [](GLOSSARY.html) a [](GLOSSARY.html) list [](GLOSSARY.html)
    of [](GLOSSARY.html) employees [](GLOSSARY.html) regardless [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) department, maybe with [](GLOSSARY.html)
    a [](GLOSSARY.html) checkbox [](GLOSSARY.html) to [](GLOSSARY.html) select [](GLOSSARY.html)
    them [](GLOSSARY.html) for [](GLOSSARY.html) further [](GLOSSARY.html) processing,
    it [](GLOSSARY.html) is [](GLOSSARY.html) convenient [](GLOSSARY.html) to [](GLOSSARY.html)
    have an [](GLOSSARY.html) Application [](GLOSSARY.html) Model [](GLOSSARY.html)
    presenting [](GLOSSARY.html) data [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    View [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html) list, gathering
    [](GLOSSARY.html) the details [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html)
    Domain [](GLOSSARY.html) Model [](GLOSSARY.html) objects (non-graphical [](GLOSSARY.html)
    information) while [](GLOSSARY.html) at [](GLOSSARY.html) the same [](GLOSSARY.html)
    time [](GLOSSARY.html) keeping [](GLOSSARY.html) track [](GLOSSARY.html) and [](GLOSSARY.html)
    presenting [](GLOSSARY.html) the [](GLOSSARY.html) checkbox [](GLOSSARY.html)
    state [](GLOSSARY.html) as [](GLOSSARY.html) well (graphical information). As
    [](GLOSSARY.html) a [](GLOSSARY.html) drawback, it [](GLOSSARY.html) is [](GLOSSARY.html)
    much [](GLOSSARY.html) less [](GLOSSARY.html) reusable: multiple [](GLOSSARY.html)
    Views [](GLOSSARY.html) can interact [](GLOSSARY.html) with [](GLOSSARY.html)
    the [](GLOSSARY.html) same [](GLOSSARY.html) Application [](GLOSSARY.html) Model
    [](GLOSSARY.html) only [](GLOSSARY.html) if [](GLOSSARY.html) they [](GLOSSARY.html)
    agree [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) visual [](GLOSSARY.html)
    state representation (e.g. we [](GLOSSARY.html) want [](GLOSSARY.html) both [](GLOSSARY.html)
    the [](GLOSSARY.html) Dial [](GLOSSARY.html) and [](GLOSSARY.html) the [](GLOSSARY.html)
    Slider [](GLOSSARY.html) red [](GLOSSARY.html) when [](GLOSSARY.html) over [](GLOSSARY.html)
    the [](GLOSSARY.html) rpm limit).'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 一个[应用模型](GLOSSARY.html)比[领域模型](GLOSSARY.html)更接近[视图](GLOSSARY.html)，因此能够考虑到它所针对的视图的特定需求：在可滚动的区域中，只有整体模型的一部分可见，它可以保存关于当前可见部分的领域模型的信息，并抑制那些不可见数据的变化通知，以防止无用的刷新。它还可以用于从多个领域模型中提取信息，生成对其视图相关的内容。例如，我们的领域模型可以由代表公司员工、公司部门等对象组成，形成一个相当复杂的网络。如果视图想要显示员工列表，而不管部门如何，也许还带有一个复选框用于选择它们进行进一步处理，那么将数据呈现给视图的应用模型作为列表是很方便的，它可以从领域模型对象（非图形信息）中收集详情，同时跟踪并展示复选框的状态（图形信息）。作为一个缺点，它的可重用性要低得多：只有当多个视图对视觉状态表示达成一致时（例如，当超过转速限制时，我们希望转速表和滑块都变红），多个视图才能与同一个应用模型进行交互。
- en: 'Some [](GLOSSARY.html) implementations [](GLOSSARY.html) of [](GLOSSARY.html)
    Application [](GLOSSARY.html) Model [](GLOSSARY.html) push [](GLOSSARY.html) its
    [](GLOSSARY.html) responsibilities [](GLOSSARY.html) even [](GLOSSARY.html) further
    than [](GLOSSARY.html) purely [](GLOSSARY.html) GUI [](GLOSSARY.html) state: it
    [](GLOSSARY.html) is, quite [](GLOSSARY.html) literally, the [](GLOSSARY.html)
    model [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) application,
    and [](GLOSSARY.html) it is [](GLOSSARY.html) responsible [](GLOSSARY.html) for
    [](GLOSSARY.html) modifying [](GLOSSARY.html) application [](GLOSSARY.html) state
    [](GLOSSARY.html) directly [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html)
    application [](GLOSSARY.html) itself. For [](GLOSSARY.html) example, it [](GLOSSARY.html)
    might [](GLOSSARY.html) enable/disable [](GLOSSARY.html) menus, show [](GLOSSARY.html)
    or [](GLOSSARY.html) hide [](GLOSSARY.html) widgets, validation of [](GLOSSARY.html)
    the [](GLOSSARY.html) events. Most [](GLOSSARY.html) of [](GLOSSARY.html) the
    [](GLOSSARY.html) visual [](GLOSSARY.html) logic [](GLOSSARY.html) will [](GLOSSARY.html)
    be [](GLOSSARY.html) responsibility [](GLOSSARY.html) of [](GLOSSARY.html) this
    [](GLOSSARY.html) model object, rather [](GLOSSARY.html) than [](GLOSSARY.html)
    the [](GLOSSARY.html) controllers. This [](GLOSSARY.html) interpretation [](GLOSSARY.html)
    has [](GLOSSARY.html) deep [](GLOSSARY.html) implications for [](GLOSSARY.html)
    the [](GLOSSARY.html) Dolphin [](GLOSSARY.html) Model [](GLOSSARY.html) View [](GLOSSARY.html)
    Presenter, which [](GLOSSARY.html) will [](GLOSSARY.html) be [](GLOSSARY.html)
    examined [](GLOSSARY.html) later.'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 一些应用模型的实现将其责任推得比纯粹的 GUI 状态更远：它实际上是应用程序的模型，负责直接在应用程序本身上修改应用程序状态。例如，它可能启用/禁用菜单，显示或隐藏小部件，验证事件。大部分的视觉逻辑将由这个模型对象负责，而不是控制器。这种解释对
    Dolphin 模型视图 Presenter 有深远的影响，稍后将对其进行详细讨论。
- en: 'FIXME: Application [](GLOSSARY.html) model [](GLOSSARY.html) represents [](GLOSSARY.html)
    the [](GLOSSARY.html) GUI [](GLOSSARY.html) state [](GLOSSARY.html) without [](GLOSSARY.html)
    the [](GLOSSARY.html) GUI. it [](GLOSSARY.html) contains [](GLOSSARY.html) the
    [](GLOSSARY.html) logic [](GLOSSARY.html) for [](GLOSSARY.html) enabling/disabling
    [](GLOSSARY.html) checkboxes, for [](GLOSSARY.html) example. FIXME: Application
    [](GLOSSARY.html) model [](GLOSSARY.html) can [](GLOSSARY.html) contain [](GLOSSARY.html)
    selection.'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: FIXME：应用程序模型代表 GUI 状态，但没有 GUI。它包含启用/禁用复选框等逻辑，例如。FIXME：应用程序模型可以包含选择。
- en: 'FIXME: Some [](GLOSSARY.html) logic [](GLOSSARY.html) may [](GLOSSARY.html)
    not [](GLOSSARY.html) be [](GLOSSARY.html) possible [](GLOSSARY.html) to [](GLOSSARY.html)
    extract [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html)
    and [](GLOSSARY.html) put [](GLOSSARY.html) into [](GLOSSARY.html) the [](GLOSSARY.html)
    presentation model, especially [](GLOSSARY.html) if [](GLOSSARY.html) this [](GLOSSARY.html)
    logic [](GLOSSARY.html) is [](GLOSSARY.html) deeply [](GLOSSARY.html) rooted [](GLOSSARY.html)
    in [](GLOSSARY.html) the [](GLOSSARY.html) graphical [](GLOSSARY.html) characteristics
    [](GLOSSARY.html) of [](GLOSSARY.html) the visual [](GLOSSARY.html) state. Examples
    [](GLOSSARY.html) are [](GLOSSARY.html) options [](GLOSSARY.html) that [](GLOSSARY.html)
    depends [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) screen [](GLOSSARY.html)
    resolution, or [](GLOSSARY.html) the [](GLOSSARY.html) visual [](GLOSSARY.html)
    positioning of [](GLOSSARY.html) the [](GLOSSARY.html) mouse [](GLOSSARY.html)
    within [](GLOSSARY.html) the [](GLOSSARY.html) window.'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 错误：有些逻辑可能无法从视图中提取并放入演示模型，特别是如果这种逻辑深深扎根于视觉状态的图形特征中。例如，依赖于屏幕分辨率或鼠标在窗口内的视觉定位的选项。
- en: Design
  id: totrans-78
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: Practical Example
  id: totrans-79
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际例子
- en: To [](GLOSSARY.html) present [](GLOSSARY.html) a [](GLOSSARY.html) practical
    [](GLOSSARY.html) example. imagine having [](GLOSSARY.html) a [](GLOSSARY.html)
    Domain [](GLOSSARY.html) Model [](GLOSSARY.html) representing [](GLOSSARY.html)
    an [](GLOSSARY.html) engine
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 为了提供一个实际的例子。想象一下有一个表示引擎的领域模型。
- en: '[PRE4]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Initial [](GLOSSARY.html) specifications [](GLOSSARY.html) require [](GLOSSARY.html)
    to [](GLOSSARY.html) control [](GLOSSARY.html) the [](GLOSSARY.html) revolution
    [](GLOSSARY.html) per [](GLOSSARY.html) minute (rpm) value through [](GLOSSARY.html)
    two [](GLOSSARY.html) Views: a [](GLOSSARY.html) Slider [](GLOSSARY.html) and
    [](GLOSSARY.html) a [](GLOSSARY.html) Dial. Two [](GLOSSARY.html) View/Controller
    [](GLOSSARY.html) pairs [](GLOSSARY.html) observe [](GLOSSARY.html) and act [](GLOSSARY.html)
    on [](GLOSSARY.html) a [](GLOSSARY.html) single [](GLOSSARY.html) Model'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 初始[](GLOSSARY.html)规格要求通过两个视图来控制每分钟（rpm）的革命值：一个滑块和一个刻度盘。两个视图/控制器对观察和操作一个单一模型。
- en: '![](basic_layout.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![](basic_layout.png)'
- en: 'Suppose [](GLOSSARY.html) an [](GLOSSARY.html) additional [](GLOSSARY.html)
    requirement [](GLOSSARY.html) is [](GLOSSARY.html) added [](GLOSSARY.html) to
    [](GLOSSARY.html) this [](GLOSSARY.html) simple [](GLOSSARY.html) application:
    the [](GLOSSARY.html) Dial should [](GLOSSARY.html) be [](GLOSSARY.html) colored
    [](GLOSSARY.html) red [](GLOSSARY.html) for [](GLOSSARY.html) potentially [](GLOSSARY.html)
    damaging [](GLOSSARY.html) rpm [](GLOSSARY.html) values [](GLOSSARY.html) above
    [](GLOSSARY.html) 8000 [](GLOSSARY.html) rpm, and green [](GLOSSARY.html) otherwise.'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 假设这个简单应用程序增加了一个额外的要求：刻度盘应该在8000 rpm以上的潜在损坏rpm值上涂成红色，否则为绿色。
- en: '![](application_screenshot.png)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![](application_screenshot.png)'
- en: We [](GLOSSARY.html) could [](GLOSSARY.html) violate [](GLOSSARY.html) Traditional
    [](GLOSSARY.html) MVC [](GLOSSARY.html) and [](GLOSSARY.html) add [](GLOSSARY.html)
    visual [](GLOSSARY.html) information [](GLOSSARY.html) to [](GLOSSARY.html) the
    [](GLOSSARY.html) Model, specifically [](GLOSSARY.html) the [](GLOSSARY.html)
    color
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以违反传统的MVC并向模型添加视觉信息，特别是颜色。
- en: '[PRE5]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: With [](GLOSSARY.html) this [](GLOSSARY.html) setup, when [](GLOSSARY.html)
    the [](GLOSSARY.html) Dial [](GLOSSARY.html) receives [](GLOSSARY.html) a [](GLOSSARY.html)
    change [](GLOSSARY.html) notification, it [](GLOSSARY.html) can [](GLOSSARY.html)
    inquire for [](GLOSSARY.html) both [](GLOSSARY.html) the [](GLOSSARY.html) rpm
    [](GLOSSARY.html) value [](GLOSSARY.html) to [](GLOSSARY.html) adjust [](GLOSSARY.html)
    its [](GLOSSARY.html) position [](GLOSSARY.html) and [](GLOSSARY.html) for [](GLOSSARY.html)
    the [](GLOSSARY.html) color [](GLOSSARY.html) to [](GLOSSARY.html) paint [](GLOSSARY.html)
    itself appropriately. However, the [](GLOSSARY.html) Slider [](GLOSSARY.html)
    has [](GLOSSARY.html) no [](GLOSSARY.html) interest [](GLOSSARY.html) in [](GLOSSARY.html)
    this [](GLOSSARY.html) information [](GLOSSARY.html) and [](GLOSSARY.html) now
    the [](GLOSSARY.html) Engine [](GLOSSARY.html) object [](GLOSSARY.html) is [](GLOSSARY.html)
    carrying [](GLOSSARY.html) a [](GLOSSARY.html) Qt [](GLOSSARY.html) object, gaining
    [](GLOSSARY.html) a [](GLOSSARY.html) dependency [](GLOSSARY.html) against [](GLOSSARY.html)
    GUI. This [](GLOSSARY.html) reduces [](GLOSSARY.html) reuse [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) in [](GLOSSARY.html)
    a [](GLOSSARY.html) non-GUI [](GLOSSARY.html) application. The [](GLOSSARY.html)
    underlying problem [](GLOSSARY.html) is [](GLOSSARY.html) that [](GLOSSARY.html)
    the [](GLOSSARY.html) Engine [](GLOSSARY.html) is [](GLOSSARY.html) deviating
    [](GLOSSARY.html) from [](GLOSSARY.html) business [](GLOSSARY.html) nature, and
    [](GLOSSARY.html) now [](GLOSSARY.html) has [](GLOSSARY.html) to deal [](GLOSSARY.html)
    with [](GLOSSARY.html) visual [](GLOSSARY.html) nature, something [](GLOSSARY.html)
    it [](GLOSSARY.html) should [](GLOSSARY.html) not [](GLOSSARY.html) be [](GLOSSARY.html)
    concerned [](GLOSSARY.html) about. Additionally, this [](GLOSSARY.html) approach
    [](GLOSSARY.html) is [](GLOSSARY.html) unfeasible [](GLOSSARY.html) if [](GLOSSARY.html)
    the [](GLOSSARY.html) Model [](GLOSSARY.html) object [](GLOSSARY.html) cannot
    [](GLOSSARY.html) be modified.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 使用[](GLOSSARY.html)这个[](GLOSSARY.html)设置，当[](GLOSSARY.html)Dial[](GLOSSARY.html)接收到[](GLOSSARY.html)变化通知时，它可以查询rpm的值来调整自身的位置，并为自己适当地着色。然而，Slider对此信息不感兴趣，现在Engine对象携带一个Qt对象，增加了对GUI的依赖。这降低了在非GUI应用程序中重用Model的可能性。潜在的问题是Engine正在偏离业务性质，现在必须处理视觉性质，这是它不应该关心的事情。此外，如果无法修改Model对象，则此方法是不可行的。
- en: An [](GLOSSARY.html) alternative [](GLOSSARY.html) solution [](GLOSSARY.html)
    is [](GLOSSARY.html) to [](GLOSSARY.html) let [](GLOSSARY.html) the [](GLOSSARY.html)
    Dial [](GLOSSARY.html) View [](GLOSSARY.html) decide [](GLOSSARY.html) the [](GLOSSARY.html)
    color when [](GLOSSARY.html) notified, like [](GLOSSARY.html) this
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个解决方案是让Dial View在收到通知时决定颜色，就像这样
- en: '[PRE6]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Once [](GLOSSARY.html) again, this [](GLOSSARY.html) solution [](GLOSSARY.html)
    is [](GLOSSARY.html) impractical, and [](GLOSSARY.html) for [](GLOSSARY.html)
    a [](GLOSSARY.html) complementary [](GLOSSARY.html) reason: the View [](GLOSSARY.html)
    has [](GLOSSARY.html) to [](GLOSSARY.html) know [](GLOSSARY.html) what [](GLOSSARY.html)
    is [](GLOSSARY.html) a [](GLOSSARY.html) dangerous [](GLOSSARY.html) rpm [](GLOSSARY.html)
    amount, a [](GLOSSARY.html) business-related [](GLOSSARY.html) concern that [](GLOSSARY.html)
    should [](GLOSSARY.html) be [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html)
    Model. This [](GLOSSARY.html) solution [](GLOSSARY.html) may [](GLOSSARY.html)
    be [](GLOSSARY.html) acceptable [](GLOSSARY.html) for [](GLOSSARY.html) those
    [](GLOSSARY.html) limited cases [](GLOSSARY.html) when [](GLOSSARY.html) the [](GLOSSARY.html)
    logic [](GLOSSARY.html) connecting [](GLOSSARY.html) the [](GLOSSARY.html) value
    [](GLOSSARY.html) and [](GLOSSARY.html) its [](GLOSSARY.html) visual [](GLOSSARY.html)
    representation [](GLOSSARY.html) is simple, and [](GLOSSARY.html) the [](GLOSSARY.html)
    View [](GLOSSARY.html) is [](GLOSSARY.html) designed [](GLOSSARY.html) to [](GLOSSARY.html)
    be [](GLOSSARY.html) agnostic [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    meaning [](GLOSSARY.html) of [](GLOSSARY.html) what [](GLOSSARY.html) is showing
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) User. For [](GLOSSARY.html)
    example, a [](GLOSSARY.html) label [](GLOSSARY.html) displaying [](GLOSSARY.html)
    negative [](GLOSSARY.html) values [](GLOSSARY.html) in [](GLOSSARY.html) red [](GLOSSARY.html)
    may be [](GLOSSARY.html) used [](GLOSSARY.html) to [](GLOSSARY.html) show [](GLOSSARY.html)
    bank [](GLOSSARY.html) account [](GLOSSARY.html) balances. The [](GLOSSARY.html)
    real [](GLOSSARY.html) meaning [](GLOSSARY.html) of [](GLOSSARY.html) a [](GLOSSARY.html)
    negative [](GLOSSARY.html) balance, the [](GLOSSARY.html) account [](GLOSSARY.html)
    is [](GLOSSARY.html) overdrawn, is [](GLOSSARY.html) ignored. A [](GLOSSARY.html)
    better [](GLOSSARY.html) solution [](GLOSSARY.html) would [](GLOSSARY.html) be
    [](GLOSSARY.html) to [](GLOSSARY.html) have [](GLOSSARY.html) the BankAccount
    [](GLOSSARY.html) Model [](GLOSSARY.html) object [](GLOSSARY.html) provide [](GLOSSARY.html)
    this [](GLOSSARY.html) logic [](GLOSSARY.html) as [](GLOSSARY.html) isOverdrawn(),
    and [](GLOSSARY.html) the [](GLOSSARY.html) label color [](GLOSSARY.html) should
    [](GLOSSARY.html) honor [](GLOSSARY.html) this [](GLOSSARY.html) semantic, not
    [](GLOSSARY.html) the [](GLOSSARY.html) one [](GLOSSARY.html) implied [](GLOSSARY.html)
    by [](GLOSSARY.html) the [](GLOSSARY.html) numerical [](GLOSSARY.html) value.'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 一次又一次，这个解决方案是不切实际的，并且有一个补充的原因：视图必须知道什么是一个危险的 rpm 数量，这是一个与业务相关的问题，应该在模型中。这个解决方案可能在某些有限的情况下是可以接受的，当连接值和其视觉表示的逻辑简单时，并且视图被设计成对显示给用户的内容的含义不可知。例如，显示负值为红色的标签可能用于显示银行账户余额。负余额的真正含义，账户透支了，被忽略了。一个更好的解决方案是让
    BankAccount 模型对象提供这个逻辑，比如 isOverdrawn()，并且标签颜色应该尊重这个语义，而不是由数字值暗示的语义。
- en: Given [](GLOSSARY.html) the [](GLOSSARY.html) point [](GLOSSARY.html) above,
    it [](GLOSSARY.html) is [](GLOSSARY.html) clear [](GLOSSARY.html) that [](GLOSSARY.html)
    the [](GLOSSARY.html) Engine [](GLOSSARY.html) object [](GLOSSARY.html) is [](GLOSSARY.html)
    the [](GLOSSARY.html) only [](GLOSSARY.html) entity that [](GLOSSARY.html) can
    [](GLOSSARY.html) know [](GLOSSARY.html) what [](GLOSSARY.html) rpm [](GLOSSARY.html)
    value [](GLOSSARY.html) is [](GLOSSARY.html) too [](GLOSSARY.html) high. It [](GLOSSARY.html)
    has [](GLOSSARY.html) to [](GLOSSARY.html) provide [](GLOSSARY.html) this [](GLOSSARY.html)
    information, leaving [](GLOSSARY.html) its [](GLOSSARY.html) visual [](GLOSSARY.html)
    representation [](GLOSSARY.html) strategy [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) View. A [](GLOSSARY.html) better [](GLOSSARY.html) design
    provides [](GLOSSARY.html) a [](GLOSSARY.html) query [](GLOSSARY.html) method
    `isOverRpmLimit`
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 给定上述观点，很明显引擎对象是唯一能知道转速值过高的实体。它必须提供这一信息，将其视觉表示策略留给视图。一个更好的设计提供了一个查询方法`isOverRpmLimit`
- en: '[PRE7]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The [](GLOSSARY.html) View [](GLOSSARY.html) can [](GLOSSARY.html) now [](GLOSSARY.html)
    query [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) for [](GLOSSARY.html)
    the [](GLOSSARY.html) information [](GLOSSARY.html) and [](GLOSSARY.html) render
    [](GLOSSARY.html) it [](GLOSSARY.html) appropriately
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 视图现在可以查询模型获取信息并适当地呈现它。
- en: '[PRE8]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: This [](GLOSSARY.html) solution [](GLOSSARY.html) respects [](GLOSSARY.html)
    the [](GLOSSARY.html) semantic [](GLOSSARY.html) level [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) business [](GLOSSARY.html) object, and [](GLOSSARY.html)
    allows [](GLOSSARY.html) to keep [](GLOSSARY.html) the [](GLOSSARY.html) knowledge
    [](GLOSSARY.html) about [](GLOSSARY.html) excessive [](GLOSSARY.html) rpm [](GLOSSARY.html)
    values [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html) proper [](GLOSSARY.html)
    place. It [](GLOSSARY.html) is [](GLOSSARY.html) an acceptable [](GLOSSARY.html)
    solution [](GLOSSARY.html) for [](GLOSSARY.html) simple [](GLOSSARY.html) state.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 这个解决方案尊重业务对象的语义级别，并允许将关于过高转速值的知识保留在适当的位置。这是一个简单状态的可接受解决方案。
- en: With [](GLOSSARY.html) this [](GLOSSARY.html) implementation [](GLOSSARY.html)
    in [](GLOSSARY.html) place [](GLOSSARY.html) we [](GLOSSARY.html) can now [](GLOSSARY.html)
    extract [](GLOSSARY.html) logic [](GLOSSARY.html) and [](GLOSSARY.html) state
    [](GLOSSARY.html) from [](GLOSSARY.html) Dial [](GLOSSARY.html) View [](GLOSSARY.html)
    into [](GLOSSARY.html) the [](GLOSSARY.html) Application [](GLOSSARY.html) Model
    DialEngine. The [](GLOSSARY.html) resulting [](GLOSSARY.html) design [](GLOSSARY.html)
    is [](GLOSSARY.html) known [](GLOSSARY.html) as [](GLOSSARY.html) Model-Model-View-Controller
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 有了这个实现，我们现在可以将逻辑和状态从Dial View中提取到应用模型DialEngine中。结果设计被称为Model-Model-View-Controller
- en: '![](model_model_view_controller.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](model_model_view_controller.png)'
- en: The [](GLOSSARY.html) DialEngine [](GLOSSARY.html) will [](GLOSSARY.html) handle
    [](GLOSSARY.html) state [](GLOSSARY.html) about [](GLOSSARY.html) the [](GLOSSARY.html)
    Dial [](GLOSSARY.html) color, while [](GLOSSARY.html) delegating [](GLOSSARY.html)
    the [](GLOSSARY.html) rpm value [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    Domain [](GLOSSARY.html) Model. View [](GLOSSARY.html) and [](GLOSSARY.html) Controller
    [](GLOSSARY.html) will [](GLOSSARY.html) interact [](GLOSSARY.html) with [](GLOSSARY.html)
    the Application [](GLOSSARY.html) Model [](GLOSSARY.html) and [](GLOSSARY.html)
    listen [](GLOSSARY.html) to [](GLOSSARY.html) its [](GLOSSARY.html) notifications.
    Our [](GLOSSARY.html) Application [](GLOSSARY.html) Model [](GLOSSARY.html) will
    be [](GLOSSARY.html) implemented [](GLOSSARY.html) as [](GLOSSARY.html) follows.
    In [](GLOSSARY.html) the [](GLOSSARY.html) initializer, we [](GLOSSARY.html) register
    [](GLOSSARY.html) for [](GLOSSARY.html) notifications [](GLOSSARY.html) on the
    [](GLOSSARY.html) Domain [](GLOSSARY.html) Model, and [](GLOSSARY.html) initialize
    [](GLOSSARY.html) the [](GLOSSARY.html) color
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '`DialEngine`将处理有关`Dial`颜色的状态，同时将`rpm`值委托给域模型。视图和控制器将与应用程序模型交互并监听其通知。我们的应用程序模型将按以下方式实现。在初始化程序中，我们在域模型上注册通知，并初始化颜色'
- en: '[PRE9]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: The [](GLOSSARY.html) accessor [](GLOSSARY.html) method [](GLOSSARY.html) for
    [](GLOSSARY.html) the [](GLOSSARY.html) color [](GLOSSARY.html) just [](GLOSSARY.html)
    returns [](GLOSSARY.html) the [](GLOSSARY.html) current [](GLOSSARY.html) value
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '`color`的访问器方法只是返回当前值'
- en: '[PRE10]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: The [](GLOSSARY.html) two [](GLOSSARY.html) accessors [](GLOSSARY.html) for
    [](GLOSSARY.html) the [](GLOSSARY.html) rpm [](GLOSSARY.html) value [](GLOSSARY.html)
    trivially [](GLOSSARY.html) delegate [](GLOSSARY.html) to [](GLOSSARY.html) the
    [](GLOSSARY.html) Domain [](GLOSSARY.html) Model
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 两个`rpm`值的访问器简单地委托给域模型
- en: '[PRE11]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: When [](GLOSSARY.html) the `DialController` issues [](GLOSSARY.html) a [](GLOSSARY.html)
    change [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) Application
    [](GLOSSARY.html) Model [](GLOSSARY.html) through [](GLOSSARY.html) the above
    [](GLOSSARY.html) accessor [](GLOSSARY.html) methods, this [](GLOSSARY.html) request
    [](GLOSSARY.html) will [](GLOSSARY.html) be [](GLOSSARY.html) forwarded [](GLOSSARY.html)
    and [](GLOSSARY.html) will [](GLOSSARY.html) generate [](GLOSSARY.html) a change
    [](GLOSSARY.html) notification. Both [](GLOSSARY.html) the [](GLOSSARY.html) Slider
    [](GLOSSARY.html) and [](GLOSSARY.html) the [](GLOSSARY.html) Application [](GLOSSARY.html)
    Model [](GLOSSARY.html) will [](GLOSSARY.html) receive this [](GLOSSARY.html)
    notification [](GLOSSARY.html) on [](GLOSSARY.html) their [](GLOSSARY.html) method
    [](GLOSSARY.html) notify. The [](GLOSSARY.html) Slider [](GLOSSARY.html) will
    [](GLOSSARY.html) change [](GLOSSARY.html) its [](GLOSSARY.html) position, and
    [](GLOSSARY.html) the [](GLOSSARY.html) Application [](GLOSSARY.html) Model [](GLOSSARY.html)
    will [](GLOSSARY.html) change [](GLOSSARY.html) its [](GLOSSARY.html) color [](GLOSSARY.html)
    and [](GLOSSARY.html) reissue [](GLOSSARY.html) a [](GLOSSARY.html) change notification
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 当`DialController`通过上述访问器方法向应用程序模型发出更改请求时，此请求将被转发并将生成更改通知。滑块和应用程序模型将在其通知方法上接收此通知。滑块将更改其位置，应用程序模型将更改其颜色并重新发出更改通知
- en: '[PRE12]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: The [](GLOSSARY.html) DialView [](GLOSSARY.html) will [](GLOSSARY.html) handle
    [](GLOSSARY.html) this [](GLOSSARY.html) notification, query [](GLOSSARY.html)
    the [](GLOSSARY.html) Application [](GLOSSARY.html) Model (both the [](GLOSSARY.html)
    rpm [](GLOSSARY.html) value [](GLOSSARY.html) and [](GLOSSARY.html) the [](GLOSSARY.html)
    color) and [](GLOSSARY.html) repaint [](GLOSSARY.html) itself. Note [](GLOSSARY.html)
    that [](GLOSSARY.html) changing [](GLOSSARY.html) the `self._dial_color` in `DialEngine.setRpm`,
    as [](GLOSSARY.html) in
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: DialView将处理此通知，查询应用模型（rpm值和颜色），并重新绘制自身。请注意，在`DialEngine.setRpm`中更改`self._dial_color`，如
- en: '[PRE13]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'instead [](GLOSSARY.html) of [](GLOSSARY.html) using [](GLOSSARY.html) the
    `notify` solution [](GLOSSARY.html) given [](GLOSSARY.html) before, would [](GLOSSARY.html)
    introduce [](GLOSSARY.html) the following [](GLOSSARY.html) problems:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '而不是使用之前提供的`notify`解决方案，会引入以下问题： '
- en: the [](GLOSSARY.html) dial [](GLOSSARY.html) color [](GLOSSARY.html) would [](GLOSSARY.html)
    not [](GLOSSARY.html) change [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html)
    consequence [](GLOSSARY.html) of [](GLOSSARY.html) external [](GLOSSARY.html)
    changes [](GLOSSARY.html) on the [](GLOSSARY.html) Domain [](GLOSSARY.html) Model
    (in [](GLOSSARY.html) our [](GLOSSARY.html) case, by [](GLOSSARY.html) the [](GLOSSARY.html)
    Slider)
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于领域模型的外部更改（在我们的情况下，由滑块引起），表盘颜色不会改变。
- en: There [](GLOSSARY.html) is [](GLOSSARY.html) no [](GLOSSARY.html) guarantee
    [](GLOSSARY.html) that [](GLOSSARY.html) issuing `self._engine.setRpm()` will
    [](GLOSSARY.html) trigger [](GLOSSARY.html) a notification [](GLOSSARY.html) from
    [](GLOSSARY.html) the [](GLOSSARY.html) Domain [](GLOSSARY.html) Model, because
    [](GLOSSARY.html) the [](GLOSSARY.html) value [](GLOSSARY.html) might [](GLOSSARY.html)
    be [](GLOSSARY.html) the [](GLOSSARY.html) same. On [](GLOSSARY.html) the [](GLOSSARY.html)
    other [](GLOSSARY.html) hand, the [](GLOSSARY.html) Application [](GLOSSARY.html)
    Model [](GLOSSARY.html) might [](GLOSSARY.html) potentially [](GLOSSARY.html)
    change (although [](GLOSSARY.html) probably [](GLOSSARY.html) not [](GLOSSARY.html)
    in [](GLOSSARY.html) this [](GLOSSARY.html) example), and [](GLOSSARY.html) should
    [](GLOSSARY.html) trigger [](GLOSSARY.html) a [](GLOSSARY.html) notification [](GLOSSARY.html)
    to the [](GLOSSARY.html) listeners. Solving [](GLOSSARY.html) this [](GLOSSARY.html)
    problem [](GLOSSARY.html) by [](GLOSSARY.html) adding [](GLOSSARY.html) a [](GLOSSARY.html)
    self._notifyListeners [](GLOSSARY.html) call [](GLOSSARY.html) to DialEngine.setRpm
    [](GLOSSARY.html) will [](GLOSSARY.html) end [](GLOSSARY.html) up [](GLOSSARY.html)
    producing [](GLOSSARY.html) two [](GLOSSARY.html) notifications [](GLOSSARY.html)
    when [](GLOSSARY.html) the [](GLOSSARY.html) Domain [](GLOSSARY.html) Model does
    [](GLOSSARY.html) issue [](GLOSSARY.html) a [](GLOSSARY.html) notification.
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不能保证发出`self._engine.setRpm()`会触发来自领域模型的通知，因为值可能相同。另一方面，应用模型可能会潜在地更改（尽管在这个例子中可能不会），并且应该触发通知给监听者。通过在DialEngine.setRpm中添加self._notifyListeners调用来解决这个问题将导致在领域模型发出通知时产生两个通知。
- en: FIXME [](GLOSSARY.html) In [](GLOSSARY.html) practice, application [](GLOSSARY.html)
    model [](GLOSSARY.html) is [](GLOSSARY.html) a [](GLOSSARY.html) UI [](GLOSSARY.html)
    model. FIXME [](GLOSSARY.html) VisualWorks. FIXME [](GLOSSARY.html) application
    [](GLOSSARY.html) model [](GLOSSARY.html) may [](GLOSSARY.html) need [](GLOSSARY.html)
    to [](GLOSSARY.html) talk [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    view [](GLOSSARY.html) or [](GLOSSARY.html) the [](GLOSSARY.html) controller [](GLOSSARY.html)
    directly, instead [](GLOSSARY.html) of [](GLOSSARY.html) notification.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: FIXME [](GLOSSARY.html)实际上，应用程序模型是一个UI模型。FIXME [](GLOSSARY.html)VisualWorks。FIXME
    [](GLOSSARY.html)应用程序模型可能需要直接与视图或控制器交流，而不是通过通知。
- en: Side-by-Side application model
  id: totrans-113
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 并排应用程序模型
- en: Side-by-Side Application Model - Selection Model
  id: totrans-114
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 并排应用程序模型 - 选择模型
- en: Motivation
  id: totrans-115
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'An [](GLOSSARY.html) alternative [](GLOSSARY.html) approach [](GLOSSARY.html)
    to [](GLOSSARY.html) the [](GLOSSARY.html) previously [](GLOSSARY.html) described
    [](GLOSSARY.html) Application [](GLOSSARY.html) Model is [](GLOSSARY.html) to
    [](GLOSSARY.html) keep [](GLOSSARY.html) View [](GLOSSARY.html) state [](GLOSSARY.html)
    in [](GLOSSARY.html) a [](GLOSSARY.html) separate [](GLOSSARY.html) Model [](GLOSSARY.html)
    that [](GLOSSARY.html) is [](GLOSSARY.html) not [](GLOSSARY.html) wrapping [](GLOSSARY.html)
    the Domain [](GLOSSARY.html) Model, but [](GLOSSARY.html) is [](GLOSSARY.html)
    instead [](GLOSSARY.html) complementing [](GLOSSARY.html) it [](GLOSSARY.html)
    as [](GLOSSARY.html) an [](GLOSSARY.html) additional [](GLOSSARY.html) Model.
    The [](GLOSSARY.html) View [](GLOSSARY.html) depends [](GLOSSARY.html) and [](GLOSSARY.html)
    listens [](GLOSSARY.html) to [](GLOSSARY.html) both [](GLOSSARY.html) Models.
    This [](GLOSSARY.html) setup [](GLOSSARY.html) is [](GLOSSARY.html) commonly [](GLOSSARY.html)
    encountered [](GLOSSARY.html) when [](GLOSSARY.html) dealing [](GLOSSARY.html)
    with [](GLOSSARY.html) selection: the [](GLOSSARY.html) Domain [](GLOSSARY.html)
    Model [](GLOSSARY.html) may [](GLOSSARY.html) contain a [](GLOSSARY.html) list
    [](GLOSSARY.html) of [](GLOSSARY.html) items, with [](GLOSSARY.html) the [](GLOSSARY.html)
    View [](GLOSSARY.html) showing [](GLOSSARY.html) this [](GLOSSARY.html) list [](GLOSSARY.html)
    as [](GLOSSARY.html) selectable entities. Changing [](GLOSSARY.html) the [](GLOSSARY.html)
    selection [](GLOSSARY.html) will [](GLOSSARY.html) not [](GLOSSARY.html) modify
    [](GLOSSARY.html) the [](GLOSSARY.html) Domain [](GLOSSARY.html) Model, but [](GLOSSARY.html)
    will [](GLOSSARY.html) instead [](GLOSSARY.html) act [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) Selection [](GLOSSARY.html) Model [](GLOSSARY.html) by [](GLOSSARY.html)
    including [](GLOSSARY.html) or [](GLOSSARY.html) removing items [](GLOSSARY.html)
    from [](GLOSSARY.html) the [](GLOSSARY.html) Selection [](GLOSSARY.html) Model.'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 一个[](GLOSSARY.html)替代[](GLOSSARY.html)之前描述的应用程序模型的方法是将View状态保留在一个单独的Model中，该Model不包装领域模型，而是作为额外的Model来补充它。View依赖于并监听这两个模型。当处理选择时，通常会遇到这种设置：领域模型可能包含一个项目列表，而View将此列表显示为可选择的实体。更改选择不会修改领域模型，而是会对选择模型进行操作，通过包含或移除项目来影响选择模型。
- en: Having [](GLOSSARY.html) a [](GLOSSARY.html) View [](GLOSSARY.html) dependent
    [](GLOSSARY.html) on [](GLOSSARY.html) two [](GLOSSARY.html) Models [](GLOSSARY.html)
    generally [](GLOSSARY.html) introduces [](GLOSSARY.html) no [](GLOSSARY.html)
    issues, provided [](GLOSSARY.html) that [](GLOSSARY.html) the [](GLOSSARY.html)
    two [](GLOSSARY.html) Models [](GLOSSARY.html) represent [](GLOSSARY.html) independent
    [](GLOSSARY.html) data. In [](GLOSSARY.html) the [](GLOSSARY.html) case of [](GLOSSARY.html)
    Selection [](GLOSSARY.html) Model, it [](GLOSSARY.html) is [](GLOSSARY.html) not
    [](GLOSSARY.html) the [](GLOSSARY.html) case, and [](GLOSSARY.html) particular
    [](GLOSSARY.html) care [](GLOSSARY.html) must [](GLOSSARY.html) be taken [](GLOSSARY.html)
    to [](GLOSSARY.html) handle [](GLOSSARY.html) proper [](GLOSSARY.html) synchronization
    [](GLOSSARY.html) and [](GLOSSARY.html) event [](GLOSSARY.html) handling. When
    [](GLOSSARY.html) the [](GLOSSARY.html) Domain [](GLOSSARY.html) Model [](GLOSSARY.html)
    changes, these [](GLOSSARY.html) changes [](GLOSSARY.html) can [](GLOSSARY.html)
    influence [](GLOSSARY.html) the [](GLOSSARY.html) validity [](GLOSSARY.html) of
    the [](GLOSSARY.html) Selection [](GLOSSARY.html) Model. For [](GLOSSARY.html)
    this [](GLOSSARY.html) reason, Model-to-Model [](GLOSSARY.html) communication
    from [](GLOSSARY.html) the [](GLOSSARY.html) Domain [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) Selection [](GLOSSARY.html) Model [](GLOSSARY.html) to [](GLOSSARY.html)
    keep [](GLOSSARY.html) this [](GLOSSARY.html) validity.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 当一个视图依赖于两个模型时，通常不会出现问题，前提是这两个模型表示独立的数据。在选择模型的情况下，情况并非如此，必须特别小心处理适当的同步和事件处理。当领域模型发生变化时，这些变化可能会影响选择模型的有效性。因此，必须从领域模型到选择模型进行模型之间的通信，以保持这种有效性。
- en: 'Consider [](GLOSSARY.html) as [](GLOSSARY.html) an [](GLOSSARY.html) example
    [](GLOSSARY.html) the [](GLOSSARY.html) following [](GLOSSARY.html) scenario:
    a [](GLOSSARY.html) Domain [](GLOSSARY.html) model [](GLOSSARY.html) contains
    [](GLOSSARY.html) three [](GLOSSARY.html) items [](GLOSSARY.html) A, B, and [](GLOSSARY.html)
    C. The [](GLOSSARY.html) Selection [](GLOSSARY.html) Model [](GLOSSARY.html) might
    [](GLOSSARY.html) contain [](GLOSSARY.html) ordinal [](GLOSSARY.html) selection
    [](GLOSSARY.html) for [](GLOSSARY.html) the [](GLOSSARY.html) second [](GLOSSARY.html)
    element, that [](GLOSSARY.html) is, B. If [](GLOSSARY.html) however [](GLOSSARY.html)
    a [](GLOSSARY.html) new [](GLOSSARY.html) element [](GLOSSARY.html) A2 [](GLOSSARY.html)
    is [](GLOSSARY.html) inserted [](GLOSSARY.html) between [](GLOSSARY.html) A [](GLOSSARY.html)
    and [](GLOSSARY.html) B, the [](GLOSSARY.html) selection [](GLOSSARY.html) must
    [](GLOSSARY.html) be [](GLOSSARY.html) updated [](GLOSSARY.html) to [](GLOSSARY.html)
    refer [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) third [](GLOSSARY.html)
    element. If [](GLOSSARY.html) selection [](GLOSSARY.html) was [](GLOSSARY.html)
    based [](GLOSSARY.html) on [](GLOSSARY.html) a [](GLOSSARY.html) unique [](GLOSSARY.html)
    identifier [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) item,
    instead [](GLOSSARY.html) of [](GLOSSARY.html) a [](GLOSSARY.html) numeric [](GLOSSARY.html)
    position, the [](GLOSSARY.html) synchronization [](GLOSSARY.html) would [](GLOSSARY.html)
    not [](GLOSSARY.html) be [](GLOSSARY.html) needed. However, a [](GLOSSARY.html)
    similar [](GLOSSARY.html) problem [](GLOSSARY.html) would [](GLOSSARY.html) happen
    [](GLOSSARY.html) if [](GLOSSARY.html) item [](GLOSSARY.html) B [](GLOSSARY.html)
    is [](GLOSSARY.html) removed. The [](GLOSSARY.html) selection [](GLOSSARY.html)
    would [](GLOSSARY.html) now [](GLOSSARY.html) refer [](GLOSSARY.html) to [](GLOSSARY.html)
    an [](GLOSSARY.html) unexistent [](GLOSSARY.html) item, and [](GLOSSARY.html)
    must [](GLOSSARY.html) be [](GLOSSARY.html) removed. These [](GLOSSARY.html) scenarios
    [](GLOSSARY.html) require [](GLOSSARY.html) extensive [](GLOSSARY.html) discussion
    [](GLOSSARY.html) that [](GLOSSARY.html) will [](GLOSSARY.html) be [](GLOSSARY.html)
    presented [](GLOSSARY.html) later [](GLOSSARY.html) in [](GLOSSARY.html) this
    [](GLOSSARY.html) section.'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 将[](GLOSSARY.html)考虑为[](GLOSSARY.html)以下[](GLOSSARY.html)场景的[](GLOSSARY.html)示例：一个[](GLOSSARY.html)领域[](GLOSSARY.html)模型[](GLOSSARY.html)包含[](GLOSSARY.html)三个[](GLOSSARY.html)项目[](GLOSSARY.html)A、B和[](GLOSSARY.html)C。[](GLOSSARY.html)选择[](GLOSSARY.html)模型[](GLOSSARY.html)可能包含[](GLOSSARY.html)第二个[](GLOSSARY.html)元素的[](GLOSSARY.html)序数[](GLOSSARY.html)选择，即B。如果[](GLOSSARY.html)然而[](GLOSSARY.html)插入[](GLOSSARY.html)一个[](GLOSSARY.html)新的[](GLOSSARY.html)元素[](GLOSSARY.html)A2在[](GLOSSARY.html)A和[](GLOSSARY.html)B之间，[](GLOSSARY.html)选择[](GLOSSARY.html)必须[](GLOSSARY.html)更新为[](GLOSSARY.html)指向[](GLOSSARY.html)第三个[](GLOSSARY.html)元素。如果[](GLOSSARY.html)选择[](GLOSSARY.html)是[](GLOSSARY.html)基于[](GLOSSARY.html)项目的[](GLOSSARY.html)唯一[](GLOSSARY.html)标识符，而不是[](GLOSSARY.html)数字[](GLOSSARY.html)位置，[](GLOSSARY.html)同步[](GLOSSARY.html)将[](GLOSSARY.html)不需要。然而，如果[](GLOSSARY.html)项目[](GLOSSARY.html)B被[](GLOSSARY.html)移除，一个[](GLOSSARY.html)类似的[](GLOSSARY.html)问题将[](GLOSSARY.html)发生。[](GLOSSARY.html)选择[](GLOSSARY.html)现在[](GLOSSARY.html)将[](GLOSSARY.html)指向[](GLOSSARY.html)一个[](GLOSSARY.html)不存在的[](GLOSSARY.html)项目，并且必须[](GLOSSARY.html)被[](GLOSSARY.html)移除。这些[](GLOSSARY.html)场景[](GLOSSARY.html)需要[](GLOSSARY.html)深入的[](GLOSSARY.html)讨论，这将[](GLOSSARY.html)稍后在[](GLOSSARY.html)本[](GLOSSARY.html)部分中[](GLOSSARY.html)呈现。
- en: The [](GLOSSARY.html) Selection [](GLOSSARY.html) Model [](GLOSSARY.html) can
    [](GLOSSARY.html) also [](GLOSSARY.html) be [](GLOSSARY.html) observed [](GLOSSARY.html)
    or [](GLOSSARY.html) modified [](GLOSSARY.html) by [](GLOSSARY.html) other [](GLOSSARY.html)
    Views [](GLOSSARY.html) or [](GLOSSARY.html) Controllers, granting [](GLOSSARY.html)
    a [](GLOSSARY.html) relevant [](GLOSSARY.html) amount [](GLOSSARY.html) of [](GLOSSARY.html)
    flexibility [](GLOSSARY.html) for [](GLOSSARY.html) complex selection [](GLOSSARY.html)
    scenarios. For [](GLOSSARY.html) example, a [](GLOSSARY.html) controller [](GLOSSARY.html)
    associated [](GLOSSARY.html) to [](GLOSSARY.html) a [](GLOSSARY.html) menu [](GLOSSARY.html)
    action [](GLOSSARY.html) may [](GLOSSARY.html) want [](GLOSSARY.html) to [](GLOSSARY.html)
    select [](GLOSSARY.html) all [](GLOSSARY.html) elements [](GLOSSARY.html) whose
    [](GLOSSARY.html) name [](GLOSSARY.html) matches [](GLOSSARY.html) a [](GLOSSARY.html)
    regular [](GLOSSARY.html) expression.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 选择[](GLOSSARY.html)模型[](GLOSSARY.html)也可以被其他[](GLOSSARY.html)视图或[](GLOSSARY.html)控制器观察或修改，为复杂的选择场景提供了相当数量的灵活性。例如，与菜单操作相关联的控制器可能希望选择所有名称与正则表达式匹配的元素。
- en: '[picture]'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: '[图片]'
- en: Obviously, the [](GLOSSARY.html) Application [](GLOSSARY.html) Model [](GLOSSARY.html)
    keeps [](GLOSSARY.html) registering [](GLOSSARY.html) itself [](GLOSSARY.html)
    on [](GLOSSARY.html) the [](GLOSSARY.html) Domain [](GLOSSARY.html) model
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，应用程序模型会继续在域模型上注册自己。
- en: '[PRE14]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: The [](GLOSSARY.html) dial [](GLOSSARY.html) now [](GLOSSARY.html) registers
    [](GLOSSARY.html) to [](GLOSSARY.html) both [](GLOSSARY.html) Models, and [](GLOSSARY.html)
    listens [](GLOSSARY.html) to [](GLOSSARY.html) notifications [](GLOSSARY.html)
    from [](GLOSSARY.html) both.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 该[](GLOSSARY.html)拨号[](GLOSSARY.html)现在[](GLOSSARY.html)注册到[](GLOSSARY.html)两个[](GLOSSARY.html)模型，并且[](GLOSSARY.html)监听[](GLOSSARY.html)来自[](GLOSSARY.html)两者的通知。
- en: '[PRE15]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Note [](GLOSSARY.html) how [](GLOSSARY.html) the [](GLOSSARY.html) Dial [](GLOSSARY.html)
    cannot [](GLOSSARY.html) differentiate [](GLOSSARY.html) which [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) two [](GLOSSARY.html) Models [](GLOSSARY.html)
    is [](GLOSSARY.html) delivering the [](GLOSSARY.html) message, and [](GLOSSARY.html)
    how [](GLOSSARY.html) in [](GLOSSARY.html) particular [](GLOSSARY.html) it [](GLOSSARY.html)
    will [](GLOSSARY.html) be [](GLOSSARY.html) potentially [](GLOSSARY.html) notified
    [](GLOSSARY.html) twice: once by [](GLOSSARY.html) the [](GLOSSARY.html) change
    [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html) Domain [](GLOSSARY.html)
    model, and [](GLOSSARY.html) another [](GLOSSARY.html) time [](GLOSSARY.html)
    by [](GLOSSARY.html) the [](GLOSSARY.html) change [](GLOSSARY.html) in [](GLOSSARY.html)
    the Application [](GLOSSARY.html) Model, in [](GLOSSARY.html) itself [](GLOSSARY.html)
    triggered [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html) previous
    [](GLOSSARY.html) change [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html)
    Domain model. Particular [](GLOSSARY.html) care [](GLOSSARY.html) may [](GLOSSARY.html)
    be [](GLOSSARY.html) needed [](GLOSSARY.html) if [](GLOSSARY.html) the [](GLOSSARY.html)
    notify [](GLOSSARY.html) method [](GLOSSARY.html) is [](GLOSSARY.html) time [](GLOSSARY.html)
    consuming. Another [](GLOSSARY.html) case [](GLOSSARY.html) of [](GLOSSARY.html)
    Application [](GLOSSARY.html) Model [](GLOSSARY.html) usage [](GLOSSARY.html)
    is [](GLOSSARY.html) a [](GLOSSARY.html) plot [](GLOSSARY.html) with [](GLOSSARY.html)
    changing [](GLOSSARY.html) scale. The state [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) View (its [](GLOSSARY.html) scale [](GLOSSARY.html) and
    [](GLOSSARY.html) positioning) is [](GLOSSARY.html) part [](GLOSSARY.html) of
    [](GLOSSARY.html) a “separate [](GLOSSARY.html) model” that [](GLOSSARY.html)
    is [](GLOSSARY.html) pertinent [](GLOSSARY.html) only [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) View. The [](GLOSSARY.html) Domain [](GLOSSARY.html) model,
    which [](GLOSSARY.html) holds [](GLOSSARY.html) the [](GLOSSARY.html) plot data,
    should [](GLOSSARY.html) not [](GLOSSARY.html) be [](GLOSSARY.html) involved [](GLOSSARY.html)
    in [](GLOSSARY.html) the [](GLOSSARY.html) zoom [](GLOSSARY.html) factor [](GLOSSARY.html)
    or [](GLOSSARY.html) plot [](GLOSSARY.html) limits.'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 注意[](GLOSSARY.html) Dial [](GLOSSARY.html)无法区分两个模型中的哪一个在传递消息，以及特别是它可能会被通知两次的情况：一次是由于领域模型的变化，另一次是由于应用程序模型的变化，而应用程序模型的变化本身是由于先前的领域模型变化而触发的。如果通知方法耗时，则可能需要特别注意。另一个应用程序模型使用的情况是具有变化比例的绘图。视图的状态（其比例和定位）是“独立模型”的一部分，仅与视图相关。持有绘图数据的领域模型不应参与缩放因子或绘图限制。
- en: 'A [](GLOSSARY.html) side-by-side [](GLOSSARY.html) solution [](GLOSSARY.html)
    is [](GLOSSARY.html) frequently [](GLOSSARY.html) used [](GLOSSARY.html) to [](GLOSSARY.html)
    implement [](GLOSSARY.html) selection, a [](GLOSSARY.html) common [](GLOSSARY.html)
    GUI paradigm [](GLOSSARY.html) to [](GLOSSARY.html) operate [](GLOSSARY.html)
    on [](GLOSSARY.html) a [](GLOSSARY.html) data [](GLOSSARY.html) subset. Selected
    [](GLOSSARY.html) data [](GLOSSARY.html) normally [](GLOSSARY.html) have [](GLOSSARY.html)
    a [](GLOSSARY.html) different visual [](GLOSSARY.html) aspect, such [](GLOSSARY.html)
    as [](GLOSSARY.html) highlighting [](GLOSSARY.html) or [](GLOSSARY.html) a [](GLOSSARY.html)
    checkbox. This [](GLOSSARY.html) information [](GLOSSARY.html) is [](GLOSSARY.html)
    then used [](GLOSSARY.html) to [](GLOSSARY.html) drive [](GLOSSARY.html) operations
    [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) specified [](GLOSSARY.html)
    subset. Selection [](GLOSSARY.html) has [](GLOSSARY.html) therefore [](GLOSSARY.html)
    a dualistic [](GLOSSARY.html) nature [](GLOSSARY.html) of [](GLOSSARY.html) holding
    [](GLOSSARY.html) state [](GLOSSARY.html) that [](GLOSSARY.html) is [](GLOSSARY.html)
    both [](GLOSSARY.html) visual [](GLOSSARY.html) and [](GLOSSARY.html) business
    [](GLOSSARY.html) related. A trivial [](GLOSSARY.html) strategy [](GLOSSARY.html)
    is [](GLOSSARY.html) to [](GLOSSARY.html) include [](GLOSSARY.html) selection
    [](GLOSSARY.html) state [](GLOSSARY.html) directly [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) Domain [](GLOSSARY.html) Model, for [](GLOSSARY.html) example
    [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html) flag [](GLOSSARY.html)
    associated [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) item.
    Depending [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) application,
    this [](GLOSSARY.html) may [](GLOSSARY.html) or [](GLOSSARY.html) may [](GLOSSARY.html)
    not [](GLOSSARY.html) be [](GLOSSARY.html) an [](GLOSSARY.html) appropriate [](GLOSSARY.html)
    solution: if [](GLOSSARY.html) two [](GLOSSARY.html) Views [](GLOSSARY.html) observe
    [](GLOSSARY.html) the [](GLOSSARY.html) same Model, and [](GLOSSARY.html) an [](GLOSSARY.html)
    item [](GLOSSARY.html) is [](GLOSSARY.html) selected [](GLOSSARY.html) in [](GLOSSARY.html)
    one [](GLOSSARY.html) View, you [](GLOSSARY.html) might [](GLOSSARY.html) or [](GLOSSARY.html)
    might [](GLOSSARY.html) not [](GLOSSARY.html) want [](GLOSSARY.html) the other
    [](GLOSSARY.html) View [](GLOSSARY.html) to [](GLOSSARY.html) obtain [](GLOSSARY.html)
    this [](GLOSSARY.html) selection [](GLOSSARY.html) information. For [](GLOSSARY.html)
    example, a [](GLOSSARY.html) GUI [](GLOSSARY.html) allowing the [](GLOSSARY.html)
    user [](GLOSSARY.html) to [](GLOSSARY.html) select [](GLOSSARY.html) elements
    [](GLOSSARY.html) from [](GLOSSARY.html) a [](GLOSSARY.html) list, but [](GLOSSARY.html)
    also [](GLOSSARY.html) have [](GLOSSARY.html) a [](GLOSSARY.html) label [](GLOSSARY.html)
    saying “3 [](GLOSSARY.html) items selected” would [](GLOSSARY.html) work [](GLOSSARY.html)
    with [](GLOSSARY.html) selection [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html)
    Domain [](GLOSSARY.html) Model. If [](GLOSSARY.html) selection [](GLOSSARY.html)
    cannot [](GLOSSARY.html) be shared [](GLOSSARY.html) between [](GLOSSARY.html)
    Views, or [](GLOSSARY.html) we [](GLOSSARY.html) want [](GLOSSARY.html) to [](GLOSSARY.html)
    keep [](GLOSSARY.html) selection [](GLOSSARY.html) as [](GLOSSARY.html) an [](GLOSSARY.html)
    independent [](GLOSSARY.html) concern, a [](GLOSSARY.html) sensible [](GLOSSARY.html)
    strategy [](GLOSSARY.html) is [](GLOSSARY.html) to [](GLOSSARY.html) host [](GLOSSARY.html)
    it [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html) separate [](GLOSSARY.html)
    side-by-side [](GLOSSARY.html) Selection [](GLOSSARY.html) Model.'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 一个[GLOSSARY.html]并排[GLOSSARY.html]解决方案[GLOSSARY.html]经常被用来实现[GLOSSARY.html]选择，这是一个常见的GUI范例，用于操作数据子集。所选数据通常具有不同的视觉方面，比如高亮显示或复选框。这些信息随后被用来驱动对指定子集的操作。选择因此具有一个持有既视觉又业务相关状态的二元性质。一个微不足道的策略是直接在领域模型上包含选择状态，例如作为与项目关联的标志。根据应用程序的不同，这可能是或不是一个合适的解决方案：如果两个视图观察相同的模型，并且在一个视图中选择了一个项目，您可能希望或不希望另一个视图获取这些选择信息。例如，一个允许用户从列表中选择元素，但同时也有一个标签显示“已选择3个项目”的GUI将与领域模型上的选择一起工作。如果选择不能在视图之间共享，或者我们希望将选择保持为一个独立的关注点，一个明智的策略是将其作为一个独立的并排选择模型托管。
- en: 'One [](GLOSSARY.html) problem [](GLOSSARY.html) with [](GLOSSARY.html) a [](GLOSSARY.html)
    Selection [](GLOSSARY.html) Model [](GLOSSARY.html) is [](GLOSSARY.html) that
    [](GLOSSARY.html) it [](GLOSSARY.html) must [](GLOSSARY.html) be [](GLOSSARY.html)
    tolerant [](GLOSSARY.html) to [](GLOSSARY.html) changes [](GLOSSARY.html) in the
    [](GLOSSARY.html) Domain [](GLOSSARY.html) Model. If [](GLOSSARY.html) a [](GLOSSARY.html)
    selected [](GLOSSARY.html) entity [](GLOSSARY.html) is [](GLOSSARY.html) removed
    [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) Domain [](GLOSSARY.html)
    Model, the selection [](GLOSSARY.html) status [](GLOSSARY.html) must [](GLOSSARY.html)
    be [](GLOSSARY.html) cleared [](GLOSSARY.html) of [](GLOSSARY.html) that [](GLOSSARY.html)
    entity. This [](GLOSSARY.html) is [](GLOSSARY.html) important, because [](GLOSSARY.html)
    if the [](GLOSSARY.html) Selection [](GLOSSARY.html) Model [](GLOSSARY.html) is
    [](GLOSSARY.html) then [](GLOSSARY.html) used [](GLOSSARY.html) to [](GLOSSARY.html)
    perform [](GLOSSARY.html) collective [](GLOSSARY.html) operations (for [](GLOSSARY.html)
    example, change [](GLOSSARY.html) the [](GLOSSARY.html) color [](GLOSSARY.html)
    of [](GLOSSARY.html) all [](GLOSSARY.html) selected [](GLOSSARY.html) items) an
    [](GLOSSARY.html) operation [](GLOSSARY.html) will [](GLOSSARY.html) be [](GLOSSARY.html)
    attempted [](GLOSSARY.html) on [](GLOSSARY.html) an item [](GLOSSARY.html) no-longer
    [](GLOSSARY.html) existing [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html)
    Domain [](GLOSSARY.html) Model. Add [](GLOSSARY.html) operations [](GLOSSARY.html)
    are [](GLOSSARY.html) also [](GLOSSARY.html) not [](GLOSSARY.html) immune from
    [](GLOSSARY.html) problems: the [](GLOSSARY.html) Selection [](GLOSSARY.html)
    Model [](GLOSSARY.html) might [](GLOSSARY.html) have [](GLOSSARY.html) to [](GLOSSARY.html)
    resize [](GLOSSARY.html) itself [](GLOSSARY.html) to [](GLOSSARY.html) match [](GLOSSARY.html)
    the Domain [](GLOSSARY.html) Model, so [](GLOSSARY.html) that [](GLOSSARY.html)
    it [](GLOSSARY.html) does [](GLOSSARY.html) not [](GLOSSARY.html) go [](GLOSSARY.html)
    out [](GLOSSARY.html) of [](GLOSSARY.html) bounds [](GLOSSARY.html) when [](GLOSSARY.html)
    inquire [](GLOSSARY.html) is [](GLOSSARY.html) performed about [](GLOSSARY.html)
    the [](GLOSSARY.html) selection [](GLOSSARY.html) status [](GLOSSARY.html) of
    [](GLOSSARY.html) the [](GLOSSARY.html) new [](GLOSSARY.html) entries. Modifications
    [](GLOSSARY.html) may [](GLOSSARY.html) reorder [](GLOSSARY.html) and invalidate
    [](GLOSSARY.html) indexes [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html)
    Domain [](GLOSSARY.html) Model, making [](GLOSSARY.html) the [](GLOSSARY.html)
    selection [](GLOSSARY.html) outdated. Finally, when [](GLOSSARY.html) synchronization
    [](GLOSSARY.html) is [](GLOSSARY.html) achieved [](GLOSSARY.html) between [](GLOSSARY.html)
    the [](GLOSSARY.html) Domain [](GLOSSARY.html) Model [](GLOSSARY.html) and [](GLOSSARY.html)
    the [](GLOSSARY.html) Selection Model, the [](GLOSSARY.html) View [](GLOSSARY.html)
    will [](GLOSSARY.html) be [](GLOSSARY.html) notified [](GLOSSARY.html) twice:
    once [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html) change [](GLOSSARY.html)
    in [](GLOSSARY.html) the [](GLOSSARY.html) Domain [](GLOSSARY.html) Model, and
    [](GLOSSARY.html) again [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html)
    Selection [](GLOSSARY.html) Model.'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 一个[GLOSSARY.html)选择模型的问题是它必须对领域模型的变化保持宽容。如果从领域模型中移除所选实体，则必须清除该实体的选择状态。这一点很重要，因为如果选择模型然后用于执行集体操作（例如，更改所有选定项的颜色），则将尝试对领域模型中不再存在的项目执行操作。添加操作也不免问题：选择模型可能必须调整大小以匹配领域模型，以便在查询新条目的选择状态时不会越界。修改可能会重新排序和使领域模型中的索引无效，使选择过时。最后，当领域模型和选择模型之间实现同步时，视图将被通知两次：一次是由于领域模型的更改，再次是由于选择模型的更改。
- en: invert [](GLOSSARY.html) selection, complex [](GLOSSARY.html) selections, select
    [](GLOSSARY.html) all, select [](GLOSSARY.html) none. If [](GLOSSARY.html) data
    [](GLOSSARY.html) is added, removed, or [](GLOSSARY.html) modified [](GLOSSARY.html)
    in [](GLOSSARY.html) the [](GLOSSARY.html) model, the [](GLOSSARY.html) Selection
    [](GLOSSARY.html) Model [](GLOSSARY.html) must [](GLOSSARY.html) respond accordingly.
    For [](GLOSSARY.html) example,
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 反选，复杂选择，全选，全不选。如果模型中添加、移除或修改数据，则选择模型必须相应地做出响应。例如，
- en: 'XXX : point [](GLOSSARY.html) out [](GLOSSARY.html) the [](GLOSSARY.html) importance
    [](GLOSSARY.html) of [](GLOSSARY.html) keeping [](GLOSSARY.html) the [](GLOSSARY.html)
    two [](GLOSSARY.html) states [](GLOSSARY.html) separate [](GLOSSARY.html) in [](GLOSSARY.html)
    the [](GLOSSARY.html) notification and [](GLOSSARY.html) the [](GLOSSARY.html)
    handling [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) two [](GLOSSARY.html)
    notifications [](GLOSSARY.html) should [](GLOSSARY.html) not [](GLOSSARY.html)
    overlap. Otherwise [](GLOSSARY.html) you [](GLOSSARY.html) will [](GLOSSARY.html)
    have double [](GLOSSARY.html) execution [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) same [](GLOSSARY.html) code [](GLOSSARY.html) which [](GLOSSARY.html)
    may [](GLOSSARY.html) be [](GLOSSARY.html) time [](GLOSSARY.html) consuming. Also
    [](GLOSSARY.html) note [](GLOSSARY.html) how [](GLOSSARY.html) the [](GLOSSARY.html)
    handling [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) second [](GLOSSARY.html)
    notification [](GLOSSARY.html) must [](GLOSSARY.html) consider [](GLOSSARY.html)
    the [](GLOSSARY.html) possibility [](GLOSSARY.html) that [](GLOSSARY.html) the
    two [](GLOSSARY.html) notifications [](GLOSSARY.html) are [](GLOSSARY.html) in
    [](GLOSSARY.html) an [](GLOSSARY.html) invalid [](GLOSSARY.html) order, and [](GLOSSARY.html)
    that [](GLOSSARY.html) could [](GLOSSARY.html) introduce [](GLOSSARY.html) unexpected
    [](GLOSSARY.html) content matching [](GLOSSARY.html) in [](GLOSSARY.html) the
    [](GLOSSARY.html) View (e.g. model [](GLOSSARY.html) notifies [](GLOSSARY.html)
    view [](GLOSSARY.html) then [](GLOSSARY.html) selection [](GLOSSARY.html) vs.
    model [](GLOSSARY.html) notifies [](GLOSSARY.html) selection [](GLOSSARY.html)
    then [](GLOSSARY.html) view)'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: XXX：指出保持通知中的两种状态分离的重要性，并且处理这两个通知不应该重叠。否则，您将会对相同代码进行双重执行，这可能会耗费时间。还要注意处理第二个通知时必须考虑到两个通知可能处于无效顺序的可能性，这可能会在视图中引入意外的内容匹配（例如，模型通知视图然后选择
    vs. 模型通知选择然后视图）。
- en: The [](GLOSSARY.html) selection [](GLOSSARY.html) model [](GLOSSARY.html) acts
    [](GLOSSARY.html) both [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html)
    View (for [](GLOSSARY.html) the [](GLOSSARY.html) other [](GLOSSARY.html) selectable
    [](GLOSSARY.html) model) and [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html)
    Model (for [](GLOSSARY.html) the [](GLOSSARY.html) view).
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 选择模型既充当视图（用于其他可选择模型）又充当模型（用于视图）。
- en: When [](GLOSSARY.html) the [](GLOSSARY.html) selection [](GLOSSARY.html) receives
    [](GLOSSARY.html) notification [](GLOSSARY.html) of [](GLOSSARY.html) change [](GLOSSARY.html)
    from [](GLOSSARY.html) its [](GLOSSARY.html) model, it [](GLOSSARY.html) needs
    [](GLOSSARY.html) to check [](GLOSSARY.html) if [](GLOSSARY.html) it's [](GLOSSARY.html)
    still [](GLOSSARY.html) consistent [](GLOSSARY.html) against [](GLOSSARY.html)
    it. If [](GLOSSARY.html) not, it [](GLOSSARY.html) needs [](GLOSSARY.html) to
    [](GLOSSARY.html) recover [](GLOSSARY.html) by [](GLOSSARY.html) invalidating
    its [](GLOSSARY.html) state.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 当 [](GLOSSARY.html) 选择 [](GLOSSARY.html) 从 [](GLOSSARY.html) 其 [](GLOSSARY.html)
    模型 [](GLOSSARY.html) 接收 [](GLOSSARY.html) 更改 [](GLOSSARY.html) 的 [](GLOSSARY.html)
    通知 [](GLOSSARY.html) 时，它 [](GLOSSARY.html) 需要 [](GLOSSARY.html) 检查 [](GLOSSARY.html)
    是否 [](GLOSSARY.html) 仍然 [](GLOSSARY.html) 与 [](GLOSSARY.html) 其 [](GLOSSARY.html)
    一致 [](GLOSSARY.html)。如果 [](GLOSSARY.html) 不是，它 [](GLOSSARY.html) 需要 [](GLOSSARY.html)
    通过 [](GLOSSARY.html) 使其 [](GLOSSARY.html) 状态 [](GLOSSARY.html) 无效来 [](GLOSSARY.html)
    恢复 [](GLOSSARY.html)。
- en: needs [](GLOSSARY.html) model [](GLOSSARY.html) to [](GLOSSARY.html) model [](GLOSSARY.html)
    communication [](GLOSSARY.html) to [](GLOSSARY.html) keep [](GLOSSARY.html) consistency,
    which [](GLOSSARY.html) becomes [](GLOSSARY.html) hard [](GLOSSARY.html) to [](GLOSSARY.html)
    maintain.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 需要 [](GLOSSARY.html) 模型 [](GLOSSARY.html) 与 [](GLOSSARY.html) 模型 [](GLOSSARY.html)
    之间的 [](GLOSSARY.html) 通信 [](GLOSSARY.html) 以 [](GLOSSARY.html) 保持 [](GLOSSARY.html)
    一致性，这变得 [](GLOSSARY.html) 难以 [](GLOSSARY.html) 维护。
- en: Point [](GLOSSARY.html) out [](GLOSSARY.html) what [](GLOSSARY.html) number
    [](GLOSSARY.html) of [](GLOSSARY.html) rpm [](GLOSSARY.html) is [](GLOSSARY.html)
    too [](GLOSSARY.html) high [](GLOSSARY.html) is [](GLOSSARY.html) domain [](GLOSSARY.html)
    logic, and [](GLOSSARY.html) what [](GLOSSARY.html) color [](GLOSSARY.html) it
    [](GLOSSARY.html) should [](GLOSSARY.html) be [](GLOSSARY.html) is [](GLOSSARY.html)
    view [](GLOSSARY.html) logic.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 指出 [](GLOSSARY.html) 什么 [](GLOSSARY.html) 数量 [](GLOSSARY.html) 的 [](GLOSSARY.html)
    rpm [](GLOSSARY.html) 是 [](GLOSSARY.html) 太 [](GLOSSARY.html) 高 [](GLOSSARY.html)
    的 [](GLOSSARY.html) 是 [](GLOSSARY.html) 领域 [](GLOSSARY.html) 逻辑，以及 [](GLOSSARY.html)
    什么 [](GLOSSARY.html) 颜色 [](GLOSSARY.html) 它 [](GLOSSARY.html) 应该 [](GLOSSARY.html)
    是 [](GLOSSARY.html) 是 [](GLOSSARY.html) 视图 [](GLOSSARY.html) 逻辑。
- en: UI Retrieving Model
  id: totrans-134
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: UI 检索模型
- en: UI Retrieving Model
  id: totrans-135
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: UI 检索模型
- en: Motivation
  id: totrans-136
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: An [](GLOSSARY.html) important [](GLOSSARY.html) constraint [](GLOSSARY.html)
    about [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) that [](GLOSSARY.html)
    we [](GLOSSARY.html) stressed [](GLOSSARY.html) throughout [](GLOSSARY.html) the
    [](GLOSSARY.html) book is [](GLOSSARY.html) that [](GLOSSARY.html) it [](GLOSSARY.html)
    should [](GLOSSARY.html) never [](GLOSSARY.html) be [](GLOSSARY.html) involved
    [](GLOSSARY.html) in [](GLOSSARY.html) GUI-related [](GLOSSARY.html) business.
    **UI [](GLOSSARY.html) Retrieving Model** breaks [](GLOSSARY.html) this [](GLOSSARY.html)
    rule.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 关于 [](GLOSSARY.html) 我们 [](GLOSSARY.html) 在 [](GLOSSARY.html) 整本书 [](GLOSSARY.html)
    中 [](GLOSSARY.html) 强调 [](GLOSSARY.html) 的 [](GLOSSARY.html) 模型 [](GLOSSARY.html)
    的 [](GLOSSARY.html) 一个 [](GLOSSARY.html) 重要 [](GLOSSARY.html) 约束 [](GLOSSARY.html)
    是 [](GLOSSARY.html) 它 [](GLOSSARY.html) 绝不 [](GLOSSARY.html) 参与 [](GLOSSARY.html)
    与 [](GLOSSARY.html) GUI 相关的 [](GLOSSARY.html) 业务。**UI [](GLOSSARY.html) 检索模型**
    打破了 [](GLOSSARY.html) 这个 [](GLOSSARY.html) 规则。
- en: Among [](GLOSSARY.html) a [](GLOSSARY.html) Model's [](GLOSSARY.html) task [](GLOSSARY.html)
    is [](GLOSSARY.html) the [](GLOSSARY.html) need [](GLOSSARY.html) to [](GLOSSARY.html)
    retrieve [](GLOSSARY.html) information [](GLOSSARY.html) from [](GLOSSARY.html)
    a [](GLOSSARY.html) data source, such [](GLOSSARY.html) as [](GLOSSARY.html) a
    [](GLOSSARY.html) file, memory, or [](GLOSSARY.html) database. In [](GLOSSARY.html)
    some [](GLOSSARY.html) cases, the [](GLOSSARY.html) Model may [](GLOSSARY.html)
    have [](GLOSSARY.html) to [](GLOSSARY.html) retrieve [](GLOSSARY.html) information
    [](GLOSSARY.html) that [](GLOSSARY.html) only [](GLOSSARY.html) a [](GLOSSARY.html)
    direct [](GLOSSARY.html) session [](GLOSSARY.html) with [](GLOSSARY.html) the
    [](GLOSSARY.html) User can [](GLOSSARY.html) provide. We [](GLOSSARY.html) can
    [](GLOSSARY.html) break [](GLOSSARY.html) the [](GLOSSARY.html) rules [](GLOSSARY.html)
    and [](GLOSSARY.html) let [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html)
    create [](GLOSSARY.html) a [](GLOSSARY.html) UI [](GLOSSARY.html) dialog to [](GLOSSARY.html)
    inquire [](GLOSSARY.html) the [](GLOSSARY.html) User [](GLOSSARY.html) for [](GLOSSARY.html)
    this [](GLOSSARY.html) information. In [](GLOSSARY.html) other [](GLOSSARY.html)
    words, the [](GLOSSARY.html) Model consider [](GLOSSARY.html) the [](GLOSSARY.html)
    User [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html) database, whose
    [](GLOSSARY.html) API [](GLOSSARY.html) involves [](GLOSSARY.html) the [](GLOSSARY.html)
    use [](GLOSSARY.html) of [](GLOSSARY.html) graphical [](GLOSSARY.html) widgets.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在模型的任务之一是从数据源（如文件、内存或数据库）检索信息。在某些情况下，模型可能必须检索只有与用户直接会话才能提供的信息。我们可以打破规则，让模型创建一个
    UI 对话框，询问用户这些信息。换句话说，模型将用户视为一个数据库，其 API 包括使用图形小部件。
- en: Design
  id: totrans-139
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: The [](GLOSSARY.html) interaction [](GLOSSARY.html) diagram [](GLOSSARY.html)
    design [](GLOSSARY.html) of [](GLOSSARY.html) a [](GLOSSARY.html) UI [](GLOSSARY.html)
    retrieving [](GLOSSARY.html) Model [](GLOSSARY.html) is [](GLOSSARY.html) depicted
    [](GLOSSARY.html) in [](GLOSSARY.html) Figure
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: UI 检索模型的交互图设计如图所示
- en: '![](ui_retrieving.png)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![](ui_retrieving.png)'
- en: The [](GLOSSARY.html) core [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    design [](GLOSSARY.html) is [](GLOSSARY.html) the [](GLOSSARY.html) short-lived
    `UserUI` object. In [](GLOSSARY.html) its [](GLOSSARY.html) most basic [](GLOSSARY.html)
    form [](GLOSSARY.html) this [](GLOSSARY.html) object [](GLOSSARY.html) is [](GLOSSARY.html)
    a [](GLOSSARY.html) modal [](GLOSSARY.html) dialog, prompted [](GLOSSARY.html)
    to [](GLOSSARY.html) the [](GLOSSARY.html) User [](GLOSSARY.html) and awaiting
    [](GLOSSARY.html) for [](GLOSSARY.html) input. The [](GLOSSARY.html) modal [](GLOSSARY.html)
    nature [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) dialog [](GLOSSARY.html)
    guarantees a [](GLOSSARY.html) synchronous [](GLOSSARY.html) handling [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) operation.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 设计的核心是短暂存在的`UserUI`对象。在其最基本形式中，此对象是模态对话框，提示用户并等待输入。对话框的模态性质确保了操作的同步处理。
- en: Once [](GLOSSARY.html) the [](GLOSSARY.html) dialog [](GLOSSARY.html) is [](GLOSSARY.html)
    closed, the [](GLOSSARY.html) value [](GLOSSARY.html) is [](GLOSSARY.html) gathered
    [](GLOSSARY.html) and [](GLOSSARY.html) returned to [](GLOSSARY.html) the [](GLOSSARY.html)
    requesting [](GLOSSARY.html) client. Depending [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) nature [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    retrieved information, it [](GLOSSARY.html) might [](GLOSSARY.html) be [](GLOSSARY.html)
    useful [](GLOSSARY.html) for [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html)
    to [](GLOSSARY.html) cache [](GLOSSARY.html) it [](GLOSSARY.html) instead of [](GLOSSARY.html)
    prompting [](GLOSSARY.html) the [](GLOSSARY.html) User [](GLOSSARY.html) again.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦对话框关闭，值将被收集并返回给请求的客户端。根据检索到的信息的性质，对于模型来说，将其缓存而不是再次提示用户可能会有所用处。
- en: Practical example
  id: totrans-144
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际例子
- en: One [](GLOSSARY.html) trivial [](GLOSSARY.html) example [](GLOSSARY.html) of
    [](GLOSSARY.html) this [](GLOSSARY.html) pattern [](GLOSSARY.html) would [](GLOSSARY.html)
    be [](GLOSSARY.html) a [](GLOSSARY.html) Model [](GLOSSARY.html) object [](GLOSSARY.html)
    representing the [](GLOSSARY.html) User [](GLOSSARY.html) session, with [](GLOSSARY.html)
    a [](GLOSSARY.html) password [](GLOSSARY.html) field [](GLOSSARY.html) initially
    [](GLOSSARY.html) set [](GLOSSARY.html) to `None`. When [](GLOSSARY.html) the
    program [](GLOSSARY.html) starts [](GLOSSARY.html) the [](GLOSSARY.html) session,
    it [](GLOSSARY.html) will [](GLOSSARY.html) ask [](GLOSSARY.html) for [](GLOSSARY.html)
    the [](GLOSSARY.html) credentials [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    Model [](GLOSSARY.html) layer. Asking [](GLOSSARY.html) the [](GLOSSARY.html)
    username [](GLOSSARY.html) will [](GLOSSARY.html) return [](GLOSSARY.html) the
    [](GLOSSARY.html) proper [](GLOSSARY.html) string, but [](GLOSSARY.html) asking
    [](GLOSSARY.html) the [](GLOSSARY.html) password [](GLOSSARY.html) may return
    [](GLOSSARY.html) None [](GLOSSARY.html) if [](GLOSSARY.html) no [](GLOSSARY.html)
    password [](GLOSSARY.html) has [](GLOSSARY.html) been [](GLOSSARY.html) set [](GLOSSARY.html)
    yet. The [](GLOSSARY.html) Model [](GLOSSARY.html) is [](GLOSSARY.html) then [](GLOSSARY.html)
    authorized to [](GLOSSARY.html) retrieve [](GLOSSARY.html) this [](GLOSSARY.html)
    information [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) User
    [](GLOSSARY.html) by [](GLOSSARY.html) a [](GLOSSARY.html) GUI [](GLOSSARY.html)
    dialog, maybe [](GLOSSARY.html) trying some [](GLOSSARY.html) non-interactive
    [](GLOSSARY.html) strategies [](GLOSSARY.html) first, like [](GLOSSARY.html) checking
    [](GLOSSARY.html) in [](GLOSSARY.html) a [](GLOSSARY.html) configuration [](GLOSSARY.html)
    file.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 此模式的一个微不足道的例子将是一个代表用户会话的模型对象，初始设置为`None`的密码字段。当程序启动会话时，它将向模型层请求凭据。询问用户名将返回正确的字符串，但询问密码可能会返回None，如果尚未设置密码。然后，模型被授权从用户检索此信息，通过GUI对话框，也许首先尝试一些非交互式策略，如检查配置文件中的信息。
- en: '[PRE16]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: When [](GLOSSARY.html) the [](GLOSSARY.html) user [](GLOSSARY.html) acts [](GLOSSARY.html)
    on [](GLOSSARY.html) the [](GLOSSARY.html) dialog, the [](GLOSSARY.html) Model
    [](GLOSSARY.html) stores [](GLOSSARY.html) the [](GLOSSARY.html) password [](GLOSSARY.html)
    and [](GLOSSARY.html) returns it [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    Presenter [](GLOSSARY.html) layer, which [](GLOSSARY.html) then [](GLOSSARY.html)
    proceeds [](GLOSSARY.html) with [](GLOSSARY.html) the [](GLOSSARY.html) authentication
    [](GLOSSARY.html) logic [](GLOSSARY.html) if the [](GLOSSARY.html) result [](GLOSSARY.html)
    is [](GLOSSARY.html) a [](GLOSSARY.html) string. If [](GLOSSARY.html) the [](GLOSSARY.html)
    password [](GLOSSARY.html) is [](GLOSSARY.html) found [](GLOSSARY.html) to [](GLOSSARY.html)
    be [](GLOSSARY.html) incorrect, the [](GLOSSARY.html) Controller will [](GLOSSARY.html)
    ask [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) to `clear_password()`,
    and [](GLOSSARY.html) the [](GLOSSARY.html) user [](GLOSSARY.html) will [](GLOSSARY.html)
    be [](GLOSSARY.html) prompted [](GLOSSARY.html) again.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 当用户在对话框上操作时，Model存储密码并将其返回给Presenter层，然后继续进行身份验证逻辑，如果结果是字符串。如果密码被发现不正确，Controller将要求Model`clear_password()`，然后用户将再次被提示。
- en: ModelController
  id: totrans-148
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ModelController
- en: ModelController
  id: totrans-149
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ModelController
- en: Motivation
  id: totrans-150
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: In [](GLOSSARY.html) some [](GLOSSARY.html) implementations, Model [](GLOSSARY.html)
    state [](GLOSSARY.html) may [](GLOSSARY.html) be [](GLOSSARY.html) small [](GLOSSARY.html)
    and [](GLOSSARY.html) only [](GLOSSARY.html) relevant for [](GLOSSARY.html) a
    [](GLOSSARY.html) specific [](GLOSSARY.html) View, making [](GLOSSARY.html) the
    [](GLOSSARY.html) split [](GLOSSARY.html) between [](GLOSSARY.html) Model [](GLOSSARY.html)
    and [](GLOSSARY.html) Controller classes [](GLOSSARY.html) excessive. Merging
    [](GLOSSARY.html) these [](GLOSSARY.html) classes [](GLOSSARY.html) leads [](GLOSSARY.html)
    to [](GLOSSARY.html) a **ModelController**, which [](GLOSSARY.html) can [](GLOSSARY.html)
    be [](GLOSSARY.html) seen [](GLOSSARY.html) as [](GLOSSARY.html) a "Model [](GLOSSARY.html)
    with [](GLOSSARY.html) GUI [](GLOSSARY.html) intelligence", or [](GLOSSARY.html)
    as [](GLOSSARY.html) a "Controller with [](GLOSSARY.html) state".
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些实现中，Model状态可能很小，并且只与特定的View相关，这使得Model和Controller类之间的分割过多。合并这些类会导致一个**ModelController**，它可以被视为一个"具有GUI智能的Model"，或者是一个"具有状态的Controller"。
- en: 'Compared [](GLOSSARY.html) to [](GLOSSARY.html) a [](GLOSSARY.html) traditional
    [](GLOSSARY.html) MVC [](GLOSSARY.html) solution, ModelController [](GLOSSARY.html)
    has [](GLOSSARY.html) the [](GLOSSARY.html) following disadvantages:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 与传统的MVC解决方案相比，ModelController具有以下缺点：
- en: As [](GLOSSARY.html) stated [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html)
    opening [](GLOSSARY.html) paragraph, it [](GLOSSARY.html) complicates [](GLOSSARY.html)
    handling [](GLOSSARY.html) of multiple [](GLOSSARY.html) Views
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如开头段落所述，它使得处理多个视图变得复杂。
- en: Potentially [](GLOSSARY.html) carries [](GLOSSARY.html) a [](GLOSSARY.html)
    dependency [](GLOSSARY.html) against [](GLOSSARY.html) the [](GLOSSARY.html) UI
    [](GLOSSARY.html) layer [](GLOSSARY.html) if, for [](GLOSSARY.html) example, needs
    [](GLOSSARY.html) to [](GLOSSARY.html) interpret [](GLOSSARY.html) pure [](GLOSSARY.html)
    UI [](GLOSSARY.html) events. This [](GLOSSARY.html) complicates its [](GLOSSARY.html)
    reuse [](GLOSSARY.html) outside [](GLOSSARY.html) of [](GLOSSARY.html) a [](GLOSSARY.html)
    UI [](GLOSSARY.html) application
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果需要解释纯粹的 UI 事件，它可能会对 UI 层带来依赖性。这会使得它在 UI 应用程序之外的重用变得复杂。
- en: It [](GLOSSARY.html) is [](GLOSSARY.html) generally [](GLOSSARY.html) less [](GLOSSARY.html)
    flexible, less [](GLOSSARY.html) reusable, and [](GLOSSARY.html) more [](GLOSSARY.html)
    complex [](GLOSSARY.html) to [](GLOSSARY.html) test [](GLOSSARY.html) for the
    [](GLOSSARY.html) reason [](GLOSSARY.html) give [](GLOSSARY.html) above.
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于上述原因，它通常不够灵活，不够可重用，并且更加复杂，以进行测试。
- en: 'The [](GLOSSARY.html) motivation [](GLOSSARY.html) for [](GLOSSARY.html) the
    [](GLOSSARY.html) first [](GLOSSARY.html) point [](GLOSSARY.html) is [](GLOSSARY.html)
    twofold: first, the [](GLOSSARY.html) Controller part [](GLOSSARY.html) would
    [](GLOSSARY.html) have [](GLOSSARY.html) to [](GLOSSARY.html) differentiate [](GLOSSARY.html)
    which [](GLOSSARY.html) View [](GLOSSARY.html) is [](GLOSSARY.html) sending [](GLOSSARY.html)
    an [](GLOSSARY.html) event. Second, different [](GLOSSARY.html) Views [](GLOSSARY.html)
    may [](GLOSSARY.html) have [](GLOSSARY.html) a [](GLOSSARY.html) different [](GLOSSARY.html)
    visual [](GLOSSARY.html) implementation [](GLOSSARY.html) and [](GLOSSARY.html)
    thus [](GLOSSARY.html) generate different [](GLOSSARY.html) types [](GLOSSARY.html)
    of [](GLOSSARY.html) events. The [](GLOSSARY.html) ModelController [](GLOSSARY.html)
    interface [](GLOSSARY.html) would [](GLOSSARY.html) have [](GLOSSARY.html) to
    accommodate [](GLOSSARY.html) nomenclature [](GLOSSARY.html) and [](GLOSSARY.html)
    behavior [](GLOSSARY.html) of [](GLOSSARY.html) all [](GLOSSARY.html) Views, leading
    [](GLOSSARY.html) to [](GLOSSARY.html) a [](GLOSSARY.html) bloated [](GLOSSARY.html)
    and complex [](GLOSSARY.html) interface.'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个要点的动机是双重的：首先，控制器部分必须区分是哪个视图发送了事件。其次，不同的视图可能具有不同的视觉实现，因此会生成不同类型的事件。ModelController
    接口必须适应所有视图的命名和行为，导致接口臃肿和复杂。
- en: A [](GLOSSARY.html) ModelController [](GLOSSARY.html) approach [](GLOSSARY.html)
    is [](GLOSSARY.html) not [](GLOSSARY.html) necessarily [](GLOSSARY.html) wrong,
    but [](GLOSSARY.html) tends [](GLOSSARY.html) to [](GLOSSARY.html) become brittle
    [](GLOSSARY.html) and [](GLOSSARY.html) carry [](GLOSSARY.html) excessive [](GLOSSARY.html)
    responsibility. It [](GLOSSARY.html) is [](GLOSSARY.html) therefore [](GLOSSARY.html)
    limited [](GLOSSARY.html) to straightforward [](GLOSSARY.html) cases.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: ModelController 方法并不一定是错误的，但倾向于变得脆弱，并且承担过多的责任。因此，它仅限于简单的情况。
- en: Design
  id: totrans-158
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: 'ModelController [](GLOSSARY.html) hosts [](GLOSSARY.html) the [](GLOSSARY.html)
    logic [](GLOSSARY.html) to [](GLOSSARY.html) manipulate [](GLOSSARY.html) its
    [](GLOSSARY.html) internal [](GLOSSARY.html) state in [](GLOSSARY.html) response
    [](GLOSSARY.html) to [](GLOSSARY.html) UI [](GLOSSARY.html) events, applying [](GLOSSARY.html)
    both [](GLOSSARY.html) consistency [](GLOSSARY.html) and [](GLOSSARY.html) business
    [](GLOSSARY.html) logic, while [](GLOSSARY.html) at [](GLOSSARY.html) the [](GLOSSARY.html)
    same [](GLOSSARY.html) time [](GLOSSARY.html) handling [](GLOSSARY.html) events
    [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) View:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: '[](GLOSSARY.html)ModelController[](GLOSSARY.html)承载逻辑，以响应UI事件操纵其内部状态，应用一致性和业务逻辑，同时处理来自View的事件：'
- en: The [](GLOSSARY.html) View [](GLOSSARY.html) dispatches [](GLOSSARY.html) UI
    [](GLOSSARY.html) events [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    ModelController
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[](GLOSSARY.html)View[](GLOSSARY.html)将UI事件分派给[](GLOSSARY.html)ModelController。'
- en: The [](GLOSSARY.html) ModelController [](GLOSSARY.html) alters [](GLOSSARY.html)
    its [](GLOSSARY.html) state [](GLOSSARY.html) and [](GLOSSARY.html) notifies [](GLOSSARY.html)
    the [](GLOSSARY.html) View [](GLOSSARY.html) of [](GLOSSARY.html) changes
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[](GLOSSARY.html)ModelController[](GLOSSARY.html)改变其状态并通知View变化。'
- en: The [](GLOSSARY.html) View [](GLOSSARY.html) requests [](GLOSSARY.html) the
    [](GLOSSARY.html) new [](GLOSSARY.html) state [](GLOSSARY.html) from [](GLOSSARY.html)
    the [](GLOSSARY.html) ModelController [](GLOSSARY.html) and [](GLOSSARY.html)
    updates [](GLOSSARY.html) itself.
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[](GLOSSARY.html)View[](GLOSSARY.html)从[](GLOSSARY.html)ModelController请求新的状态，并更新自身。'
- en: '![](model_controller.png)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![](model_controller.png)'
- en: Practical example
  id: totrans-164
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际例子
- en: Trivially, a [](GLOSSARY.html) ModelController [](GLOSSARY.html) class [](GLOSSARY.html)
    holds [](GLOSSARY.html) state, instead [](GLOSSARY.html) of [](GLOSSARY.html)
    delegating [](GLOSSARY.html) it to [](GLOSSARY.html) a [](GLOSSARY.html) Model
    [](GLOSSARY.html) object
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 简单地说，一个[](GLOSSARY.html)ModelController[](GLOSSARY.html)类保存状态，而不是将其委托给一个[](GLOSSARY.html)Model[](GLOSSARY.html)对象。
- en: '[PRE17]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: This [](GLOSSARY.html) pattern [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html)
    observed, for [](GLOSSARY.html) example, in [](GLOSSARY.html) Enthought [](GLOSSARY.html)
    Traits
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 这个[](GLOSSARY.html)模式[](GLOSSARY.html)可以在[](GLOSSARY.html)Enthought [](GLOSSARY.html)Traits中观察到。
- en: '[PRE18]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: The [](GLOSSARY.html) above [](GLOSSARY.html) code, thanks [](GLOSSARY.html)
    to [](GLOSSARY.html) the [](GLOSSARY.html) Traits/TraitsUI [](GLOSSARY.html) framework,
    produces [](GLOSSARY.html) a [](GLOSSARY.html) window [](GLOSSARY.html) containing
    [](GLOSSARY.html) an [](GLOSSARY.html) editable [](GLOSSARY.html) text [](GLOSSARY.html)
    field (showing [](GLOSSARY.html) the [](GLOSSARY.html) value [](GLOSSARY.html)
    zero) and [](GLOSSARY.html) a [](GLOSSARY.html) PushButton. Every [](GLOSSARY.html)
    time [](GLOSSARY.html) the [](GLOSSARY.html) button [](GLOSSARY.html) is [](GLOSSARY.html)
    pressed, the `_increment_btn_fired` handler is [](GLOSSARY.html) called. By [](GLOSSARY.html)
    design [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) class [](GLOSSARY.html)
    and [](GLOSSARY.html) the [](GLOSSARY.html) framework, the [](GLOSSARY.html) class
    [](GLOSSARY.html) is [](GLOSSARY.html) a [](GLOSSARY.html) ModelController [](GLOSSARY.html)
    because [](GLOSSARY.html) it [](GLOSSARY.html) holds both [](GLOSSARY.html) Model
    [](GLOSSARY.html) state (`value`) and [](GLOSSARY.html) Controller [](GLOSSARY.html)
    duties (`_increment_btn_fired`). Although [](GLOSSARY.html) invisible, validation
    [](GLOSSARY.html) logic [](GLOSSARY.html) is [](GLOSSARY.html) also [](GLOSSARY.html)
    performed [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html) ModelController
    [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html) Traits [](GLOSSARY.html)
    framework, which [](GLOSSARY.html) rejects [](GLOSSARY.html) values [](GLOSSARY.html)
    in [](GLOSSARY.html) the [](GLOSSARY.html) text [](GLOSSARY.html) field [](GLOSSARY.html)
    not [](GLOSSARY.html) conforming [](GLOSSARY.html) to [](GLOSSARY.html) an [](GLOSSARY.html)
    integer.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 上述代码，感谢Traits/TraitsUI框架，生成一个包含可编辑文本字段（显示值为零）和一个PushButton的窗口。每次按下按钮时，都会调用`_increment_btn_fired`处理程序。根据类和框架的设计，该类是一个ModelController，因为它既保存Model状态（`value`）又承担Controller职责（`_increment_btn_fired`）。虽然看不见，但验证逻辑也在ModelController中由Traits框架执行，拒绝不符合整数格式的文本字段中的值。
- en: Value Model
  id: totrans-170
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 值模型
- en: Value Model
  id: totrans-171
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 值模型
- en: Motivation
  id: totrans-172
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'A [](GLOSSARY.html) Value [](GLOSSARY.html) Model [](GLOSSARY.html) is [](GLOSSARY.html)
    an [](GLOSSARY.html) Adapter [](GLOSSARY.html) class [](GLOSSARY.html) extracting
    [](GLOSSARY.html) a [](GLOSSARY.html) single [](GLOSSARY.html) value [](GLOSSARY.html)
    from [](GLOSSARY.html) an [](GLOSSARY.html) adaptee (SubModel). The [](GLOSSARY.html)
    extracted [](GLOSSARY.html) value [](GLOSSARY.html) is [](GLOSSARY.html) exposed
    [](GLOSSARY.html) thought [](GLOSSARY.html) a [](GLOSSARY.html) uniform [](GLOSSARY.html)
    and [](GLOSSARY.html) trivial [](GLOSSARY.html) interface: a [](GLOSSARY.html)
    getter `ValueModel.value()`, a [](GLOSSARY.html) setter `ValueModel.set_value()`,
    and [](GLOSSARY.html) notification.'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 一个值模型是一个适配器类，从被适配者（SubModel）中提取单个值。提取的值通过统一且简单的接口暴露：一个getter `ValueModel.value()`，一个setter
    `ValueModel.set_value()`，以及通知。
- en: Views [](GLOSSARY.html) and [](GLOSSARY.html) Controllers [](GLOSSARY.html)
    using [](GLOSSARY.html) a [](GLOSSARY.html) Value [](GLOSSARY.html) Model [](GLOSSARY.html)
    can [](GLOSSARY.html) be [](GLOSSARY.html) extremely [](GLOSSARY.html) simple
    [](GLOSSARY.html) and off-the-shelf, provided [](GLOSSARY.html) that [](GLOSSARY.html)
    they [](GLOSSARY.html) can [](GLOSSARY.html) handle [](GLOSSARY.html) the [](GLOSSARY.html)
    Value [](GLOSSARY.html) Model [](GLOSSARY.html) interface. They [](GLOSSARY.html)
    can [](GLOSSARY.html) ignore [](GLOSSARY.html) the [](GLOSSARY.html) nature [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) adapted [](GLOSSARY.html) SubModel,
    leaving [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) Value Model
    [](GLOSSARY.html) the [](GLOSSARY.html) responsibility [](GLOSSARY.html) of [](GLOSSARY.html)
    taking [](GLOSSARY.html) care [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    details.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 使用值模型的视图和控制器可以非常简单和通用，只要它们能够处理值模型的接口。它们可以忽略适应的子模型的性质，将处理细节的责任留给值模型。
- en: Design
  id: totrans-175
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: The [](GLOSSARY.html) Value [](GLOSSARY.html) Model [](GLOSSARY.html) class
    [](GLOSSARY.html) acts [](GLOSSARY.html) as [](GLOSSARY.html) an [](GLOSSARY.html)
    adapter
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 值模型类充当适配器
- en: '![](value_model.png)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![](value_model.png)'
- en: 'A [](GLOSSARY.html) trivial [](GLOSSARY.html) implementation [](GLOSSARY.html)
    of [](GLOSSARY.html) a [](GLOSSARY.html) Value [](GLOSSARY.html) Model [](GLOSSARY.html)
    would [](GLOSSARY.html) be:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 一个[](GLOSSARY.html)简单的[](GLOSSARY.html)值模型[](GLOSSARY.html)的实现可能是：
- en: '[PRE19]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Many [](GLOSSARY.html) different [](GLOSSARY.html) Value [](GLOSSARY.html) Model
    [](GLOSSARY.html) classes [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html)
    implemented, each [](GLOSSARY.html) one adapting [](GLOSSARY.html) a [](GLOSSARY.html)
    different [](GLOSSARY.html) SubModel, or [](GLOSSARY.html) operating [](GLOSSARY.html)
    over [](GLOSSARY.html) different [](GLOSSARY.html) parts [](GLOSSARY.html) of
    [](GLOSSARY.html) a [](GLOSSARY.html) SubModel. Views [](GLOSSARY.html) and [](GLOSSARY.html)
    Controllers [](GLOSSARY.html) interact [](GLOSSARY.html) with [](GLOSSARY.html)
    the [](GLOSSARY.html) Value [](GLOSSARY.html) Models [](GLOSSARY.html) through
    [](GLOSSARY.html) the [](GLOSSARY.html) minimalist [](GLOSSARY.html) interface,
    and [](GLOSSARY.html) are [](GLOSSARY.html) therefore [](GLOSSARY.html) agnostic
    [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) Value [](GLOSSARY.html)
    Model [](GLOSSARY.html) used.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 许多不同的[](GLOSSARY.html)值模型[](GLOSSARY.html)类可以被实现，每一个都适应不同的子模型，或者在子模型的不同部分操作。视图和控制器通过极简的接口与值模型交互，因此对使用的值模型不可知。
- en: Practical Example
  id: totrans-181
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际示例
- en: 'One [](GLOSSARY.html) could [](GLOSSARY.html) adapt [](GLOSSARY.html) a `Customer`
    object [](GLOSSARY.html) through [](GLOSSARY.html) two [](GLOSSARY.html) Value
    [](GLOSSARY.html) Models: `NameValueModel` and `SurnameValueModel`.'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 通过两个值模型：`NameValueModel` 和 `SurnameValueModel`，一个[](GLOSSARY.html)可以[](GLOSSARY.html)适应一个`Customer`对象。
- en: '[PRE20]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Each [](GLOSSARY.html) of [](GLOSSARY.html) these [](GLOSSARY.html) two [](GLOSSARY.html)
    ValueModels [](GLOSSARY.html) can [](GLOSSARY.html) use [](GLOSSARY.html) an [](GLOSSARY.html)
    off-the-shelf `StringWidget` View, agnostic [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) actual [](GLOSSARY.html) nature [](GLOSSARY.html) of [](GLOSSARY.html)
    the `Customer` model [](GLOSSARY.html) and [](GLOSSARY.html) retrieving/modifying
    [](GLOSSARY.html) data [](GLOSSARY.html) through [](GLOSSARY.html) the Value [](GLOSSARY.html)
    Model [](GLOSSARY.html) interface.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 每个[](GLOSSARY.html)这两个[](GLOSSARY.html)ValueModels[](GLOSSARY.html)可以使用现成的`StringWidget`视图，与实际的`Customer`模型的性质无关，并通过Value
    Model接口检索/修改数据。
- en: Proxy Model
  id: totrans-185
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 代理模型
- en: Proxy Model
  id: totrans-186
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 代理模型
- en: '* * *'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '**Note**: In [](GLOSSARY.html) the [](GLOSSARY.html) context [](GLOSSARY.html)
    of [](GLOSSARY.html) Qt [](GLOSSARY.html) MVC, a [](GLOSSARY.html) Proxy [](GLOSSARY.html)
    Model [](GLOSSARY.html) is [](GLOSSARY.html) a [](GLOSSARY.html) Model [](GLOSSARY.html)
    Pipe [](GLOSSARY.html) design. Django [](GLOSSARY.html) also [](GLOSSARY.html)
    defines [](GLOSSARY.html) a [](GLOSSARY.html) Proxy [](GLOSSARY.html) Model [](GLOSSARY.html)
    concept, but [](GLOSSARY.html) it [](GLOSSARY.html) is [](GLOSSARY.html) unrelated
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) one expressed [](GLOSSARY.html)
    here: the [](GLOSSARY.html) application [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) Proxy [](GLOSSARY.html) design [](GLOSSARY.html) pattern
    [](GLOSSARY.html) to [](GLOSSARY.html) a [](GLOSSARY.html) Model [](GLOSSARY.html)
    object.'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: '**注意**：在Qt MVC的上下文中，代理模型是一种模型管道设计。Django也定义了代理模型的概念，但与此处表达的概念无关：将代理设计模式应用于模型对象。'
- en: '* * *'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: Motivation
  id: totrans-190
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'We [](GLOSSARY.html) want [](GLOSSARY.html) to [](GLOSSARY.html) access [](GLOSSARY.html)
    an [](GLOSSARY.html) external [](GLOSSARY.html) resource, such [](GLOSSARY.html)
    as [](GLOSSARY.html) one [](GLOSSARY.html) provided [](GLOSSARY.html) by [](GLOSSARY.html)
    an [](GLOSSARY.html) HTTP server [](GLOSSARY.html) or [](GLOSSARY.html) a [](GLOSSARY.html)
    database. Proxy [](GLOSSARY.html) Model [](GLOSSARY.html) encapsulate [](GLOSSARY.html)
    the [](GLOSSARY.html) logic [](GLOSSARY.html) needed [](GLOSSARY.html) to [](GLOSSARY.html)
    access the [](GLOSSARY.html) remote [](GLOSSARY.html) service, specifically:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 我们希望访问外部资源，比如由HTTP服务器或数据库提供的资源。代理模型封装了访问远程服务所需的逻辑，具体包括：
- en: Issue [](GLOSSARY.html) the [](GLOSSARY.html) request [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) remote [](GLOSSARY.html) service
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发出请求到远程服务
- en: Handle [](GLOSSARY.html) error [](GLOSSARY.html) conditions
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 处理错误条件
- en: Convert [](GLOSSARY.html) received [](GLOSSARY.html) data [](GLOSSARY.html)
    into [](GLOSSARY.html) a [](GLOSSARY.html) representation [](GLOSSARY.html) useful
    [](GLOSSARY.html) for [](GLOSSARY.html) the [](GLOSSARY.html) client [](GLOSSARY.html)
    code.
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将接收到的数据转换为对客户端代码有用的表示形式。
- en: 'Additionally, the [](GLOSSARY.html) Proxy [](GLOSSARY.html) Model [](GLOSSARY.html)
    can:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 另外，代理模型可以：
- en: Throttle [](GLOSSARY.html) an [](GLOSSARY.html) excessive [](GLOSSARY.html)
    number [](GLOSSARY.html) of [](GLOSSARY.html) requests [](GLOSSARY.html) in [](GLOSSARY.html)
    a [](GLOSSARY.html) short [](GLOSSARY.html) amount [](GLOSSARY.html) of [](GLOSSARY.html)
    time
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在短时间内限制过多的请求次数
- en: Cache [](GLOSSARY.html) obtained [](GLOSSARY.html) results [](GLOSSARY.html)
    and [](GLOSSARY.html) manage [](GLOSSARY.html) the [](GLOSSARY.html) cache [](GLOSSARY.html)
    expiration
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缓存[](GLOSSARY.html)获取的[](GLOSSARY.html)结果，并[](GLOSSARY.html)管理[](GLOSSARY.html)缓存[](GLOSSARY.html)过期
- en: Observe [](GLOSSARY.html) the [](GLOSSARY.html) remote [](GLOSSARY.html) service
    [](GLOSSARY.html) for [](GLOSSARY.html) changes, for [](GLOSSARY.html) example
    [](GLOSSARY.html) through polling [](GLOSSARY.html) on [](GLOSSARY.html) a [](GLOSSARY.html)
    secondary [](GLOSSARY.html) thread.
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 观察远程服务的变化，例如通过在辅助线程上进行轮询。
- en: Design
  id: totrans-199
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: The [](GLOSSARY.html) design [](GLOSSARY.html) of [](GLOSSARY.html) a [](GLOSSARY.html)
    Proxy [](GLOSSARY.html) Model [](GLOSSARY.html) is [](GLOSSARY.html) generally
    [](GLOSSARY.html) dependent [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html)
    service [](GLOSSARY.html) it represents. Interfaces [](GLOSSARY.html) are [](GLOSSARY.html)
    designed [](GLOSSARY.html) to [](GLOSSARY.html) comply [](GLOSSARY.html) with
    [](GLOSSARY.html) the [](GLOSSARY.html) abstraction [](GLOSSARY.html) of [](GLOSSARY.html)
    the remote [](GLOSSARY.html) service. When [](GLOSSARY.html) the [](GLOSSARY.html)
    client [](GLOSSARY.html) code [](GLOSSARY.html) asks [](GLOSSARY.html) for [](GLOSSARY.html)
    data, the [](GLOSSARY.html) Model [](GLOSSARY.html) issues [](GLOSSARY.html) the
    appropriate [](GLOSSARY.html) request [](GLOSSARY.html) to [](GLOSSARY.html) the
    [](GLOSSARY.html) service [](GLOSSARY.html) provider. Client [](GLOSSARY.html)
    code [](GLOSSARY.html) is [](GLOSSARY.html) generally unaware [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) exact [](GLOSSARY.html) nature [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) backend [](GLOSSARY.html) exposed [](GLOSSARY.html)
    by [](GLOSSARY.html) the [](GLOSSARY.html) Proxy [](GLOSSARY.html) Model.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 代理模型的设计通常取决于其所代表的服务。接口设计遵循远程服务的抽象。当客户端代码请求数据时，模型向服务提供者发出相应的请求。客户端代码通常不知道代理模型暴露的后端的确切性质。
- en: '![](proxy_model.png)'
  id: totrans-201
  prefs: []
  type: TYPE_IMG
  zh: '![](proxy_model.png)'
- en: When [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) implements
    [](GLOSSARY.html) SQL [](GLOSSARY.html) access [](GLOSSARY.html) to [](GLOSSARY.html)
    a [](GLOSSARY.html) specific [](GLOSSARY.html) database [](GLOSSARY.html) table,
    the [](GLOSSARY.html) resulting Proxy [](GLOSSARY.html) Model [](GLOSSARY.html)
    is [](GLOSSARY.html) normally [](GLOSSARY.html) called **Table [](GLOSSARY.html)
    Data [](GLOSSARY.html) Gateway**. An [](GLOSSARY.html) instance [](GLOSSARY.html)
    of [](GLOSSARY.html) this [](GLOSSARY.html) Model represents [](GLOSSARY.html)
    the [](GLOSSARY.html) backend [](GLOSSARY.html) database [](GLOSSARY.html) Table
    [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html) whole, not [](GLOSSARY.html)
    a [](GLOSSARY.html) specific [](GLOSSARY.html) row, and [](GLOSSARY.html) its
    methods [](GLOSSARY.html) provide [](GLOSSARY.html) access [](GLOSSARY.html) to
    [](GLOSSARY.html) CRUD [](GLOSSARY.html) operations.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 当模型实现对特定数据库表的 SQL 访问时，生成的代理模型通常称为**表数据网关**。该模型的实例表示整个后端数据库表，而不是特定行，其方法提供对 CRUD
    操作的访问。
- en: 'Practical example: Django Models'
  id: totrans-203
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际例子：Django 模型
- en: A [](GLOSSARY.html) simple [](GLOSSARY.html) Django [](GLOSSARY.html) Model
    [](GLOSSARY.html) provides [](GLOSSARY.html) an [](GLOSSARY.html) example [](GLOSSARY.html)
    of [](GLOSSARY.html) a [](GLOSSARY.html) Proxy [](GLOSSARY.html) Model.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 一个简单的 Django 模型提供了代理模型的示例。
- en: '[PRE21]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: For [](GLOSSARY.html) the [](GLOSSARY.html) class [](GLOSSARY.html) definition
    [](GLOSSARY.html) given [](GLOSSARY.html) above, Django's [](GLOSSARY.html) internals
    [](GLOSSARY.html) create [](GLOSSARY.html) a [](GLOSSARY.html) SQL [](GLOSSARY.html)
    table whose [](GLOSSARY.html) columns [](GLOSSARY.html) are [](GLOSSARY.html)
    defined [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html) class [](GLOSSARY.html)
    properties (`first_name` and `last_name`). Instances [](GLOSSARY.html) of [](GLOSSARY.html)
    the `Person` class [](GLOSSARY.html) are [](GLOSSARY.html) represented [](GLOSSARY.html)
    as [](GLOSSARY.html) table [](GLOSSARY.html) rows.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 对于上面给定的类定义，Django的内部会创建一个SQL表，其列由类属性（`first_name`和`last_name`）定义。`Person`类的实例表示为表行。
- en: The [](GLOSSARY.html) Person [](GLOSSARY.html) class [](GLOSSARY.html) can [](GLOSSARY.html)
    be [](GLOSSARY.html) instantiated, stored [](GLOSSARY.html) in [](GLOSSARY.html)
    the [](GLOSSARY.html) database, modified, or used [](GLOSSARY.html) to [](GLOSSARY.html)
    retrieve [](GLOSSARY.html) an [](GLOSSARY.html) already [](GLOSSARY.html) present
    [](GLOSSARY.html) instance.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: '`Person`类可以实例化，存储在数据库中，修改或用于检索已经存在的实例。'
- en: '[PRE22]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Under [](GLOSSARY.html) the [](GLOSSARY.html) hood, the [](GLOSSARY.html) Django
    [](GLOSSARY.html) Model [](GLOSSARY.html) implementation [](GLOSSARY.html) converts
    [](GLOSSARY.html) the [](GLOSSARY.html) operations [](GLOSSARY.html) into [](GLOSSARY.html)
    SQL [](GLOSSARY.html) statements.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 在底层，Django模型实现将操作转换为SQL语句。
- en: 'Practical example: Thrift services'
  id: totrans-210
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际示例：Thrift服务
- en: Another [](GLOSSARY.html) example [](GLOSSARY.html) of [](GLOSSARY.html) Proxy
    [](GLOSSARY.html) Model [](GLOSSARY.html) is [](GLOSSARY.html) provided [](GLOSSARY.html)
    by [](GLOSSARY.html) Thrift, a [](GLOSSARY.html) cross-language [](GLOSSARY.html)
    Remote [](GLOSSARY.html) Procedure [](GLOSSARY.html) Call framework. An [](GLOSSARY.html)
    Interface [](GLOSSARY.html) Definition [](GLOSSARY.html) Language [](GLOSSARY.html)
    specifies [](GLOSSARY.html) the [](GLOSSARY.html) interface [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) remote [](GLOSSARY.html) service
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: Thrift提供了另一个代理模型的示例，它是一个跨语言的远程过程调用框架。接口定义语言指定了远程服务的接口
- en: '[PRE23]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: which [](GLOSSARY.html) is [](GLOSSARY.html) compiled [](GLOSSARY.html) into
    [](GLOSSARY.html) python [](GLOSSARY.html) to [](GLOSSARY.html) generate [](GLOSSARY.html)
    the [](GLOSSARY.html) following [](GLOSSARY.html) code
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 将其编译为Python以生成以下代码
- en: '[PRE24]'
  id: totrans-214
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: The [](GLOSSARY.html) above [](GLOSSARY.html) Proxy [](GLOSSARY.html) handles
    [](GLOSSARY.html) the [](GLOSSARY.html) complexity [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) network [](GLOSSARY.html) exchange, providing [](GLOSSARY.html)
    a [](GLOSSARY.html) simple [](GLOSSARY.html) interface [](GLOSSARY.html) to client
    [](GLOSSARY.html) code
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 上述代理处理了网络交换的复杂性，为客户端代码提供了简单的接口
- en: '[PRE25]'
  id: totrans-216
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: References
  id: totrans-217
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 参考
- en: Martin [](GLOSSARY.html) Fowler, "Patterns [](GLOSSARY.html) of [](GLOSSARY.html)
    Enterprise [](GLOSSARY.html) Application [](GLOSSARY.html) Architecture". Addison-Wesley,
    2003.
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Martin Fowler，“企业应用架构模式”。Addison-Wesley，2003年。
- en: Django - [https://www.djangoproject.com/](https://www.djangoproject.com/)
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Django - [https://www.djangoproject.com/](https://www.djangoproject.com/)
- en: Apache [](GLOSSARY.html) Thrift - [https://thrift.apache.org/](https://thrift.apache.org/)
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Apache Thrift - [https://thrift.apache.org/](https://thrift.apache.org/)
- en: Collection Model
  id: totrans-221
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 集合模型
- en: Collection Model
  id: totrans-222
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 集合模型
- en: Motivation
  id: totrans-223
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'A [](GLOSSARY.html) Collection [](GLOSSARY.html) Model [](GLOSSARY.html) is
    [](GLOSSARY.html) an [](GLOSSARY.html) open-ended [](GLOSSARY.html) container
    [](GLOSSARY.html) of [](GLOSSARY.html) SubModels. It [](GLOSSARY.html) is similar
    [](GLOSSARY.html) in [](GLOSSARY.html) concept [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) Compositing [](GLOSSARY.html) Model, but [](GLOSSARY.html)
    the [](GLOSSARY.html) similarities [](GLOSSARY.html) are [](GLOSSARY.html) only
    apparent. A [](GLOSSARY.html) Compositing [](GLOSSARY.html) Model:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 集合模型是子模型的一个开放式容器。它在概念上类似于合成模型，但相似之处仅在表面上。合成模型：
- en: might [](GLOSSARY.html) be [](GLOSSARY.html) tailored [](GLOSSARY.html) to [](GLOSSARY.html)
    a [](GLOSSARY.html) specific [](GLOSSARY.html) number [](GLOSSARY.html) of [](GLOSSARY.html)
    SubModels.
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可能定制为特定数量的子模型。
- en: might [](GLOSSARY.html) hold [](GLOSSARY.html) SubModels [](GLOSSARY.html) of
    [](GLOSSARY.html) different [](GLOSSARY.html) types, handling [](GLOSSARY.html)
    and [](GLOSSARY.html) smoothing [](GLOSSARY.html) out their [](GLOSSARY.html)
    differences.
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可能持有不同类型的子模型，处理和平滑它们的差异。
- en: aims [](GLOSSARY.html) at [](GLOSSARY.html) unifying [](GLOSSARY.html) data
    [](GLOSSARY.html) coming [](GLOSSARY.html) from [](GLOSSARY.html) its [](GLOSSARY.html)
    SubModels, so [](GLOSSARY.html) that their [](GLOSSARY.html) differences [](GLOSSARY.html)
    and [](GLOSSARY.html) separation [](GLOSSARY.html) are [](GLOSSARY.html) hidden
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) View.
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 目的是统一来自其子模型的数据，以便它们的差异和分离对视图隐藏。
- en: 'On [](GLOSSARY.html) the [](GLOSSARY.html) other [](GLOSSARY.html) hand, a
    [](GLOSSARY.html) Collection [](GLOSSARY.html) Model:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，集合模型：
- en: Is [](GLOSSARY.html) an [](GLOSSARY.html) open-ended, potentially [](GLOSSARY.html)
    empty [](GLOSSARY.html) list [](GLOSSARY.html) of [](GLOSSARY.html) SubModels.
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是一个开放的、潜在为空的子模型列表。
- en: The [](GLOSSARY.html) contained [](GLOSSARY.html) SubModels [](GLOSSARY.html)
    are [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) same [](GLOSSARY.html)
    type.
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 包含的子模型是相同类型的。
- en: The [](GLOSSARY.html) Collection [](GLOSSARY.html) and [](GLOSSARY.html) its
    [](GLOSSARY.html) SubModels [](GLOSSARY.html) have [](GLOSSARY.html) independent
    [](GLOSSARY.html) nature [](GLOSSARY.html) and [](GLOSSARY.html) the objective
    [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) Collection [](GLOSSARY.html)
    is [](GLOSSARY.html) not [](GLOSSARY.html) to [](GLOSSARY.html) hide [](GLOSSARY.html)
    the [](GLOSSARY.html) intrinsic [](GLOSSARY.html) separation [](GLOSSARY.html)
    of [](GLOSSARY.html) the SubModels, rather [](GLOSSARY.html) to [](GLOSSARY.html)
    refer [](GLOSSARY.html) to [](GLOSSARY.html) them [](GLOSSARY.html) as [](GLOSSARY.html)
    a [](GLOSSARY.html) group.
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 集合及其子模型具有独立的性质，集合的目标不是隐藏子模型的内在分离，而是将它们视为一组。
- en: A [](GLOSSARY.html) trivial [](GLOSSARY.html) example [](GLOSSARY.html) of [](GLOSSARY.html)
    a [](GLOSSARY.html) Collection [](GLOSSARY.html) Model [](GLOSSARY.html) is [](GLOSSARY.html)
    an `Album` containing `Song` objects.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 集合模型的一个微不足道的例子是包含`Song`对象的`Album`。
- en: Design
  id: totrans-233
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: The [](GLOSSARY.html) Collection [](GLOSSARY.html) Model [](GLOSSARY.html) is
    [](GLOSSARY.html) designed [](GLOSSARY.html) to [](GLOSSARY.html) notify [](GLOSSARY.html)
    its [](GLOSSARY.html) listeners when [](GLOSSARY.html) a [](GLOSSARY.html) SubModel
    [](GLOSSARY.html) is [](GLOSSARY.html) added, removed, or [](GLOSSARY.html) moved.
    In [](GLOSSARY.html) some [](GLOSSARY.html) cases, the [](GLOSSARY.html) collection
    [](GLOSSARY.html) model [](GLOSSARY.html) can [](GLOSSARY.html) also [](GLOSSARY.html)
    notify [](GLOSSARY.html) listeners [](GLOSSARY.html) when [](GLOSSARY.html) any
    [](GLOSSARY.html) of [](GLOSSARY.html) its SubModels [](GLOSSARY.html) changes.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 集合模型 [被设计为](GLOSSARY.html) 当 [添加](GLOSSARY.html)、 [删除](GLOSSARY.html) 或 [移动](GLOSSARY.html)
    子模型时 [通知](GLOSSARY.html) 其 [侦听器](GLOSSARY.html)。 在 [某些](GLOSSARY.html) 情况下， [集合](GLOSSARY.html)
    模型 还可以 [通知](GLOSSARY.html) 侦听器 [任何](GLOSSARY.html) 其 [子模型](GLOSSARY.html) 发生了
    更改。
- en: '![](collection_model.png)'
  id: totrans-235
  prefs: []
  type: TYPE_IMG
  zh: '![](collection_model.png)'
- en: More [](GLOSSARY.html) complex [](GLOSSARY.html) implementations [](GLOSSARY.html)
    may [](GLOSSARY.html) want [](GLOSSARY.html) to [](GLOSSARY.html) provide [](GLOSSARY.html)
    events [](GLOSSARY.html) and [](GLOSSARY.html) an [](GLOSSARY.html) interface
    for [](GLOSSARY.html) bulk [](GLOSSARY.html) addition, bulk [](GLOSSARY.html)
    removal, or [](GLOSSARY.html) bulk [](GLOSSARY.html) move [](GLOSSARY.html) of
    [](GLOSSARY.html) SubModels. Qualified messages [](GLOSSARY.html) can [](GLOSSARY.html)
    inform [](GLOSSARY.html) the [](GLOSSARY.html) listeners [](GLOSSARY.html) what
    [](GLOSSARY.html) kind [](GLOSSARY.html) of [](GLOSSARY.html) change [](GLOSSARY.html)
    has [](GLOSSARY.html) occurred, and which [](GLOSSARY.html) SubModels [](GLOSSARY.html)
    were [](GLOSSARY.html) affected.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 更 [复杂](GLOSSARY.html) 的 [实现](GLOSSARY.html) 可能想要提供 [事件](GLOSSARY.html) 和 [界面](GLOSSARY.html)
    用于 [批量](GLOSSARY.html) 添加、批量删除，或者 [批量移动](GLOSSARY.html) 子模型。 [合格](GLOSSARY.html)
    的 [消息](GLOSSARY.html) 可以 [通知](GLOSSARY.html) [侦听器](GLOSSARY.html) 发生了什么 [类型的](GLOSSARY.html)
    更改，以及 [哪些](GLOSSARY.html) 子模型 [受到](GLOSSARY.html) 影响。
- en: Practical Example
  id: totrans-237
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际 [例子](GLOSSARY.html)
- en: Backbone.js [](GLOSSARY.html) Collection [](GLOSSARY.html) implements [](GLOSSARY.html)
    a [](GLOSSARY.html) Collection [](GLOSSARY.html) Model. The [](GLOSSARY.html)
    following [](GLOSSARY.html) code represents [](GLOSSARY.html) an [](GLOSSARY.html)
    example [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) API [](GLOSSARY.html)
    described [](GLOSSARY.html) above
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: Backbone.js [缓存模型](GLOSSARY.html) 集合 [实现](GLOSSARY.html)了 [集合](GLOSSARY.html)
    模型。下面的 [代码](GLOSSARY.html) 代表了上面描述的 [API](GLOSSARY.html) 的 [示例](GLOSSARY.html)。
- en: '[PRE26]'
  id: totrans-239
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: References
  id: totrans-240
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 参考资料
- en: Backbone.js - [http://backbonejs.org/](http://backbonejs.org/)
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Backbone.js - [http://backbonejs.org/](http://backbonejs.org/)
- en: Caching Model
  id: totrans-242
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 缓存模型
- en: Caching Model
  id: totrans-243
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 缓存模型
- en: Motivation
  id: totrans-244
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: Models [](GLOSSARY.html) may [](GLOSSARY.html) want [](GLOSSARY.html) to [](GLOSSARY.html)
    cache [](GLOSSARY.html) information [](GLOSSARY.html) when [](GLOSSARY.html) acting
    [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html) proxy [](GLOSSARY.html)
    for data [](GLOSSARY.html) sources [](GLOSSARY.html) that [](GLOSSARY.html) are
    [](GLOSSARY.html) slow, unreliable, or [](GLOSSARY.html) have [](GLOSSARY.html)
    an [](GLOSSARY.html) access [](GLOSSARY.html) quota or [](GLOSSARY.html) cost.
    Typical [](GLOSSARY.html) examples [](GLOSSARY.html) are [](GLOSSARY.html) network
    [](GLOSSARY.html) services, databases, disk access, or [](GLOSSARY.html) when
    [](GLOSSARY.html) the [](GLOSSARY.html) information [](GLOSSARY.html) is [](GLOSSARY.html)
    obtained [](GLOSSARY.html) from [](GLOSSARY.html) long-running computations.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 当 [作为](GLOSSARY.html) 数据 [源的](GLOSSARY.html) 代理 [时，](GLOSSARY.html) 模型 [可能](GLOSSARY.html)
    想要 [缓存](GLOSSARY.html) 信息，这些数据源可能 [是](GLOSSARY.html) 缓慢、不可靠的，或者 [有](GLOSSARY.html)
    访问 [限制](GLOSSARY.html) 或 [成本](GLOSSARY.html)。 [典型](GLOSSARY.html) 的 [例子](GLOSSARY.html)
    包括 [网络](GLOSSARY.html) 服务、数据库、磁盘访问，或者 当信息是 通过 [长时间运行的计算](GLOSSARY.html) 获取时。
- en: 'Using [](GLOSSARY.html) a [](GLOSSARY.html) cache [](GLOSSARY.html) generally
    [](GLOSSARY.html) delivers [](GLOSSARY.html) the [](GLOSSARY.html) following [](GLOSSARY.html)
    advantages:'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 通常使用 [缓存](GLOSSARY.html) 会带来以下 [优势](GLOSSARY.html)：
- en: Gives [](GLOSSARY.html) a [](GLOSSARY.html) faster [](GLOSSARY.html) response
    [](GLOSSARY.html) after [](GLOSSARY.html) the [](GLOSSARY.html) first [](GLOSSARY.html)
    access, improving the [](GLOSSARY.html) perceived [](GLOSSARY.html) performance
    [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) application
  id: totrans-247
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在第一次访问后给出更快的响应，提高应用程序的感知性能
- en: Neutralizes [](GLOSSARY.html) potential [](GLOSSARY.html) temporary [](GLOSSARY.html)
    failures [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) data [](GLOSSARY.html)
    source, improving [](GLOSSARY.html) perceived [](GLOSSARY.html) reliability
  id: totrans-248
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 中和数据源潜在的临时故障，提高可感知的可靠性
- en: When [](GLOSSARY.html) accessing [](GLOSSARY.html) a [](GLOSSARY.html) remote
    [](GLOSSARY.html) resource, prevents [](GLOSSARY.html) repeated [](GLOSSARY.html)
    and [](GLOSSARY.html) frequent requests [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) resource. Failure [](GLOSSARY.html) to [](GLOSSARY.html)
    implement [](GLOSSARY.html) caching [](GLOSSARY.html) in [](GLOSSARY.html) this
    [](GLOSSARY.html) case generally [](GLOSSARY.html) leads [](GLOSSARY.html) to
    [](GLOSSARY.html) a [](GLOSSARY.html) security [](GLOSSARY.html) response [](GLOSSARY.html)
    from [](GLOSSARY.html) the [](GLOSSARY.html) administrators [](GLOSSARY.html)
    of [](GLOSSARY.html) the remote [](GLOSSARY.html) resource (e.g. throttling, or
    [](GLOSSARY.html) denied [](GLOSSARY.html) access).
  id: totrans-249
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当访问远程资源时，防止对资源的重复和频繁请求。在这种情况下未实现缓存通常会导致远程资源的管理员做出安全响应（例如限流或拒绝访问）。
- en: 'However, caching [](GLOSSARY.html) comes [](GLOSSARY.html) with [](GLOSSARY.html)
    a [](GLOSSARY.html) set [](GLOSSARY.html) of [](GLOSSARY.html) liabilities:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，缓存带来一系列责任：
- en: Increases [](GLOSSARY.html) memory [](GLOSSARY.html) footprint [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) application [](GLOSSARY.html) to [](GLOSSARY.html)
    store [](GLOSSARY.html) the [](GLOSSARY.html) cached [](GLOSSARY.html) data
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加应用程序的内存占用以存储缓存数据
- en: The [](GLOSSARY.html) Model [](GLOSSARY.html) may [](GLOSSARY.html) return [](GLOSSARY.html)
    outdated [](GLOSSARY.html) information [](GLOSSARY.html) to [](GLOSSARY.html)
    its [](GLOSSARY.html) client
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模型可能向其客户返回过时的信息
- en: In [](GLOSSARY.html) multi-user [](GLOSSARY.html) web-applications, cached [](GLOSSARY.html)
    data [](GLOSSARY.html) may [](GLOSSARY.html) contain [](GLOSSARY.html) critical
    [](GLOSSARY.html) security information, and [](GLOSSARY.html) must [](GLOSSARY.html)
    therefore [](GLOSSARY.html) not [](GLOSSARY.html) be [](GLOSSARY.html) leaked
    [](GLOSSARY.html) to [](GLOSSARY.html) unintended [](GLOSSARY.html) recipients.
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在多用户Web应用程序中，缓存数据可能包含关键的安全信息，因此不得泄霩给意外的接收者。
- en: Design
  id: totrans-254
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: 'The [](GLOSSARY.html) typical [](GLOSSARY.html) design [](GLOSSARY.html) of
    [](GLOSSARY.html) a [](GLOSSARY.html) Caching [](GLOSSARY.html) Model [](GLOSSARY.html)
    involves [](GLOSSARY.html) the [](GLOSSARY.html) following [](GLOSSARY.html) steps
    [](GLOSSARY.html) to retrieve [](GLOSSARY.html) the [](GLOSSARY.html) data [](GLOSSARY.html)
    from [](GLOSSARY.html) a [](GLOSSARY.html) source:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 典型的缓存模型设计涉及以下步骤从源中检索数据：
- en: The [](GLOSSARY.html) View [](GLOSSARY.html) attempts [](GLOSSARY.html) to [](GLOSSARY.html)
    retrieve [](GLOSSARY.html) some [](GLOSSARY.html) information [](GLOSSARY.html)
    from [](GLOSSARY.html) the [](GLOSSARY.html) Model.
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 视图[](GLOSSARY.html)试图从模型中检索一些信息。
- en: The [](GLOSSARY.html) Model [](GLOSSARY.html) first [](GLOSSARY.html) attempts
    [](GLOSSARY.html) to [](GLOSSARY.html) obtain [](GLOSSARY.html) this [](GLOSSARY.html)
    information [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) Cache.
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模型首先尝试从缓存中获取这些信息。
- en: If [](GLOSSARY.html) the [](GLOSSARY.html) desired [](GLOSSARY.html) information
    [](GLOSSARY.html) is [](GLOSSARY.html) not [](GLOSSARY.html) found, the [](GLOSSARY.html)
    Model [](GLOSSARY.html) will [](GLOSSARY.html) perform a [](GLOSSARY.html) query
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) data [](GLOSSARY.html)
    source, obtain [](GLOSSARY.html) the [](GLOSSARY.html) result, add [](GLOSSARY.html)
    it [](GLOSSARY.html) to the [](GLOSSARY.html) Cache, and [](GLOSSARY.html) return
    [](GLOSSARY.html) it [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    View.
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果未找到所需的信息，模型将向数据源查询，获取结果，将其添加到缓存中，并将其返回给视图。
- en: Additional [](GLOSSARY.html) attempts [](GLOSSARY.html) to [](GLOSSARY.html)
    retrieve [](GLOSSARY.html) the [](GLOSSARY.html) same [](GLOSSARY.html) information
    [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) Model will [](GLOSSARY.html)
    extract [](GLOSSARY.html) data [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html)
    Cache.
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从模型中额外尝试检索相同信息将从缓存中提取数据。
- en: '![](caching_model.png)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: '![](caching_model.png)'
- en: When [](GLOSSARY.html) parameters [](GLOSSARY.html) are [](GLOSSARY.html) passed
    [](GLOSSARY.html) during [](GLOSSARY.html) the `get` request, the [](GLOSSARY.html)
    cache [](GLOSSARY.html) must have [](GLOSSARY.html) an [](GLOSSARY.html) index
    [](GLOSSARY.html) over [](GLOSSARY.html) these [](GLOSSARY.html) parameters [](GLOSSARY.html)
    to [](GLOSSARY.html) guarantee [](GLOSSARY.html) a [](GLOSSARY.html) retrieval
    [](GLOSSARY.html) of [](GLOSSARY.html) the intended [](GLOSSARY.html) information.
    For [](GLOSSARY.html) example, if [](GLOSSARY.html) a [](GLOSSARY.html) Model
    [](GLOSSARY.html) class `UserRepository` has [](GLOSSARY.html) a [](GLOSSARY.html)
    method `get_user_data(user_id)`, this [](GLOSSARY.html) method [](GLOSSARY.html)
    must [](GLOSSARY.html) use [](GLOSSARY.html) the parameter `user_id` to [](GLOSSARY.html)
    perform [](GLOSSARY.html) the [](GLOSSARY.html) intended [](GLOSSARY.html) retrieval
    [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) cache.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 当在`get`请求期间传递参数时，缓存必须对这些参数进行索引，以确保检索到预期的信息。例如，如果一个模型类`UserRepository`有一个方法`get_user_data(user_id)`，这个方法必须使用参数`user_id`从缓存中执行预期的检索。
- en: 'To [](GLOSSARY.html) perform [](GLOSSARY.html) a `set` operation [](GLOSSARY.html)
    on [](GLOSSARY.html) the [](GLOSSARY.html) Model, two [](GLOSSARY.html) strategies
    [](GLOSSARY.html) are [](GLOSSARY.html) possible. The [](GLOSSARY.html) first
    [](GLOSSARY.html) one [](GLOSSARY.html) is [](GLOSSARY.html) to [](GLOSSARY.html)
    apply [](GLOSSARY.html) the [](GLOSSARY.html) changing [](GLOSSARY.html) action
    [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) slow [](GLOSSARY.html)
    data [](GLOSSARY.html) source, followed [](GLOSSARY.html) by [](GLOSSARY.html)
    either [](GLOSSARY.html) a [](GLOSSARY.html) similar [](GLOSSARY.html) update
    [](GLOSSARY.html) or [](GLOSSARY.html) an [](GLOSSARY.html) invalidation [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) cached [](GLOSSARY.html) data. This
    [](GLOSSARY.html) strategy [](GLOSSARY.html) has [](GLOSSARY.html) the [](GLOSSARY.html)
    following [](GLOSSARY.html) caveats:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 要在模型上执行`set`操作，有两种策略是可能的。第一种是在慢数据源上应用变更操作，然后要么进行类似的更新，要么使缓存数据无效。这种策略有以下注意事项：
- en: If [](GLOSSARY.html) the `set` action [](GLOSSARY.html) is [](GLOSSARY.html)
    expected [](GLOSSARY.html) to [](GLOSSARY.html) change [](GLOSSARY.html) the [](GLOSSARY.html)
    data [](GLOSSARY.html) source [](GLOSSARY.html) in a [](GLOSSARY.html) non-trivial
    [](GLOSSARY.html) way, it [](GLOSSARY.html) may [](GLOSSARY.html) not [](GLOSSARY.html)
    be [](GLOSSARY.html) possible [](GLOSSARY.html) to [](GLOSSARY.html) perform [](GLOSSARY.html)
    a [](GLOSSARY.html) sensible change [](GLOSSARY.html) to [](GLOSSARY.html) the
    [](GLOSSARY.html) cached [](GLOSSARY.html) data [](GLOSSARY.html) with [](GLOSSARY.html)
    the [](GLOSSARY.html) same [](GLOSSARY.html) business [](GLOSSARY.html) logic
    [](GLOSSARY.html) supported by [](GLOSSARY.html) the [](GLOSSARY.html) remote
    [](GLOSSARY.html) source. Instead, one [](GLOSSARY.html) should [](GLOSSARY.html)
    remove [](GLOSSARY.html) the [](GLOSSARY.html) cached [](GLOSSARY.html) data to
    [](GLOSSARY.html) promote [](GLOSSARY.html) a [](GLOSSARY.html) fresh [](GLOSSARY.html)
    retrieval [](GLOSSARY.html) at [](GLOSSARY.html) the [](GLOSSARY.html) next `get`
    operation.
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果预计`set`操作以非平凡方式更改数据源，可能无法使用相同的业务逻辑对缓存数据进行明智的更改。相反，应该删除缓存数据，以促进在下一次`get`操作时进行新的检索。
- en: The [](GLOSSARY.html) operation [](GLOSSARY.html) requires [](GLOSSARY.html)
    a [](GLOSSARY.html) round [](GLOSSARY.html) trip [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) slow [](GLOSSARY.html) data [](GLOSSARY.html) source, with
    consequences [](GLOSSARY.html) both [](GLOSSARY.html) at [](GLOSSARY.html) the
    [](GLOSSARY.html) UI [](GLOSSARY.html) level (failures [](GLOSSARY.html) must
    [](GLOSSARY.html) be [](GLOSSARY.html) reported, in-progress operations [](GLOSSARY.html)
    need [](GLOSSARY.html) to [](GLOSSARY.html) present [](GLOSSARY.html) a [](GLOSSARY.html)
    sensible [](GLOSSARY.html) progress [](GLOSSARY.html) bar, perceived [](GLOSSARY.html)
    performance [](GLOSSARY.html) may suffer) and [](GLOSSARY.html) also [](GLOSSARY.html)
    at [](GLOSSARY.html) the [](GLOSSARY.html) application [](GLOSSARY.html) design
    [](GLOSSARY.html) level (if [](GLOSSARY.html) repeated `set` operations [](GLOSSARY.html)
    are [](GLOSSARY.html) needed, performing [](GLOSSARY.html) a [](GLOSSARY.html)
    round [](GLOSSARY.html) trip [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    data [](GLOSSARY.html) source [](GLOSSARY.html) every [](GLOSSARY.html) time is
    [](GLOSSARY.html) wasteful [](GLOSSARY.html) and [](GLOSSARY.html) impacts [](GLOSSARY.html)
    performance).
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[](GLOSSARY.html)操作需要往返到缓慢的数据源，这会对UI级别产生影响（必须报告失败，正在进行的操作需要呈现合理的进度条，感知性能可能会受到影响），同时也会对应用程序设计级别产生影响（如果需要重复的`set`操作，每次都执行往返到数据源是浪费的并且影响性能）。'
- en: The [](GLOSSARY.html) second [](GLOSSARY.html) possible [](GLOSSARY.html) strategy
    [](GLOSSARY.html) is [](GLOSSARY.html) to [](GLOSSARY.html) update [](GLOSSARY.html)
    the [](GLOSSARY.html) cached [](GLOSSARY.html) data [](GLOSSARY.html) and [](GLOSSARY.html)
    postpone [](GLOSSARY.html) the data [](GLOSSARY.html) source [](GLOSSARY.html)
    update, possibly [](GLOSSARY.html) bundling [](GLOSSARY.html) multiple [](GLOSSARY.html)
    changes [](GLOSSARY.html) into [](GLOSSARY.html) a [](GLOSSARY.html) single request.
    With [](GLOSSARY.html) this [](GLOSSARY.html) solution, the [](GLOSSARY.html)
    cache [](GLOSSARY.html) must [](GLOSSARY.html) not [](GLOSSARY.html) evict [](GLOSSARY.html)
    the [](GLOSSARY.html) changed [](GLOSSARY.html) information until [](GLOSSARY.html)
    it [](GLOSSARY.html) has [](GLOSSARY.html) been [](GLOSSARY.html) committed [](GLOSSARY.html)
    to [](GLOSSARY.html) the [](GLOSSARY.html) data [](GLOSSARY.html) source. Further
    [](GLOSSARY.html) issues [](GLOSSARY.html) may [](GLOSSARY.html) exist [](GLOSSARY.html)
    for resources [](GLOSSARY.html) that [](GLOSSARY.html) are [](GLOSSARY.html) shared
    [](GLOSSARY.html) among [](GLOSSARY.html) clients, or [](GLOSSARY.html) in [](GLOSSARY.html)
    case [](GLOSSARY.html) of [](GLOSSARY.html) application [](GLOSSARY.html) crash
    [](GLOSSARY.html) or network [](GLOSSARY.html) failure [](GLOSSARY.html) where
    [](GLOSSARY.html) the [](GLOSSARY.html) changed [](GLOSSARY.html) content [](GLOSSARY.html)
    is [](GLOSSARY.html) only [](GLOSSARY.html) partially [](GLOSSARY.html) submitted
    [](GLOSSARY.html) or [](GLOSSARY.html) not [](GLOSSARY.html) at all.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 第二种可能的策略是更新缓存数据并延迟数据源更新，可能将多个更改捆绑成一个请求。使用这种解决方案，缓存在提交到数据源之前不能驱逐已更改的信息。对于在客户端之间共享的资源，或者在应用程序崩溃或网络故障的情况下，可能存在进一步的问题，其中更改的内容只提交了部分或根本没有提交。
- en: Clients [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html)
    may [](GLOSSARY.html) need [](GLOSSARY.html) to [](GLOSSARY.html) be [](GLOSSARY.html)
    aware [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) existence [](GLOSSARY.html)
    of [](GLOSSARY.html) a [](GLOSSARY.html) cache [](GLOSSARY.html) if [](GLOSSARY.html)
    they want [](GLOSSARY.html) to [](GLOSSARY.html) guarantee [](GLOSSARY.html) up-to-date
    [](GLOSSARY.html) data, or [](GLOSSARY.html) need [](GLOSSARY.html) to [](GLOSSARY.html)
    force [](GLOSSARY.html) flushing [](GLOSSARY.html) of [](GLOSSARY.html) changes
    [](GLOSSARY.html) to [](GLOSSARY.html) the remote [](GLOSSARY.html) service.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 模型的客户端可能需要意识到缓存的存在，如果他们想要保证最新的数据，或者需要强制刷新对远程服务的更改。
- en: Caching strategies
  id: totrans-267
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 缓存策略
- en: Choosing [](GLOSSARY.html) an [](GLOSSARY.html) appropriate [](GLOSSARY.html)
    caching [](GLOSSARY.html) strategy [](GLOSSARY.html) is [](GLOSSARY.html) a [](GLOSSARY.html)
    complex [](GLOSSARY.html) topic well [](GLOSSARY.html) outside [](GLOSSARY.html)
    the [](GLOSSARY.html) scope [](GLOSSARY.html) of [](GLOSSARY.html) this [](GLOSSARY.html)
    book. Several [](GLOSSARY.html) factors [](GLOSSARY.html) may [](GLOSSARY.html)
    need [](GLOSSARY.html) to [](GLOSSARY.html) be [](GLOSSARY.html) kept [](GLOSSARY.html)
    into account, such [](GLOSSARY.html) as [](GLOSSARY.html) data [](GLOSSARY.html)
    access [](GLOSSARY.html) patterns, specific [](GLOSSARY.html) requirements [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) design and [](GLOSSARY.html) the [](GLOSSARY.html)
    application [](GLOSSARY.html) behavior, and [](GLOSSARY.html) data [](GLOSSARY.html)
    consistency.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 选择适当的缓存策略是一个复杂的主题，远超出本书的范围。需要考虑几个因素，如数据访问模式、设计的特定要求和应用行为，以及数据一致性。
- en: To [](GLOSSARY.html) present [](GLOSSARY.html) a [](GLOSSARY.html) few [](GLOSSARY.html)
    among [](GLOSSARY.html) many [](GLOSSARY.html) possibilities, the [](GLOSSARY.html)
    most [](GLOSSARY.html) trivial [](GLOSSARY.html) strategy is [](GLOSSARY.html)
    to [](GLOSSARY.html) simply [](GLOSSARY.html) perform [](GLOSSARY.html) memoization
    [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) result. A [](GLOSSARY.html)
    Model [](GLOSSARY.html) using [](GLOSSARY.html) memoization effectively [](GLOSSARY.html)
    uses [](GLOSSARY.html) a [](GLOSSARY.html) cache [](GLOSSARY.html) whose [](GLOSSARY.html)
    entries [](GLOSSARY.html) never [](GLOSSARY.html) expire. The [](GLOSSARY.html)
    cache [](GLOSSARY.html) size [](GLOSSARY.html) can [](GLOSSARY.html) be kept [](GLOSSARY.html)
    under [](GLOSSARY.html) control [](GLOSSARY.html) by [](GLOSSARY.html) discarding
    [](GLOSSARY.html) the [](GLOSSARY.html) Least [](GLOSSARY.html) Recently [](GLOSSARY.html)
    Used (LRU) data.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 要展示许多可能性中的一些，最琐碎的策略是简单地执行结果的记忆化。使用记忆化的模型有效地使用一个永不过期的缓存。缓存的大小可以通过丢弃最近最少使用（LRU）数据来控制。
- en: 'LRU [](GLOSSARY.html) constraint [](GLOSSARY.html) the [](GLOSSARY.html) size
    [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) cache [](GLOSSARY.html)
    and [](GLOSSARY.html) keeps [](GLOSSARY.html) the [](GLOSSARY.html) most [](GLOSSARY.html)
    recently used [](GLOSSARY.html) data, but [](GLOSSARY.html) does [](GLOSSARY.html)
    not [](GLOSSARY.html) provide [](GLOSSARY.html) a [](GLOSSARY.html) predictable
    [](GLOSSARY.html) expiration [](GLOSSARY.html) strategy, something [](GLOSSARY.html)
    that [](GLOSSARY.html) may [](GLOSSARY.html) be [](GLOSSARY.html) required [](GLOSSARY.html)
    for [](GLOSSARY.html) some [](GLOSSARY.html) applications. For [](GLOSSARY.html)
    example, a [](GLOSSARY.html) News [](GLOSSARY.html) Ticker [](GLOSSARY.html) application
    [](GLOSSARY.html) retrieving [](GLOSSARY.html) information [](GLOSSARY.html) from
    [](GLOSSARY.html) a [](GLOSSARY.html) website [](GLOSSARY.html) may [](GLOSSARY.html)
    want [](GLOSSARY.html) to invalidate [](GLOSSARY.html) the [](GLOSSARY.html) cached
    [](GLOSSARY.html) data [](GLOSSARY.html) and [](GLOSSARY.html) perform [](GLOSSARY.html)
    a [](GLOSSARY.html) new [](GLOSSARY.html) retrieval, hopefully [](GLOSSARY.html)
    to [](GLOSSARY.html) obtain updated [](GLOSSARY.html) information, after [](GLOSSARY.html)
    a [](GLOSSARY.html) fixed [](GLOSSARY.html) absolute [](GLOSSARY.html) timeout
    (e.g. 15 [](GLOSSARY.html) minutes). Other [](GLOSSARY.html) applications [](GLOSSARY.html)
    may [](GLOSSARY.html) prefer [](GLOSSARY.html) a [](GLOSSARY.html) sliding [](GLOSSARY.html)
    expiration [](GLOSSARY.html) strategy: cached [](GLOSSARY.html) data [](GLOSSARY.html)
    expire only [](GLOSSARY.html) if [](GLOSSARY.html) not [](GLOSSARY.html) accessed
    [](GLOSSARY.html) within [](GLOSSARY.html) a [](GLOSSARY.html) given [](GLOSSARY.html)
    amount [](GLOSSARY.html) of [](GLOSSARY.html) time (e.g. 5 [](GLOSSARY.html) minutes,
    but [](GLOSSARY.html) the countdown [](GLOSSARY.html) resets [](GLOSSARY.html)
    to [](GLOSSARY.html) zero [](GLOSSARY.html) if [](GLOSSARY.html) requested [](GLOSSARY.html)
    again), or [](GLOSSARY.html) when [](GLOSSARY.html) an [](GLOSSARY.html) explicit
    [](GLOSSARY.html) method [](GLOSSARY.html) call is [](GLOSSARY.html) issued [](GLOSSARY.html)
    on [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) object. Smarter
    [](GLOSSARY.html) strategies [](GLOSSARY.html) may [](GLOSSARY.html) use [](GLOSSARY.html)
    a [](GLOSSARY.html) small [](GLOSSARY.html) payload request [](GLOSSARY.html)
    to [](GLOSSARY.html) ask [](GLOSSARY.html) the [](GLOSSARY.html) remote [](GLOSSARY.html)
    service [](GLOSSARY.html) if [](GLOSSARY.html) new [](GLOSSARY.html) or [](GLOSSARY.html)
    changed [](GLOSSARY.html) data [](GLOSSARY.html) are [](GLOSSARY.html) available,
    and [](GLOSSARY.html) act accordingly [](GLOSSARY.html) by [](GLOSSARY.html) either
    [](GLOSSARY.html) retrieving [](GLOSSARY.html) the [](GLOSSARY.html) new [](GLOSSARY.html)
    data [](GLOSSARY.html) or [](GLOSSARY.html) return [](GLOSSARY.html) the [](GLOSSARY.html)
    cached [](GLOSSARY.html) information.'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: LRU [](GLOSSARY.html)约束了缓存的大小，并保留了最近使用的数据，但没有提供可预测的过期策略，这对某些应用可能是必需的。例如，从网站检索信息的新闻滚动应用可能希望使缓存数据失效并执行新的检索，希望在固定的绝对超时（例如15分钟）后获得更新的信息。其他应用程序可能更喜欢滑动过期策略：只有在一定时间内未访问的情况下才会使缓存数据过期（例如5分钟，但如果再次请求，则倒计时重置为零），或者当在模型对象上发出显式方法调用时。更智能的策略可能使用小的有效载荷请求询问远程服务是否有新的或更改的数据可用，并根据情况采取行动，通过检索新数据或返回缓存的信息。
- en: Additional [](GLOSSARY.html) optimizations [](GLOSSARY.html) that [](GLOSSARY.html)
    are [](GLOSSARY.html) frequently [](GLOSSARY.html) used [](GLOSSARY.html) are
    [](GLOSSARY.html) preemptive [](GLOSSARY.html) caching [](GLOSSARY.html) and [](GLOSSARY.html)
    priority [](GLOSSARY.html) caching. Preemptive [](GLOSSARY.html) caching [](GLOSSARY.html)
    stores [](GLOSSARY.html) Model [](GLOSSARY.html) data [](GLOSSARY.html) that [](GLOSSARY.html)
    is [](GLOSSARY.html) likely [](GLOSSARY.html) to [](GLOSSARY.html) be [](GLOSSARY.html)
    accessed [](GLOSSARY.html) soon, even [](GLOSSARY.html) when [](GLOSSARY.html)
    not [](GLOSSARY.html) directly requested. For [](GLOSSARY.html) example, while
    [](GLOSSARY.html) retrieving [](GLOSSARY.html) information [](GLOSSARY.html) about
    [](GLOSSARY.html) a [](GLOSSARY.html) given [](GLOSSARY.html) user [](GLOSSARY.html)
    from [](GLOSSARY.html) a social [](GLOSSARY.html) networking [](GLOSSARY.html)
    website, a [](GLOSSARY.html) smart [](GLOSSARY.html) caching [](GLOSSARY.html)
    engine [](GLOSSARY.html) may [](GLOSSARY.html) decide [](GLOSSARY.html) to [](GLOSSARY.html)
    retrieve [](GLOSSARY.html) its most [](GLOSSARY.html) recent [](GLOSSARY.html)
    pictures [](GLOSSARY.html) and [](GLOSSARY.html) populate [](GLOSSARY.html) the
    [](GLOSSARY.html) cache [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    picture [](GLOSSARY.html) Model [](GLOSSARY.html) objects; Priority [](GLOSSARY.html)
    caching [](GLOSSARY.html) allows [](GLOSSARY.html) to [](GLOSSARY.html) consider
    [](GLOSSARY.html) different [](GLOSSARY.html) levels [](GLOSSARY.html) of [](GLOSSARY.html)
    likelihood [](GLOSSARY.html) for eviction, removing [](GLOSSARY.html) low [](GLOSSARY.html)
    priority [](GLOSSARY.html) before [](GLOSSARY.html) high [](GLOSSARY.html) priority
    [](GLOSSARY.html) data.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 常用的额外 [](GLOSSARY.html) 优化包括预取式 [](GLOSSARY.html) 缓存和优先级 [](GLOSSARY.html) 缓存。预取式
    [](GLOSSARY.html) 缓存存储可能很快访问的模型 [](GLOSSARY.html) 数据，即使未直接请求。例如，在从社交网络网站检索有关给定用户的信息时，智能缓存引擎可以决定检索其最近的图片并填充图片模型对象的缓存；优先级缓存允许考虑不同的逐出优先级级别，先删除低优先级的数据，然后删除高优先级的数据。
- en: Data/Metadata Model
  id: totrans-272
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据/元数据模型
- en: Data/Metadata Model
  id: totrans-273
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据/元数据模型
- en: Motivation
  id: totrans-274
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'A [](GLOSSARY.html) Data/Metadata [](GLOSSARY.html) Model [](GLOSSARY.html)
    separates [](GLOSSARY.html) information [](GLOSSARY.html) in [](GLOSSARY.html)
    two [](GLOSSARY.html) categories:'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 数据/元数据 [](GLOSSARY.html) 模型将信息分为两个类别：
- en: '*data*: slow, heavyweight [](GLOSSARY.html) information [](GLOSSARY.html) that
    [](GLOSSARY.html) represents [](GLOSSARY.html) the [](GLOSSARY.html) content'
  id: totrans-276
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*数据*：慢、沉重的 [](GLOSSARY.html) 信息，表示内容'
- en: '*metadata*: fast, lightweight [](GLOSSARY.html) information [](GLOSSARY.html)
    that [](GLOSSARY.html) describes [](GLOSSARY.html) the [](GLOSSARY.html) content'
  id: totrans-277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*元数据*：快速、轻量级的 [](GLOSSARY.html) 信息，描述内容'
- en: This [](GLOSSARY.html) distinction [](GLOSSARY.html) is [](GLOSSARY.html) often
    [](GLOSSARY.html) driven [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html)
    need [](GLOSSARY.html) for [](GLOSSARY.html) a [](GLOSSARY.html) Model [](GLOSSARY.html)
    object [](GLOSSARY.html) to present [](GLOSSARY.html) lean [](GLOSSARY.html) access
    [](GLOSSARY.html) to [](GLOSSARY.html) information [](GLOSSARY.html) needed [](GLOSSARY.html)
    for [](GLOSSARY.html) browsing, and [](GLOSSARY.html) resource [](GLOSSARY.html)
    consuming access [](GLOSSARY.html) to [](GLOSSARY.html) information [](GLOSSARY.html)
    needed [](GLOSSARY.html) for [](GLOSSARY.html) processing.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 这个[GLOSSARY.html]区别通常是由对模型对象的需求驱动的，以提供对浏览所需信息的精简访问，以及对处理所需信息的资源消耗访问。
- en: Design
  id: totrans-279
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: The [](GLOSSARY.html) Model [](GLOSSARY.html) class [](GLOSSARY.html) implement
    [](GLOSSARY.html) getters [](GLOSSARY.html) for [](GLOSSARY.html) both [](GLOSSARY.html)
    data [](GLOSSARY.html) and [](GLOSSARY.html) metadata.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: '[GLOSSARY.html]模型类[GLOSSARY.html]实现了对数据和元数据的getter方法。'
- en: Data [](GLOSSARY.html) methods [](GLOSSARY.html) retrieve [](GLOSSARY.html)
    the [](GLOSSARY.html) information [](GLOSSARY.html) lazily, possibly [](GLOSSARY.html)
    in [](GLOSSARY.html) chunks. Caching [](GLOSSARY.html) may [](GLOSSARY.html) not
    [](GLOSSARY.html) be [](GLOSSARY.html) possible [](GLOSSARY.html) if [](GLOSSARY.html)
    the [](GLOSSARY.html) size [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    information [](GLOSSARY.html) is [](GLOSSARY.html) excessive.
  id: totrans-281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据方法可能会惰性地检索信息，可能会分批次进行。如果信息的大小过大，则可能无法进行缓存。
- en: Metadata [](GLOSSARY.html) methods [](GLOSSARY.html) may [](GLOSSARY.html) or
    [](GLOSSARY.html) may [](GLOSSARY.html) not [](GLOSSARY.html) be [](GLOSSARY.html)
    lazily [](GLOSSARY.html) retrieved, and [](GLOSSARY.html) may [](GLOSSARY.html)
    use [](GLOSSARY.html) caching, especially [](GLOSSARY.html) when [](GLOSSARY.html)
    backed [](GLOSSARY.html) by [](GLOSSARY.html) network.
  id: totrans-282
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 元数据方法可能会惰性地检索，也可能不会，尤其是在由网络支持时可能会使用缓存。
- en: Clarity [](GLOSSARY.html) in [](GLOSSARY.html) documentation [](GLOSSARY.html)
    is [](GLOSSARY.html) essential [](GLOSSARY.html) to [](GLOSSARY.html) communicate
    [](GLOSSARY.html) the [](GLOSSARY.html) associated [](GLOSSARY.html) cost of [](GLOSSARY.html)
    retrieval.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 文档中的清晰度对于传达检索的相关成本至关重要。
- en: Practical Example
  id: totrans-284
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实例
- en: An [](GLOSSARY.html) image [](GLOSSARY.html) processing [](GLOSSARY.html) program
    [](GLOSSARY.html) may [](GLOSSARY.html) have [](GLOSSARY.html) a `Movie` Model
    [](GLOSSARY.html) object to [](GLOSSARY.html) represent [](GLOSSARY.html) an [](GLOSSARY.html)
    image [](GLOSSARY.html) file [](GLOSSARY.html) on [](GLOSSARY.html) disk
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 图像处理程序可能有一个`Movie`模型对象来表示磁盘上的图像文件。
- en: '[PRE27]'
  id: totrans-286
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Properties [](GLOSSARY.html) such [](GLOSSARY.html) as `thumbnail`, `length`
    and `name` represent [](GLOSSARY.html) lean information [](GLOSSARY.html) useful
    [](GLOSSARY.html) for [](GLOSSARY.html) a [](GLOSSARY.html) movie [](GLOSSARY.html)
    browser. This [](GLOSSARY.html) information [](GLOSSARY.html) is [](GLOSSARY.html)
    extracted from [](GLOSSARY.html) the [](GLOSSARY.html) file [](GLOSSARY.html)
    at [](GLOSSARY.html) object [](GLOSSARY.html) instantiation [](GLOSSARY.html)
    and [](GLOSSARY.html) kept [](GLOSSARY.html) in [](GLOSSARY.html) memory.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: '`thumbnail`、`length`和`name`等属性代表对电影浏览器有用的精简信息。这些信息在对象实例化时从文件中提取并保存在内存中。'
- en: The `contents()` method, on [](GLOSSARY.html) the [](GLOSSARY.html) other [](GLOSSARY.html)
    hand, retrieves [](GLOSSARY.html) the [](GLOSSARY.html) movie [](GLOSSARY.html)
    data directly [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) disk
    [](GLOSSARY.html) and [](GLOSSARY.html) makes [](GLOSSARY.html) it [](GLOSSARY.html)
    available [](GLOSSARY.html) for [](GLOSSARY.html) additional [](GLOSSARY.html)
    processing (e.g. decoding [](GLOSSARY.html) and [](GLOSSARY.html) displaying).
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，`contents()`方法直接从[](GLOSSARY.html)磁盘[](GLOSSARY.html)检索[](GLOSSARY.html)电影[](GLOSSARY.html)数据，并使其可用于[](GLOSSARY.html)额外的[](GLOSSARY.html)处理（例如解码和显示）。
- en: Recording Model
  id: totrans-289
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 记录模型
- en: Recording Model
  id: totrans-290
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 记录模型
- en: Motivation
  id: totrans-291
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: A [](GLOSSARY.html) Recording [](GLOSSARY.html) Model [](GLOSSARY.html) maintains
    [](GLOSSARY.html) a [](GLOSSARY.html) log [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) changes [](GLOSSARY.html) occurred [](GLOSSARY.html) to
    [](GLOSSARY.html) its [](GLOSSARY.html) state. This [](GLOSSARY.html) information
    [](GLOSSARY.html) can [](GLOSSARY.html) then [](GLOSSARY.html) be [](GLOSSARY.html)
    used [](GLOSSARY.html) by [](GLOSSARY.html) external [](GLOSSARY.html) client
    [](GLOSSARY.html) code, for [](GLOSSARY.html) example [](GLOSSARY.html) to perform
    [](GLOSSARY.html) a [](GLOSSARY.html) refresh [](GLOSSARY.html) only [](GLOSSARY.html)
    if [](GLOSSARY.html) the [](GLOSSARY.html) visualized [](GLOSSARY.html) information
    [](GLOSSARY.html) was [](GLOSSARY.html) changed, or [](GLOSSARY.html) to perform
    [](GLOSSARY.html) undo.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 一个[](GLOSSARY.html)记录[](GLOSSARY.html)模型[](GLOSSARY.html)维护[](GLOSSARY.html)其[](GLOSSARY.html)状态发生的更改的日志。这些[](GLOSSARY.html)信息[](GLOSSARY.html)可以[](GLOSSARY.html)被[](GLOSSARY.html)外部[](GLOSSARY.html)客户端[](GLOSSARY.html)代码使用，例如，仅在[](GLOSSARY.html)可视化[](GLOSSARY.html)信息[](GLOSSARY.html)发生变化时执行刷新，或执行撤销。
- en: This [](GLOSSARY.html) technique [](GLOSSARY.html) carries [](GLOSSARY.html)
    the [](GLOSSARY.html) liability [](GLOSSARY.html) of [](GLOSSARY.html) forgetting
    [](GLOSSARY.html) to [](GLOSSARY.html) clear [](GLOSSARY.html) the [](GLOSSARY.html)
    log, leading [](GLOSSARY.html) to [](GLOSSARY.html) memory [](GLOSSARY.html) exhaustion.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 这[](GLOSSARY.html)种[](GLOSSARY.html)技术[](GLOSSARY.html)带来[](GLOSSARY.html)了[](GLOSSARY.html)忘记[](GLOSSARY.html)清除[](GLOSSARY.html)日志的风险，导致[](GLOSSARY.html)内存[](GLOSSARY.html)耗尽。
- en: Practical Example
  id: totrans-294
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际例子
- en: The [](GLOSSARY.html) following [](GLOSSARY.html) example [](GLOSSARY.html)
    shows [](GLOSSARY.html) a [](GLOSSARY.html) Model [](GLOSSARY.html) class [](GLOSSARY.html)
    that [](GLOSSARY.html) records [](GLOSSARY.html) changes [](GLOSSARY.html) to
    [](GLOSSARY.html) its [](GLOSSARY.html) properties
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 以下[](GLOSSARY.html)示例[](GLOSSARY.html)展示了一个[](GLOSSARY.html)记录[](GLOSSARY.html)其[](GLOSSARY.html)属性变化的[](GLOSSARY.html)模型类
- en: '[PRE28]'
  id: totrans-296
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: The [](GLOSSARY.html) setters [](GLOSSARY.html) record [](GLOSSARY.html) the
    [](GLOSSARY.html) changes [](GLOSSARY.html) in [](GLOSSARY.html) the `self._changes`
    dictionary. Performing [](GLOSSARY.html) the [](GLOSSARY.html) following [](GLOSSARY.html)
    operation
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: '[](GLOSSARY.html)设置器[](GLOSSARY.html)记录[](GLOSSARY.html)self._changes字典中的更改。执行[](GLOSSARY.html)以下[](GLOSSARY.html)操作'
- en: '[PRE29]'
  id: totrans-298
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'will [](GLOSSARY.html) produce [](GLOSSARY.html) a `self._changes["name"]`
    list [](GLOSSARY.html) containing [](GLOSSARY.html) two [](GLOSSARY.html) elements:
    the [](GLOSSARY.html) first [](GLOSSARY.html) transition `(None, "Rob")`, and
    [](GLOSSARY.html) the [](GLOSSARY.html) second [](GLOSSARY.html) transition `("Rob",
    "Robert")`.'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 将[](GLOSSARY.html)生成[](GLOSSARY.html)一个`self._changes["name"]`列表，其中包含两个元素：第一个过渡`(None,
    "Rob")`，第二个过渡`("Rob", "Robert")`。
- en: 'Variation: record the sequence of changes'
  id: totrans-300
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 变体：记录更改的顺序
- en: The [](GLOSSARY.html) solution [](GLOSSARY.html) given [](GLOSSARY.html) above
    [](GLOSSARY.html) does [](GLOSSARY.html) not [](GLOSSARY.html) record [](GLOSSARY.html)
    if, for [](GLOSSARY.html) example, the [](GLOSSARY.html) surname [](GLOSSARY.html)
    was [](GLOSSARY.html) changed [](GLOSSARY.html) before [](GLOSSARY.html) or [](GLOSSARY.html)
    after [](GLOSSARY.html) the [](GLOSSARY.html) name. An [](GLOSSARY.html) alternative
    [](GLOSSARY.html) implementation [](GLOSSARY.html) can [](GLOSSARY.html) store
    [](GLOSSARY.html) this [](GLOSSARY.html) information [](GLOSSARY.html) by [](GLOSSARY.html)
    e.g. using [](GLOSSARY.html) a [](GLOSSARY.html) list [](GLOSSARY.html) instead
    [](GLOSSARY.html) of [](GLOSSARY.html) a [](GLOSSARY.html) dictionary for `self._changes`.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 上述给出的解决方案不记录例如，姓氏是在名字之前还是之后更改的情况。另一种实现可以通过例如使用列表而不是字典来存储此信息，例如使用`self._changes`。
- en: '[PRE30]'
  id: totrans-302
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Variation: interest only in the last change'
  id: totrans-303
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 变体：仅对最后一次变化感兴趣
- en: The [](GLOSSARY.html) log [](GLOSSARY.html) length [](GLOSSARY.html) can [](GLOSSARY.html)
    be [](GLOSSARY.html) limited, potentially [](GLOSSARY.html) to [](GLOSSARY.html)
    a [](GLOSSARY.html) single [](GLOSSARY.html) change, by [](GLOSSARY.html) simply
    replacing [](GLOSSARY.html) the [](GLOSSARY.html) previous [](GLOSSARY.html) change
    [](GLOSSARY.html) information [](GLOSSARY.html) with [](GLOSSARY.html) the [](GLOSSARY.html)
    latest. This [](GLOSSARY.html) approach [](GLOSSARY.html) also removes [](GLOSSARY.html)
    the [](GLOSSARY.html) liability [](GLOSSARY.html) of [](GLOSSARY.html) forgetting
    [](GLOSSARY.html) to [](GLOSSARY.html) clear [](GLOSSARY.html) the [](GLOSSARY.html)
    log.
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 日志长度可以被限制，可能只到单个更改，通过简单地用最新的更改信息替换先前的更改信息。这种方法还消除了忘记清除日志的责任。
- en: '[PRE31]'
  id: totrans-305
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: Transactional Setting
  id: totrans-306
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 交易设置
- en: Transactional Setting
  id: totrans-307
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 交易设置
- en: Motivation
  id: totrans-308
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'Your [](GLOSSARY.html) Model [](GLOSSARY.html) has [](GLOSSARY.html) multiple
    [](GLOSSARY.html) settable [](GLOSSARY.html) attributes, each [](GLOSSARY.html)
    one [](GLOSSARY.html) listened [](GLOSSARY.html) independently [](GLOSSARY.html)
    by Views. The [](GLOSSARY.html) business [](GLOSSARY.html) logic [](GLOSSARY.html)
    requires [](GLOSSARY.html) setting [](GLOSSARY.html) two [](GLOSSARY.html) or
    [](GLOSSARY.html) more [](GLOSSARY.html) attributes [](GLOSSARY.html) to [](GLOSSARY.html)
    reach [](GLOSSARY.html) the [](GLOSSARY.html) desired [](GLOSSARY.html) final
    Model [](GLOSSARY.html) state. Each [](GLOSSARY.html) set [](GLOSSARY.html) operation
    [](GLOSSARY.html) triggers [](GLOSSARY.html) a [](GLOSSARY.html) notification,
    as [](GLOSSARY.html) shown:'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 您的模型[](GLOSSARY.html)具有多个可设置的属性，每个属性都由视图独立监听。业务逻辑要求设置两个或更多属性以达到期望的最终模型状态。每次设置操作都会触发通知，如下所示：
- en: Set [](GLOSSARY.html) A [](GLOSSARY.html) attribute [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) Model
  id: totrans-310
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在模型上设置[](GLOSSARY.html)属性A[](GLOSSARY.html)
- en: Views [](GLOSSARY.html) are [](GLOSSARY.html) notified [](GLOSSARY.html) of
    [](GLOSSARY.html) change
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 视图[](GLOSSARY.html)被通知[](GLOSSARY.html)变化
- en: Set [](GLOSSARY.html) B [](GLOSSARY.html) attribute [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) Model
  id: totrans-312
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在模型上设置属性B[](GLOSSARY.html)
- en: Views [](GLOSSARY.html) are [](GLOSSARY.html) notified [](GLOSSARY.html) of
    [](GLOSSARY.html) change
  id: totrans-313
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 视图[](GLOSSARY.html)被通知[](GLOSSARY.html)变化
- en: During [](GLOSSARY.html) step [](GLOSSARY.html) 2, listeners [](GLOSSARY.html)
    will [](GLOSSARY.html) be [](GLOSSARY.html) notified [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) change [](GLOSSARY.html) and [](GLOSSARY.html) sync [](GLOSSARY.html)
    against [](GLOSSARY.html) a Model [](GLOSSARY.html) where [](GLOSSARY.html) only
    [](GLOSSARY.html) one [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    attributes [](GLOSSARY.html) has [](GLOSSARY.html) been [](GLOSSARY.html) changed.
    Depending [](GLOSSARY.html) on [](GLOSSARY.html) the specific [](GLOSSARY.html)
    details [](GLOSSARY.html) of [](GLOSSARY.html) your [](GLOSSARY.html) Model [](GLOSSARY.html)
    and [](GLOSSARY.html) Views, this [](GLOSSARY.html) state [](GLOSSARY.html) may
    [](GLOSSARY.html) be [](GLOSSARY.html) inconsistent [](GLOSSARY.html) or [](GLOSSARY.html)
    not representable [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html)
    Views. However, setting [](GLOSSARY.html) and [](GLOSSARY.html) notification [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) individual attributes [](GLOSSARY.html)
    may [](GLOSSARY.html) still [](GLOSSARY.html) be [](GLOSSARY.html) needed [](GLOSSARY.html)
    for [](GLOSSARY.html) specific [](GLOSSARY.html) use [](GLOSSARY.html) cases.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 在[GLOSSARY.html]步骤[GLOSSARY.html]2期间，监听器[GLOSSARY.html]将被[GLOSSARY.html]通知[GLOSSARY.html]变化[GLOSSARY.html]并[GLOSSARY.html]与[GLOSSARY.html]模型[GLOSSARY.html]同步[GLOSSARY.html]，其中[GLOSSARY.html]只有[GLOSSARY.html]一个[GLOSSARY.html]属性[GLOSSARY.html]已经[GLOSSARY.html]被[GLOSSARY.html]更改。根据[GLOSSARY.html]您的[GLOSSARY.html]模型[GLOSSARY.html]和[GLOSSARY.html]视图的[GLOSSARY.html]具体[GLOSSARY.html]细节，这种[GLOSSARY.html]状态[GLOSSARY.html]可能[GLOSSARY.html]是[GLOSSARY.html]不一致的[GLOSSARY.html]或[GLOSSARY.html]不可[GLOSSARY.html]由[GLOSSARY.html]视图[GLOSSARY.html]表示的[GLOSSARY.html]。然而，设置[GLOSSARY.html]和[GLOSSARY.html]通知[GLOSSARY.html]单个[GLOSSARY.html]属性[GLOSSARY.html]可能[GLOSSARY.html]仍然[GLOSSARY.html]需要[GLOSSARY.html]特定[GLOSSARY.html]用例[GLOSSARY.html]。
- en: 'The [](GLOSSARY.html) desired [](GLOSSARY.html) goal [](GLOSSARY.html) is [](GLOSSARY.html)
    to [](GLOSSARY.html) trigger [](GLOSSARY.html) notification [](GLOSSARY.html)
    only [](GLOSSARY.html) when [](GLOSSARY.html) all [](GLOSSARY.html) set [](GLOSSARY.html)
    operations [](GLOSSARY.html) have [](GLOSSARY.html) been performed, as [](GLOSSARY.html)
    follows:'
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 所需[GLOSSARY.html]目标[GLOSSARY.html]是[GLOSSARY.html]仅在[GLOSSARY.html]所有[GLOSSARY.html]设置[GLOSSARY.html]操作[GLOSSARY.html]完成后[GLOSSARY.html]触发[GLOSSARY.html]通知[GLOSSARY.html]，如下所示：
- en: Set [](GLOSSARY.html) A [](GLOSSARY.html) attribute [](GLOSSARY.html) without
    [](GLOSSARY.html) notification
  id: totrans-316
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置[GLOSSARY.html]A[GLOSSARY.html]属性[GLOSSARY.html]而不[GLOSSARY.html]通知
- en: Set [](GLOSSARY.html) B [](GLOSSARY.html) attribute [](GLOSSARY.html) without
    [](GLOSSARY.html) notification
  id: totrans-317
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置[GLOSSARY.html]B[GLOSSARY.html]属性[GLOSSARY.html]而不[GLOSSARY.html]通知
- en: Views [](GLOSSARY.html) are [](GLOSSARY.html) notified [](GLOSSARY.html) of
    [](GLOSSARY.html) change
  id: totrans-318
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 视图[GLOSSARY.html]被[GLOSSARY.html]通知[GLOSSARY.html]变化
- en: Design
  id: totrans-319
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: Transactional [](GLOSSARY.html) setting [](GLOSSARY.html) is [](GLOSSARY.html)
    the [](GLOSSARY.html) most [](GLOSSARY.html) trivial [](GLOSSARY.html) strategy
    [](GLOSSARY.html) to [](GLOSSARY.html) achieve the [](GLOSSARY.html) result [](GLOSSARY.html)
    outlined [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html) Motivation,
    the [](GLOSSARY.html) others [](GLOSSARY.html) being [](GLOSSARY.html) using [](GLOSSARY.html)
    a Lazy [](GLOSSARY.html) Model [](GLOSSARY.html) or [](GLOSSARY.html) an [](GLOSSARY.html)
    Accumulator, examined [](GLOSSARY.html) later.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 事务性[GLOSSARY.html]设置[GLOSSARY.html]是[GLOSSARY.html]实现[GLOSSARY.html]动机[GLOSSARY.html]中[GLOSSARY.html]概述的[GLOSSARY.html]结果[GLOSSARY.html]的[GLOSSARY.html]最[GLOSSARY.html]琐碎的[GLOSSARY.html]策略[GLOSSARY.html]，其他[GLOSSARY.html]策略[GLOSSARY.html]包括[GLOSSARY.html]使用[GLOSSARY.html]懒惰[GLOSSARY.html]模型[GLOSSARY.html]或[GLOSSARY.html]累加器，稍后[GLOSSARY.html]检查。
- en: Transactional [](GLOSSARY.html) setting [](GLOSSARY.html) implements [](GLOSSARY.html)
    a [](GLOSSARY.html) setter [](GLOSSARY.html) function [](GLOSSARY.html) accepting
    [](GLOSSARY.html) both attributes. This [](GLOSSARY.html) setter [](GLOSSARY.html)
    function [](GLOSSARY.html) alters [](GLOSSARY.html) the [](GLOSSARY.html) object
    [](GLOSSARY.html) state [](GLOSSARY.html) and [](GLOSSARY.html) then issues [](GLOSSARY.html)
    the [](GLOSSARY.html) change [](GLOSSARY.html) notification.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 事务性设置实现了一个接受两个属性的设置器函数。这个设置器函数修改了对象的状态，然后发出变更通知。
- en: Practical Example
  id: totrans-322
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际例子
- en: A [](GLOSSARY.html) Model [](GLOSSARY.html) representing [](GLOSSARY.html) a
    [](GLOSSARY.html) network [](GLOSSARY.html) connection [](GLOSSARY.html) to [](GLOSSARY.html)
    a [](GLOSSARY.html) remote [](GLOSSARY.html) host might [](GLOSSARY.html) want
    [](GLOSSARY.html) to [](GLOSSARY.html) present [](GLOSSARY.html) functionality
    [](GLOSSARY.html) to [](GLOSSARY.html) change [](GLOSSARY.html) the [](GLOSSARY.html)
    host, the [](GLOSSARY.html) port, and [](GLOSSARY.html) both [](GLOSSARY.html)
    simultaneously. If [](GLOSSARY.html) any [](GLOSSARY.html) listener [](GLOSSARY.html)
    is [](GLOSSARY.html) in [](GLOSSARY.html) charge [](GLOSSARY.html) of [](GLOSSARY.html)
    initiating [](GLOSSARY.html) a network [](GLOSSARY.html) connection, the [](GLOSSARY.html)
    notification [](GLOSSARY.html) should [](GLOSSARY.html) be [](GLOSSARY.html) delivered
    [](GLOSSARY.html) only [](GLOSSARY.html) when [](GLOSSARY.html) the Model [](GLOSSARY.html)
    contains [](GLOSSARY.html) correct [](GLOSSARY.html) host [](GLOSSARY.html) information.
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 代表与远程主机的网络连接的模型可能希望提供功能来同时更改主机、端口或两者。如果有任何监听器负责启动网络连接，则只有当模型包含正确的主机信息时才应传递通知。
- en: '[PRE32]'
  id: totrans-324
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: Without [](GLOSSARY.html) the `set_host_and_port()` method, reconnecting [](GLOSSARY.html)
    from `http://one.example.com:80` to `http://two.example.com:8080` would [](GLOSSARY.html)
    either [](GLOSSARY.html) trigger [](GLOSSARY.html) a [](GLOSSARY.html) rogue [](GLOSSARY.html)
    connection [](GLOSSARY.html) to `http://one.example.com:8080` (when `set_port(8080)`
    is [](GLOSSARY.html) called) or [](GLOSSARY.html) to `http://two.example.com:80/`
    (when `set_host("two.example.com")` is [](GLOSSARY.html) called).
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: 没有 `set_host_and_port()` 方法，从 `http://one.example.com:80` 重新连接到 `http://two.example.com:8080`
    将会触发一个不良连接到 `http://one.example.com:8080`（当调用 `set_port(8080)` 时）或到 `http://two.example.com:80/`（当调用
    `set_host("two.example.com")` 时）。
- en: For [](GLOSSARY.html) obvious [](GLOSSARY.html) reasons, the `set_host_and_port()`
    cannot [](GLOSSARY.html) reuse [](GLOSSARY.html) the [](GLOSSARY.html) independent
    [](GLOSSARY.html) setters, and [](GLOSSARY.html) must therefore [](GLOSSARY.html)
    reimplement [](GLOSSARY.html) the [](GLOSSARY.html) setting [](GLOSSARY.html)
    logic. If [](GLOSSARY.html) this [](GLOSSARY.html) logic [](GLOSSARY.html) is
    [](GLOSSARY.html) complex, it [](GLOSSARY.html) might [](GLOSSARY.html) be [](GLOSSARY.html)
    good [](GLOSSARY.html) practice [](GLOSSARY.html) to factor [](GLOSSARY.html)
    it [](GLOSSARY.html) out [](GLOSSARY.html) in [](GLOSSARY.html) a [](GLOSSARY.html)
    separate "silent [](GLOSSARY.html) setter" method.
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 由于显而易见的原因，`set_host_and_port()` 方法不能重用独立的设置器，因此必须重新实现设置逻辑。如果这个逻辑很复杂，将其提取到一个单独的“静默设置器”方法中可能是一个很好的做法。
- en: 'Variation 1: qualified notification'
  id: totrans-327
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 变体 1：合格通知
- en: If [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) performs
    [](GLOSSARY.html) qualified [](GLOSSARY.html) notification, the [](GLOSSARY.html)
    behavior [](GLOSSARY.html) in [](GLOSSARY.html) absence [](GLOSSARY.html) of [](GLOSSARY.html)
    transactional [](GLOSSARY.html) setting will [](GLOSSARY.html) be
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 如果模型执行合格通知，则在没有事务设置的情况下的行为将是
- en: Set [](GLOSSARY.html) A [](GLOSSARY.html) attribute [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) Model
  id: totrans-329
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在模型上设置A[](GLOSSARY.html)属性
- en: Views [](GLOSSARY.html) are [](GLOSSARY.html) notified [](GLOSSARY.html) of
    [](GLOSSARY.html) A [](GLOSSARY.html) change
  id: totrans-330
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 视图[](GLOSSARY.html)被通知A[](GLOSSARY.html)更改
- en: Set [](GLOSSARY.html) B [](GLOSSARY.html) attribute [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) Model
  id: totrans-331
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在模型上设置B[](GLOSSARY.html)属性
- en: Views [](GLOSSARY.html) are [](GLOSSARY.html) notified [](GLOSSARY.html) of
    [](GLOSSARY.html) B [](GLOSSARY.html) change
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 视图[](GLOSSARY.html)被通知B[](GLOSSARY.html)更改
- en: 'Transactional [](GLOSSARY.html) setting [](GLOSSARY.html) will [](GLOSSARY.html)
    provide [](GLOSSARY.html) a [](GLOSSARY.html) method [](GLOSSARY.html) performing
    [](GLOSSARY.html) the [](GLOSSARY.html) following [](GLOSSARY.html) sequence:'
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 事务性[](GLOSSARY.html)设置[](GLOSSARY.html)将[](GLOSSARY.html)提供[](GLOSSARY.html)执行[](GLOSSARY.html)以下[](GLOSSARY.html)顺序的方法：
- en: Set [](GLOSSARY.html) A [](GLOSSARY.html) attribute [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) Model
  id: totrans-334
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在模型上设置A[](GLOSSARY.html)属性
- en: Set [](GLOSSARY.html) B [](GLOSSARY.html) attribute [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) Model
  id: totrans-335
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在模型上设置B[](GLOSSARY.html)属性
- en: Views [](GLOSSARY.html) are [](GLOSSARY.html) notified [](GLOSSARY.html) of
    [](GLOSSARY.html) A [](GLOSSARY.html) change
  id: totrans-336
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 视图[](GLOSSARY.html)被通知A[](GLOSSARY.html)更改
- en: Views [](GLOSSARY.html) are [](GLOSSARY.html) notified [](GLOSSARY.html) of
    [](GLOSSARY.html) B [](GLOSSARY.html) change
  id: totrans-337
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 视图[](GLOSSARY.html)被通知B[](GLOSSARY.html)更改
- en: or [](GLOSSARY.html) if [](GLOSSARY.html) the [](GLOSSARY.html) qualification
    [](GLOSSARY.html) protocol [](GLOSSARY.html) allows [](GLOSSARY.html) to [](GLOSSARY.html)
    deliver [](GLOSSARY.html) information [](GLOSSARY.html) about [](GLOSSARY.html)
    multiple changes [](GLOSSARY.html) at [](GLOSSARY.html) once
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 或者如果资格协议允许一次传递有关多个更改的信息
- en: Set [](GLOSSARY.html) A [](GLOSSARY.html) attribute [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) Model
  id: totrans-339
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在模型上设置A[](GLOSSARY.html)属性
- en: Set [](GLOSSARY.html) B [](GLOSSARY.html) attribute [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) Model
  id: totrans-340
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在模型上设置B[](GLOSSARY.html)属性
- en: Views [](GLOSSARY.html) are [](GLOSSARY.html) notified [](GLOSSARY.html) of
    [](GLOSSARY.html) A+B [](GLOSSARY.html) change
  id: totrans-341
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 视图[](GLOSSARY.html)被通知A+B[](GLOSSARY.html)更改
- en: 'Variation 2: set/add multiple items'
  id: totrans-342
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 变体2：设置/添加多个项目
- en: Transactional [](GLOSSARY.html) setting [](GLOSSARY.html) can [](GLOSSARY.html)
    also [](GLOSSARY.html) be [](GLOSSARY.html) used [](GLOSSARY.html) to [](GLOSSARY.html)
    add [](GLOSSARY.html) multiple [](GLOSSARY.html) elements [](GLOSSARY.html) at
    [](GLOSSARY.html) once, generally [](GLOSSARY.html) for [](GLOSSARY.html) a Model
    [](GLOSSARY.html) behaving [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html)
    list. The [](GLOSSARY.html) Model [](GLOSSARY.html) might [](GLOSSARY.html) want
    [](GLOSSARY.html) to [](GLOSSARY.html) implement [](GLOSSARY.html) an [](GLOSSARY.html)
    interface [](GLOSSARY.html) for [](GLOSSARY.html) adding both [](GLOSSARY.html)
    one [](GLOSSARY.html) or [](GLOSSARY.html) multiple [](GLOSSARY.html) elements.
    The [](GLOSSARY.html) implementation [](GLOSSARY.html) normally [](GLOSSARY.html)
    acts [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html) syntactic [](GLOSSARY.html)
    sugar [](GLOSSARY.html) to generate [](GLOSSARY.html) a [](GLOSSARY.html) list
    [](GLOSSARY.html) with [](GLOSSARY.html) one [](GLOSSARY.html) item.
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 事务设置也可用于一次添加多个元素，通常用于模拟作为列表的模型行为。模型可能希望实现一个接口，用于添加一个或多个元素。实现通常充当一种语法糖，生成一个带有一个项目的列表。
- en: '[PRE33]'
  id: totrans-344
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: Variations on the Notification Strategy
  id: totrans-345
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通知策略的变种
- en: Variations on the notification strategy
  id: totrans-346
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通知策略的变种
- en: '[Qualified Notification](qualified_notification.html): Deliver [](GLOSSARY.html)
    notification [](GLOSSARY.html) with [](GLOSSARY.html) enhanced [](GLOSSARY.html)
    semantics [](GLOSSARY.html) to [](GLOSSARY.html) inform [](GLOSSARY.html) listeners
    [](GLOSSARY.html) about [](GLOSSARY.html) what [](GLOSSARY.html) has [](GLOSSARY.html)
    changed.'
  id: totrans-347
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[合格通知](qualified_notification.html)：以增强语义传递通知，通知监听者有关发生了什么变化。'
- en: '[Qualified Notification Model with Subscribing](qualified_notification_model_with_subscribing.html):
    View [](GLOSSARY.html) subscribes [](GLOSSARY.html) to [](GLOSSARY.html) specific
    [](GLOSSARY.html) events [](GLOSSARY.html) and [](GLOSSARY.html) gets [](GLOSSARY.html)
    notified [](GLOSSARY.html) only [](GLOSSARY.html) when [](GLOSSARY.html) they
    [](GLOSSARY.html) occur.'
  id: totrans-348
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[带订阅的合格通知模型](qualified_notification_model_with_subscribing.html)：视图订阅特定事件，仅在其发生时收到通知。'
- en: '[Passive Model](passive_model.html): A [](GLOSSARY.html) Model [](GLOSSARY.html)
    without [](GLOSSARY.html) notification [](GLOSSARY.html) features.'
  id: totrans-349
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[被动模型](passive_model.html)：没有通知功能的模型。'
- en: '[Lazy Model](lazy_model.html): A [](GLOSSARY.html) Model [](GLOSSARY.html)
    delivering [](GLOSSARY.html) its [](GLOSSARY.html) notifications [](GLOSSARY.html)
    on [](GLOSSARY.html) explicit [](GLOSSARY.html) request.'
  id: totrans-350
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[惰性模型](lazy_model.html)：在明确请求时传递其通知的模型。'
- en: '[Accumulator](accumulator.md): Listens [](GLOSSARY.html) to [](GLOSSARY.html)
    submodels [](GLOSSARY.html) and [](GLOSSARY.html) squashes [](GLOSSARY.html) multiple
    [](GLOSSARY.html) notifications [](GLOSSARY.html) into [](GLOSSARY.html) a [](GLOSSARY.html)
    single [](GLOSSARY.html) one.'
  id: totrans-351
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[累加器](accumulator.md)：监听子模型并将多个通知压缩成单个通知。'
- en: '[Pre/Post notification](pre_post_notification.html): Deliver [](GLOSSARY.html)
    notifications [](GLOSSARY.html) before [](GLOSSARY.html) or [](GLOSSARY.html)
    after [](GLOSSARY.html) the [](GLOSSARY.html) change.'
  id: totrans-352
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[前/后通知](pre_post_notification.html)：在更改之前或之后传递通知。'
- en: '[Vetoers](vetoers.md): Inquire [](GLOSSARY.html) listeners [](GLOSSARY.html)
    to [](GLOSSARY.html) approve [](GLOSSARY.html) or [](GLOSSARY.html) deny [](GLOSSARY.html)
    a [](GLOSSARY.html) change [](GLOSSARY.html) to [](GLOSSARY.html) occur.'
  id: totrans-353
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[否决者](vetoers.md)：询问监听者批准或拒绝发生变化。'
- en: '[Signals](signals.md): Isolate [](GLOSSARY.html) notification [](GLOSSARY.html)
    into [](GLOSSARY.html) a [](GLOSSARY.html) separate [](GLOSSARY.html) object.'
  id: totrans-354
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[信号](signals.md)：将通知隔离到一个单独的对象中。'
- en: Qualified Notification
  id: totrans-355
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 合格通知
- en: Qualified Notification
  id: totrans-356
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 合格通知
- en: Motivation
  id: totrans-357
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'The [](GLOSSARY.html) most [](GLOSSARY.html) basic [](GLOSSARY.html) form [](GLOSSARY.html)
    of [](GLOSSARY.html) Model [](GLOSSARY.html) notification [](GLOSSARY.html) is
    [](GLOSSARY.html) unqualified: Views [](GLOSSARY.html) are just [](GLOSSARY.html)
    informed [](GLOSSARY.html) that [](GLOSSARY.html) a [](GLOSSARY.html) change [](GLOSSARY.html)
    occurred [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html)
    state. In [](GLOSSARY.html) response, Views [](GLOSSARY.html) retrieve [](GLOSSARY.html)
    the [](GLOSSARY.html) new [](GLOSSARY.html) Model [](GLOSSARY.html) state [](GLOSSARY.html)
    and [](GLOSSARY.html) repaint [](GLOSSARY.html) themselves [](GLOSSARY.html) accordingly.
    This [](GLOSSARY.html) approach [](GLOSSARY.html) is [](GLOSSARY.html) simple
    [](GLOSSARY.html) but [](GLOSSARY.html) coarse. Consider [](GLOSSARY.html) these
    [](GLOSSARY.html) scenarios:'
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 模型通知的最基本形式是不合格的：视图只是被告知模型状态发生了变化。作为响应，视图检索新的模型状态并相应地重新绘制自己。这种方法简单但粗糙。考虑以下情景：
- en: A [](GLOSSARY.html) specific [](GLOSSARY.html) View [](GLOSSARY.html) is [](GLOSSARY.html)
    only [](GLOSSARY.html) interested [](GLOSSARY.html) in [](GLOSSARY.html) a [](GLOSSARY.html)
    subset [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) Model. The
    [](GLOSSARY.html) Model [](GLOSSARY.html) changes, but [](GLOSSARY.html) not [](GLOSSARY.html)
    in [](GLOSSARY.html) the [](GLOSSARY.html) data [](GLOSSARY.html) relevant [](GLOSSARY.html)
    to [](GLOSSARY.html) the [](GLOSSARY.html) View. The [](GLOSSARY.html) View [](GLOSSARY.html)
    is [](GLOSSARY.html) forced [](GLOSSARY.html) to [](GLOSSARY.html) repaint [](GLOSSARY.html)
    even [](GLOSSARY.html) if [](GLOSSARY.html) none [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) data it [](GLOSSARY.html) displays [](GLOSSARY.html) actually
    [](GLOSSARY.html) changed
  id: totrans-359
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[特定视图](GLOSSARY.html)仅对模型的子集感兴趣。模型会发生变化，但与视图相关的数据不会改变。即使显示的数据实际上没有改变，视图也会被迫重新绘制。'
- en: A [](GLOSSARY.html) View [](GLOSSARY.html) has [](GLOSSARY.html) additional
    [](GLOSSARY.html) state [](GLOSSARY.html) which [](GLOSSARY.html) is [](GLOSSARY.html)
    destroyed [](GLOSSARY.html) by [](GLOSSARY.html) a [](GLOSSARY.html) full [](GLOSSARY.html)
    repaint. For [](GLOSSARY.html) example, a [](GLOSSARY.html) TreeView [](GLOSSARY.html)
    representing [](GLOSSARY.html) files [](GLOSSARY.html) in [](GLOSSARY.html) a
    [](GLOSSARY.html) directory [](GLOSSARY.html) keeps [](GLOSSARY.html) state for
    [](GLOSSARY.html) the [](GLOSSARY.html) opened/closed [](GLOSSARY.html) sub-branches.
    If [](GLOSSARY.html) a [](GLOSSARY.html) new [](GLOSSARY.html) file [](GLOSSARY.html)
    is [](GLOSSARY.html) added [](GLOSSARY.html) and [](GLOSSARY.html) the [](GLOSSARY.html)
    View is [](GLOSSARY.html) forced [](GLOSSARY.html) to [](GLOSSARY.html) rescan
    [](GLOSSARY.html) and [](GLOSSARY.html) repaint, the [](GLOSSARY.html) open/closed
    [](GLOSSARY.html) state [](GLOSSARY.html) is [](GLOSSARY.html) discarded. Knowing
    [](GLOSSARY.html) the [](GLOSSARY.html) nature [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) change [](GLOSSARY.html) would [](GLOSSARY.html) help [](GLOSSARY.html)
    in [](GLOSSARY.html) handling [](GLOSSARY.html) this [](GLOSSARY.html) case.
  id: totrans-360
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 视图具有额外的状态，由完全重绘销毁。例如，表示目录中文件的TreeView保留了打开/关闭子分支的状态。如果添加了新文件并且强制重新扫描和重绘视图，则打开/关闭状态将被丢弃。了解变化的性质将有助于处理这种情况。
- en: A [](GLOSSARY.html) View [](GLOSSARY.html) takes [](GLOSSARY.html) a [](GLOSSARY.html)
    very [](GLOSSARY.html) long [](GLOSSARY.html) time [](GLOSSARY.html) to [](GLOSSARY.html)
    perform [](GLOSSARY.html) a [](GLOSSARY.html) repaint [](GLOSSARY.html) from [](GLOSSARY.html)
    the [](GLOSSARY.html) full Model's [](GLOSSARY.html) content, but [](GLOSSARY.html)
    it [](GLOSSARY.html) can [](GLOSSARY.html) run [](GLOSSARY.html) faster [](GLOSSARY.html)
    if [](GLOSSARY.html) it [](GLOSSARY.html) can [](GLOSSARY.html) operate [](GLOSSARY.html)
    by [](GLOSSARY.html) knowing only [](GLOSSARY.html) the [](GLOSSARY.html) change.
  id: totrans-361
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 视图从完整模型的内容执行重绘需要很长时间，但如果它只知道变化，它可以更快地运行。
- en: A [](GLOSSARY.html) Qualified [](GLOSSARY.html) Notification [](GLOSSARY.html)
    addresses [](GLOSSARY.html) the [](GLOSSARY.html) above [](GLOSSARY.html) cases
    [](GLOSSARY.html) by [](GLOSSARY.html) enhancing [](GLOSSARY.html) the notification
    [](GLOSSARY.html) system [](GLOSSARY.html) with [](GLOSSARY.html) a [](GLOSSARY.html)
    more [](GLOSSARY.html) fine-grained [](GLOSSARY.html) protocol [](GLOSSARY.html)
    carrying [](GLOSSARY.html) information about [](GLOSSARY.html) what [](GLOSSARY.html)
    has [](GLOSSARY.html) changed [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html)
    Model.
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: 一个[合格通知](GLOSSARY.html)通过增强通知系统，使用更精细的协议携带有关模型中发生的变化的信息，解决了上述情况。
- en: Design
  id: totrans-363
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: Qualified [](GLOSSARY.html) Notification [](GLOSSARY.html) can [](GLOSSARY.html)
    be [](GLOSSARY.html) implemented [](GLOSSARY.html) by [](GLOSSARY.html) passing
    [](GLOSSARY.html) arguments [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    Views' `notify()` method. When [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html)
    changes [](GLOSSARY.html) and [](GLOSSARY.html) calls [](GLOSSARY.html) this [](GLOSSARY.html)
    method [](GLOSSARY.html) on [](GLOSSARY.html) the subscribed [](GLOSSARY.html)
    Views, it [](GLOSSARY.html) passes [](GLOSSARY.html) information [](GLOSSARY.html)
    about
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 通过向视图的`notify()`方法传递参数来实现合格通知。当模型发生更改并在订阅的视图上调用此方法时，它会传递有关
- en: The [](GLOSSARY.html) subject [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    change (*e.g.*, which [](GLOSSARY.html) Model [](GLOSSARY.html) property [](GLOSSARY.html)
    has [](GLOSSARY.html) changed)
  id: totrans-365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改变的主题（*例如*，哪个模型属性已更改）
- en: The [](GLOSSARY.html) nature [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    change (*e.g.*, the [](GLOSSARY.html) previous [](GLOSSARY.html) and [](GLOSSARY.html)
    new [](GLOSSARY.html) values)
  id: totrans-366
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改变的性质（*例如*，先前和新值）
- en: The [](GLOSSARY.html) following [](GLOSSARY.html) example [](GLOSSARY.html)
    implementation [](GLOSSARY.html) trivially [](GLOSSARY.html) satisfies [](GLOSSARY.html)
    the [](GLOSSARY.html) above [](GLOSSARY.html) design
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 以下示例实现轻松满足上述设计
- en: '[PRE34]'
  id: totrans-368
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: Unfortunately, this [](GLOSSARY.html) solution [](GLOSSARY.html) does [](GLOSSARY.html)
    not [](GLOSSARY.html) allow [](GLOSSARY.html) to [](GLOSSARY.html) notify [](GLOSSARY.html)
    about [](GLOSSARY.html) more [](GLOSSARY.html) than [](GLOSSARY.html) one property
    [](GLOSSARY.html) change [](GLOSSARY.html) at [](GLOSSARY.html) a [](GLOSSARY.html)
    time. Additionally, it [](GLOSSARY.html) does [](GLOSSARY.html) not [](GLOSSARY.html)
    support [](GLOSSARY.html) multiple [](GLOSSARY.html) Models notifying [](GLOSSARY.html)
    the [](GLOSSARY.html) same [](GLOSSARY.html) View, as [](GLOSSARY.html) the [](GLOSSARY.html)
    View [](GLOSSARY.html) would [](GLOSSARY.html) not [](GLOSSARY.html) be [](GLOSSARY.html)
    able [](GLOSSARY.html) to [](GLOSSARY.html) differentiate [](GLOSSARY.html) which
    Model [](GLOSSARY.html) is [](GLOSSARY.html) reporting [](GLOSSARY.html) the [](GLOSSARY.html)
    change.
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，这种解决方案不能一次通知多个属性的更改。此外，它不支持多个模型通知相同的视图，因为视图无法区分哪个模型正在报告更改。
- en: A [](GLOSSARY.html) more [](GLOSSARY.html) flexible [](GLOSSARY.html) approach
    [](GLOSSARY.html) is [](GLOSSARY.html) given [](GLOSSARY.html) by [](GLOSSARY.html)
    the [](GLOSSARY.html) following [](GLOSSARY.html) implementation
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: 一个更灵活的方法由以下实现给出
- en: '[PRE35]'
  id: totrans-371
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: where `change_info` is [](GLOSSARY.html) a [](GLOSSARY.html) dictionary [](GLOSSARY.html)
    or [](GLOSSARY.html) other [](GLOSSARY.html) data [](GLOSSARY.html) object [](GLOSSARY.html)
    describing [](GLOSSARY.html) the change [](GLOSSARY.html) in [](GLOSSARY.html)
    enhanced [](GLOSSARY.html) detail. Models [](GLOSSARY.html) are [](GLOSSARY.html)
    responsible [](GLOSSARY.html) for [](GLOSSARY.html) creating [](GLOSSARY.html)
    and [](GLOSSARY.html) populating this [](GLOSSARY.html) data [](GLOSSARY.html)
    object [](GLOSSARY.html) so [](GLOSSARY.html) that [](GLOSSARY.html) is [](GLOSSARY.html)
    meaningful [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) receiving
    [](GLOSSARY.html) View. As [](GLOSSARY.html) a [](GLOSSARY.html) side [](GLOSSARY.html)
    effect of [](GLOSSARY.html) the [](GLOSSARY.html) design, the [](GLOSSARY.html)
    View [](GLOSSARY.html) does [](GLOSSARY.html) not [](GLOSSARY.html) need [](GLOSSARY.html)
    to [](GLOSSARY.html) inquire [](GLOSSARY.html) the [](GLOSSARY.html) Model's [](GLOSSARY.html)
    state [](GLOSSARY.html) anymore. Instead, it [](GLOSSARY.html) keeps [](GLOSSARY.html)
    its [](GLOSSARY.html) synchronization [](GLOSSARY.html) by [](GLOSSARY.html) means
    [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) change [](GLOSSARY.html)
    information.
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 其中`change_info`是[](GLOSSARY.html)描述改变的增强细节的[](GLOSSARY.html)字典或[](GLOSSARY.html)其他[](GLOSSARY.html)数据[](GLOSSARY.html)对象。模型[](GLOSSARY.html)负责创建[](GLOSSARY.html)和填充这个[](GLOSSARY.html)数据[](GLOSSARY.html)对象，以便对[](GLOSSARY.html)接收的视图有意义。作为设计的副作用，视图不再需要查询模型的状态。相反，它通过改变信息保持同步。
- en: Most [](GLOSSARY.html) modern [](GLOSSARY.html) MVC [](GLOSSARY.html) frameworks
    [](GLOSSARY.html) provide [](GLOSSARY.html) qualified [](GLOSSARY.html) notifications
    [](GLOSSARY.html) in [](GLOSSARY.html) one [](GLOSSARY.html) form [](GLOSSARY.html)
    or [](GLOSSARY.html) another (e.g. bound [](GLOSSARY.html) properties [](GLOSSARY.html)
    or [](GLOSSARY.html) signals). An [](GLOSSARY.html) unqualified [](GLOSSARY.html)
    reporting [](GLOSSARY.html) is [](GLOSSARY.html) uncommon [](GLOSSARY.html) but
    [](GLOSSARY.html) not [](GLOSSARY.html) completely dismissable [](GLOSSARY.html)
    as [](GLOSSARY.html) a [](GLOSSARY.html) strategy, especially [](GLOSSARY.html)
    for [](GLOSSARY.html) cases [](GLOSSARY.html) where [](GLOSSARY.html) there [](GLOSSARY.html)
    is [](GLOSSARY.html) no [](GLOSSARY.html) granularity [](GLOSSARY.html) in [](GLOSSARY.html)
    the Model [](GLOSSARY.html) to [](GLOSSARY.html) be [](GLOSSARY.html) exploited,
    or [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html) cannot [](GLOSSARY.html)
    take [](GLOSSARY.html) advantage [](GLOSSARY.html) of [](GLOSSARY.html) a [](GLOSSARY.html)
    fine-level [](GLOSSARY.html) notification.
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数现代MVC框架以一种形式或另一种形式（例如绑定属性或信号）提供有资格的通知。不合格的报告是不常见的，但作为一种策略并非完全可忽视，特别是对于模型中没有可利用的细粒度，或者视图无法利用细粒度通知的情况。
- en: Qualified Notification Model with Subscribing
  id: totrans-374
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 有资格的通知模型与订阅
- en: Qualified Notification with Subscribing
  id: totrans-375
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 有资格的通知与订阅
- en: Motivation
  id: totrans-376
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'In [](GLOSSARY.html) this [](GLOSSARY.html) variation [](GLOSSARY.html) of
    [](GLOSSARY.html) Qualified [](GLOSSARY.html) Notification, the [](GLOSSARY.html)
    listener [](GLOSSARY.html) specifies [](GLOSSARY.html) which [](GLOSSARY.html)
    change it [](GLOSSARY.html) is [](GLOSSARY.html) interested [](GLOSSARY.html)
    in, and [](GLOSSARY.html) a [](GLOSSARY.html) notification [](GLOSSARY.html) is
    [](GLOSSARY.html) issued [](GLOSSARY.html) only [](GLOSSARY.html) with [](GLOSSARY.html)
    the [](GLOSSARY.html) relevant [](GLOSSARY.html) change occurs. The [](GLOSSARY.html)
    two [](GLOSSARY.html) solutions [](GLOSSARY.html) therefore [](GLOSSARY.html)
    differ [](GLOSSARY.html) in [](GLOSSARY.html) which [](GLOSSARY.html) entity [](GLOSSARY.html)
    performs [](GLOSSARY.html) filtering of [](GLOSSARY.html) unnecessary [](GLOSSARY.html)
    notifications: in [](GLOSSARY.html) Qualified [](GLOSSARY.html) Notification [](GLOSSARY.html)
    the [](GLOSSARY.html) filtering [](GLOSSARY.html) is [](GLOSSARY.html) performed
    by [](GLOSSARY.html) the [](GLOSSARY.html) listener, after [](GLOSSARY.html) the
    [](GLOSSARY.html) notification [](GLOSSARY.html) is [](GLOSSARY.html) delivered,
    while [](GLOSSARY.html) in [](GLOSSARY.html) Qualified Notification [](GLOSSARY.html)
    with [](GLOSSARY.html) Subscribing, the [](GLOSSARY.html) filtering [](GLOSSARY.html)
    is [](GLOSSARY.html) performed [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html)
    Model, honoring [](GLOSSARY.html) the [](GLOSSARY.html) listener''s [](GLOSSARY.html)
    registration [](GLOSSARY.html) instructions.'
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种变体的合格通知中，监听器指定其感兴趣的更改，并且只有发生相关更改时才会发出通知。因此，这两种解决方案在执行不必要通知的过滤实体方面存在差异：在合格通知中，过滤是在通知传递后由监听器执行的，而在具有订阅的合格通知中，过滤是由模型执行的，遵守监听器的注册指令。
- en: Design
  id: totrans-378
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: 'For [](GLOSSARY.html) a [](GLOSSARY.html) Qualified [](GLOSSARY.html) Notification
    [](GLOSSARY.html) with [](GLOSSARY.html) Subscribing, the [](GLOSSARY.html) Model
    [](GLOSSARY.html) must [](GLOSSARY.html) support:'
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: 对于具有订阅的合格通知，模型必须支持：
- en: an [](GLOSSARY.html) appropriate [](GLOSSARY.html) signature [](GLOSSARY.html)
    for [](GLOSSARY.html) the `register()` method, allowing [](GLOSSARY.html) to [](GLOSSARY.html)
    specify [](GLOSSARY.html) the [](GLOSSARY.html) type of [](GLOSSARY.html) modification
    [](GLOSSARY.html) a [](GLOSSARY.html) listener [](GLOSSARY.html) is [](GLOSSARY.html)
    interested [](GLOSSARY.html) in.
  id: totrans-380
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个适合`register()`方法的签名，允许指定监听器感兴趣的修改类型。
- en: preservation [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) passed
    [](GLOSSARY.html) information [](GLOSSARY.html) in [](GLOSSARY.html) an [](GLOSSARY.html)
    internal [](GLOSSARY.html) registry, which [](GLOSSARY.html) will [](GLOSSARY.html)
    be used [](GLOSSARY.html) during [](GLOSSARY.html) notification.
  id: totrans-381
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在内部注册表中保留传递的信息，这些信息将在通知期间使用。
- en: When [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) experiences
    [](GLOSSARY.html) a [](GLOSSARY.html) change [](GLOSSARY.html) in [](GLOSSARY.html)
    its [](GLOSSARY.html) content, it [](GLOSSARY.html) must [](GLOSSARY.html) consult
    [](GLOSSARY.html) its internal [](GLOSSARY.html) registry [](GLOSSARY.html) to
    [](GLOSSARY.html) verify [](GLOSSARY.html) if [](GLOSSARY.html) a [](GLOSSARY.html)
    listener [](GLOSSARY.html) is [](GLOSSARY.html) interested [](GLOSSARY.html) in
    [](GLOSSARY.html) this [](GLOSSARY.html) information. The [](GLOSSARY.html) Model
    [](GLOSSARY.html) then [](GLOSSARY.html) informs [](GLOSSARY.html) the [](GLOSSARY.html)
    listener [](GLOSSARY.html) only [](GLOSSARY.html) if [](GLOSSARY.html) this [](GLOSSARY.html)
    is [](GLOSSARY.html) the [](GLOSSARY.html) case.
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: 当模型内容发生变化时，必须查询其内部注册表以验证是否有监听器对此信息感兴趣。如果是这种情况，模型则通知监听器。
- en: 'Practical Example: Apple KVO (Key-Value Observer)'
  id: totrans-383
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实例：Apple KVO（键值观察器）
- en: Apple [](GLOSSARY.html) KVO (Key-Value [](GLOSSARY.html) Observer) is [](GLOSSARY.html)
    a [](GLOSSARY.html) form [](GLOSSARY.html) of [](GLOSSARY.html) Qualified [](GLOSSARY.html)
    Notification [](GLOSSARY.html) with [](GLOSSARY.html) Subscribing. The [](GLOSSARY.html)
    Model [](GLOSSARY.html) supports [](GLOSSARY.html) an `addObserver` method, whose
    [](GLOSSARY.html) signature [](GLOSSARY.html) allows [](GLOSSARY.html) to [](GLOSSARY.html)
    specify
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: Apple KVO（键值观察器）是一种具有订阅的合格通知形式。模型支持`addObserver`方法，其签名允许指定
- en: the [](GLOSSARY.html) property [](GLOSSARY.html) the [](GLOSSARY.html) listener
    [](GLOSSARY.html) is [](GLOSSARY.html) interested [](GLOSSARY.html) in, and [](GLOSSARY.html)
    the [](GLOSSARY.html) type [](GLOSSARY.html) of [](GLOSSARY.html) change. For
    [](GLOSSARY.html) example, a listener [](GLOSSARY.html) registers [](GLOSSARY.html)
    for [](GLOSSARY.html) changes [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html)
    Model [](GLOSSARY.html) property `my_property` with [](GLOSSARY.html) the [](GLOSSARY.html)
    following [](GLOSSARY.html) call
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: 监听器感兴趣的属性及变化类型。例如，监听器使用以下调用注册对模型属性`my_property`的更改
- en: '[PRE36]'
  id: totrans-386
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: When [](GLOSSARY.html) the `my_property` value [](GLOSSARY.html) changes, the
    [](GLOSSARY.html) listener's [](GLOSSARY.html) method `observeValueForKeyPath:ofObject:change:context:`
    will [](GLOSSARY.html) be [](GLOSSARY.html) invoked [](GLOSSARY.html) on [](GLOSSARY.html)
    the listener. Changes [](GLOSSARY.html) in [](GLOSSARY.html) other [](GLOSSARY.html)
    Model's [](GLOSSARY.html) properties [](GLOSSARY.html) will [](GLOSSARY.html)
    not [](GLOSSARY.html) be [](GLOSSARY.html) delivered.
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
  zh: 当`my_property`值发生变化时，监听器的方法`observeValueForKeyPath:ofObject:change:context:`将在监听器上调用。其他模型属性的更改将不会传递。
- en: References
  id: totrans-388
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 参考资料
- en: '[Key-Value Observing Programming Guide](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)'
  id: totrans-389
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[键值观察编程指南](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)'
- en: '[KVO considered harmful](http://khanlou.com/2013/12/kvo-considered-harmful/)'
  id: totrans-390
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[KVO 有害论](http://khanlou.com/2013/12/kvo-considered-harmful/)'
- en: Passive Model
  id: totrans-391
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 被动模型
- en: Passive Model
  id: totrans-392
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 被动模型
- en: Motivation
  id: totrans-393
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'Traditional [](GLOSSARY.html) MVC [](GLOSSARY.html) uses [](GLOSSARY.html)
    the [](GLOSSARY.html) so-called **Active [](GLOSSARY.html) Model**: when [](GLOSSARY.html)
    the [](GLOSSARY.html) Model [](GLOSSARY.html) changes [](GLOSSARY.html) its listeners
    [](GLOSSARY.html) are [](GLOSSARY.html) notified [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) change. Its [](GLOSSARY.html) counterpart [](GLOSSARY.html)
    is [](GLOSSARY.html) the **Passive [](GLOSSARY.html) Model** which [](GLOSSARY.html)
    does [](GLOSSARY.html) not [](GLOSSARY.html) perform [](GLOSSARY.html) notification
    [](GLOSSARY.html) services. Instead, this [](GLOSSARY.html) task [](GLOSSARY.html)
    is [](GLOSSARY.html) performed by [](GLOSSARY.html) the [](GLOSSARY.html) Controller.'
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: 传统的[MVC](GLOSSARY.html)使用所谓的**主动[模型](GLOSSARY.html)**：当[模型](GLOSSARY.html)发生变化时，其监听器会被通知变化。它的对应物是**被动[模型](GLOSSARY.html)**，它不提供通知服务。相反，这个任务由[控制器](GLOSSARY.html)执行。
- en: Passive [](GLOSSARY.html) Model [](GLOSSARY.html) has [](GLOSSARY.html) its
    [](GLOSSARY.html) area [](GLOSSARY.html) of [](GLOSSARY.html) excellence [](GLOSSARY.html)
    in [](GLOSSARY.html) Web-based [](GLOSSARY.html) MVC, where [](GLOSSARY.html)
    the fundamental [](GLOSSARY.html) nature [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) HTTP [](GLOSSARY.html) protocol [](GLOSSARY.html) prevents
    [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) to notify [](GLOSSARY.html)
    the [](GLOSSARY.html) View. It [](GLOSSARY.html) is [](GLOSSARY.html) also [](GLOSSARY.html)
    relevant [](GLOSSARY.html) for [](GLOSSARY.html) all [](GLOSSARY.html) those [](GLOSSARY.html)
    cases [](GLOSSARY.html) where [](GLOSSARY.html) notifications cannot [](GLOSSARY.html)
    be [](GLOSSARY.html) produced [](GLOSSARY.html) because [](GLOSSARY.html) the
    [](GLOSSARY.html) data [](GLOSSARY.html) source [](GLOSSARY.html) is [](GLOSSARY.html)
    unable [](GLOSSARY.html) to [](GLOSSARY.html) provide [](GLOSSARY.html) this [](GLOSSARY.html)
    service, such [](GLOSSARY.html) as [](GLOSSARY.html) most [](GLOSSARY.html) databases
    [](GLOSSARY.html) or [](GLOSSARY.html) a [](GLOSSARY.html) plain [](GLOSSARY.html)
    file.
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: 被动[模型](GLOSSARY.html)在基于Web的MVC中有其卓越的领域，其中HTTP协议的基本性质阻止[模型](GLOSSARY.html)通知[视图](GLOSSARY.html)。它也适用于所有那些无法产生通知的情况，因为数据源无法提供此服务，比如大多数数据库或纯文本文件。
- en: Design
  id: totrans-396
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: The [](GLOSSARY.html) interaction [](GLOSSARY.html) diagram [](GLOSSARY.html)
    shows [](GLOSSARY.html) the [](GLOSSARY.html) behavior [](GLOSSARY.html) of [](GLOSSARY.html)
    a [](GLOSSARY.html) Passive [](GLOSSARY.html) Model
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: 交互图显示了被动[模型](GLOSSARY.html)的行为
- en: '![](passive_model.png)'
  id: totrans-398
  prefs: []
  type: TYPE_IMG
  zh: '![](passive_model.png)'
- en: 'Specifically, the [](GLOSSARY.html) sequence [](GLOSSARY.html) of [](GLOSSARY.html)
    events [](GLOSSARY.html) is:'
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: 具体来说，事件序列是：
- en: The [](GLOSSARY.html) Controller [](GLOSSARY.html) modifies [](GLOSSARY.html)
    the [](GLOSSARY.html) Model
  id: totrans-400
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[控制器](GLOSSARY.html)修改[模型](GLOSSARY.html)'
- en: The [](GLOSSARY.html) Controller [](GLOSSARY.html) informs [](GLOSSARY.html)
    the [](GLOSSARY.html) View [](GLOSSARY.html) to [](GLOSSARY.html) update [](GLOSSARY.html)
    itself
  id: totrans-401
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[控制器](GLOSSARY.html)通知[视图](GLOSSARY.html)更新自身'
- en: The [](GLOSSARY.html) View [](GLOSSARY.html) now [](GLOSSARY.html) inquires
    [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) contents [](GLOSSARY.html)
    as [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html) Active [](GLOSSARY.html)
    case.
  id: totrans-402
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在[视图](GLOSSARY.html)查询[模型](GLOSSARY.html)内容，就像在主动情况下一样。
- en: The [](GLOSSARY.html) major [](GLOSSARY.html) shortcoming [](GLOSSARY.html)
    of [](GLOSSARY.html) a [](GLOSSARY.html) Passive [](GLOSSARY.html) Model [](GLOSSARY.html)
    is [](GLOSSARY.html) that [](GLOSSARY.html) Views [](GLOSSARY.html) get [](GLOSSARY.html)
    desynchronized if [](GLOSSARY.html) multiple [](GLOSSARY.html) Controllers [](GLOSSARY.html)
    can [](GLOSSARY.html) modify [](GLOSSARY.html) the [](GLOSSARY.html) Model. Collaboration
    [](GLOSSARY.html) between [](GLOSSARY.html) Controllers can [](GLOSSARY.html)
    prevent [](GLOSSARY.html) this [](GLOSSARY.html) desynchronization, but [](GLOSSARY.html)
    for [](GLOSSARY.html) all [](GLOSSARY.html) practical [](GLOSSARY.html) purposes
    [](GLOSSARY.html) an [](GLOSSARY.html) Active Model [](GLOSSARY.html) quickly
    [](GLOSSARY.html) becomes [](GLOSSARY.html) a [](GLOSSARY.html) better [](GLOSSARY.html)
    solution. If [](GLOSSARY.html) this [](GLOSSARY.html) is [](GLOSSARY.html) required,
    a [](GLOSSARY.html) Passive [](GLOSSARY.html) Model can [](GLOSSARY.html) become
    [](GLOSSARY.html) Active [](GLOSSARY.html) either [](GLOSSARY.html) through [](GLOSSARY.html)
    inheritance [](GLOSSARY.html) or [](GLOSSARY.html) by [](GLOSSARY.html) using
    [](GLOSSARY.html) a [](GLOSSARY.html) wrapper [](GLOSSARY.html) class satisfying
    [](GLOSSARY.html) the [](GLOSSARY.html) Passive [](GLOSSARY.html) Model's [](GLOSSARY.html)
    original [](GLOSSARY.html) interface. This [](GLOSSARY.html) wrapper [](GLOSSARY.html)
    will [](GLOSSARY.html) receive change [](GLOSSARY.html) requests [](GLOSSARY.html)
    from [](GLOSSARY.html) Controllers, delegate [](GLOSSARY.html) them [](GLOSSARY.html)
    to [](GLOSSARY.html) the [](GLOSSARY.html) Passive [](GLOSSARY.html) Model, and
    finally [](GLOSSARY.html) notify [](GLOSSARY.html) the [](GLOSSARY.html) listeners.
  id: totrans-403
  prefs: []
  type: TYPE_NORMAL
  zh: '[](GLOSSARY.html)Passive Model的主要短板是，如果多个Controllers可以修改Model，Views会出现不同步。Controllers之间的协作可以防止这种不同步，但在实际应用中，Active
    Model很快就会成为更好的解决方案。如果需要，Passive Model可以通过继承或使用满足Passive Model原始接口的包装类迅速变为Active。这个包装类将接收来自Controllers的更改请求，将其委托给Passive
    Model，最后通知监听者。'
- en: 'Despite [](GLOSSARY.html) the [](GLOSSARY.html) disadvantage, the [](GLOSSARY.html)
    Passive [](GLOSSARY.html) Model [](GLOSSARY.html) has [](GLOSSARY.html) the [](GLOSSARY.html)
    following [](GLOSSARY.html) important [](GLOSSARY.html) advantages:'
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管有缺点，Passive Model具有以下重要优点：
- en: Any [](GLOSSARY.html) object (e.g. a [](GLOSSARY.html) key-value [](GLOSSARY.html)
    dictionary, a [](GLOSSARY.html) list, a [](GLOSSARY.html) single [](GLOSSARY.html)
    value, a [](GLOSSARY.html) previously developed [](GLOSSARY.html) business [](GLOSSARY.html)
    object) can [](GLOSSARY.html) be [](GLOSSARY.html) used [](GLOSSARY.html) as [](GLOSSARY.html)
    a [](GLOSSARY.html) Model [](GLOSSARY.html) without [](GLOSSARY.html) modifications
  id: totrans-405
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 任何对象（例如键值字典、列表、单个值、先前开发的业务对象）都可以在不修改的情况下用作Model。
- en: It [](GLOSSARY.html) allows [](GLOSSARY.html) better [](GLOSSARY.html) control
    [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) refresh [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) View. The [](GLOSSARY.html) Controller
    can [](GLOSSARY.html) issue [](GLOSSARY.html) multiple [](GLOSSARY.html) changes
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html)
    without [](GLOSSARY.html) triggering [](GLOSSARY.html) a [](GLOSSARY.html) View's
    [](GLOSSARY.html) refresh for [](GLOSSARY.html) each [](GLOSSARY.html) change
  id: totrans-406
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它[](GLOSSARY.html)允许更好地控制视图的刷新。控制器可以对模型发出多个更改，而不会触发每个更改的视图刷新。
- en: As [](GLOSSARY.html) commented [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html)
    Motivation [](GLOSSARY.html) section, Web-based [](GLOSSARY.html) MVC [](GLOSSARY.html)
    cannot [](GLOSSARY.html) use [](GLOSSARY.html) an Active [](GLOSSARY.html) Model
    [](GLOSSARY.html) strategy [](GLOSSARY.html) due [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) intrinsic [](GLOSSARY.html) separation [](GLOSSARY.html)
    of [](GLOSSARY.html) Models [](GLOSSARY.html) from rendered [](GLOSSARY.html)
    Views.
  id: totrans-407
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 正如在动机部分所评论的，基于Web的MVC由于模型与呈现视图的固有分离而无法使用Active Model策略。
- en: 'Practical Example: Django MVC'
  id: totrans-408
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际示例：Django MVC
- en: The [](GLOSSARY.html) web [](GLOSSARY.html) framework [](GLOSSARY.html) Django
    [](GLOSSARY.html) is [](GLOSSARY.html) our [](GLOSSARY.html) choice [](GLOSSARY.html)
    to [](GLOSSARY.html) present [](GLOSSARY.html) a [](GLOSSARY.html) simple [](GLOSSARY.html)
    case [](GLOSSARY.html) of [](GLOSSARY.html) Passive Model. Please [](GLOSSARY.html)
    note [](GLOSSARY.html) that [](GLOSSARY.html) this [](GLOSSARY.html) example [](GLOSSARY.html)
    is [](GLOSSARY.html) not [](GLOSSARY.html) meant [](GLOSSARY.html) to [](GLOSSARY.html)
    be [](GLOSSARY.html) considered [](GLOSSARY.html) orthodox Django [](GLOSSARY.html)
    style, and [](GLOSSARY.html) has [](GLOSSARY.html) been [](GLOSSARY.html) stripped
    [](GLOSSARY.html) beyond [](GLOSSARY.html) the [](GLOSSARY.html) bare [](GLOSSARY.html)
    minimum [](GLOSSARY.html) to [](GLOSSARY.html) illustrate the [](GLOSSARY.html)
    topic.
  id: totrans-409
  prefs: []
  type: TYPE_NORMAL
  zh: Django Web框架是我们选择展示被动模型的简单案例。请注意，这个例子并不意味着被认为是正统的Django风格，并且已经被剥离到最低限度以阐明这个主题。
- en: A [](GLOSSARY.html) Model [](GLOSSARY.html) in [](GLOSSARY.html) Django [](GLOSSARY.html)
    is [](GLOSSARY.html) specified [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html)
    python [](GLOSSARY.html) class [](GLOSSARY.html) with [](GLOSSARY.html) appropriate
    [](GLOSSARY.html) descriptors
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 在Django中，模型被指定为一个带有适当描述符的Python类。
- en: '[PRE37]'
  id: totrans-411
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: This [](GLOSSARY.html) model [](GLOSSARY.html) is [](GLOSSARY.html) backed [](GLOSSARY.html)
    by [](GLOSSARY.html) a [](GLOSSARY.html) database, which [](GLOSSARY.html) stores
    [](GLOSSARY.html) the [](GLOSSARY.html) actual [](GLOSSARY.html) state. It [](GLOSSARY.html)
    is [](GLOSSARY.html) unable [](GLOSSARY.html) to deliver [](GLOSSARY.html) notification
    [](GLOSSARY.html) in [](GLOSSARY.html) case [](GLOSSARY.html) of [](GLOSSARY.html)
    database [](GLOSSARY.html) content [](GLOSSARY.html) changes, and [](GLOSSARY.html)
    is [](GLOSSARY.html) therefore [](GLOSSARY.html) a Passive [](GLOSSARY.html) Model.
    In [](GLOSSARY.html) the [](GLOSSARY.html) trivial [](GLOSSARY.html) case [](GLOSSARY.html)
    of [](GLOSSARY.html) Web [](GLOSSARY.html) MVC [](GLOSSARY.html) here [](GLOSSARY.html)
    presented, the [](GLOSSARY.html) need [](GLOSSARY.html) for notification [](GLOSSARY.html)
    does [](GLOSSARY.html) not [](GLOSSARY.html) emerge [](GLOSSARY.html) because
    [](GLOSSARY.html) the [](GLOSSARY.html) refreshing [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) View [](GLOSSARY.html) is [](GLOSSARY.html) triggered by
    [](GLOSSARY.html) an [](GLOSSARY.html) explicit [](GLOSSARY.html) browser [](GLOSSARY.html)
    request. The [](GLOSSARY.html) Controller [](GLOSSARY.html) handles [](GLOSSARY.html)
    this [](GLOSSARY.html) request, retrieves [](GLOSSARY.html) the [](GLOSSARY.html)
    Model, performs [](GLOSSARY.html) any [](GLOSSARY.html) required [](GLOSSARY.html)
    action, and [](GLOSSARY.html) renders [](GLOSSARY.html) the [](GLOSSARY.html)
    View [](GLOSSARY.html) with [](GLOSSARY.html) the updated [](GLOSSARY.html) data.
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: 此[模型](GLOSSARY.html)由数据库支持，该数据库存储实际状态。它无法在数据库内容更改时提供通知，因此是一种被动模型。在此处呈现的Web MVC的微不足道的情况中，不需要通知，因为视图的刷新是由显式浏览器请求触发的。控制器处理此请求，检索模型，执行任何必要的操作，并使用更新的数据呈现视图。
- en: '[PRE38]'
  id: totrans-413
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: References
  id: totrans-414
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 参考资料
- en: '[MSDN documentation: Model-View-Controller. Passive Model](https://msdn.microsoft.com/en-us/library/ff649643.aspx)'
  id: totrans-415
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[MSDN文档：模型-视图-控制器。被动模型](https://msdn.microsoft.com/en-us/library/ff649643.aspx)'
- en: Lazy Model
  id: totrans-416
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 懒惰模型
- en: Lazy Model
  id: totrans-417
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 懒惰模型
- en: Motivation
  id: totrans-418
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: A [](GLOSSARY.html) Lazy [](GLOSSARY.html) Model [](GLOSSARY.html) is [](GLOSSARY.html)
    an [](GLOSSARY.html) intermediate [](GLOSSARY.html) solution [](GLOSSARY.html)
    between [](GLOSSARY.html) Active [](GLOSSARY.html) and [](GLOSSARY.html) Passive
    [](GLOSSARY.html) Model that [](GLOSSARY.html) retains [](GLOSSARY.html) centrality
    [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) notification [](GLOSSARY.html)
    bookkeeping, but [](GLOSSARY.html) delegates notification [](GLOSSARY.html) triggering.
    It [](GLOSSARY.html) is [](GLOSSARY.html) a [](GLOSSARY.html) good [](GLOSSARY.html)
    strategy [](GLOSSARY.html) to [](GLOSSARY.html) retain [](GLOSSARY.html) full
    [](GLOSSARY.html) control [](GLOSSARY.html) on [](GLOSSARY.html) the notification
    [](GLOSSARY.html) flow [](GLOSSARY.html) as [](GLOSSARY.html) in [](GLOSSARY.html)
    the [](GLOSSARY.html) Passive [](GLOSSARY.html) model, but [](GLOSSARY.html) at
    [](GLOSSARY.html) the [](GLOSSARY.html) same [](GLOSSARY.html) time [](GLOSSARY.html)
    keep the [](GLOSSARY.html) listeners' list [](GLOSSARY.html) centralized [](GLOSSARY.html)
    so [](GLOSSARY.html) that [](GLOSSARY.html) they [](GLOSSARY.html) can [](GLOSSARY.html)
    all [](GLOSSARY.html) be [](GLOSSARY.html) notified [](GLOSSARY.html) of [](GLOSSARY.html)
    the changes, no [](GLOSSARY.html) matter [](GLOSSARY.html) which [](GLOSSARY.html)
    Controller [](GLOSSARY.html) performs [](GLOSSARY.html) them.
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: '**懒惰模型**是**主动**和**被动模型**之间的中间解决方案，保留了通知记录的中心性，但委托了通知触发。这是一种保留对通知流程的完全控制的良好策略，就像**被动模型**中一样，但同时保持监听器列表集中，以便无论哪个**控制器**执行它们，它们都可以被通知。'
- en: With [](GLOSSARY.html) the [](GLOSSARY.html) resulting [](GLOSSARY.html) design,
    the [](GLOSSARY.html) Controller [](GLOSSARY.html) is [](GLOSSARY.html) free [](GLOSSARY.html)
    to [](GLOSSARY.html) perform [](GLOSSARY.html) multiple changes [](GLOSSARY.html)
    on [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) object, and
    [](GLOSSARY.html) trigger [](GLOSSARY.html) the [](GLOSSARY.html) notification
    [](GLOSSARY.html) when [](GLOSSARY.html) done.
  id: totrans-420
  prefs: []
  type: TYPE_NORMAL
  zh: 使用得到的设计，**控制器**可以在**模型**对象上执行多个更改，并在完成时触发通知。
- en: Design
  id: totrans-421
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: Like [](GLOSSARY.html) an [](GLOSSARY.html) Active [](GLOSSARY.html) solution,
    listeners [](GLOSSARY.html) register [](GLOSSARY.html) on [](GLOSSARY.html) the
    [](GLOSSARY.html) Model [](GLOSSARY.html) and [](GLOSSARY.html) await [](GLOSSARY.html)
    for notification; Differently [](GLOSSARY.html) from [](GLOSSARY.html) it, methods
    [](GLOSSARY.html) that [](GLOSSARY.html) modify [](GLOSSARY.html) the [](GLOSSARY.html)
    Model [](GLOSSARY.html) do [](GLOSSARY.html) not [](GLOSSARY.html) call `Model.notify_listeners()`.
    Instead, the [](GLOSSARY.html) Controller [](GLOSSARY.html) issues [](GLOSSARY.html)
    the [](GLOSSARY.html) call.
  id: totrans-422
  prefs: []
  type: TYPE_NORMAL
  zh: 像一个**主动解决方案**一样，监听器在**模型**上注册并等待通知；与之不同的是，修改**模型**的方法不会调用`Model.notify_listeners()`。相反，**控制器**发出调用。
- en: '![](lazy_model.png)'
  id: totrans-423
  prefs: []
  type: TYPE_IMG
  zh: '![](lazy_model.png)'
- en: Practical example
  id: totrans-424
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际示例
- en: A [](GLOSSARY.html) trivial [](GLOSSARY.html) example [](GLOSSARY.html) of [](GLOSSARY.html)
    Controller [](GLOSSARY.html) code [](GLOSSARY.html) using [](GLOSSARY.html) a
    [](GLOSSARY.html) Lazy [](GLOSSARY.html) Model [](GLOSSARY.html) notification
    [](GLOSSARY.html) strategy would [](GLOSSARY.html) behave [](GLOSSARY.html) as
    [](GLOSSARY.html) follows
  id: totrans-425
  prefs: []
  type: TYPE_NORMAL
  zh: 一个使用**懒惰模型**通知策略的**控制器**代码的微不足道的示例将表现如下
- en: '[PRE39]'
  id: totrans-426
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: Pre/Post notification
  id: totrans-427
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 预/后通知
- en: Pre/Post notification
  id: totrans-428
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 预/后通知
- en: Motivation
  id: totrans-429
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: The [](GLOSSARY.html) Model [](GLOSSARY.html) wants [](GLOSSARY.html) to [](GLOSSARY.html)
    inform [](GLOSSARY.html) its [](GLOSSARY.html) listeners [](GLOSSARY.html) not
    [](GLOSSARY.html) only [](GLOSSARY.html) when [](GLOSSARY.html) data [](GLOSSARY.html)
    have [](GLOSSARY.html) been [](GLOSSARY.html) changed, but [](GLOSSARY.html) also
    [](GLOSSARY.html) just [](GLOSSARY.html) before [](GLOSSARY.html) changing [](GLOSSARY.html)
    them. A [](GLOSSARY.html) common [](GLOSSARY.html) reason [](GLOSSARY.html) behind
    [](GLOSSARY.html) this [](GLOSSARY.html) need [](GLOSSARY.html) is [](GLOSSARY.html)
    to [](GLOSSARY.html) support vetoing, but [](GLOSSARY.html) other [](GLOSSARY.html)
    motivations [](GLOSSARY.html) may [](GLOSSARY.html) exist.
  id: totrans-430
  prefs: []
  type: TYPE_NORMAL
  zh: 模型希望通知其听众不仅在数据被更改时，而且在更改之前通知他们。这种需求背后的常见原因是支持否决，但可能存在其他动机。
- en: Design
  id: totrans-431
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: To [](GLOSSARY.html) implement [](GLOSSARY.html) Pre/Post [](GLOSSARY.html)
    notification, the [](GLOSSARY.html) Model [](GLOSSARY.html) simply [](GLOSSARY.html)
    issues [](GLOSSARY.html) two [](GLOSSARY.html) different notifications, one [](GLOSSARY.html)
    before [](GLOSSARY.html) changing [](GLOSSARY.html) the [](GLOSSARY.html) Model
    [](GLOSSARY.html) state, and [](GLOSSARY.html) one [](GLOSSARY.html) after.
  id: totrans-432
  prefs: []
  type: TYPE_NORMAL
  zh: 要实现前/后通知，模型只需发出两种不同的通知，一个在更改模型状态之前，一个在之后。
- en: '![](pre_post_notification.png)'
  id: totrans-433
  prefs: []
  type: TYPE_IMG
  zh: '![pre_post_notification.png](pre_post_notification.png)'
- en: These [](GLOSSARY.html) notifications [](GLOSSARY.html) must [](GLOSSARY.html)
    be [](GLOSSARY.html) qualified, otherwise [](GLOSSARY.html) the [](GLOSSARY.html)
    interested [](GLOSSARY.html) listeners would [](GLOSSARY.html) not [](GLOSSARY.html)
    be [](GLOSSARY.html) able [](GLOSSARY.html) to [](GLOSSARY.html) differentiate
    [](GLOSSARY.html) the [](GLOSSARY.html) pre-vs-post [](GLOSSARY.html) nature [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) received notification. For [](GLOSSARY.html)
    example, a [](GLOSSARY.html) Model [](GLOSSARY.html) could [](GLOSSARY.html) issue
    `about_to_change`, apply [](GLOSSARY.html) the change, and [](GLOSSARY.html) finally
    [](GLOSSARY.html) issue `changed`. Both [](GLOSSARY.html) the [](GLOSSARY.html)
    old [](GLOSSARY.html) and [](GLOSSARY.html) new [](GLOSSARY.html) value [](GLOSSARY.html)
    are [](GLOSSARY.html) also generally [](GLOSSARY.html) passed [](GLOSSARY.html)
    as [](GLOSSARY.html) part [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    notification.
  id: totrans-434
  prefs: []
  type: TYPE_NORMAL
  zh: 这些通知必须经过资格认证，否则感兴趣的听众将无法区分接收通知的前后性质。例如，一个模型可以发出`about_to_change`，应用更改，最后发出`changed`。旧值和新值通常也作为通知的一部分传递。
- en: Practical Example
  id: totrans-435
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际例子
- en: Although [](GLOSSARY.html) other [](GLOSSARY.html) approaches [](GLOSSARY.html)
    could [](GLOSSARY.html) be [](GLOSSARY.html) used [](GLOSSARY.html) to [](GLOSSARY.html)
    handle [](GLOSSARY.html) this [](GLOSSARY.html) specific [](GLOSSARY.html) use
    [](GLOSSARY.html) case, pre-notifications [](GLOSSARY.html) can [](GLOSSARY.html)
    be [](GLOSSARY.html) useful [](GLOSSARY.html) to [](GLOSSARY.html) keep [](GLOSSARY.html)
    a [](GLOSSARY.html) Selection [](GLOSSARY.html) Model [](GLOSSARY.html) synchronized
    [](GLOSSARY.html) when the [](GLOSSARY.html) View [](GLOSSARY.html) in [](GLOSSARY.html)
    not [](GLOSSARY.html) collaborative [](GLOSSARY.html) in [](GLOSSARY.html) handling
    [](GLOSSARY.html) a [](GLOSSARY.html) selection [](GLOSSARY.html) referring [](GLOSSARY.html)
    to [](GLOSSARY.html) a non-existent [](GLOSSARY.html) entry.
  id: totrans-436
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管其他方法可以用来处理这个特定的用例，但是预先通知可以在视图不协作处理指向不存在条目的选择时保持选择模型同步是有用的。
- en: 'Our [](GLOSSARY.html) example [](GLOSSARY.html) has [](GLOSSARY.html) a [](GLOSSARY.html)
    Model [](GLOSSARY.html) containing [](GLOSSARY.html) a [](GLOSSARY.html) list
    [](GLOSSARY.html) of [](GLOSSARY.html) items, and [](GLOSSARY.html) a [](GLOSSARY.html)
    Selection [](GLOSSARY.html) Model holding [](GLOSSARY.html) information [](GLOSSARY.html)
    about [](GLOSSARY.html) which [](GLOSSARY.html) items [](GLOSSARY.html) in [](GLOSSARY.html)
    the [](GLOSSARY.html) Model [](GLOSSARY.html) are [](GLOSSARY.html) selected.
    If [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html) cannot [](GLOSSARY.html)
    handle [](GLOSSARY.html) selection [](GLOSSARY.html) of [](GLOSSARY.html) items
    [](GLOSSARY.html) not [](GLOSSARY.html) present [](GLOSSARY.html) in [](GLOSSARY.html)
    the [](GLOSSARY.html) Model, the [](GLOSSARY.html) following [](GLOSSARY.html)
    scenario [](GLOSSARY.html) would [](GLOSSARY.html) break [](GLOSSARY.html) the
    [](GLOSSARY.html) View:'
  id: totrans-437
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的示例包含一个包含项目列表的模型，以及一个保存关于模型中哪些项目被选择的选择模型的信息。如果视图无法处理模型中不存在的项目的选择，那么以下情景将会破坏视图：
- en: An [](GLOSSARY.html) item [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    Model [](GLOSSARY.html) is [](GLOSSARY.html) currently [](GLOSSARY.html) selected.
    This [](GLOSSARY.html) implies [](GLOSSARY.html) that [](GLOSSARY.html) an [](GLOSSARY.html)
    entry for [](GLOSSARY.html) this [](GLOSSARY.html) item [](GLOSSARY.html) is [](GLOSSARY.html)
    present [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html) Selection
    [](GLOSSARY.html) Model.
  id: totrans-438
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当前选择了模型的一个[条目](GLOSSARY.html)。这意味着这个条目在选择模型中存在。
- en: A [](GLOSSARY.html) Controller [](GLOSSARY.html) issues [](GLOSSARY.html) a
    [](GLOSSARY.html) request [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    Model [](GLOSSARY.html) to [](GLOSSARY.html) remove [](GLOSSARY.html) the [](GLOSSARY.html)
    item. Note [](GLOSSARY.html) that [](GLOSSARY.html) the controller [](GLOSSARY.html)
    may [](GLOSSARY.html) not [](GLOSSARY.html) be [](GLOSSARY.html) aware [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) existence [](GLOSSARY.html) of [](GLOSSARY.html)
    a [](GLOSSARY.html) Selection [](GLOSSARY.html) Model, so [](GLOSSARY.html) it
    [](GLOSSARY.html) is unable [](GLOSSARY.html) to [](GLOSSARY.html) deselect [](GLOSSARY.html)
    the [](GLOSSARY.html) item [](GLOSSARY.html) to [](GLOSSARY.html) prevent [](GLOSSARY.html)
    this [](GLOSSARY.html) scenario.
  id: totrans-439
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 控制器向模型发出请求以删除该项。请注意控制器可能不知道选择模型的存在，因此无法取消选择该项以防止此情况发生。
- en: The [](GLOSSARY.html) Model [](GLOSSARY.html) removes [](GLOSSARY.html) the
    [](GLOSSARY.html) item, and [](GLOSSARY.html) notifies [](GLOSSARY.html) the [](GLOSSARY.html)
    View [](GLOSSARY.html) of [](GLOSSARY.html) its [](GLOSSARY.html) change.
  id: totrans-440
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模型移除该项，并通知视图其更改。
- en: The [](GLOSSARY.html) View [](GLOSSARY.html) renders [](GLOSSARY.html) the [](GLOSSARY.html)
    Model, followed [](GLOSSARY.html) by [](GLOSSARY.html) rendering [](GLOSSARY.html)
    the [](GLOSSARY.html) Selection, but the [](GLOSSARY.html) selected [](GLOSSARY.html)
    item [](GLOSSARY.html) is [](GLOSSARY.html) no [](GLOSSARY.html) longer [](GLOSSARY.html)
    in [](GLOSSARY.html) the [](GLOSSARY.html) Model. The [](GLOSSARY.html) View [](GLOSSARY.html)
    cannot [](GLOSSARY.html) handle this [](GLOSSARY.html) situation [](GLOSSARY.html)
    and [](GLOSSARY.html) issues [](GLOSSARY.html) an [](GLOSSARY.html) exception.
  id: totrans-441
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 视图[](GLOSSARY.html)首先渲染[](GLOSSARY.html)模型，然后渲染选择，但是所选项目不再存在于模型中。视图无法处理这种情况并发出异常。
- en: 'Using [](GLOSSARY.html) a [](GLOSSARY.html) pre-notification [](GLOSSARY.html)
    can [](GLOSSARY.html) work [](GLOSSARY.html) around [](GLOSSARY.html) the [](GLOSSARY.html)
    View [](GLOSSARY.html) implementation [](GLOSSARY.html) detail:'
  id: totrans-442
  prefs: []
  type: TYPE_NORMAL
  zh: 使用预通知可以解决视图实现细节的问题：
- en: A [](GLOSSARY.html) Controller [](GLOSSARY.html) issues [](GLOSSARY.html) a
    [](GLOSSARY.html) request [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    Model [](GLOSSARY.html) to [](GLOSSARY.html) remove [](GLOSSARY.html) the [](GLOSSARY.html)
    item.
  id: totrans-443
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 控制器向模型发出请求以删除该项。
- en: The [](GLOSSARY.html) Model [](GLOSSARY.html) issues [](GLOSSARY.html) an "about
    [](GLOSSARY.html) to [](GLOSSARY.html) remove [](GLOSSARY.html) item" pre-notification.
  id: totrans-444
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模型发出“即将删除项目”的预通知。
- en: The [](GLOSSARY.html) Selection [](GLOSSARY.html) Model [](GLOSSARY.html) listens
    [](GLOSSARY.html) and [](GLOSSARY.html) receives [](GLOSSARY.html) the [](GLOSSARY.html)
    Model [](GLOSSARY.html) pre-notification.
  id: totrans-445
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择模型监听并接收模型的预通知。
- en: The [](GLOSSARY.html) Selection [](GLOSSARY.html) Model [](GLOSSARY.html) reacts
    [](GLOSSARY.html) by [](GLOSSARY.html) removing [](GLOSSARY.html) the [](GLOSSARY.html)
    item [](GLOSSARY.html) from [](GLOSSARY.html) its [](GLOSSARY.html) internal [](GLOSSARY.html)
    state.
  id: totrans-446
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择模型通过从其内部状态中移除该项来做出反应。
- en: The [](GLOSSARY.html) Selection [](GLOSSARY.html) Model [](GLOSSARY.html) change
    [](GLOSSARY.html) triggers [](GLOSSARY.html) a [](GLOSSARY.html) notification
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html)
    which [](GLOSSARY.html) is [](GLOSSARY.html) handled by [](GLOSSARY.html) visually
    [](GLOSSARY.html) deselecting [](GLOSSARY.html) the [](GLOSSARY.html) item. The
    [](GLOSSARY.html) Model [](GLOSSARY.html) hasn't [](GLOSSARY.html) changed [](GLOSSARY.html)
    yet, so [](GLOSSARY.html) the View [](GLOSSARY.html) is [](GLOSSARY.html) retrieving
    [](GLOSSARY.html) valid [](GLOSSARY.html) data.
  id: totrans-447
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Selection Model的更改触发了对View的通知，由视觉上取消选择该项来处理。Model尚未更改，因此View正在检索有效数据。
- en: Finally, the [](GLOSSARY.html) Model [](GLOSSARY.html) removes [](GLOSSARY.html)
    the [](GLOSSARY.html) item, and [](GLOSSARY.html) post-notifies [](GLOSSARY.html)
    the [](GLOSSARY.html) View [](GLOSSARY.html) to re-render [](GLOSSARY.html) itself
    [](GLOSSARY.html) with [](GLOSSARY.html) one [](GLOSSARY.html) less [](GLOSSARY.html)
    item.
  id: totrans-448
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，Model移除该项，并后通知View重新渲染自身，减少一个项。
- en: Through [](GLOSSARY.html) pre-notification, the [](GLOSSARY.html) View [](GLOSSARY.html)
    retrives [](GLOSSARY.html) consistent [](GLOSSARY.html) data [](GLOSSARY.html)
    throughout [](GLOSSARY.html) the operation. Without [](GLOSSARY.html) the [](GLOSSARY.html)
    existence [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) pre-notification,
    we [](GLOSSARY.html) would [](GLOSSARY.html) have [](GLOSSARY.html) to rely [](GLOSSARY.html)
    on [](GLOSSARY.html) the [](GLOSSARY.html) order [](GLOSSARY.html) of [](GLOSSARY.html)
    notification [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) post-notification
    [](GLOSSARY.html) to [](GLOSSARY.html) notify [](GLOSSARY.html) the Selection
    [](GLOSSARY.html) Model [](GLOSSARY.html) first, then [](GLOSSARY.html) the [](GLOSSARY.html)
    View. In [](GLOSSARY.html) general, it [](GLOSSARY.html) is [](GLOSSARY.html)
    not [](GLOSSARY.html) good [](GLOSSARY.html) practice [](GLOSSARY.html) to rely
    [](GLOSSARY.html) on [](GLOSSARY.html) ordering [](GLOSSARY.html) of [](GLOSSARY.html)
    different [](GLOSSARY.html) listeners [](GLOSSARY.html) on [](GLOSSARY.html) the
    [](GLOSSARY.html) same [](GLOSSARY.html) notification [](GLOSSARY.html) channel,
    because [](GLOSSARY.html) the [](GLOSSARY.html) order [](GLOSSARY.html) may [](GLOSSARY.html)
    not [](GLOSSARY.html) be [](GLOSSARY.html) guaranteed [](GLOSSARY.html) by [](GLOSSARY.html)
    the [](GLOSSARY.html) notification [](GLOSSARY.html) framework.
  id: totrans-449
  prefs: []
  type: TYPE_NORMAL
  zh: 通过[GLOSSARY.html]预通知，View[GLOSSARY.html]在整个操作过程中检索一致的数据。没有预通知的存在，我们将不得不依赖于后续通知的顺序来首先通知Selection
    Model，然后是View。一般来说，依赖于同一通知通道上不同监听器的顺序并不是一个好的做法，因为顺序可能不被通知框架保证。
- en: Signal
  id: totrans-450
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 信号
- en: Signals
  id: totrans-451
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 信号
- en: Motivation
  id: totrans-452
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: A [](GLOSSARY.html) problem [](GLOSSARY.html) carried [](GLOSSARY.html) over
    [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) traditional [](GLOSSARY.html)
    MVC [](GLOSSARY.html) approach [](GLOSSARY.html) is the [](GLOSSARY.html) need
    [](GLOSSARY.html) for [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html)
    to [](GLOSSARY.html) hold [](GLOSSARY.html) a [](GLOSSARY.html) collection [](GLOSSARY.html)
    of [](GLOSSARY.html) its [](GLOSSARY.html) listeners for [](GLOSSARY.html) notification
    [](GLOSSARY.html) purposes. This [](GLOSSARY.html) introduces [](GLOSSARY.html)
    a [](GLOSSARY.html) loose [](GLOSSARY.html) dependency between [](GLOSSARY.html)
    the [](GLOSSARY.html) Model [](GLOSSARY.html) and [](GLOSSARY.html) the [](GLOSSARY.html)
    listener [](GLOSSARY.html) interface [](GLOSSARY.html) that [](GLOSSARY.html)
    all [](GLOSSARY.html) Views must [](GLOSSARY.html) implement.
  id: totrans-453
  prefs: []
  type: TYPE_NORMAL
  zh: 从传统的MVC方法中继承的一个问题是，模型需要保存其监听器的集合以进行通知。这引入了模型和监听器接口之间的松散依赖，所有视图都必须实现该接口。
- en: 'The [](GLOSSARY.html) design [](GLOSSARY.html) presented [](GLOSSARY.html)
    in [](GLOSSARY.html) this [](GLOSSARY.html) section [](GLOSSARY.html) decouples
    [](GLOSSARY.html) this [](GLOSSARY.html) dependency between [](GLOSSARY.html)
    Models [](GLOSSARY.html) and [](GLOSSARY.html) Views, extracting [](GLOSSARY.html)
    the [](GLOSSARY.html) notification [](GLOSSARY.html) system [](GLOSSARY.html)
    in a [](GLOSSARY.html) separate [](GLOSSARY.html) object, the [](GLOSSARY.html)
    Signal, acting [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html) relay
    [](GLOSSARY.html) between [](GLOSSARY.html) the [](GLOSSARY.html) two. Althought
    [](GLOSSARY.html) not [](GLOSSARY.html) immediately [](GLOSSARY.html) apparent,
    the [](GLOSSARY.html) benefits [](GLOSSARY.html) of [](GLOSSARY.html) this [](GLOSSARY.html)
    approach are [](GLOSSARY.html) important:'
  id: totrans-454
  prefs: []
  type: TYPE_NORMAL
  zh: 本[](GLOSSARY.html)部分[](GLOSSARY.html)中[](GLOSSARY.html)提出的[](GLOSSARY.html)设计[](GLOSSARY.html)解耦了[](GLOSSARY.html)模型[](GLOSSARY.html)和[](GLOSSARY.html)视图之间的依赖关系，将[](GLOSSARY.html)通知系统[](GLOSSARY.html)提取为一个独立的对象，即[](GLOSSARY.html)信号，充当[](GLOSSARY.html)两者之间的中继。尽管[](GLOSSARY.html)并不[](GLOSSARY.html)立即显而易见，但[](GLOSSARY.html)这种[](GLOSSARY.html)方法的好处是[](GLOSSARY.html)重要的：
- en: Different [](GLOSSARY.html) Signals [](GLOSSARY.html) can [](GLOSSARY.html)
    represent [](GLOSSARY.html) different [](GLOSSARY.html) changes, providing [](GLOSSARY.html)
    the flexibility [](GLOSSARY.html) of [](GLOSSARY.html) a [](GLOSSARY.html) Qualified
    [](GLOSSARY.html) Notification.
  id: totrans-455
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不同的[](GLOSSARY.html)信号[](GLOSSARY.html)可以[](GLOSSARY.html)表示不同的[](GLOSSARY.html)变化，提供了[](GLOSSARY.html)合格的[](GLOSSARY.html)通知的灵活性。
- en: Signals [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html) made [](GLOSSARY.html)
    to [](GLOSSARY.html) call [](GLOSSARY.html) specific [](GLOSSARY.html) View's
    [](GLOSSARY.html) methods, instead [](GLOSSARY.html) of [](GLOSSARY.html) a generic
    `notify()`, passing [](GLOSSARY.html) specific [](GLOSSARY.html) arguments.
  id: totrans-456
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[](GLOSSARY.html)信号可以被设计为调用特定的视图方法，而不是通用的`notify()`，传递特定的参数。'
- en: Design
  id: totrans-457
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: 'A [](GLOSSARY.html) Signal [](GLOSSARY.html) class [](GLOSSARY.html) holds
    [](GLOSSARY.html) the [](GLOSSARY.html) notification [](GLOSSARY.html) infrastructure
    [](GLOSSARY.html) previously [](GLOSSARY.html) held [](GLOSSARY.html) by [](GLOSSARY.html)
    the [](GLOSSARY.html) Model: a [](GLOSSARY.html) list [](GLOSSARY.html) of [](GLOSSARY.html)
    listeners [](GLOSSARY.html) and [](GLOSSARY.html) methods [](GLOSSARY.html) for
    [](GLOSSARY.html) listeners [](GLOSSARY.html) to [](GLOSSARY.html) register [](GLOSSARY.html)
    and [](GLOSSARY.html) unregister. Notification [](GLOSSARY.html) to [](GLOSSARY.html)
    listeners [](GLOSSARY.html) is [](GLOSSARY.html) triggered [](GLOSSARY.html) via
    [](GLOSSARY.html) a `Signal.emit()` method.'
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: Signal 类保存了模型先前保存的通知基础设施：监听器列表和监听器注册和注销的方法。通过 `Signal.emit()` 方法触发对监听器的通知。
- en: '![](signal.png)'
  id: totrans-459
  prefs: []
  type: TYPE_IMG
  zh: '![](signal.png)'
- en: The [](GLOSSARY.html) Model [](GLOSSARY.html) defines [](GLOSSARY.html) its
    [](GLOSSARY.html) signalling [](GLOSSARY.html) capabilities [](GLOSSARY.html)
    by [](GLOSSARY.html) exposing [](GLOSSARY.html) member [](GLOSSARY.html) variables
    of [](GLOSSARY.html) type [](GLOSSARY.html) Signal. These [](GLOSSARY.html) member
    [](GLOSSARY.html) variables [](GLOSSARY.html) are [](GLOSSARY.html) given [](GLOSSARY.html)
    appropriate [](GLOSSARY.html) names [](GLOSSARY.html) to [](GLOSSARY.html) convey
    the [](GLOSSARY.html) nature [](GLOSSARY.html) of [](GLOSSARY.html) each [](GLOSSARY.html)
    reported [](GLOSSARY.html) event. Listeners [](GLOSSARY.html) subscribe [](GLOSSARY.html)
    to [](GLOSSARY.html) the [](GLOSSARY.html) signals they [](GLOSSARY.html) are
    [](GLOSSARY.html) interested [](GLOSSARY.html) in.
  id: totrans-460
  prefs: []
  type: TYPE_NORMAL
  zh: 模型通过公开类型为 Signal 的成员变量来定义其信号能力。这些成员变量被赋予适当的名称，以传达每个报告事件的性质。监听器订阅他们感兴趣的信号。
- en: When [](GLOSSARY.html) a [](GLOSSARY.html) change [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) appropriate [](GLOSSARY.html) type [](GLOSSARY.html) occurs,
    the [](GLOSSARY.html) Model [](GLOSSARY.html) triggers [](GLOSSARY.html) the notification
    [](GLOSSARY.html) by [](GLOSSARY.html) calling `emit()` on [](GLOSSARY.html) the
    [](GLOSSARY.html) Signal [](GLOSSARY.html) object, which [](GLOSSARY.html) in
    [](GLOSSARY.html) turn will [](GLOSSARY.html) notify [](GLOSSARY.html) each [](GLOSSARY.html)
    individual [](GLOSSARY.html) listener.
  id: totrans-461
  prefs: []
  type: TYPE_NORMAL
  zh: 当发生适当类型的变化时，模型通过在 Signal 对象上调用 `emit()` 来触发通知，该对象将进一步通知每个单独的监听器。
- en: 'Variation: additional flexibility to notification'
  id: totrans-462
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 变化：通知的额外灵活性
- en: A [](GLOSSARY.html) basic [](GLOSSARY.html) implementation [](GLOSSARY.html)
    just [](GLOSSARY.html) notifies [](GLOSSARY.html) the [](GLOSSARY.html) listeners.
    Increased [](GLOSSARY.html) flexibility [](GLOSSARY.html) can be [](GLOSSARY.html)
    obtained [](GLOSSARY.html) by [](GLOSSARY.html) allowing [](GLOSSARY.html) the
    [](GLOSSARY.html) passing [](GLOSSARY.html) of [](GLOSSARY.html) arguments [](GLOSSARY.html)
    to [](GLOSSARY.html) the `emit()` method, allowing [](GLOSSARY.html) further [](GLOSSARY.html)
    qualification [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) emitted
    [](GLOSSARY.html) signal.
  id: totrans-463
  prefs: []
  type: TYPE_NORMAL
  zh: 基本实现仅通知监听器。通过允许向 `emit()` 方法传递参数来增加灵活性，允许进一步限定发出的信号。
- en: 'The [](GLOSSARY.html) Signal [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html)
    made [](GLOSSARY.html) configurable [](GLOSSARY.html) in [](GLOSSARY.html) its
    [](GLOSSARY.html) functionality. A [](GLOSSARY.html) Signal [](GLOSSARY.html)
    class [](GLOSSARY.html) could for [](GLOSSARY.html) example [](GLOSSARY.html)
    implement [](GLOSSARY.html) three [](GLOSSARY.html) strategies [](GLOSSARY.html)
    for [](GLOSSARY.html) notification:'
  id: totrans-464
  prefs: []
  type: TYPE_NORMAL
  zh: '[](GLOSSARY.html)信号的功能可以进行配置。例如，一个[](GLOSSARY.html)信号类可以实现三种通知策略：'
- en: 'open: the [](GLOSSARY.html) notification [](GLOSSARY.html) is [](GLOSSARY.html)
    performed [](GLOSSARY.html) as [](GLOSSARY.html) soon [](GLOSSARY.html) as [](GLOSSARY.html)
    triggered.'
  id: totrans-465
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: open：通知在触发后立即执行。
- en: 'closed: the [](GLOSSARY.html) notification [](GLOSSARY.html) is [](GLOSSARY.html)
    silenced.'
  id: totrans-466
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: closed：通知被静音。
- en: 'hold: the [](GLOSSARY.html) notification [](GLOSSARY.html) is [](GLOSSARY.html)
    not [](GLOSSARY.html) delivered, but [](GLOSSARY.html) it [](GLOSSARY.html) is
    [](GLOSSARY.html) retained [](GLOSSARY.html) for [](GLOSSARY.html) later (i.e.
    an [](GLOSSARY.html) Accumulator-like [](GLOSSARY.html) behavior)'
  id: totrans-467
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: hold：通知不会传递，但会保存以供稍后使用（即类似于累加器的行为）。
- en: Practical examples
  id: totrans-468
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际例子
- en: A [](GLOSSARY.html) Signal [](GLOSSARY.html) implementation [](GLOSSARY.html)
    conforming [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) above
    [](GLOSSARY.html) design [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html)
    found [](GLOSSARY.html) in [](GLOSSARY.html) Boost.Signal2\. In [](GLOSSARY.html)
    the [](GLOSSARY.html) following [](GLOSSARY.html) example, we [](GLOSSARY.html)
    demonstrate [](GLOSSARY.html) the [](GLOSSARY.html) registration [](GLOSSARY.html)
    of [](GLOSSARY.html) an [](GLOSSARY.html) arbitrary [](GLOSSARY.html) method `print_sum`
    to [](GLOSSARY.html) a [](GLOSSARY.html) Signal [](GLOSSARY.html) object [](GLOSSARY.html)
    and [](GLOSSARY.html) its [](GLOSSARY.html) execution [](GLOSSARY.html) when [](GLOSSARY.html)
    the [](GLOSSARY.html) signal [](GLOSSARY.html) is [](GLOSSARY.html) emitted. The
    `emit` functionality [](GLOSSARY.html) is [](GLOSSARY.html) implemented [](GLOSSARY.html)
    through `operator()`. Note [](GLOSSARY.html) how parameters [](GLOSSARY.html)
    can [](GLOSSARY.html) be [](GLOSSARY.html) passed [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) connected [](GLOSSARY.html) functions.
  id: totrans-469
  prefs: []
  type: TYPE_NORMAL
  zh: 符合上述设计的[](GLOSSARY.html)信号实现可以在[](GLOSSARY.html)Boost.Signal2中找到。在以下示例中，我们演示了将任意方法`print_sum`注册到[](GLOSSARY.html)信号对象并在发射信号时执行的过程。`emit`功能通过`operator()`实现。请注意参数如何传递给连接的函数。
- en: '[PRE40]'
  id: totrans-470
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: Another [](GLOSSARY.html) example [](GLOSSARY.html) of [](GLOSSARY.html) Signal
    [](GLOSSARY.html) design [](GLOSSARY.html) is [](GLOSSARY.html) Qt [](GLOSSARY.html)
    Signal/Slot [](GLOSSARY.html) mechanism, although [](GLOSSARY.html) the [](GLOSSARY.html)
    internals do [](GLOSSARY.html) not [](GLOSSARY.html) make [](GLOSSARY.html) use
    [](GLOSSARY.html) of [](GLOSSARY.html) a [](GLOSSARY.html) literal [](GLOSSARY.html)
    Signal [](GLOSSARY.html) object, and [](GLOSSARY.html) the [](GLOSSARY.html) mechanism
    [](GLOSSARY.html) requires [](GLOSSARY.html) the [](GLOSSARY.html) support [](GLOSSARY.html)
    from a [](GLOSSARY.html) special [](GLOSSARY.html) preprocessor
  id: totrans-471
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个[](GLOSSARY.html)信号设计[](GLOSSARY.html)的例子是[](GLOSSARY.html)Qt信号/槽[](GLOSSARY.html)机制，尽管[](GLOSSARY.html)内部不使用[](GLOSSARY.html)文字信号[](GLOSSARY.html)对象，而且[](GLOSSARY.html)机制需要来自一个[](GLOSSARY.html)特殊预处理器的支持。
- en: '[PRE41]'
  id: totrans-472
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: The [](GLOSSARY.html) special [](GLOSSARY.html) signal `valueChanged()` is [](GLOSSARY.html)
    emitted [](GLOSSARY.html) every [](GLOSSARY.html) time [](GLOSSARY.html) a [](GLOSSARY.html)
    new [](GLOSSARY.html) value [](GLOSSARY.html) is [](GLOSSARY.html) set. Receiving
    objects [](GLOSSARY.html) can [](GLOSSARY.html) subscribe [](GLOSSARY.html) to
    [](GLOSSARY.html) the [](GLOSSARY.html) Signal [](GLOSSARY.html) and [](GLOSSARY.html)
    guarantee [](GLOSSARY.html) synchronization
  id: totrans-473
  prefs: []
  type: TYPE_NORMAL
  zh: 特殊信号 `valueChanged()` 每次设置新值时都会被发出。接收对象可以订阅该信号并保证同步。
- en: '[PRE42]'
  id: totrans-474
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: In [](GLOSSARY.html) the [](GLOSSARY.html) above [](GLOSSARY.html) code, `model2->setValue`
    will [](GLOSSARY.html) be [](GLOSSARY.html) called [](GLOSSARY.html) when [](GLOSSARY.html)
    model1 `valueChanged` signal [](GLOSSARY.html) is emitted. This [](GLOSSARY.html)
    will [](GLOSSARY.html) synchronize [](GLOSSARY.html) the [](GLOSSARY.html) two
    [](GLOSSARY.html) objects [](GLOSSARY.html) to [](GLOSSARY.html) hold [](GLOSSARY.html)
    the [](GLOSSARY.html) same [](GLOSSARY.html) value.
  id: totrans-475
  prefs: []
  type: TYPE_NORMAL
  zh: 在上述代码中，当 model1 的 `valueChanged` 信号被发出时，将调用 `model2->setValue`。这将使两个对象同步，保持相同的值。
- en: 'Practical example variation: notifying Views'
  id: totrans-476
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际示例变种：通知视图
- en: One [](GLOSSARY.html) important [](GLOSSARY.html) feature [](GLOSSARY.html)
    of [](GLOSSARY.html) Qt [](GLOSSARY.html) signals [](GLOSSARY.html) is [](GLOSSARY.html)
    that [](GLOSSARY.html) they [](GLOSSARY.html) are [](GLOSSARY.html) not [](GLOSSARY.html)
    only [](GLOSSARY.html) found [](GLOSSARY.html) on [](GLOSSARY.html) Models, but
    [](GLOSSARY.html) also [](GLOSSARY.html) on [](GLOSSARY.html) Widgets [](GLOSSARY.html)
    and [](GLOSSARY.html) Views. Buttons, for [](GLOSSARY.html) example, emit [](GLOSSARY.html)
    a `clicked()` Signal [](GLOSSARY.html) when [](GLOSSARY.html) clicked. Signals
    [](GLOSSARY.html) can [](GLOSSARY.html) therefore [](GLOSSARY.html) be [](GLOSSARY.html)
    used [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html) generic [](GLOSSARY.html)
    notification mechanism [](GLOSSARY.html) applicable [](GLOSSARY.html) to [](GLOSSARY.html)
    any [](GLOSSARY.html) context [](GLOSSARY.html) where [](GLOSSARY.html) decoupling
    [](GLOSSARY.html) is [](GLOSSARY.html) desired.
  id: totrans-477
  prefs: []
  type: TYPE_NORMAL
  zh: Qt 信号的一个重要特点是它们不仅存在于模型（Models）上，而且还存在于小部件（Widgets）和视图（Views）上。例如，按钮在点击时会发出 `clicked()`
    信号。因此，信号可以被用作通用的通知机制，适用于任何需要解耦的上下文。
- en: Variations on the View
  id: totrans-478
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 视图的变种
- en: Variations on the View
  id: totrans-479
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 视图的变种
- en: '[Pluggable View](pluggable_view.html): Client [](GLOSSARY.html) code [](GLOSSARY.html)
    injects [](GLOSSARY.html) data [](GLOSSARY.html) extraction [](GLOSSARY.html)
    logic [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html) View''s [](GLOSSARY.html)
    at [](GLOSSARY.html) initialization.'
  id: totrans-480
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[可插拔视图](pluggable_view.html)：客户端代码在初始化时注入数据提取逻辑到视图中。'
- en: '[Passive View](passive_view.html): View''s [](GLOSSARY.html) state [](GLOSSARY.html)
    is [](GLOSSARY.html) fully [](GLOSSARY.html) orchestrated [](GLOSSARY.html) by
    [](GLOSSARY.html) the [](GLOSSARY.html) Controller.'
  id: totrans-481
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[被动视图](passive_view.html)：视图的状态完全由控制器（Controller）协调。'
- en: '[Widget level vs. Container level View](18_widget_level_container_level.html)'
  id: totrans-482
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[小部件级别与容器级别的视图](18_widget_level_container_level.html)'
- en: '[Visual Proxy](visual_proxy.html): The [](GLOSSARY.html) Model [](GLOSSARY.html)
    acts [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html) factory [](GLOSSARY.html)
    of [](GLOSSARY.html) its [](GLOSSARY.html) own [](GLOSSARY.html) View, choosing
    [](GLOSSARY.html) the [](GLOSSARY.html) appropriate'
  id: totrans-483
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[可视代理](visual_proxy.html)：模型（Model）充当自己视图（View）的工厂，选择合适的视图。'
- en: '[PRE43]'
  id: totrans-484
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE43]'
- en: '[Data Dialog](data_dialog.html): "Fire [](GLOSSARY.html) and [](GLOSSARY.html)
    forget" dialog [](GLOSSARY.html) to [](GLOSSARY.html) accept [](GLOSSARY.html)
    information [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) user.'
  id: totrans-485
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[数据对话框](data_dialog.html)：从用户那里接受信息的“点火[](GLOSSARY.html)和[](GLOSSARY.html)忘记”对话框。'
- en: '[Visibility allowed notifications](41_visibility_allowed_notifications.html)'
  id: totrans-486
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[可见性允许通知](41_visibility_allowed_notifications.html)'
- en: '[Synchronization View state](46_synchronization_view_state.html)'
  id: totrans-487
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[同步视图状态](46_synchronization_view_state.html)'
- en: Pluggable View
  id: totrans-488
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 可插拔视图
- en: Pluggable View
  id: totrans-489
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 可插拔视图
- en: '* * *'
  id: totrans-490
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'Note: In [](GLOSSARY.html) the [](GLOSSARY.html) context [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) Web [](GLOSSARY.html) framework [](GLOSSARY.html)
    Flask, Pluggable [](GLOSSARY.html) View [](GLOSSARY.html) refers [](GLOSSARY.html)
    to [](GLOSSARY.html) a [](GLOSSARY.html) different [](GLOSSARY.html) concept.'
  id: totrans-491
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：在Web框架Flask的上下文中，可插拔视图指的是一个不同的概念。
- en: '* * *'
  id: totrans-492
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: Motivation
  id: totrans-493
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'For [](GLOSSARY.html) some [](GLOSSARY.html) applications, different [](GLOSSARY.html)
    Views [](GLOSSARY.html) may [](GLOSSARY.html) have [](GLOSSARY.html) the [](GLOSSARY.html)
    same [](GLOSSARY.html) implementation [](GLOSSARY.html) for the [](GLOSSARY.html)
    UI [](GLOSSARY.html) part, but [](GLOSSARY.html) different [](GLOSSARY.html) implementation
    [](GLOSSARY.html) for [](GLOSSARY.html) data [](GLOSSARY.html) extraction [](GLOSSARY.html)
    from [](GLOSSARY.html) the [](GLOSSARY.html) Model. To [](GLOSSARY.html) prevent
    [](GLOSSARY.html) duplication, two [](GLOSSARY.html) strategies [](GLOSSARY.html)
    has [](GLOSSARY.html) already [](GLOSSARY.html) been [](GLOSSARY.html) analysed:'
  id: totrans-494
  prefs: []
  type: TYPE_NORMAL
  zh: 对于一些应用程序，不同的视图可能对UI部分有相同的实现，但对模型中的数据提取有不同的实现。为了防止重复，已经分析了两种策略：
- en: implement [](GLOSSARY.html) the [](GLOSSARY.html) common [](GLOSSARY.html) UI
    [](GLOSSARY.html) logic [](GLOSSARY.html) in [](GLOSSARY.html) a [](GLOSSARY.html)
    base [](GLOSSARY.html) View [](GLOSSARY.html) class, and [](GLOSSARY.html) have
    [](GLOSSARY.html) subclasses reimplementing [](GLOSSARY.html) the [](GLOSSARY.html)
    data [](GLOSSARY.html) extraction [](GLOSSARY.html) logic.
  id: totrans-495
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在一个基础视图类中实现通用的UI逻辑，并让子类重新实现数据提取逻辑。
- en: use [](GLOSSARY.html) a [](GLOSSARY.html) Value [](GLOSSARY.html) Model, which
    [](GLOSSARY.html) puts [](GLOSSARY.html) the [](GLOSSARY.html) extraction [](GLOSSARY.html)
    logic [](GLOSSARY.html) on [](GLOSSARY.html) a [](GLOSSARY.html) Model [](GLOSSARY.html)
    adapter [](GLOSSARY.html) object, transforming [](GLOSSARY.html) the [](GLOSSARY.html)
    Model's [](GLOSSARY.html) complex [](GLOSSARY.html) interface [](GLOSSARY.html)
    into [](GLOSSARY.html) a [](GLOSSARY.html) trivial [](GLOSSARY.html) getter/setter
    [](GLOSSARY.html) pair. The [](GLOSSARY.html) resulting [](GLOSSARY.html) View
    [](GLOSSARY.html) is [](GLOSSARY.html) agnostic [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) nature [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    Model [](GLOSSARY.html) and [](GLOSSARY.html) the [](GLOSSARY.html) complexity
    of [](GLOSSARY.html) the [](GLOSSARY.html) extraction [](GLOSSARY.html) logic.
  id: totrans-496
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用值模型，将提取逻辑放在模型适配器对象上，将模型复杂的接口转换为简单的getter/setter对。结果视图对模型的性质和提取逻辑的复杂性是不可知的。
- en: In [](GLOSSARY.html) this [](GLOSSARY.html) section, we [](GLOSSARY.html) present
    [](GLOSSARY.html) the **Pluggable [](GLOSSARY.html) View** design. An [](GLOSSARY.html)
    adaptor [](GLOSSARY.html) function is [](GLOSSARY.html) defined, and [](GLOSSARY.html)
    injected [](GLOSSARY.html) into [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html)
    at [](GLOSSARY.html) initialization. The [](GLOSSARY.html) model [](GLOSSARY.html)
    is [](GLOSSARY.html) processed through [](GLOSSARY.html) this [](GLOSSARY.html)
    function [](GLOSSARY.html) to [](GLOSSARY.html) obtain [](GLOSSARY.html) the [](GLOSSARY.html)
    data [](GLOSSARY.html) to [](GLOSSARY.html) be [](GLOSSARY.html) displayed.
  id: totrans-497
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们介绍**可插拔视图**设计。定义一个适配器函数，并在初始化时注入视图。模型通过这个函数处理以获取要显示的数据。
- en: Design
  id: totrans-498
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: The [](GLOSSARY.html) View [](GLOSSARY.html) accepts [](GLOSSARY.html) a [](GLOSSARY.html)
    function [](GLOSSARY.html) object [](GLOSSARY.html) containing [](GLOSSARY.html)
    the [](GLOSSARY.html) data [](GLOSSARY.html) extraction [](GLOSSARY.html) logic.
    This function [](GLOSSARY.html) receives [](GLOSSARY.html) the [](GLOSSARY.html)
    Model [](GLOSSARY.html) object [](GLOSSARY.html) and [](GLOSSARY.html) returns
    [](GLOSSARY.html) the [](GLOSSARY.html) relevant [](GLOSSARY.html) data [](GLOSSARY.html)
    needed [](GLOSSARY.html) by [](GLOSSARY.html) the View.
  id: totrans-499
  prefs: []
  type: TYPE_NORMAL
  zh: 视图接受包含数据提取逻辑的函数对象。这个函数接收模型对象并返回视图所需的相关数据。
- en: '[PRE44]'
  id: totrans-500
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: The [](GLOSSARY.html) View [](GLOSSARY.html) listens [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) Model [](GLOSSARY.html) for [](GLOSSARY.html) change [](GLOSSARY.html)
    notifications. When [](GLOSSARY.html) a [](GLOSSARY.html) change [](GLOSSARY.html)
    occurs, the [](GLOSSARY.html) View [](GLOSSARY.html) calls [](GLOSSARY.html) the
    [](GLOSSARY.html) function [](GLOSSARY.html) object, passing [](GLOSSARY.html)
    the [](GLOSSARY.html) Model [](GLOSSARY.html) and [](GLOSSARY.html) obtaining
    [](GLOSSARY.html) the [](GLOSSARY.html) relevant information [](GLOSSARY.html)
    as [](GLOSSARY.html) a [](GLOSSARY.html) return [](GLOSSARY.html) value.
  id: totrans-501
  prefs: []
  type: TYPE_NORMAL
  zh: 视图[](GLOSSARY.html)监听[](GLOSSARY.html)模型的变化通知。当发生变化时，视图调用函数对象，传递模型并获取相关信息作为返回值。
- en: '[PRE45]'
  id: totrans-502
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: Variations [](GLOSSARY.html) of [](GLOSSARY.html) this [](GLOSSARY.html) solution
    [](GLOSSARY.html) allow [](GLOSSARY.html) for [](GLOSSARY.html) multiple [](GLOSSARY.html)
    functions [](GLOSSARY.html) to [](GLOSSARY.html) extract different [](GLOSSARY.html)
    parts [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) Model, or [](GLOSSARY.html)
    the [](GLOSSARY.html) possibility [](GLOSSARY.html) to [](GLOSSARY.html) swap
    [](GLOSSARY.html) the [](GLOSSARY.html) function object [](GLOSSARY.html) after
    [](GLOSSARY.html) construction. More [](GLOSSARY.html) elaborate [](GLOSSARY.html)
    extractors [](GLOSSARY.html) can [](GLOSSARY.html) return "UI [](GLOSSARY.html)
    decorated" information, such [](GLOSSARY.html) as [](GLOSSARY.html) returning
    [](GLOSSARY.html) both [](GLOSSARY.html) the [](GLOSSARY.html) value [](GLOSSARY.html)
    and [](GLOSSARY.html) the [](GLOSSARY.html) text color [](GLOSSARY.html) to [](GLOSSARY.html)
    use.
  id: totrans-503
  prefs: []
  type: TYPE_NORMAL
  zh: 此解决方案的变体允许多个函数提取模型的不同部分，或在构建后交换函数对象的可能性。更复杂的提取器可以返回“UI装饰”信息，例如返回值和文本颜色一起返回。
- en: Passive View
  id: totrans-504
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 被动视图
- en: Passive View
  id: totrans-505
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 被动视图
- en: Motivation
  id: totrans-506
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: A [](GLOSSARY.html) major [](GLOSSARY.html) issue [](GLOSSARY.html) arising
    [](GLOSSARY.html) from [](GLOSSARY.html) a [](GLOSSARY.html) complex [](GLOSSARY.html)
    View [](GLOSSARY.html) is [](GLOSSARY.html) automated [](GLOSSARY.html) testing.
    Visual [](GLOSSARY.html) components [](GLOSSARY.html) require [](GLOSSARY.html)
    User [](GLOSSARY.html) interaction, which [](GLOSSARY.html) depends [](GLOSSARY.html)
    on the [](GLOSSARY.html) creation [](GLOSSARY.html) of [](GLOSSARY.html) events
    [](GLOSSARY.html) programmatically [](GLOSSARY.html) and [](GLOSSARY.html) the
    [](GLOSSARY.html) execution [](GLOSSARY.html) of [](GLOSSARY.html) an [](GLOSSARY.html)
    event [](GLOSSARY.html) loop to [](GLOSSARY.html) dispatch [](GLOSSARY.html) them.
    Both [](GLOSSARY.html) requirements [](GLOSSARY.html) may [](GLOSSARY.html) present
    [](GLOSSARY.html) challenges.
  id: totrans-507
  prefs: []
  type: TYPE_NORMAL
  zh: 从复杂视图中产生的一个主要问题是自动化测试。视觉组件需要用户交互，这取决于以编程方式创建事件并执行事件循环以分派它们。这两个要求可能会带来挑战。
- en: The **Passive [](GLOSSARY.html) View** (also [](GLOSSARY.html) referred [](GLOSSARY.html)
    as **Humble [](GLOSSARY.html) Dialog** or **Humble [](GLOSSARY.html) View**) eases
    [](GLOSSARY.html) testability [](GLOSSARY.html) by [](GLOSSARY.html) moving [](GLOSSARY.html)
    all [](GLOSSARY.html) View [](GLOSSARY.html) logic [](GLOSSARY.html) from [](GLOSSARY.html)
    the View [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) Controller.
    This [](GLOSSARY.html) results [](GLOSSARY.html) in [](GLOSSARY.html) a [](GLOSSARY.html)
    View [](GLOSSARY.html) humble [](GLOSSARY.html) in [](GLOSSARY.html) logic [](GLOSSARY.html)
    and [](GLOSSARY.html) with no [](GLOSSARY.html) awareness [](GLOSSARY.html) of
    [](GLOSSARY.html) the [](GLOSSARY.html) Model. In [](GLOSSARY.html) fact, the
    [](GLOSSARY.html) View [](GLOSSARY.html) is [](GLOSSARY.html) not [](GLOSSARY.html)
    subscribed [](GLOSSARY.html) to [](GLOSSARY.html) Model [](GLOSSARY.html) changes,
    and [](GLOSSARY.html) is [](GLOSSARY.html) not [](GLOSSARY.html) extracting [](GLOSSARY.html)
    data [](GLOSSARY.html) from [](GLOSSARY.html) it. It [](GLOSSARY.html) is [](GLOSSARY.html)
    instead [](GLOSSARY.html) the [](GLOSSARY.html) Controller's [](GLOSSARY.html)
    duty [](GLOSSARY.html) to push [](GLOSSARY.html) data [](GLOSSARY.html) into [](GLOSSARY.html)
    the [](GLOSSARY.html) View, which [](GLOSSARY.html) is [](GLOSSARY.html) assembled
    [](GLOSSARY.html) from [](GLOSSARY.html) off-the-shelf [](GLOSSARY.html) widgets.
  id: totrans-508
  prefs: []
  type: TYPE_NORMAL
  zh: 被 passvie 视图（也称为谦卑对话框或谦卑视图）通过将所有视图逻辑从视图移动到控制器中，从而使测试变得更容易。这导致视图在逻辑上谦卑，并且不知道模型的存在。事实上，视图没有订阅模型的更改，并且不从中提取数据。相反，将数据推送到视图是控制器的责任，视图由现成的小部件组装而成。
- en: Design
  id: totrans-509
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: In [](GLOSSARY.html) a [](GLOSSARY.html) Passive [](GLOSSARY.html) View [](GLOSSARY.html)
    design, all [](GLOSSARY.html) logic [](GLOSSARY.html) goes [](GLOSSARY.html) in
    [](GLOSSARY.html) either [](GLOSSARY.html) the [](GLOSSARY.html) Controller [](GLOSSARY.html)
    or [](GLOSSARY.html) the [](GLOSSARY.html) Model. In [](GLOSSARY.html) particular,
    the [](GLOSSARY.html) Controller [](GLOSSARY.html) is [](GLOSSARY.html) in [](GLOSSARY.html)
    charge [](GLOSSARY.html) of
  id: totrans-510
  prefs: []
  type: TYPE_NORMAL
  zh: 在被动视图设计中，所有逻辑都放在控制器或模型中。特别是，控制器负责
- en: Visual [](GLOSSARY.html) logic (e.g. altering [](GLOSSARY.html) colors [](GLOSSARY.html)
    of [](GLOSSARY.html) widgets)
  id: totrans-511
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 视觉逻辑（例如更改小部件的颜色）
- en: Visual [](GLOSSARY.html) semantics (interpreting [](GLOSSARY.html) the [](GLOSSARY.html)
    meaning [](GLOSSARY.html) of [](GLOSSARY.html) a [](GLOSSARY.html) Button [](GLOSSARY.html)
    click)
  id: totrans-512
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 视觉语义（解释按钮点击的含义）
- en: Data [](GLOSSARY.html) validation (checking [](GLOSSARY.html) if [](GLOSSARY.html)
    data [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html)
    are [](GLOSSARY.html) correct, potentially [](GLOSSARY.html) with [](GLOSSARY.html)
    support from [](GLOSSARY.html) the [](GLOSSARY.html) Model)
  id: totrans-513
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据验证（检查来自视图的数据是否正确，可能需要从模型获得支持）
- en: Synchronization [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    View's [](GLOSSARY.html) contents, through [](GLOSSARY.html) the [](GLOSSARY.html)
    View's [](GLOSSARY.html) accessor [](GLOSSARY.html) methods.
  id: totrans-514
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过视图的访问器方法**同步**视图的内容。
- en: The [](GLOSSARY.html) following [](GLOSSARY.html) interaction [](GLOSSARY.html)
    diagram [](GLOSSARY.html) shows [](GLOSSARY.html) the [](GLOSSARY.html) central
    [](GLOSSARY.html) role [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    Controller in [](GLOSSARY.html) the [](GLOSSARY.html) synchronization, and [](GLOSSARY.html)
    the [](GLOSSARY.html) lack [](GLOSSARY.html) of [](GLOSSARY.html) interaction
    [](GLOSSARY.html) between [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html)
    and [](GLOSSARY.html) the [](GLOSSARY.html) Model.
  id: totrans-515
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的交互图显示了控制器在同步中的**中心作用**，以及视图和模型之间**缺乏交互**。
- en: '![](passive_view.png)'
  id: totrans-516
  prefs: []
  type: TYPE_IMG
  zh: '![](passive_view.png)'
- en: 'which [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html) explained
    [](GLOSSARY.html) as [](GLOSSARY.html) follows:'
  id: totrans-517
  prefs: []
  type: TYPE_NORMAL
  zh: 这可以解释为：
- en: When [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html) receives
    [](GLOSSARY.html) user [](GLOSSARY.html) events, they [](GLOSSARY.html) are [](GLOSSARY.html)
    forwarded [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) Controller
    as [](GLOSSARY.html) in [](GLOSSARY.html) Traditional [](GLOSSARY.html) MVC
  id: totrans-518
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当视图接收到用户事件时，它们会被转发到控制器，就像在传统的MVC中一样
- en: The [](GLOSSARY.html) Controller [](GLOSSARY.html) acts [](GLOSSARY.html) on
    [](GLOSSARY.html) the [](GLOSSARY.html) Model
  id: totrans-519
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 控制器**作用于**模型
- en: Either [](GLOSSARY.html) immediately (if [](GLOSSARY.html) Passive [](GLOSSARY.html)
    Model, in [](GLOSSARY.html) the [](GLOSSARY.html) Figure), or [](GLOSSARY.html)
    in [](GLOSSARY.html) response to [](GLOSSARY.html) a [](GLOSSARY.html) Model [](GLOSSARY.html)
    notification (if [](GLOSSARY.html) Active [](GLOSSARY.html) Model), the [](GLOSSARY.html)
    Controller [](GLOSSARY.html) updates the [](GLOSSARY.html) data [](GLOSSARY.html)
    displayed [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html) View's
    [](GLOSSARY.html) widgets, synchronizing [](GLOSSARY.html) them [](GLOSSARY.html)
    against the [](GLOSSARY.html) new [](GLOSSARY.html) Model [](GLOSSARY.html) contents.
  id: totrans-520
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 无论是立即（如果是被动模型，在图中），还是响应模型通知（如果是主动模型），控制器都会更新视图小部件显示的数据，将它们与新的模型内容**同步**。
- en: The [](GLOSSARY.html) View [](GLOSSARY.html) is [](GLOSSARY.html) empty [](GLOSSARY.html)
    of [](GLOSSARY.html) logic, and [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html)
    completely [](GLOSSARY.html) replaced [](GLOSSARY.html) with [](GLOSSARY.html)
    a [](GLOSSARY.html) mock [](GLOSSARY.html) object implementing [](GLOSSARY.html)
    the [](GLOSSARY.html) same [](GLOSSARY.html) interface. When [](GLOSSARY.html)
    testing [](GLOSSARY.html) the [](GLOSSARY.html) Controller, the [](GLOSSARY.html)
    mock [](GLOSSARY.html) View's methods [](GLOSSARY.html) will [](GLOSSARY.html)
    be [](GLOSSARY.html) called, and [](GLOSSARY.html) their [](GLOSSARY.html) invocation
    [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html) checked [](GLOSSARY.html)
    by [](GLOSSARY.html) the [](GLOSSARY.html) test. The [](GLOSSARY.html) mock [](GLOSSARY.html)
    View [](GLOSSARY.html) can [](GLOSSARY.html) also [](GLOSSARY.html) be [](GLOSSARY.html)
    set [](GLOSSARY.html) up [](GLOSSARY.html) to [](GLOSSARY.html) present [](GLOSSARY.html)
    specific [](GLOSSARY.html) data [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    Controller, simulating [](GLOSSARY.html) User [](GLOSSARY.html) input.
  id: totrans-521
  prefs: []
  type: TYPE_NORMAL
  zh: '[视图](GLOSSARY.html)不包含任何逻辑，可以完全替换为实现相同接口的模拟对象。在测试控制器时，将调用模拟视图的方法，并且可以通过测试检查它们的调用。模拟视图还可以设置为向控制器呈现特定数据，模拟用户输入。'
- en: Widget level vs. Container level View
  id: totrans-522
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 小部件级别 vs. 容器级别视图
- en: Widget-level vs Container-level MVC
  id: totrans-523
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 小部件级别 vs 容器级别 MVC
- en: Motivation
  id: totrans-524
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'In [](GLOSSARY.html) our [](GLOSSARY.html) previous [](GLOSSARY.html) exploration
    [](GLOSSARY.html) we [](GLOSSARY.html) defined [](GLOSSARY.html) Views [](GLOSSARY.html)
    without [](GLOSSARY.html) any [](GLOSSARY.html) detail [](GLOSSARY.html) on [](GLOSSARY.html)
    the scope [](GLOSSARY.html) of [](GLOSSARY.html) their [](GLOSSARY.html) implementation.
    Given [](GLOSSARY.html) a [](GLOSSARY.html) window [](GLOSSARY.html) containing
    [](GLOSSARY.html) a [](GLOSSARY.html) dozen [](GLOSSARY.html) of [](GLOSSARY.html)
    widgets, two [](GLOSSARY.html) implementations [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) View [](GLOSSARY.html) object [](GLOSSARY.html) are [](GLOSSARY.html)
    possible:'
  id: totrans-525
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们之前的探索中，我们定义了视图，但没有详细说明它们的实现范围。给定一个包含十几个小部件的窗口，可以有两种视图对象的实现：
- en: The [](GLOSSARY.html) View [](GLOSSARY.html) is [](GLOSSARY.html) the [](GLOSSARY.html)
    full [](GLOSSARY.html) window, forming [](GLOSSARY.html) a [](GLOSSARY.html) single
    [](GLOSSARY.html) MVC [](GLOSSARY.html) Triad [](GLOSSARY.html) through [](GLOSSARY.html)
    a [](GLOSSARY.html) complex, dedicated [](GLOSSARY.html) Controller, or
  id: totrans-526
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 视图是整个窗口，通过复杂的专用控制器形成单个MVC三元组，或者
- en: Each [](GLOSSARY.html) widget [](GLOSSARY.html) is [](GLOSSARY.html) considered
    [](GLOSSARY.html) a [](GLOSSARY.html) View. There [](GLOSSARY.html) are [](GLOSSARY.html)
    multiple [](GLOSSARY.html) independent triads, one [](GLOSSARY.html) per [](GLOSSARY.html)
    each [](GLOSSARY.html) widget.
  id: totrans-527
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个[小部件](GLOSSARY.html)被视为一个[视图](GLOSSARY.html)。每个小部件都有多个独立的三元组，每个小部件一个。
- en: Both [](GLOSSARY.html) approaches [](GLOSSARY.html) are [](GLOSSARY.html) possible,
    and [](GLOSSARY.html) they [](GLOSSARY.html) are [](GLOSSARY.html) called **Container-level**
    and **Widget-level [](GLOSSARY.html) MVC**, respectively.
  id: totrans-528
  prefs: []
  type: TYPE_NORMAL
  zh: 这两种方法都是可能的，它们分别被称为**容器级**和**小部件级[GLOSSARY.html]MVC**。
- en: 'Each [](GLOSSARY.html) solution [](GLOSSARY.html) has [](GLOSSARY.html) advantages
    [](GLOSSARY.html) and [](GLOSSARY.html) disadvantages, and [](GLOSSARY.html) the
    [](GLOSSARY.html) consequence [](GLOSSARY.html) is [](GLOSSARY.html) that a [](GLOSSARY.html)
    mixture [](GLOSSARY.html) of [](GLOSSARY.html) both [](GLOSSARY.html) approaches
    [](GLOSSARY.html) is [](GLOSSARY.html) used: Widget-level [](GLOSSARY.html) has
    [](GLOSSARY.html) the [](GLOSSARY.html) strong advantage [](GLOSSARY.html) of
    [](GLOSSARY.html) reusability. Views [](GLOSSARY.html) are [](GLOSSARY.html) off-the-shelf
    [](GLOSSARY.html) UI [](GLOSSARY.html) widgets, and [](GLOSSARY.html) Controllers
    are [](GLOSSARY.html) generic [](GLOSSARY.html) classes [](GLOSSARY.html) tailored
    [](GLOSSARY.html) to [](GLOSSARY.html) specific [](GLOSSARY.html) widgets. The
    [](GLOSSARY.html) connection [](GLOSSARY.html) between [](GLOSSARY.html) the widget
    [](GLOSSARY.html) and [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html)
    property [](GLOSSARY.html) become [](GLOSSARY.html) straightforward, albeit [](GLOSSARY.html)
    prone [](GLOSSARY.html) to [](GLOSSARY.html) produce boilerplate [](GLOSSARY.html)
    code [](GLOSSARY.html) to [](GLOSSARY.html) set [](GLOSSARY.html) up [](GLOSSARY.html)
    the [](GLOSSARY.html) connection. With [](GLOSSARY.html) some [](GLOSSARY.html)
    additional [](GLOSSARY.html) support, the boilerplate [](GLOSSARY.html) can [](GLOSSARY.html)
    be [](GLOSSARY.html) eliminated, leading [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) design [](GLOSSARY.html) known [](GLOSSARY.html) as [](GLOSSARY.html)
    Data [](GLOSSARY.html) Binding. For [](GLOSSARY.html) this [](GLOSSARY.html) reason,
    widget-level [](GLOSSARY.html) MVC [](GLOSSARY.html) is [](GLOSSARY.html) the
    [](GLOSSARY.html) most [](GLOSSARY.html) frequently [](GLOSSARY.html) used [](GLOSSARY.html)
    building [](GLOSSARY.html) block because [](GLOSSARY.html) of [](GLOSSARY.html)
    its [](GLOSSARY.html) strong [](GLOSSARY.html) off-the-shelf [](GLOSSARY.html)
    nature.'
  id: totrans-529
  prefs: []
  type: TYPE_NORMAL
  zh: 每个[解决方案](GLOSSARY.html)都有[优势](GLOSSARY.html)和[劣势](GLOSSARY.html)，结果是采用了两种方法的混合：小部件级别具有可重用性的强大优势。视图是现成的UI小部件，控制器是针对特定小部件定制的通用类。小部件和模型属性之间的连接变得直接，尽管容易产生样板代码来建立连接。通过一些额外的支持，可以消除样板代码，导致所谓的数据绑定设计。因此，小部件级别的MVC是最常用的构建模块，因为它具有强大的现成性质。
- en: On [](GLOSSARY.html) the [](GLOSSARY.html) other [](GLOSSARY.html) hand, a [](GLOSSARY.html)
    Container [](GLOSSARY.html) level [](GLOSSARY.html) approach [](GLOSSARY.html)
    is [](GLOSSARY.html) useful [](GLOSSARY.html) when [](GLOSSARY.html) there's [](GLOSSARY.html)
    need [](GLOSSARY.html) for [](GLOSSARY.html) a specialized [](GLOSSARY.html) Controller
    [](GLOSSARY.html) handling [](GLOSSARY.html) multiple [](GLOSSARY.html) Models
    [](GLOSSARY.html) and [](GLOSSARY.html) their [](GLOSSARY.html) data's [](GLOSSARY.html)
    cross validation, and [](GLOSSARY.html) for [](GLOSSARY.html) a [](GLOSSARY.html)
    View [](GLOSSARY.html) that [](GLOSSARY.html) acts [](GLOSSARY.html) as [](GLOSSARY.html)
    a [](GLOSSARY.html) container [](GLOSSARY.html) of [](GLOSSARY.html) complex [](GLOSSARY.html)
    SubViews.
  id: totrans-530
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，容器级别的方法在需要专门处理多个模型及其数据交叉验证的专业控制器以及作为复杂子视图容器的视图时非常有用。
- en: Design
  id: totrans-531
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: A [](GLOSSARY.html) Widget-level [](GLOSSARY.html) design [](GLOSSARY.html)
    requires [](GLOSSARY.html) one [](GLOSSARY.html) specific [](GLOSSARY.html) controller
    [](GLOSSARY.html) for [](GLOSSARY.html) each [](GLOSSARY.html) Widget [](GLOSSARY.html)
    of [](GLOSSARY.html) the toolkit. The [](GLOSSARY.html) role [](GLOSSARY.html)
    of [](GLOSSARY.html) each [](GLOSSARY.html) Controller [](GLOSSARY.html) is [](GLOSSARY.html)
    to [](GLOSSARY.html) handle [](GLOSSARY.html) the [](GLOSSARY.html) communication
    [](GLOSSARY.html) and [](GLOSSARY.html) data conversion [](GLOSSARY.html) between
    [](GLOSSARY.html) the [](GLOSSARY.html) widget [](GLOSSARY.html) and [](GLOSSARY.html)
    a [](GLOSSARY.html) specific [](GLOSSARY.html) property [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) Model, and [](GLOSSARY.html) vice-versa. In [](GLOSSARY.html)
    particular, the [](GLOSSARY.html) Controller [](GLOSSARY.html) must [](GLOSSARY.html)
    push [](GLOSSARY.html) changes [](GLOSSARY.html) onto [](GLOSSARY.html) the [](GLOSSARY.html)
    Widgets, which [](GLOSSARY.html) behave [](GLOSSARY.html) as Passive [](GLOSSARY.html)
    Views.
  id: totrans-532
  prefs: []
  type: TYPE_NORMAL
  zh: 一个[小部件级](GLOSSARY.html)设计需要为工具包中的每个小部件指定一个特定的[控制器](GLOSSARY.html)。每个控制器的角色是处理小部件和模型特定属性之间的通信和数据转换，反之亦然。特别是，控制器必须将更改推送到小部件上，而小部件则充当被动视图。
- en: '![](widget_level_schema.png)'
  id: totrans-533
  prefs: []
  type: TYPE_IMG
  zh: '![](widget_level_schema.png)'
- en: Considering [](GLOSSARY.html) that [](GLOSSARY.html) Model [](GLOSSARY.html)
    properties [](GLOSSARY.html) can [](GLOSSARY.html) have [](GLOSSARY.html) different
    [](GLOSSARY.html) types, a [](GLOSSARY.html) strategy [](GLOSSARY.html) for [](GLOSSARY.html)
    correct [](GLOSSARY.html) type handling [](GLOSSARY.html) may [](GLOSSARY.html)
    be [](GLOSSARY.html) required [](GLOSSARY.html) as [](GLOSSARY.html) well. This
    [](GLOSSARY.html) gives [](GLOSSARY.html) raise [](GLOSSARY.html) to [](GLOSSARY.html)
    a [](GLOSSARY.html) potentially [](GLOSSARY.html) large [](GLOSSARY.html) set
    [](GLOSSARY.html) of controllers [](GLOSSARY.html) for [](GLOSSARY.html) all [](GLOSSARY.html)
    the [](GLOSSARY.html) possible [](GLOSSARY.html) combinations [](GLOSSARY.html)
    widget/model [](GLOSSARY.html) type (e.g. `ListEditStrController`, `ListEditIntController`,
    and [](GLOSSARY.html) so [](GLOSSARY.html) on). An [](GLOSSARY.html) alternative
    [](GLOSSARY.html) approach [](GLOSSARY.html) is [](GLOSSARY.html) to [](GLOSSARY.html)
    have [](GLOSSARY.html) only [](GLOSSARY.html) per-widget [](GLOSSARY.html) controllers
    (`ListEditController`) which [](GLOSSARY.html) accept [](GLOSSARY.html) a [](GLOSSARY.html)
    type [](GLOSSARY.html) conversion [](GLOSSARY.html) strategy [](GLOSSARY.html)
    as [](GLOSSARY.html) a [](GLOSSARY.html) conversion [](GLOSSARY.html) function.
    Introspection is [](GLOSSARY.html) then [](GLOSSARY.html) performed [](GLOSSARY.html)
    on [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) property [](GLOSSARY.html)
    to [](GLOSSARY.html) determine [](GLOSSARY.html) its [](GLOSSARY.html) type, followed
    [](GLOSSARY.html) by [](GLOSSARY.html) a [](GLOSSARY.html) lookup [](GLOSSARY.html)
    of [](GLOSSARY.html) the appropriate [](GLOSSARY.html) conversion [](GLOSSARY.html)
    strategy [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html)
    representation (e.g. a [](GLOSSARY.html) string) to [](GLOSSARY.html) the [](GLOSSARY.html)
    actual Model [](GLOSSARY.html) type (e.g. an [](GLOSSARY.html) int).
  id: totrans-534
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到[](GLOSSARY.html)模型[](GLOSSARY.html)属性[](GLOSSARY.html)可能具有不同的[](GLOSSARY.html)类型，可能需要一种[](GLOSSARY.html)正确处理类型的策略[](GLOSSARY.html)。这[](GLOSSARY.html)会[](GLOSSARY.html)产生[](GLOSSARY.html)一组潜在的[](GLOSSARY.html)大型[](GLOSSARY.html)控制器[](GLOSSARY.html)以处理[](GLOSSARY.html)所有[](GLOSSARY.html)可能的[](GLOSSARY.html)组合[](GLOSSARY.html)的小部件/模型[](GLOSSARY.html)类型（例如，`ListEditStrController`，`ListEditIntController`，以及[](GLOSSARY.html)等）。一种[](GLOSSARY.html)替代的方法是[](GLOSSARY.html)只有针对每个小部件的[](GLOSSARY.html)控制器（`ListEditController`）[](GLOSSARY.html)接受[](GLOSSARY.html)一种类型[](GLOSSARY.html)转换策略[](GLOSSARY.html)作为[](GLOSSARY.html)转换[](GLOSSARY.html)函数。然后对[](GLOSSARY.html)模型[](GLOSSARY.html)属性进行[](GLOSSARY.html)内省[](GLOSSARY.html)以确定其[](GLOSSARY.html)类型，然后[](GLOSSARY.html)从[](GLOSSARY.html)视图[](GLOSSARY.html)表示（例如字符串）[](GLOSSARY.html)到[](GLOSSARY.html)实际模型的[](GLOSSARY.html)类型（例如，整数）[](GLOSSARY.html)的适当[](GLOSSARY.html)转换[](GLOSSARY.html)策略进行查找。
- en: 'Synchronization [](GLOSSARY.html) between [](GLOSSARY.html) Model [](GLOSSARY.html)
    and [](GLOSSARY.html) Widget [](GLOSSARY.html) is [](GLOSSARY.html) generally
    [](GLOSSARY.html) bi-directional: if [](GLOSSARY.html) the [](GLOSSARY.html) Model
    [](GLOSSARY.html) changes, the [](GLOSSARY.html) Widget [](GLOSSARY.html) will
    [](GLOSSARY.html) update (Model [](GLOSSARY.html) to [](GLOSSARY.html) Widget),
    and [](GLOSSARY.html) if [](GLOSSARY.html) the Widget [](GLOSSARY.html) is [](GLOSSARY.html)
    updated [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html) User, the
    [](GLOSSARY.html) Model [](GLOSSARY.html) will [](GLOSSARY.html) change (Widget
    [](GLOSSARY.html) to [](GLOSSARY.html) Model). There [](GLOSSARY.html) are however
    [](GLOSSARY.html) cases [](GLOSSARY.html) where [](GLOSSARY.html) one-directional
    [](GLOSSARY.html) communication [](GLOSSARY.html) is [](GLOSSARY.html) preferrable:
    "Model [](GLOSSARY.html) to [](GLOSSARY.html) Widget" only [](GLOSSARY.html) is
    [](GLOSSARY.html) the [](GLOSSARY.html) reasonable [](GLOSSARY.html) choice [](GLOSSARY.html)
    when [](GLOSSARY.html) the [](GLOSSARY.html) Widget [](GLOSSARY.html) is [](GLOSSARY.html)
    read-only. "Widget [](GLOSSARY.html) to [](GLOSSARY.html) Model" only [](GLOSSARY.html)
    is [](GLOSSARY.html) instead [](GLOSSARY.html) used [](GLOSSARY.html) when [](GLOSSARY.html)
    coercion [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) type [](GLOSSARY.html)
    introduces bounceback [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html)
    Model. This [](GLOSSARY.html) particular [](GLOSSARY.html) problem [](GLOSSARY.html)
    will [](GLOSSARY.html) be [](GLOSSARY.html) explored [](GLOSSARY.html) in [](GLOSSARY.html)
    more detail [](GLOSSARY.html) later (see [](GLOSSARY.html) Coercion [](GLOSSARY.html)
    Bounceback).'
  id: totrans-535
  prefs: []
  type: TYPE_NORMAL
  zh: 模型和小部件之间的同步通常是双向的：如果模型发生变化，小部件将更新（模型到小部件），如果用户更新了小部件，模型将发生变化（小部件到模型）。然而，有些情况下单向通信更可取：“模型到小部件”只是在小部件是只读时才是合理的选择。“小部件到模型”只有在类型强制转换引入模型的反弹时才会被使用。这个特定的问题将在稍后更详细地探讨（参见强制转换反弹）。
- en: Practical example
  id: totrans-536
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际示例
- en: 'is [](GLOSSARY.html) better [](GLOSSARY.html) explained [](GLOSSARY.html) with
    [](GLOSSARY.html) a [](GLOSSARY.html) practical [](GLOSSARY.html) example supporting
    [](GLOSSARY.html) the [](GLOSSARY.html) explanation: a [](GLOSSARY.html) window
    [](GLOSSARY.html) contains [](GLOSSARY.html) a [](GLOSSARY.html) LineEdit [](GLOSSARY.html)
    widget [](GLOSSARY.html) to [](GLOSSARY.html) write [](GLOSSARY.html) a message
    [](GLOSSARY.html) and [](GLOSSARY.html) a "Send" button [](GLOSSARY.html) to [](GLOSSARY.html)
    send [](GLOSSARY.html) the [](GLOSSARY.html) message. The [](GLOSSARY.html) resulting
    [](GLOSSARY.html) design [](GLOSSARY.html) will [](GLOSSARY.html) have two [](GLOSSARY.html)
    widgets (LineEdit [](GLOSSARY.html) and [](GLOSSARY.html) Button, each [](GLOSSARY.html)
    of [](GLOSSARY.html) them [](GLOSSARY.html) a [](GLOSSARY.html) View), two [](GLOSSARY.html)
    specialized Controllers (LineEditController [](GLOSSARY.html) and [](GLOSSARY.html)
    ButtonController) and [](GLOSSARY.html) a [](GLOSSARY.html) single [](GLOSSARY.html)
    Model.'
  id: totrans-537
  prefs: []
  type: TYPE_NORMAL
  zh: 使用一个实际示例来支持解释更好地解释：一个窗口包含一个 LineEdit 小部件用于编写消息和一个“发送”按钮用于发送消息。最终的设计将有两个小部件（LineEdit
    和 Button，每个都是一个视图），两个专门的控制器（LineEditController 和 ButtonController）和一个单一的模型。
- en: ': a [](GLOSSARY.html) generic [](GLOSSARY.html) LineEdit [](GLOSSARY.html)
    could [](GLOSSARY.html) be [](GLOSSARY.html) connected [](GLOSSARY.html) to a
    [](GLOSSARY.html) Model [](GLOSSARY.html) string [](GLOSSARY.html) variable [](GLOSSARY.html)
    via [](GLOSSARY.html) a [](GLOSSARY.html) LineEditStringController, or [](GLOSSARY.html)
    to [](GLOSSARY.html) a [](GLOSSARY.html) float [](GLOSSARY.html) variable via
    [](GLOSSARY.html) a [](GLOSSARY.html) LineEditFloatController. The [](GLOSSARY.html)
    Controller [](GLOSSARY.html) would [](GLOSSARY.html) take [](GLOSSARY.html) care
    [](GLOSSARY.html) of [](GLOSSARY.html) validating [](GLOSSARY.html) and converting
    [](GLOSSARY.html) the [](GLOSSARY.html) data [](GLOSSARY.html) type (for [](GLOSSARY.html)
    example, from [](GLOSSARY.html) the [](GLOSSARY.html) string [](GLOSSARY.html)
    provided [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html) LineEdit
    to [](GLOSSARY.html) a [](GLOSSARY.html) float)'
  id: totrans-538
  prefs: []
  type: TYPE_NORMAL
  zh: ': 一个通用的 LineEdit 可以连接到一个模型字符串变量通过一个 LineEditStringController，或者连接到一个浮点变量通过一个
    LineEditFloatController。控制器将负责验证和转换数据类型（例如，从 LineEdit 提供的字符串到浮点数）'
- en: 'but [](GLOSSARY.html) it [](GLOSSARY.html) introduces [](GLOSSARY.html) the
    [](GLOSSARY.html) following [](GLOSSARY.html) shortcomings:'
  id: totrans-539
  prefs: []
  type: TYPE_NORMAL
  zh: 但是它引入了以下缺点：
- en: The [](GLOSSARY.html) controller [](GLOSSARY.html) may [](GLOSSARY.html) be
    [](GLOSSARY.html) too [](GLOSSARY.html) trivial [](GLOSSARY.html) in [](GLOSSARY.html)
    some [](GLOSSARY.html) cases, in [](GLOSSARY.html) particular [](GLOSSARY.html)
    with [](GLOSSARY.html) complex Models (e.g. multiple [](GLOSSARY.html) instances
    [](GLOSSARY.html) must [](GLOSSARY.html) be [](GLOSSARY.html) handled) or [](GLOSSARY.html)
    complex [](GLOSSARY.html) Views (e.g. different [](GLOSSARY.html) widgets [](GLOSSARY.html)
    that [](GLOSSARY.html) need [](GLOSSARY.html) to [](GLOSSARY.html) be [](GLOSSARY.html)
    analyzed [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html) controller
    [](GLOSSARY.html) at [](GLOSSARY.html) the [](GLOSSARY.html) same [](GLOSSARY.html)
    time).
  id: totrans-540
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在某些情况下，控制器可能过于琐碎，特别是对于复杂的模型（例如，必须处理多个实例）或复杂的视图（例如，控制器需要同时分析不同的小部件）。
- en: Visual Proxy
  id: totrans-541
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 可视代理
- en: Visual Proxy
  id: totrans-542
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 可视代理
- en: Motivation
  id: totrans-543
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'Visual [](GLOSSARY.html) Proxy [](GLOSSARY.html) is [](GLOSSARY.html) an [](GLOSSARY.html)
    approach [](GLOSSARY.html) first [](GLOSSARY.html) presented [](GLOSSARY.html)
    by [](GLOSSARY.html) Allen [](GLOSSARY.html) Holub [](GLOSSARY.html) in [](GLOSSARY.html)
    1999\. It it [](GLOSSARY.html) is [](GLOSSARY.html) wildly [](GLOSSARY.html) different
    [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) previous [](GLOSSARY.html)
    approaches, but [](GLOSSARY.html) definitely [](GLOSSARY.html) contains interesting
    [](GLOSSARY.html) ideas. Holub [](GLOSSARY.html) argues [](GLOSSARY.html) the
    [](GLOSSARY.html) following:'
  id: totrans-544
  prefs: []
  type: TYPE_NORMAL
  zh: 可视代理是由 Allen Holub 在 1999 年首次提出的一种方法。它与先前的方法大不相同，但肯定包含有趣的想法。Holub 提出以下观点：
- en: It [](GLOSSARY.html) is [](GLOSSARY.html) very [](GLOSSARY.html) rare [](GLOSSARY.html)
    for [](GLOSSARY.html) the [](GLOSSARY.html) same [](GLOSSARY.html) Model [](GLOSSARY.html)
    to [](GLOSSARY.html) be [](GLOSSARY.html) represented [](GLOSSARY.html) at [](GLOSSARY.html)
    the [](GLOSSARY.html) same time [](GLOSSARY.html) in [](GLOSSARY.html) two [](GLOSSARY.html)
    different [](GLOSSARY.html) ways
  id: totrans-545
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 很少有同一个模型同时以两种不同的方式表示
- en: Model [](GLOSSARY.html) representation [](GLOSSARY.html) is [](GLOSSARY.html)
    not [](GLOSSARY.html) about [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html)
    object [](GLOSSARY.html) per-se, but for [](GLOSSARY.html) some [](GLOSSARY.html)
    specific [](GLOSSARY.html) attributes [](GLOSSARY.html) of [](GLOSSARY.html) that
    [](GLOSSARY.html) object. These [](GLOSSARY.html) attributes can [](GLOSSARY.html)
    be [](GLOSSARY.html) presented [](GLOSSARY.html) with [](GLOSSARY.html) a [](GLOSSARY.html)
    well [](GLOSSARY.html) defined [](GLOSSARY.html) UI [](GLOSSARY.html) widget,
    regardless [](GLOSSARY.html) of where [](GLOSSARY.html) they [](GLOSSARY.html)
    will [](GLOSSARY.html) appear [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html)
    View. For [](GLOSSARY.html) example, `Person.name` is [](GLOSSARY.html) invariably
    [](GLOSSARY.html) represented [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html)
    string, and [](GLOSSARY.html) its [](GLOSSARY.html) View [](GLOSSARY.html) presentation
    [](GLOSSARY.html) is [](GLOSSARY.html) an [](GLOSSARY.html) editable [](GLOSSARY.html)
    textfield [](GLOSSARY.html) widget [](GLOSSARY.html) throughout the [](GLOSSARY.html)
    application
  id: totrans-546
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模型[GLOSSARY.html]表示不是关于模型[GLOSSARY.html]对象本身，而是关于该对象的一些特定属性。这些属性可以用一个定义良好的UI[GLOSSARY.html]小部件呈现，无论它们将出现在视图中的哪个位置。例如，`Person.name`总是被表示为一个字符串，并且它的视图展示是一个可编辑的文本框小部件在整个应用程序中。
- en: All [](GLOSSARY.html) Model [](GLOSSARY.html) designs [](GLOSSARY.html) generally
    [](GLOSSARY.html) assume [](GLOSSARY.html) a [](GLOSSARY.html) get/set [](GLOSSARY.html)
    approach [](GLOSSARY.html) to Model [](GLOSSARY.html) state [](GLOSSARY.html)
    modification. From [](GLOSSARY.html) a [](GLOSSARY.html) strict [](GLOSSARY.html)
    Object [](GLOSSARY.html) Oriented [](GLOSSARY.html) interpretation, getter/setters
    [](GLOSSARY.html) is [](GLOSSARY.html) a *faux [](GLOSSARY.html) pas* and [](GLOSSARY.html)
    should [](GLOSSARY.html) be [](GLOSSARY.html) avoided, as [](GLOSSARY.html) they
    [](GLOSSARY.html) are just [](GLOSSARY.html) access [](GLOSSARY.html) to [](GLOSSARY.html)
    private [](GLOSSARY.html) state [](GLOSSARY.html) in [](GLOSSARY.html) disguise
  id: totrans-547
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有[GLOSSARY.html]模型[GLOSSARY.html]设计[GLOSSARY.html]通常[GLOSSARY.html]假设[GLOSSARY.html]对模型[GLOSSARY.html]状态[GLOSSARY.html]修改采用获取/设置[GLOSSARY.html]方法。从严格的面向对象的解释来看，getter/setters是一个*错误的做法*，应该避免使用，因为它们只是伪装的私有状态访问。
- en: Essential [](GLOSSARY.html) separation [](GLOSSARY.html) between [](GLOSSARY.html)
    Model [](GLOSSARY.html) and [](GLOSSARY.html) View [](GLOSSARY.html) is [](GLOSSARY.html)
    clumsy [](GLOSSARY.html) to achieve [](GLOSSARY.html) in [](GLOSSARY.html) MVC,
    which [](GLOSSARY.html) does [](GLOSSARY.html) not [](GLOSSARY.html) scale [](GLOSSARY.html)
    well [](GLOSSARY.html) at [](GLOSSARY.html) the [](GLOSSARY.html) application
    [](GLOSSARY.html) level
  id: totrans-548
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在MVC中实现模型和视图之间的基本分离在应用程序级别上并不容易实现，这在MVC中并不很好地扩展。
- en: An [](GLOSSARY.html) Object [](GLOSSARY.html) Oriented [](GLOSSARY.html) system
    [](GLOSSARY.html) should [](GLOSSARY.html) focus [](GLOSSARY.html) on [](GLOSSARY.html)
    objects [](GLOSSARY.html) issuing [](GLOSSARY.html) behavior requests [](GLOSSARY.html)
    to [](GLOSSARY.html) one [](GLOSSARY.html) another, with [](GLOSSARY.html) the
    [](GLOSSARY.html) data [](GLOSSARY.html) staying [](GLOSSARY.html) put. The [](GLOSSARY.html)
    previous [](GLOSSARY.html) designs instead [](GLOSSARY.html) focus [](GLOSSARY.html)
    on [](GLOSSARY.html) data [](GLOSSARY.html) transfer [](GLOSSARY.html) from [](GLOSSARY.html)
    the [](GLOSSARY.html) view [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    model, and *vice-versa*.
  id: totrans-549
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 面向对象的系统应该专注于对象相互发出行为请求，而数据保持不变。而以往的设计则侧重于视图到模型的数据传输，反之亦然。
- en: Out [](GLOSSARY.html) of [](GLOSSARY.html) these [](GLOSSARY.html) considerations,
    the [](GLOSSARY.html) proposed [](GLOSSARY.html) alternative [](GLOSSARY.html)
    is [](GLOSSARY.html) to [](GLOSSARY.html) let [](GLOSSARY.html) Models create
    [](GLOSSARY.html) their [](GLOSSARY.html) own [](GLOSSARY.html) Views, according
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) data [](GLOSSARY.html)
    they [](GLOSSARY.html) hold. For [](GLOSSARY.html) example, a [](GLOSSARY.html)
    Model [](GLOSSARY.html) containing [](GLOSSARY.html) a [](GLOSSARY.html) string,
    a [](GLOSSARY.html) date [](GLOSSARY.html) and [](GLOSSARY.html) an [](GLOSSARY.html)
    integer [](GLOSSARY.html) range [](GLOSSARY.html) return a [](GLOSSARY.html) View
    [](GLOSSARY.html) containing [](GLOSSARY.html) a [](GLOSSARY.html) LineEdit, a
    [](GLOSSARY.html) Calendar [](GLOSSARY.html) and [](GLOSSARY.html) a [](GLOSSARY.html)
    Spinbox [](GLOSSARY.html) constrained to [](GLOSSARY.html) the [](GLOSSARY.html)
    the [](GLOSSARY.html) appropriate [](GLOSSARY.html) range.
  id: totrans-550
  prefs: []
  type: TYPE_NORMAL
  zh: 在这些考虑之外，提出的替代方案是让模型根据其持有的数据自行创建视图。例如，包含字符串、日期和整数范围的模型将返回包含LineEdit、Calendar和Spinbox的视图，这些控件受到适当范围的限制。
- en: 'This [](GLOSSARY.html) approach, while [](GLOSSARY.html) appealing [](GLOSSARY.html)
    in [](GLOSSARY.html) its [](GLOSSARY.html) cleverness, is [](GLOSSARY.html) not
    [](GLOSSARY.html) without shortcomings. Responsibilities [](GLOSSARY.html) that
    [](GLOSSARY.html) are [](GLOSSARY.html) traditionally [](GLOSSARY.html) handled
    [](GLOSSARY.html) by the [](GLOSSARY.html) View [](GLOSSARY.html) layer [](GLOSSARY.html)
    are [](GLOSSARY.html) now [](GLOSSARY.html) handled, directly [](GLOSSARY.html)
    or [](GLOSSARY.html) indirectly, by [](GLOSSARY.html) the [](GLOSSARY.html) Model:'
  id: totrans-551
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管这种方法在巧妙性上很吸引人，但并非没有缺点。传统上由视图层处理的责任现在直接或间接地由模型处理：
- en: The [](GLOSSARY.html) Model [](GLOSSARY.html) layer [](GLOSSARY.html) has [](GLOSSARY.html)
    a [](GLOSSARY.html) dependency [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html)
    GUI [](GLOSSARY.html) toolkit. This [](GLOSSARY.html) may [](GLOSSARY.html) have
    [](GLOSSARY.html) deep [](GLOSSARY.html) implications [](GLOSSARY.html) for [](GLOSSARY.html)
    testability, reuse, and requirements [](GLOSSARY.html) for [](GLOSSARY.html) the
    [](GLOSSARY.html) Model [](GLOSSARY.html) layer
  id: totrans-552
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模型层对GUI工具包有依赖。这可能对可测试性、重用性以及模型层的需求产生深远影响。
- en: If [](GLOSSARY.html) the [](GLOSSARY.html) Visual [](GLOSSARY.html) Proxy [](GLOSSARY.html)
    contains [](GLOSSARY.html) static [](GLOSSARY.html) parts (such [](GLOSSARY.html)
    as [](GLOSSARY.html) a "Name" label followed [](GLOSSARY.html) by [](GLOSSARY.html)
    the [](GLOSSARY.html) line [](GLOSSARY.html) editor [](GLOSSARY.html) to [](GLOSSARY.html)
    input [](GLOSSARY.html) the [](GLOSSARY.html) name) the [](GLOSSARY.html) Model
    [](GLOSSARY.html) objects have [](GLOSSARY.html) to [](GLOSSARY.html) handle [](GLOSSARY.html)
    localization [](GLOSSARY.html) of [](GLOSSARY.html) the "Name" string [](GLOSSARY.html)
    in [](GLOSSARY.html) other [](GLOSSARY.html) languages
  id: totrans-553
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果视觉代理包含静态部分（例如“名称”标签后面跟着的行编辑器用于输入名称），则模型对象必须处理其他语言中的“名称”字符串的本地化。
- en: Logical [](GLOSSARY.html) dependencies [](GLOSSARY.html) between [](GLOSSARY.html)
    visual [](GLOSSARY.html) components (*e.g.* when [](GLOSSARY.html) this value
    [](GLOSSARY.html) is [](GLOSSARY.html) 1, enable [](GLOSSARY.html) that [](GLOSSARY.html)
    checkbox) must [](GLOSSARY.html) also [](GLOSSARY.html) be [](GLOSSARY.html) moved
    [](GLOSSARY.html) to [](GLOSSARY.html) the Model [](GLOSSARY.html) layer.
  id: totrans-554
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 视觉组件之间的逻辑依赖关系（例如，当该值为1时，启用该复选框）也必须移至模型层。
- en: Note [](GLOSSARY.html) that [](GLOSSARY.html) this [](GLOSSARY.html) approach
    [](GLOSSARY.html) is [](GLOSSARY.html) different [](GLOSSARY.html) from [](GLOSSARY.html)
    a [](GLOSSARY.html) UI [](GLOSSARY.html) Retrieving [](GLOSSARY.html) Model. The
    [](GLOSSARY.html) latter [](GLOSSARY.html) considers [](GLOSSARY.html) the [](GLOSSARY.html)
    User [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html) source [](GLOSSARY.html)
    of [](GLOSSARY.html) data, and [](GLOSSARY.html) generates a [](GLOSSARY.html)
    short-lived [](GLOSSARY.html) UI [](GLOSSARY.html) for [](GLOSSARY.html) that
    [](GLOSSARY.html) specific [](GLOSSARY.html) retrieval. Visual [](GLOSSARY.html)
    Proxy, on [](GLOSSARY.html) the other [](GLOSSARY.html) hand, is [](GLOSSARY.html)
    a [](GLOSSARY.html) full [](GLOSSARY.html) fledged [](GLOSSARY.html) foundation
    [](GLOSSARY.html) of [](GLOSSARY.html) all [](GLOSSARY.html) Model [](GLOSSARY.html)
    objects to [](GLOSSARY.html) provide [](GLOSSARY.html) their [](GLOSSARY.html)
    own [](GLOSSARY.html) View [](GLOSSARY.html) as [](GLOSSARY.html) implicitly [](GLOSSARY.html)
    described [](GLOSSARY.html) by [](GLOSSARY.html) their [](GLOSSARY.html) data.
  id: totrans-555
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，这种方法与UI检索模型不同。后者将用户视为数据源，并为特定检索生成短暂的UI。另一方面，视觉代理是所有模型对象的基础，以提供它们自己的视图，这由它们的数据隐含描述。
- en: 'Visual [](GLOSSARY.html) Proxy [](GLOSSARY.html) should [](GLOSSARY.html) also
    [](GLOSSARY.html) not [](GLOSSARY.html) be [](GLOSSARY.html) confused [](GLOSSARY.html)
    with [](GLOSSARY.html) View-aware [](GLOSSARY.html) Model, as [](GLOSSARY.html)
    they [](GLOSSARY.html) handle [](GLOSSARY.html) different [](GLOSSARY.html) concerns:
    Visual [](GLOSSARY.html) Proxy [](GLOSSARY.html) deals [](GLOSSARY.html) with
    View''s [](GLOSSARY.html) creation. View-aware [](GLOSSARY.html) Model [](GLOSSARY.html)
    deals [](GLOSSARY.html) with [](GLOSSARY.html) Model-View synchronization.'
  id: totrans-556
  prefs: []
  type: TYPE_NORMAL
  zh: 视觉代理也不应与视图感知模型混淆，因为它们处理不同的问题：视觉代理处理视图的创建。视图感知模型处理模型-视图同步。
- en: Design
  id: totrans-557
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: Model [](GLOSSARY.html) objects [](GLOSSARY.html) act [](GLOSSARY.html) as [](GLOSSARY.html)
    factories [](GLOSSARY.html) for [](GLOSSARY.html) the [](GLOSSARY.html) UI [](GLOSSARY.html)
    of [](GLOSSARY.html) their [](GLOSSARY.html) own [](GLOSSARY.html) attributes
  id: totrans-558
  prefs: []
  type: TYPE_NORMAL
  zh: 模型[](GLOSSARY.html)对象[](GLOSSARY.html)充当其自己属性的UI工厂
- en: '![](visual_proxy.png)'
  id: totrans-559
  prefs: []
  type: TYPE_IMG
  zh: '![](visual_proxy.png)'
- en: 'The [](GLOSSARY.html) resulting [](GLOSSARY.html) message [](GLOSSARY.html)
    flow [](GLOSSARY.html) is [](GLOSSARY.html) simplified: all [](GLOSSARY.html)
    the [](GLOSSARY.html) data [](GLOSSARY.html) synchronization [](GLOSSARY.html)
    happens between [](GLOSSARY.html) the [](GLOSSARY.html) Visual [](GLOSSARY.html)
    Proxy [](GLOSSARY.html) and [](GLOSSARY.html) its [](GLOSSARY.html) backend [](GLOSSARY.html)
    attribute. The [](GLOSSARY.html) Client [](GLOSSARY.html) code is [](GLOSSARY.html)
    not [](GLOSSARY.html) concerned [](GLOSSARY.html) with [](GLOSSARY.html) this
    [](GLOSSARY.html) transaction. It [](GLOSSARY.html) just [](GLOSSARY.html) coordinates
    creation [](GLOSSARY.html) and [](GLOSSARY.html) presentation [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) Visual [](GLOSSARY.html) Proxy [](GLOSSARY.html)
    object [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) User.'
  id: totrans-560
  prefs: []
  type: TYPE_NORMAL
  zh: 结果消息流程简化：所有数据同步发生在可视代理和其后端属性之间。客户端代码不关心这个事务。它只是协调可视代理对象的创建和展示给用户。
- en: Practical Example
  id: totrans-561
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实际示例
- en: 'The [](GLOSSARY.html) following [](GLOSSARY.html) practical [](GLOSSARY.html)
    example [](GLOSSARY.html) represents [](GLOSSARY.html) a [](GLOSSARY.html) boilerplate
    implementation [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) design,
    for [](GLOSSARY.html) clarity [](GLOSSARY.html) purposes. Two [](GLOSSARY.html)
    methods [](GLOSSARY.html) are [](GLOSSARY.html) provided [](GLOSSARY.html) to
    [](GLOSSARY.html) generate [](GLOSSARY.html) a [](GLOSSARY.html) Visual [](GLOSSARY.html)
    Proxy: `visual_proxy_attribute` returns [](GLOSSARY.html) the [](GLOSSARY.html)
    Proxy [](GLOSSARY.html) for [](GLOSSARY.html) a [](GLOSSARY.html) specific attribute
    [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) Person [](GLOSSARY.html)
    Model [](GLOSSARY.html) class; `visual_proxy` returns instead [](GLOSSARY.html)
    the [](GLOSSARY.html) full [](GLOSSARY.html) UI [](GLOSSARY.html) representation
    [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html)
    properties.'
  id: totrans-562
  prefs: []
  type: TYPE_NORMAL
  zh: 以下实际示例代表了设计的样板实现，用于清晰展示目的。提供了两种方法来生成可视代理：`visual_proxy_attribute`返回Person模型类的特定属性的代理；`visual_proxy`则返回模型属性的完整UI表示。
- en: For [](GLOSSARY.html) simplicity [](GLOSSARY.html) of [](GLOSSARY.html) presentation,
    this [](GLOSSARY.html) example [](GLOSSARY.html) only [](GLOSSARY.html) performs
    synchronization [](GLOSSARY.html) in [](GLOSSARY.html) one [](GLOSSARY.html) direction,
    from [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) Model. Changes [](GLOSSARY.html) in [](GLOSSARY.html) the
    [](GLOSSARY.html) Model [](GLOSSARY.html) are [](GLOSSARY.html) not [](GLOSSARY.html)
    updating [](GLOSSARY.html) the [](GLOSSARY.html) View.
  id: totrans-563
  prefs: []
  type: TYPE_NORMAL
  zh: 为了简化演示，这个示例只在一个方向上执行同步，从视图到模型。模型中的更改不会更新视图。
- en: '[PRE46]'
  id: totrans-564
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'Client [](GLOSSARY.html) code [](GLOSSARY.html) can [](GLOSSARY.html) now [](GLOSSARY.html)
    request [](GLOSSARY.html) the [](GLOSSARY.html) Visual [](GLOSSARY.html) Proxy
    [](GLOSSARY.html) by [](GLOSSARY.html) issuing:'
  id: totrans-565
  prefs: []
  type: TYPE_NORMAL
  zh: 客户端[](GLOSSARY.html)代码[](GLOSSARY.html)现在可以通过发出以下请求来请求可视代理：
- en: '[PRE47]'
  id: totrans-566
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'Practical Example: Enthought traits'
  id: totrans-567
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际示例：Enthought traits
- en: A [](GLOSSARY.html) more [](GLOSSARY.html) streamlined [](GLOSSARY.html) approach
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) Visual [](GLOSSARY.html)
    Proxy [](GLOSSARY.html) design [](GLOSSARY.html) is [](GLOSSARY.html) provided
    by [](GLOSSARY.html) Enthought [](GLOSSARY.html) Traits/TraitsUI. Boilerplate
    [](GLOSSARY.html) code [](GLOSSARY.html) is [](GLOSSARY.html) removed installing
    [](GLOSSARY.html) automatic [](GLOSSARY.html) bindings [](GLOSSARY.html) between
    [](GLOSSARY.html) Model [](GLOSSARY.html) properties [](GLOSSARY.html) and [](GLOSSARY.html)
    UI [](GLOSSARY.html) widgets, and [](GLOSSARY.html) automatically [](GLOSSARY.html)
    selecting [](GLOSSARY.html) the [](GLOSSARY.html) appropriate [](GLOSSARY.html)
    mapping [](GLOSSARY.html) between [](GLOSSARY.html) data [](GLOSSARY.html) types
    and [](GLOSSARY.html) their [](GLOSSARY.html) UI [](GLOSSARY.html) representation.
  id: totrans-568
  prefs: []
  type: TYPE_NORMAL
  zh: Enthought Traits/TraitsUI提供了更简化的可视代理设计方法。通过安装自动绑定模型属性和UI小部件之间的自动绑定，并自动选择数据类型和其UI表示之间的适当映射，消除了样板代码。
- en: The [](GLOSSARY.html) Model [](GLOSSARY.html) is [](GLOSSARY.html) defined [](GLOSSARY.html)
    through [](GLOSSARY.html) type-enforcing [](GLOSSARY.html) python [](GLOSSARY.html)
    descriptors.
  id: totrans-569
  prefs: []
  type: TYPE_NORMAL
  zh: 通过强制类型的Python描述符定义的[](GLOSSARY.html)模型[](GLOSSARY.html)。
- en: '[PRE48]'
  id: totrans-570
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: and [](GLOSSARY.html) the [](GLOSSARY.html) Visual [](GLOSSARY.html) Proxy [](GLOSSARY.html)
    is [](GLOSSARY.html) obtained [](GLOSSARY.html) by [](GLOSSARY.html) invoking
    `edit_traits()`
  id: totrans-571
  prefs: []
  type: TYPE_NORMAL
  zh: 并通过调用`edit_traits()`获得可视代理。
- en: '[PRE49]'
  id: totrans-572
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: which [](GLOSSARY.html) results [](GLOSSARY.html) in [](GLOSSARY.html) a [](GLOSSARY.html)
    window [](GLOSSARY.html) containing [](GLOSSARY.html) two [](GLOSSARY.html) LineEdit
    [](GLOSSARY.html) and [](GLOSSARY.html) a [](GLOSSARY.html) Slider.
  id: totrans-573
  prefs: []
  type: TYPE_NORMAL
  zh: 导致包含两个LineEdit和一个Slider的窗口。
- en: Data Dialog
  id: totrans-574
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据对话框
- en: Data Dialog
  id: totrans-575
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据对话框
- en: Motivation
  id: totrans-576
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: Data [](GLOSSARY.html) Dialog [](GLOSSARY.html) is [](GLOSSARY.html) a [](GLOSSARY.html)
    simplified [](GLOSSARY.html) and [](GLOSSARY.html) practical [](GLOSSARY.html)
    design [](GLOSSARY.html) to [](GLOSSARY.html) retrieve [](GLOSSARY.html) information
    [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) User by [](GLOSSARY.html)
    means [](GLOSSARY.html) of [](GLOSSARY.html) a [](GLOSSARY.html) modal [](GLOSSARY.html)
    dialog. It [](GLOSSARY.html) is [](GLOSSARY.html) generally [](GLOSSARY.html)
    used [](GLOSSARY.html) to [](GLOSSARY.html) retrieve [](GLOSSARY.html) preference
    [](GLOSSARY.html) information.
  id: totrans-577
  prefs: []
  type: TYPE_NORMAL
  zh: 数据对话框是一种简化和实用的设计，通过模态对话框从用户那里检索信息。通常用于检索偏好信息。
- en: 'To [](GLOSSARY.html) use [](GLOSSARY.html) a [](GLOSSARY.html) Data [](GLOSSARY.html)
    Dialog, the [](GLOSSARY.html) following [](GLOSSARY.html) constraints [](GLOSSARY.html)
    must [](GLOSSARY.html) be [](GLOSSARY.html) respected:'
  id: totrans-578
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用数据对话框，必须遵守以下约束：
- en: It [](GLOSSARY.html) must [](GLOSSARY.html) be [](GLOSSARY.html) Modal (i.e.
    when [](GLOSSARY.html) visible, interaction [](GLOSSARY.html) with [](GLOSSARY.html)
    the [](GLOSSARY.html) rest [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    application [](GLOSSARY.html) is [](GLOSSARY.html) prevented)
  id: totrans-579
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它必须是模态的（即，当可见时，阻止与应用程序的其余部分的交互）。
- en: It [](GLOSSARY.html) only [](GLOSSARY.html) allows [](GLOSSARY.html) Accept
    (`Ok` button) and [](GLOSSARY.html) Reject (`Cancel` button) operations, not [](GLOSSARY.html)
    Apply
  id: totrans-580
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它只允许接受（`确定`按钮）和拒绝（`取消`按钮）操作，而不是应用。
- en: It [](GLOSSARY.html) does [](GLOSSARY.html) not [](GLOSSARY.html) need [](GLOSSARY.html)
    to [](GLOSSARY.html) synchronize [](GLOSSARY.html) with [](GLOSSARY.html) the
    [](GLOSSARY.html) application [](GLOSSARY.html) state [](GLOSSARY.html) while
    [](GLOSSARY.html) visible.
  id: totrans-581
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在可见时，它不需要与应用程序状态同步。
- en: Data [](GLOSSARY.html) Dialog [](GLOSSARY.html) is [](GLOSSARY.html) different
    [](GLOSSARY.html) from [](GLOSSARY.html) Local [](GLOSSARY.html) Model. A [](GLOSSARY.html)
    Local [](GLOSSARY.html) Model [](GLOSSARY.html) is [](GLOSSARY.html) a [](GLOSSARY.html)
    real [](GLOSSARY.html) Model [](GLOSSARY.html) that [](GLOSSARY.html) is connected
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html)
    through [](GLOSSARY.html) notification, but [](GLOSSARY.html) has [](GLOSSARY.html)
    simply [](GLOSSARY.html) been [](GLOSSARY.html) copied [](GLOSSARY.html) to [](GLOSSARY.html)
    preserve its [](GLOSSARY.html) initial [](GLOSSARY.html) state [](GLOSSARY.html)
    if [](GLOSSARY.html) changes [](GLOSSARY.html) are [](GLOSSARY.html) reverted.
    Data [](GLOSSARY.html) Dialog, on [](GLOSSARY.html) the [](GLOSSARY.html) other
    [](GLOSSARY.html) hand, is [](GLOSSARY.html) simply a [](GLOSSARY.html) View [](GLOSSARY.html)
    with [](GLOSSARY.html) an [](GLOSSARY.html) API [](GLOSSARY.html) to [](GLOSSARY.html)
    populate [](GLOSSARY.html) or [](GLOSSARY.html) retrieve [](GLOSSARY.html) information
    [](GLOSSARY.html) from [](GLOSSARY.html) its [](GLOSSARY.html) widgets [](GLOSSARY.html)
    in a [](GLOSSARY.html) trivial [](GLOSSARY.html) representation.
  id: totrans-582
  prefs: []
  type: TYPE_NORMAL
  zh: 数据对话框与本地模型不同。本地模型是一个真实的模型，通过通知连接到视图，但如果更改被还原，它只是被简单地复制以保留其初始状态。另一方面，数据对话框只是一个带有
    API 的视图，用于从其小部件中填充或检索信息，以一种简单的表示形式。
- en: Design
  id: totrans-583
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: Data [](GLOSSARY.html) Dialog [](GLOSSARY.html) object [](GLOSSARY.html) is
    [](GLOSSARY.html) instantiated, and [](GLOSSARY.html) its [](GLOSSARY.html) widgets
    [](GLOSSARY.html) are [](GLOSSARY.html) populated [](GLOSSARY.html) through [](GLOSSARY.html)
    an appropriate [](GLOSSARY.html) method [](GLOSSARY.html) call `set_content`.
    Data [](GLOSSARY.html) is [](GLOSSARY.html) passed [](GLOSSARY.html) in [](GLOSSARY.html)
    a [](GLOSSARY.html) trivial [](GLOSSARY.html) representation (*e.g.* a [](GLOSSARY.html)
    properly [](GLOSSARY.html) keyed [](GLOSSARY.html) dictionary) as [](GLOSSARY.html)
    an [](GLOSSARY.html) argument [](GLOSSARY.html) of [](GLOSSARY.html) this [](GLOSSARY.html)
    method.
  id: totrans-584
  prefs: []
  type: TYPE_NORMAL
  zh: 数据对话框对象被实例化，并通过适当的方法调用`set_content`来填充其小部件。数据以一种简单的表示形式（例如一个正确键入的字典）作为此方法的参数传递。
- en: '![](data_dialog.png)'
  id: totrans-585
  prefs: []
  type: TYPE_IMG
  zh: '![](data_dialog.png)'
- en: The [](GLOSSARY.html) dialog [](GLOSSARY.html) is [](GLOSSARY.html) then [](GLOSSARY.html)
    shown [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) User. As [](GLOSSARY.html)
    explained [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html) Motivation,
    the `show` operation [](GLOSSARY.html) must [](GLOSSARY.html) block [](GLOSSARY.html)
    and [](GLOSSARY.html) produce [](GLOSSARY.html) a [](GLOSSARY.html) modal [](GLOSSARY.html)
    dialog. The [](GLOSSARY.html) User [](GLOSSARY.html) can [](GLOSSARY.html) interact
    [](GLOSSARY.html) with [](GLOSSARY.html) it and [](GLOSSARY.html) modify [](GLOSSARY.html)
    the [](GLOSSARY.html) presented [](GLOSSARY.html) values. Basic [](GLOSSARY.html)
    validation [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html) performed
    [](GLOSSARY.html) and [](GLOSSARY.html) reported.
  id: totrans-586
  prefs: []
  type: TYPE_NORMAL
  zh: 然后将对话框显示给用户。如动机中所解释的，`show`操作必须阻塞并产生一个模态对话框。用户可以与之交互并修改呈现的值。可以执行基本的验证并报告结果。
- en: Eventually, the [](GLOSSARY.html) User [](GLOSSARY.html) will [](GLOSSARY.html)
    issue [](GLOSSARY.html) either [](GLOSSARY.html) an "Ok" or "Cancel". With [](GLOSSARY.html)
    an "Ok", the [](GLOSSARY.html) new data [](GLOSSARY.html) is [](GLOSSARY.html)
    gathered [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) Dialog
    [](GLOSSARY.html) through [](GLOSSARY.html) a `get_content` method [](GLOSSARY.html)
    returning [](GLOSSARY.html) the same [](GLOSSARY.html) trivial [](GLOSSARY.html)
    representation. The [](GLOSSARY.html) client [](GLOSSARY.html) code [](GLOSSARY.html)
    will [](GLOSSARY.html) then [](GLOSSARY.html) process [](GLOSSARY.html) this information
    [](GLOSSARY.html) appropriately. If [](GLOSSARY.html) the [](GLOSSARY.html) User
    [](GLOSSARY.html) issues [](GLOSSARY.html) a "Cancel", the [](GLOSSARY.html) gathered
    [](GLOSSARY.html) information is [](GLOSSARY.html) simply [](GLOSSARY.html) discarded.
  id: totrans-587
  prefs: []
  type: TYPE_NORMAL
  zh: 最终，用户将发出“确定”或“取消”的命令。如果是“确定”，则从对话框中收集新数据，通过`get_content`方法返回相同的简单表示。然后客户端代码将适当地处理这些信息。如果用户发出“取消”命令，则收集的信息将被简单地丢弃。
- en: Testability [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) Data
    [](GLOSSARY.html) Dialog [](GLOSSARY.html) itself [](GLOSSARY.html) is [](GLOSSARY.html)
    potentially [](GLOSSARY.html) complex [](GLOSSARY.html) due [](GLOSSARY.html)
    to [](GLOSSARY.html) its [](GLOSSARY.html) synchronous [](GLOSSARY.html) nature.
    Client [](GLOSSARY.html) code [](GLOSSARY.html) however [](GLOSSARY.html) can
    [](GLOSSARY.html) replace [](GLOSSARY.html) Data [](GLOSSARY.html) Dialog [](GLOSSARY.html)
    with [](GLOSSARY.html) a [](GLOSSARY.html) mock [](GLOSSARY.html) honoring [](GLOSSARY.html)
    the [](GLOSSARY.html) same [](GLOSSARY.html) interface, resulting [](GLOSSARY.html)
    in [](GLOSSARY.html) easier [](GLOSSARY.html) testability [](GLOSSARY.html) of
    [](GLOSSARY.html) this [](GLOSSARY.html) part [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) application.
  id: totrans-588
  prefs: []
  type: TYPE_NORMAL
  zh: 测试[](GLOSSARY.html)数据对话框[](GLOSSARY.html)本身的可测试性[](GLOSSARY.html)可能会很复杂，因为它的同步特性。但是客户端代码可以用一个模拟对象替代数据对话框，保持相同的接口，从而更容易测试应用程序的这部分功能。
- en: Practical Example
  id: totrans-589
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际示例
- en: The [](GLOSSARY.html) following [](GLOSSARY.html) example [](GLOSSARY.html)
    with [](GLOSSARY.html) Qt [](GLOSSARY.html) will [](GLOSSARY.html) show [](GLOSSARY.html)
    the [](GLOSSARY.html) main [](GLOSSARY.html) concept [](GLOSSARY.html) outlining
    [](GLOSSARY.html) Data [](GLOSSARY.html) Dialog. Both [](GLOSSARY.html) idiomatic
    [](GLOSSARY.html) python [](GLOSSARY.html) and [](GLOSSARY.html) Qt [](GLOSSARY.html)
    have [](GLOSSARY.html) been [](GLOSSARY.html) ignored [](GLOSSARY.html) to [](GLOSSARY.html)
    favor [](GLOSSARY.html) clarity, as [](GLOSSARY.html) usual.
  id: totrans-590
  prefs: []
  type: TYPE_NORMAL
  zh: 以下示例使用Qt将展示概述数据对话框的主要概念。为了清晰起见，已忽略了惯用的Python和Qt。
- en: The `DataDialog` class [](GLOSSARY.html) implements [](GLOSSARY.html) a [](GLOSSARY.html)
    Dialog [](GLOSSARY.html) with [](GLOSSARY.html) textual [](GLOSSARY.html) fields,
    an [](GLOSSARY.html) Ok [](GLOSSARY.html) and [](GLOSSARY.html) Cancel [](GLOSSARY.html)
    buttons.
  id: totrans-591
  prefs: []
  type: TYPE_NORMAL
  zh: '`DataDialog`类实现了一个带有文本字段、确定和取消按钮的对话框。'
- en: '[PRE50]'
  id: totrans-592
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'The [](GLOSSARY.html) core [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    design [](GLOSSARY.html) resides [](GLOSSARY.html) in [](GLOSSARY.html) the `set_content/get_content`
    pair: `set_content` accepts [](GLOSSARY.html) a [](GLOSSARY.html) dictionary [](GLOSSARY.html)
    with [](GLOSSARY.html) appropriate [](GLOSSARY.html) data [](GLOSSARY.html) for
    [](GLOSSARY.html) the [](GLOSSARY.html) dialog fields, and [](GLOSSARY.html) fills
    [](GLOSSARY.html) the [](GLOSSARY.html) widgets [](GLOSSARY.html) with [](GLOSSARY.html)
    its [](GLOSSARY.html) contents. `get_content` retrieves the [](GLOSSARY.html)
    data [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) widgets [](GLOSSARY.html)
    and [](GLOSSARY.html) returns [](GLOSSARY.html) them [](GLOSSARY.html) as [](GLOSSARY.html)
    a [](GLOSSARY.html) dictionary [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    client [](GLOSSARY.html) code.'
  id: totrans-593
  prefs: []
  type: TYPE_NORMAL
  zh: 设计的核心在于`set_content/get_content`对：`set_content`接受一个包含适当数据的字典用于对话框字段，并用其内容填充小部件。`get_content`从小部件中检索数据并将其作为字典返回给客户端代码。
- en: '[PRE51]'
  id: totrans-594
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'The [](GLOSSARY.html) client [](GLOSSARY.html) code [](GLOSSARY.html) interacts
    [](GLOSSARY.html) with [](GLOSSARY.html) the [](GLOSSARY.html) dialog [](GLOSSARY.html)
    by [](GLOSSARY.html) setting [](GLOSSARY.html) and [](GLOSSARY.html) retrieving
    [](GLOSSARY.html) the data [](GLOSSARY.html) through [](GLOSSARY.html) these [](GLOSSARY.html)
    two [](GLOSSARY.html) methods:'
  id: totrans-595
  prefs: []
  type: TYPE_NORMAL
  zh: 客户端代码通过设置和检索数据与对话框进行交互：
- en: '[PRE52]'
  id: totrans-596
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: Visibility allowed notifications
  id: totrans-597
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 可见性允许通知
- en: Visibility Allowed Notification
  id: totrans-598
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 可见性允许通知
- en: Motivation
  id: totrans-599
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'Views [](GLOSSARY.html) that [](GLOSSARY.html) are [](GLOSSARY.html) hidden
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) User [](GLOSSARY.html)
    generally [](GLOSSARY.html) do [](GLOSSARY.html) not [](GLOSSARY.html) need [](GLOSSARY.html)
    to [](GLOSSARY.html) react [](GLOSSARY.html) to [](GLOSSARY.html) notifications
    from [](GLOSSARY.html) the [](GLOSSARY.html) Model: depending [](GLOSSARY.html)
    on [](GLOSSARY.html) the [](GLOSSARY.html) nature [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) View [](GLOSSARY.html) and [](GLOSSARY.html) the [](GLOSSARY.html)
    optimizations [](GLOSSARY.html) of [](GLOSSARY.html) the UI [](GLOSSARY.html)
    toolkit [](GLOSSARY.html) used, this [](GLOSSARY.html) can [](GLOSSARY.html) result
    [](GLOSSARY.html) in [](GLOSSARY.html) performance [](GLOSSARY.html) degradation
    [](GLOSSARY.html) from [](GLOSSARY.html) mild [](GLOSSARY.html) to [](GLOSSARY.html)
    severe. Machine [](GLOSSARY.html) cycles [](GLOSSARY.html) can [](GLOSSARY.html)
    be [](GLOSSARY.html) saved [](GLOSSARY.html) by [](GLOSSARY.html) ignoring [](GLOSSARY.html)
    the [](GLOSSARY.html) notification [](GLOSSARY.html) altogether, according [](GLOSSARY.html)
    to the [](GLOSSARY.html) visibility [](GLOSSARY.html) status.'
  id: totrans-600
  prefs: []
  type: TYPE_NORMAL
  zh: 对于用户而言隐藏的视图通常不需要对模型的通知做出反应：根据视图的性质和所使用的UI工具包的优化，这可能导致从轻微到严重的性能下降。根据可见性状态，可以通过完全忽略通知来节省机器周期。
- en: 'One [](GLOSSARY.html) possible [](GLOSSARY.html) approach [](GLOSSARY.html)
    to [](GLOSSARY.html) this [](GLOSSARY.html) optimization [](GLOSSARY.html) is
    [](GLOSSARY.html) to [](GLOSSARY.html) unsubscribe [](GLOSSARY.html) the [](GLOSSARY.html)
    View [](GLOSSARY.html) from [](GLOSSARY.html) the Model [](GLOSSARY.html) when
    [](GLOSSARY.html) hidden, and [](GLOSSARY.html) re-subscribe [](GLOSSARY.html)
    when [](GLOSSARY.html) shown. This [](GLOSSARY.html) option [](GLOSSARY.html)
    requires [](GLOSSARY.html) some bookkeeping, and [](GLOSSARY.html) is [](GLOSSARY.html)
    generally [](GLOSSARY.html) less [](GLOSSARY.html) appealing [](GLOSSARY.html)
    than [](GLOSSARY.html) the [](GLOSSARY.html) alternative: to [](GLOSSARY.html)
    simply [](GLOSSARY.html) interrupt [](GLOSSARY.html) further [](GLOSSARY.html)
    processing [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) notification
    [](GLOSSARY.html) when [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html)
    is [](GLOSSARY.html) hidden. When [](GLOSSARY.html) the [](GLOSSARY.html) View
    [](GLOSSARY.html) becomes [](GLOSSARY.html) visible [](GLOSSARY.html) again, synchronization
    [](GLOSSARY.html) with [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html)
    must [](GLOSSARY.html) occur, but [](GLOSSARY.html) only [](GLOSSARY.html) if
    [](GLOSSARY.html) an [](GLOSSARY.html) actual [](GLOSSARY.html) change [](GLOSSARY.html)
    has [](GLOSSARY.html) taken [](GLOSSARY.html) place. Failure [](GLOSSARY.html)
    to [](GLOSSARY.html) do [](GLOSSARY.html) so [](GLOSSARY.html) would [](GLOSSARY.html)
    slow [](GLOSSARY.html) down [](GLOSSARY.html) the return [](GLOSSARY.html) of
    [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html) without [](GLOSSARY.html)
    reason.'
  id: totrans-601
  prefs: []
  type: TYPE_NORMAL
  zh: 一种可能的方法来优化这个过程是在视图隐藏时取消订阅来自模型的通知，并在显示时重新订阅。这种选择需要一些簿记，通常不如另一种选择吸引人：简单地在视图隐藏时中断通知的进一步处理。当视图再次可见时，必须与模型同步，但只有在实际发生变化时才需要。如果不这样做，将无缘无故地减慢视图的返回速度。
- en: Design
  id: totrans-602
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: '![](visibility_allowed_notifications.png)'
  id: totrans-603
  prefs: []
  type: TYPE_IMG
  zh: '![](visibility_allowed_notifications.png)'
- en: When [](GLOSSARY.html) a [](GLOSSARY.html) notification [](GLOSSARY.html) is
    [](GLOSSARY.html) delivered [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    View, the [](GLOSSARY.html) View [](GLOSSARY.html) checks [](GLOSSARY.html) for
    [](GLOSSARY.html) its [](GLOSSARY.html) visibility. If [](GLOSSARY.html) not [](GLOSSARY.html)
    visible, it [](GLOSSARY.html) simply [](GLOSSARY.html) sets [](GLOSSARY.html)
    a `needs_update` flag.
  id: totrans-604
  prefs: []
  type: TYPE_NORMAL
  zh: 当通知传递给视图时，视图会检查自身的可见性。如果不可见，它会简单地设置一个`needs_update`标志。
- en: When [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html) is [](GLOSSARY.html)
    made [](GLOSSARY.html) visible [](GLOSSARY.html) again, and [](GLOSSARY.html)
    assuming [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html) preserves
    its [](GLOSSARY.html) visual [](GLOSSARY.html) state [](GLOSSARY.html) even [](GLOSSARY.html)
    when [](GLOSSARY.html) hidden, the `needs_update` flag [](GLOSSARY.html) is [](GLOSSARY.html)
    checked. If [](GLOSSARY.html) the [](GLOSSARY.html) flag [](GLOSSARY.html) is
    [](GLOSSARY.html) set, the [](GLOSSARY.html) View [](GLOSSARY.html) resynchronizes
    [](GLOSSARY.html) against [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html)
    contents, otherwise, it [](GLOSSARY.html) just [](GLOSSARY.html) presents [](GLOSSARY.html)
    the [](GLOSSARY.html) old [](GLOSSARY.html) visual [](GLOSSARY.html) appearance.
  id: totrans-605
  prefs: []
  type: TYPE_NORMAL
  zh: 当视图再次变为可见，并且假设视图即使在隐藏时也保留其视觉状态时，会检查`needs_update`标志。如果标志被设置，视图会重新与Model内容进行同步，否则，它只会呈现旧的视觉外观。
- en: Practical Example
  id: totrans-606
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际例子
- en: 'Implementation [](GLOSSARY.html) of [](GLOSSARY.html) this [](GLOSSARY.html)
    feature [](GLOSSARY.html) is [](GLOSSARY.html) trivial:'
  id: totrans-607
  prefs: []
  type: TYPE_NORMAL
  zh: 实现这个功能是微不足道的：
- en: '[PRE53]'
  id: totrans-608
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: We [](GLOSSARY.html) resync [](GLOSSARY.html) against [](GLOSSARY.html) the
    [](GLOSSARY.html) Model [](GLOSSARY.html) in `refresh_from_model`. This [](GLOSSARY.html)
    method [](GLOSSARY.html) is [](GLOSSARY.html) called [](GLOSSARY.html) at `showEvent()`,
    the [](GLOSSARY.html) Qt [](GLOSSARY.html) method [](GLOSSARY.html) for [](GLOSSARY.html)
    handling [](GLOSSARY.html) widget [](GLOSSARY.html) show [](GLOSSARY.html) events.
    We [](GLOSSARY.html) save [](GLOSSARY.html) an additional [](GLOSSARY.html) resync
    [](GLOSSARY.html) against [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html)
    by [](GLOSSARY.html) explicitly [](GLOSSARY.html) checking [](GLOSSARY.html) for
    [](GLOSSARY.html) the `needs_update` flag.
  id: totrans-609
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在`refresh_from_model`中重新与Model进行同步。这个方法在`showEvent()`中被调用，这是Qt处理小部件显示事件的方法。我们通过显式检查`needs_update`标志来保存额外的一次与Model的同步。
- en: The `notify()` method [](GLOSSARY.html) called [](GLOSSARY.html) by [](GLOSSARY.html)
    the [](GLOSSARY.html) Model [](GLOSSARY.html) checks [](GLOSSARY.html) visibility
    [](GLOSSARY.html) first [](GLOSSARY.html) and [](GLOSSARY.html) sets the `needs_update`
    flag [](GLOSSARY.html) if [](GLOSSARY.html) the [](GLOSSARY.html) window [](GLOSSARY.html)
    is [](GLOSSARY.html) not [](GLOSSARY.html) visible, saving [](GLOSSARY.html) a
    `refresh_from_model` call.
  id: totrans-610
  prefs: []
  type: TYPE_NORMAL
  zh: 由Model调用的`notify()`方法首先检查可见性，并且如果窗口不可见，则设置`needs_update`标志，避免了一次`refresh_from_model`调用。
- en: Synchronization View state
  id: totrans-611
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 同步视图状态
- en: Synchronization of view state
  id: totrans-612
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 同步视图状态
- en: in [](GLOSSARY.html) some [](GLOSSARY.html) cases, we [](GLOSSARY.html) have
    [](GLOSSARY.html) the [](GLOSSARY.html) following [](GLOSSARY.html) scenario.
    The [](GLOSSARY.html) View [](GLOSSARY.html) retains [](GLOSSARY.html) more [](GLOSSARY.html)
    state [](GLOSSARY.html) than [](GLOSSARY.html) the model. If [](GLOSSARY.html)
    the [](GLOSSARY.html) model [](GLOSSARY.html) changes, and [](GLOSSARY.html) the
    [](GLOSSARY.html) view [](GLOSSARY.html) just [](GLOSSARY.html) fetches [](GLOSSARY.html)
    the [](GLOSSARY.html) new [](GLOSSARY.html) model [](GLOSSARY.html) data [](GLOSSARY.html)
    and [](GLOSSARY.html) repopulates [](GLOSSARY.html) itself, the [](GLOSSARY.html)
    view [](GLOSSARY.html) will [](GLOSSARY.html) lose [](GLOSSARY.html) its [](GLOSSARY.html)
    state. This [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html) an [](GLOSSARY.html)
    annoyance.
  id: totrans-613
  prefs: []
  type: TYPE_NORMAL
  zh: 在一些情况下，我们有以下场景。视图保留的状态比模型更多。如果模型发生变化，视图只需获取新的模型数据并重新填充自身，视图将丢失其状态。这可能会让人感到恼火。
- en: An [](GLOSSARY.html) example [](GLOSSARY.html) is [](GLOSSARY.html) given [](GLOSSARY.html)
    by [](GLOSSARY.html) a [](GLOSSARY.html) View [](GLOSSARY.html) displaying [](GLOSSARY.html)
    a [](GLOSSARY.html) file [](GLOSSARY.html) tree, with [](GLOSSARY.html) the [](GLOSSARY.html)
    model [](GLOSSARY.html) providing [](GLOSSARY.html) filesystem [](GLOSSARY.html)
    data. The [](GLOSSARY.html) view [](GLOSSARY.html) holds [](GLOSSARY.html) state
    [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html) form [](GLOSSARY.html)
    of [](GLOSSARY.html) opened/closed [](GLOSSARY.html) tree [](GLOSSARY.html) branches,
    or [](GLOSSARY.html) the [](GLOSSARY.html) position [](GLOSSARY.html) along [](GLOSSARY.html)
    the scrolling [](GLOSSARY.html) area.
  id: totrans-614
  prefs: []
  type: TYPE_NORMAL
  zh: 一个示例是由一个显示文件树的视图提供的，模型提供文件系统数据。视图以打开/关闭的树分支或沿滚动区域的位置的形式保存状态。
- en: 'If [](GLOSSARY.html) a [](GLOSSARY.html) new [](GLOSSARY.html) file [](GLOSSARY.html)
    is [](GLOSSARY.html) added, the [](GLOSSARY.html) model [](GLOSSARY.html) will
    [](GLOSSARY.html) report [](GLOSSARY.html) a [](GLOSSARY.html) change [](GLOSSARY.html)
    has [](GLOSSARY.html) occurred, triggering [](GLOSSARY.html) a [](GLOSSARY.html)
    View [](GLOSSARY.html) actions. A [](GLOSSARY.html) naive [](GLOSSARY.html) solution
    [](GLOSSARY.html) of [](GLOSSARY.html) purging [](GLOSSARY.html) and [](GLOSSARY.html)
    updating [](GLOSSARY.html) the [](GLOSSARY.html) content [](GLOSSARY.html) will
    [](GLOSSARY.html) have [](GLOSSARY.html) poor [](GLOSSARY.html) usability consequences:
    the [](GLOSSARY.html) view [](GLOSSARY.html) will [](GLOSSARY.html) remove [](GLOSSARY.html)
    all [](GLOSSARY.html) its [](GLOSSARY.html) content, and [](GLOSSARY.html) reinsert
    [](GLOSSARY.html) the [](GLOSSARY.html) new [](GLOSSARY.html) data [](GLOSSARY.html)
    from [](GLOSSARY.html) the [](GLOSSARY.html) model. This [](GLOSSARY.html) is
    [](GLOSSARY.html) unacceptable [](GLOSSARY.html) not [](GLOSSARY.html) only [](GLOSSARY.html)
    for [](GLOSSARY.html) performance [](GLOSSARY.html) reasons (although [](GLOSSARY.html)
    good [](GLOSSARY.html) caching [](GLOSSARY.html) may [](GLOSSARY.html) solve [](GLOSSARY.html)
    it), but [](GLOSSARY.html) also [](GLOSSARY.html) because [](GLOSSARY.html) the
    [](GLOSSARY.html) View [](GLOSSARY.html) state [](GLOSSARY.html) will [](GLOSSARY.html)
    be [](GLOSSARY.html) discarded. Opened [](GLOSSARY.html) tree [](GLOSSARY.html)
    branches [](GLOSSARY.html) will [](GLOSSARY.html) be [](GLOSSARY.html) reset,
    and the [](GLOSSARY.html) scrollbar [](GLOSSARY.html) will [](GLOSSARY.html) reset.
    Additionally, some [](GLOSSARY.html) flickering [](GLOSSARY.html) may [](GLOSSARY.html)
    appear [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html)
    deleting all [](GLOSSARY.html) its [](GLOSSARY.html) entries [](GLOSSARY.html)
    and [](GLOSSARY.html) repopulating [](GLOSSARY.html) itself [](GLOSSARY.html)
    again.'
  id: totrans-615
  prefs: []
  type: TYPE_NORMAL
  zh: 如果添加了一个新文件，模型将报告发生了变化，触发视图操作。简单粗暴地清除和更新内容的方法将导致用户体验不佳：视图将删除所有内容，然后重新插入模型中的新数据。这不仅仅是出于性能原因（尽管良好的缓存可能会解决这个问题），还因为视图状态将被丢弃。打开的树枝将被重置，滚动条也将被重置。此外，视图删除所有条目并重新填充自身时可能会出现一些闪烁。
- en: Variations on the Controller
  id: totrans-616
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 控制器的变种
- en: Variations on the Controller
  id: totrans-617
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 控制器的变种
- en: '[Supervising controller](39_supervising_controller.html)'
  id: totrans-618
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[监督控制器](39_supervising_controller.html)'
- en: '[Event Filter](event_filter.html): Examine [](GLOSSARY.html) and [](GLOSSARY.html)
    potentially [](GLOSSARY.html) handle [](GLOSSARY.html) UI [](GLOSSARY.html) events
    [](GLOSSARY.html) before [](GLOSSARY.html) they [](GLOSSARY.html) reach [](GLOSSARY.html)
    the [](GLOSSARY.html) View.'
  id: totrans-619
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[事件过滤器](event_filter.html)：在到达视图之前检查并可能处理 UI 事件。'
- en: '[Mediating Controller](mediating_controller.html): Connects [](GLOSSARY.html)
    widget [](GLOSSARY.html) and [](GLOSSARY.html) properties.'
  id: totrans-620
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[中介控制器](mediating_controller.html)：连接小部件和属性。'
- en: '[Coordinating controller](coordinating_controller.html): Controllers [](GLOSSARY.html)
    managing [](GLOSSARY.html) the [](GLOSSARY.html) lifetime [](GLOSSARY.html) of
    [](GLOSSARY.html) the [](GLOSSARY.html) application, rather [](GLOSSARY.html)
    than [](GLOSSARY.html) a [](GLOSSARY.html) specific [](GLOSSARY.html) View.'
  id: totrans-621
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[协调控制器](coordinating_controller.html)：管理应用程序的生命周期的控制器，而不是特定的视图。'
- en: '[Action](action.html): Controller [](GLOSSARY.html) with [](GLOSSARY.html)
    visual [](GLOSSARY.html) representation [](GLOSSARY.html) encapsulating [](GLOSSARY.html)
    a [](GLOSSARY.html) command.'
  id: totrans-622
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[动作](action.html)：封装命令的具有可视化表示的控制器。'
- en: '[Action Filter](action_filter.md): Perform [](GLOSSARY.html) behavior [](GLOSSARY.html)
    before [](GLOSSARY.html) or [](GLOSSARY.html) after [](GLOSSARY.html) the [](GLOSSARY.html)
    execution [](GLOSSARY.html) of [](GLOSSARY.html) a [](GLOSSARY.html) Controller
    [](GLOSSARY.html) action.'
  id: totrans-623
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[动作过滤器](action_filter.md)：在控制器动作执行之前或之后执行行为。'
- en: Supervising controller
  id: totrans-624
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监督控制器
- en: Supervising Controller
  id: totrans-625
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监督控制器
- en: Motivation
  id: totrans-626
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'Toolkits [](GLOSSARY.html) and [](GLOSSARY.html) UI [](GLOSSARY.html) frameworks
    [](GLOSSARY.html) can [](GLOSSARY.html) provide [](GLOSSARY.html) declarative
    [](GLOSSARY.html) generation [](GLOSSARY.html) of [](GLOSSARY.html) a [](GLOSSARY.html)
    View [](GLOSSARY.html) with direct [](GLOSSARY.html) binding [](GLOSSARY.html)
    between [](GLOSSARY.html) data [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html)
    Model [](GLOSSARY.html) and [](GLOSSARY.html) a [](GLOSSARY.html) corresponding
    [](GLOSSARY.html) Widget [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html)
    View. (see [](GLOSSARY.html) Variations [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) Triad: Data [](GLOSSARY.html) Binding). This [](GLOSSARY.html)
    declarative [](GLOSSARY.html) approach [](GLOSSARY.html) simplifies development,
    but [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html) of [](GLOSSARY.html)
    limited [](GLOSSARY.html) expressive [](GLOSSARY.html) power.'
  id: totrans-627
  prefs: []
  type: TYPE_NORMAL
  zh: 工具包和 UI 框架可以提供声明性生成视图的功能，并在模型中的数据与视图中相应小部件之间提供直接绑定。（参见三元组：数据绑定的变种）。这种声明性方法简化了开发，但表达能力有限。
- en: Supervising [](GLOSSARY.html) Controller [](GLOSSARY.html) complements [](GLOSSARY.html)
    the [](GLOSSARY.html) declarative [](GLOSSARY.html) View/Model [](GLOSSARY.html)
    connection [](GLOSSARY.html) to handle [](GLOSSARY.html) complex [](GLOSSARY.html)
    logic [](GLOSSARY.html) that [](GLOSSARY.html) is [](GLOSSARY.html) beyond [](GLOSSARY.html)
    the [](GLOSSARY.html) capabilities [](GLOSSARY.html) of [](GLOSSARY.html) the
    [](GLOSSARY.html) Data [](GLOSSARY.html) Binding [](GLOSSARY.html) setup.
  id: totrans-628
  prefs: []
  type: TYPE_NORMAL
  zh: 监督控制器补充了声明式视图/模型连接，以处理超出数据绑定设置能力范围的复杂逻辑。
- en: Design
  id: totrans-629
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: 'The [](GLOSSARY.html) overall [](GLOSSARY.html) design [](GLOSSARY.html) has
    [](GLOSSARY.html) two [](GLOSSARY.html) channels [](GLOSSARY.html) for [](GLOSSARY.html)
    modifying [](GLOSSARY.html) the [](GLOSSARY.html) View:'
  id: totrans-630
  prefs: []
  type: TYPE_NORMAL
  zh: 整体设计有两个通道用于修改视图：
- en: The [](GLOSSARY.html) first [](GLOSSARY.html) channel [](GLOSSARY.html) connects
    [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) View [](GLOSSARY.html) through declarative [](GLOSSARY.html)
    Data [](GLOSSARY.html) Binding. When [](GLOSSARY.html) a [](GLOSSARY.html) specific
    [](GLOSSARY.html) property [](GLOSSARY.html) in [](GLOSSARY.html) the Model [](GLOSSARY.html)
    changes, the [](GLOSSARY.html) declared [](GLOSSARY.html) associated [](GLOSSARY.html)
    View's [](GLOSSARY.html) Widget [](GLOSSARY.html) is updated [](GLOSSARY.html)
    to [](GLOSSARY.html) the [](GLOSSARY.html) new [](GLOSSARY.html) value.
  id: totrans-631
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第一个通道通过声明性数据绑定将模型连接到视图。当模型中的特定属性发生变化时，声明的关联视图的小部件将更新为新值。
- en: The [](GLOSSARY.html) second [](GLOSSARY.html) channel [](GLOSSARY.html) is
    [](GLOSSARY.html) responsible [](GLOSSARY.html) for [](GLOSSARY.html) those [](GLOSSARY.html)
    modifications [](GLOSSARY.html) that [](GLOSSARY.html) cannot be [](GLOSSARY.html)
    handled [](GLOSSARY.html) easily [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html)
    declarative [](GLOSSARY.html) mechanism. For [](GLOSSARY.html) example, the Supervising
    [](GLOSSARY.html) Controller [](GLOSSARY.html) receives [](GLOSSARY.html) the
    [](GLOSSARY.html) notification [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    property change [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html)
    Model, and [](GLOSSARY.html) acts [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html)
    View [](GLOSSARY.html) to [](GLOSSARY.html) change [](GLOSSARY.html) the [](GLOSSARY.html)
    background color [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    Widget, for [](GLOSSARY.html) example [](GLOSSARY.html) to [](GLOSSARY.html) report
    [](GLOSSARY.html) an [](GLOSSARY.html) incorrect [](GLOSSARY.html) value.
  id: totrans-632
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二通道负责那些不能轻易通过声明性机制处理的修改。例如，监督型控制器接收来自模型的属性更改通知，并在视图上采取行动，改变小部件的背景颜色，例如报告不正确的值。
- en: 'The [](GLOSSARY.html) Controller [](GLOSSARY.html) channel [](GLOSSARY.html)
    thus [](GLOSSARY.html) enhances [](GLOSSARY.html) the [](GLOSSARY.html) Data [](GLOSSARY.html)
    Binding [](GLOSSARY.html) channel [](GLOSSARY.html) by [](GLOSSARY.html) acting
    [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) View. The [](GLOSSARY.html)
    same [](GLOSSARY.html) mechanism [](GLOSSARY.html) handles [](GLOSSARY.html) the
    [](GLOSSARY.html) opposite [](GLOSSARY.html) communication [](GLOSSARY.html) route
    (View [](GLOSSARY.html) to [](GLOSSARY.html) Model): direct [](GLOSSARY.html)
    Data [](GLOSSARY.html) Binding [](GLOSSARY.html) handle [](GLOSSARY.html) transporting
    [](GLOSSARY.html) simple [](GLOSSARY.html) data [](GLOSSARY.html) from [](GLOSSARY.html)
    the [](GLOSSARY.html) View''s [](GLOSSARY.html) widgets to [](GLOSSARY.html) the
    [](GLOSSARY.html) associated [](GLOSSARY.html) Model''s [](GLOSSARY.html) properties,
    but [](GLOSSARY.html) more [](GLOSSARY.html) complex [](GLOSSARY.html) events,
    or [](GLOSSARY.html) events requiring [](GLOSSARY.html) complex [](GLOSSARY.html)
    Model [](GLOSSARY.html) transformations, or [](GLOSSARY.html) events [](GLOSSARY.html)
    that [](GLOSSARY.html) are [](GLOSSARY.html) not [](GLOSSARY.html) mappable [](GLOSSARY.html)
    to [](GLOSSARY.html) a Model [](GLOSSARY.html) property (like, for [](GLOSSARY.html)
    example, a [](GLOSSARY.html) button [](GLOSSARY.html) press) are [](GLOSSARY.html)
    handled [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html) Supervising
    [](GLOSSARY.html) Controller.'
  id: totrans-633
  prefs: []
  type: TYPE_NORMAL
  zh: 控制器通道通过在视图上采取行动来增强数据绑定通道。相同的机制处理相反的通信路线（视图到模型）：直接数据绑定处理将简单数据从视图的小部件传输到关联模型的属性，但更复杂的事件，或需要复杂模型转换的事件，或无法映射到模型属性的事件（例如，按钮按下）由监督型控制器处理。
- en: References
  id: totrans-634
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 参考资料
- en: '[Martin Fowler - Supervising Presenter](http://martinfowler.com/eaaDev/SupervisingPresenter.html)'
  id: totrans-635
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Martin Fowler - 监督型Presenter](http://martinfowler.com/eaaDev/SupervisingPresenter.html)'
- en: Event Filter
  id: totrans-636
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 事件过滤器
- en: Event Filter
  id: totrans-637
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 事件过滤器
- en: Motivation
  id: totrans-638
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'An [](GLOSSARY.html) Event [](GLOSSARY.html) Filter [](GLOSSARY.html) is [](GLOSSARY.html)
    a [](GLOSSARY.html) special [](GLOSSARY.html) Controller [](GLOSSARY.html) that
    [](GLOSSARY.html) encapsulates [](GLOSSARY.html) redirection [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) UI event [](GLOSSARY.html) flow: it
    [](GLOSSARY.html) intercepts [](GLOSSARY.html) UI [](GLOSSARY.html) events [](GLOSSARY.html)
    before [](GLOSSARY.html) they [](GLOSSARY.html) are [](GLOSSARY.html) delivered
    [](GLOSSARY.html) to [](GLOSSARY.html) a [](GLOSSARY.html) specific View. Once
    [](GLOSSARY.html) intercepted, events [](GLOSSARY.html) are [](GLOSSARY.html)
    interpreted [](GLOSSARY.html) and [](GLOSSARY.html) handled [](GLOSSARY.html)
    by [](GLOSSARY.html) the [](GLOSSARY.html) Event [](GLOSSARY.html) Filter, which
    [](GLOSSARY.html) can [](GLOSSARY.html) perform [](GLOSSARY.html) specific [](GLOSSARY.html)
    actions [](GLOSSARY.html) or [](GLOSSARY.html) suppress [](GLOSSARY.html) the
    [](GLOSSARY.html) events [](GLOSSARY.html) completely [](GLOSSARY.html) so [](GLOSSARY.html)
    that they [](GLOSSARY.html) never [](GLOSSARY.html) reach [](GLOSSARY.html) the
    [](GLOSSARY.html) View.'
  id: totrans-639
  prefs: []
  type: TYPE_NORMAL
  zh: 一个[事件过滤器](GLOSSARY.html)是一个特殊的控制器，封装了 UI 事件流的重定向：它拦截 UI 事件在它们被传递给特定视图之前。一旦拦截，事件由事件过滤器解释和处理，它可以执行特定操作或完全抑制事件，使其永远不会到达视图。
- en: Design
  id: totrans-640
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: Event [](GLOSSARY.html) Filters [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html)
    designed [](GLOSSARY.html) either [](GLOSSARY.html) as [](GLOSSARY.html) objects
    [](GLOSSARY.html) with [](GLOSSARY.html) a [](GLOSSARY.html) specific [](GLOSSARY.html)
    interface, or as [](GLOSSARY.html) function [](GLOSSARY.html) objects [](GLOSSARY.html)
    with [](GLOSSARY.html) a [](GLOSSARY.html) signature [](GLOSSARY.html) accepting
    [](GLOSSARY.html) the [](GLOSSARY.html) event. They [](GLOSSARY.html) are [](GLOSSARY.html)
    generally designed [](GLOSSARY.html) to [](GLOSSARY.html) be [](GLOSSARY.html)
    pluggable [](GLOSSARY.html) at [](GLOSSARY.html) runtime [](GLOSSARY.html) through
    [](GLOSSARY.html) an [](GLOSSARY.html) appropriate [](GLOSSARY.html) interface
    [](GLOSSARY.html) on [](GLOSSARY.html) the View.
  id: totrans-641
  prefs: []
  type: TYPE_NORMAL
  zh: 事件过滤器可以设计为具有特定接口的对象，也可以设计为接受事件的函数对象。它们通常设计为在运行时通过视图上的适当接口可插拔。
- en: Before [](GLOSSARY.html) being [](GLOSSARY.html) handled [](GLOSSARY.html) by
    [](GLOSSARY.html) the [](GLOSSARY.html) View, a [](GLOSSARY.html) UI [](GLOSSARY.html)
    event [](GLOSSARY.html) is [](GLOSSARY.html) dispatched [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) View's registered [](GLOSSARY.html) Event [](GLOSSARY.html)
    Filter, if [](GLOSSARY.html) present. The [](GLOSSARY.html) Event [](GLOSSARY.html)
    Filter [](GLOSSARY.html) is [](GLOSSARY.html) free [](GLOSSARY.html) to [](GLOSSARY.html)
    respond [](GLOSSARY.html) to [](GLOSSARY.html) the event [](GLOSSARY.html) by
    [](GLOSSARY.html) acting [](GLOSSARY.html) on [](GLOSSARY.html) Models, Views
    [](GLOSSARY.html) or [](GLOSSARY.html) Controller [](GLOSSARY.html) objects [](GLOSSARY.html)
    which [](GLOSSARY.html) may [](GLOSSARY.html) or [](GLOSSARY.html) may [](GLOSSARY.html)
    not [](GLOSSARY.html) be known [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html)
    View. Once [](GLOSSARY.html) the [](GLOSSARY.html) Event [](GLOSSARY.html) Filter
    [](GLOSSARY.html) completes [](GLOSSARY.html) its [](GLOSSARY.html) execution,
    it [](GLOSSARY.html) communicates [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    View [](GLOSSARY.html) if [](GLOSSARY.html) the [](GLOSSARY.html) event [](GLOSSARY.html)
    should [](GLOSSARY.html) be [](GLOSSARY.html) processed [](GLOSSARY.html) as [](GLOSSARY.html)
    usual [](GLOSSARY.html) or [](GLOSSARY.html) not. In [](GLOSSARY.html) the [](GLOSSARY.html)
    latter [](GLOSSARY.html) case, the [](GLOSSARY.html) View [](GLOSSARY.html) acts
    [](GLOSSARY.html) as [](GLOSSARY.html) if [](GLOSSARY.html) the [](GLOSSARY.html)
    event [](GLOSSARY.html) never [](GLOSSARY.html) occurred.
  id: totrans-642
  prefs: []
  type: TYPE_NORMAL
  zh: 在被[](GLOSSARY.html)视图处理之前，UI[](GLOSSARY.html)事件被分发到[](GLOSSARY.html)视图注册的[](GLOSSARY.html)事件[](GLOSSARY.html)过滤器，如果存在的话。[](GLOSSARY.html)事件[](GLOSSARY.html)过滤器可以自由地通过对[](GLOSSARY.html)模型、视图或控制器对象的操作来响应事件，这些对象可能被[](GLOSSARY.html)视图知道或不知道。一旦[](GLOSSARY.html)事件[](GLOSSARY.html)过滤器完成了它的执行，它会向[](GLOSSARY.html)视图通信，告诉它是否应该像通常一样处理[](GLOSSARY.html)事件或不处理。在后一种情况下，[](GLOSSARY.html)视图会表现得好像[](GLOSSARY.html)事件从未发生过。
- en: '![](event_filter.png)'
  id: totrans-643
  prefs: []
  type: TYPE_IMG
  zh: '![](event_filter.png)'
- en: 'From [](GLOSSARY.html) the [](GLOSSARY.html) interaction [](GLOSSARY.html)
    diagram:'
  id: totrans-644
  prefs: []
  type: TYPE_NORMAL
  zh: 从[](GLOSSARY.html)交互[](GLOSSARY.html)图中：
- en: Events [](GLOSSARY.html) are [](GLOSSARY.html) routed [](GLOSSARY.html) into
    [](GLOSSARY.html) the [](GLOSSARY.html) Filter [](GLOSSARY.html) by [](GLOSSARY.html)
    the [](GLOSSARY.html) View, through [](GLOSSARY.html) a `handle_event(event)`
    interface
  id: totrans-645
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 事件[](GLOSSARY.html)通过[](GLOSSARY.html)视图的`handle_event(event)`接口被路由到[](GLOSSARY.html)过滤器中。
- en: The [](GLOSSARY.html) Event [](GLOSSARY.html) Filter [](GLOSSARY.html) can [](GLOSSARY.html)
    now [](GLOSSARY.html) recognize [](GLOSSARY.html) a [](GLOSSARY.html) specific
    [](GLOSSARY.html) event [](GLOSSARY.html) and [](GLOSSARY.html) perform [](GLOSSARY.html)
    operations [](GLOSSARY.html) on [](GLOSSARY.html) the Model [](GLOSSARY.html)
    it [](GLOSSARY.html) is [](GLOSSARY.html) connected [](GLOSSARY.html) to.
  id: totrans-646
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[](GLOSSARY.html)事件[](GLOSSARY.html)过滤器现在可以识别特定的[](GLOSSARY.html)事件，并对其连接的模型执行操作。'
- en: If [](GLOSSARY.html) the [](GLOSSARY.html) Event [](GLOSSARY.html) Filter [](GLOSSARY.html)
    handles [](GLOSSARY.html) the [](GLOSSARY.html) event, The [](GLOSSARY.html) View
    [](GLOSSARY.html) is [](GLOSSARY.html) notified [](GLOSSARY.html) through [](GLOSSARY.html)
    either [](GLOSSARY.html) a [](GLOSSARY.html) flag [](GLOSSARY.html) on the [](GLOSSARY.html)
    event [](GLOSSARY.html) class [](GLOSSARY.html) or [](GLOSSARY.html) a [](GLOSSARY.html)
    boolean [](GLOSSARY.html) return [](GLOSSARY.html) value [](GLOSSARY.html) for
    [](GLOSSARY.html) the `handle_event()` method. In [](GLOSSARY.html) the case [](GLOSSARY.html)
    presented [](GLOSSARY.html) above, the [](GLOSSARY.html) latter [](GLOSSARY.html)
    strategy [](GLOSSARY.html) is [](GLOSSARY.html) used. The `True` return [](GLOSSARY.html)
    value [](GLOSSARY.html) implies that [](GLOSSARY.html) the [](GLOSSARY.html) event
    [](GLOSSARY.html) was [](GLOSSARY.html) handled [](GLOSSARY.html) by [](GLOSSARY.html)
    the [](GLOSSARY.html) Filter [](GLOSSARY.html) and [](GLOSSARY.html) should [](GLOSSARY.html)
    not [](GLOSSARY.html) be [](GLOSSARY.html) handled [](GLOSSARY.html) further [](GLOSSARY.html)
    by [](GLOSSARY.html) the [](GLOSSARY.html) View.
  id: totrans-647
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果事件过滤器处理了事件，则视图通过事件类上的标志或`handle_event()`方法的布尔返回值之一通知。在上述情况下，采用了后一种策略。`True`返回值意味着事件已由过滤器处理，并且不应由视图进一步处理。
- en: If `EventFilter.handle_event()` returns `False`, the [](GLOSSARY.html) View
    [](GLOSSARY.html) handles [](GLOSSARY.html) the [](GLOSSARY.html) event [](GLOSSARY.html)
    as [](GLOSSARY.html) usual. Note [](GLOSSARY.html) that [](GLOSSARY.html) the
    [](GLOSSARY.html) Event [](GLOSSARY.html) Filter [](GLOSSARY.html) might [](GLOSSARY.html)
    choose [](GLOSSARY.html) to [](GLOSSARY.html) handle [](GLOSSARY.html) the [](GLOSSARY.html)
    event [](GLOSSARY.html) and [](GLOSSARY.html) still [](GLOSSARY.html) return `False`,
    allowing [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html) to [](GLOSSARY.html)
    operate [](GLOSSARY.html) as [](GLOSSARY.html) usual.
  id: totrans-648
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果`EventFilter.handle_event()`返回`False`，则视图会像往常一样处理事件。请注意，事件过滤器可能选择处理事件并仍然返回`False`，允许视图像往常一样运行。
- en: As [](GLOSSARY.html) a [](GLOSSARY.html) consequence [](GLOSSARY.html) of [](GLOSSARY.html)
    its [](GLOSSARY.html) design [](GLOSSARY.html) and [](GLOSSARY.html) purpose,
    the [](GLOSSARY.html) Event [](GLOSSARY.html) Filter [](GLOSSARY.html) must [](GLOSSARY.html)
    be [](GLOSSARY.html) dependent [](GLOSSARY.html) on the [](GLOSSARY.html) UI,
    and [](GLOSSARY.html) must [](GLOSSARY.html) know [](GLOSSARY.html) how [](GLOSSARY.html)
    to [](GLOSSARY.html) handle [](GLOSSARY.html) the [](GLOSSARY.html) UI [](GLOSSARY.html)
    Event [](GLOSSARY.html) interface.
  id: totrans-649
  prefs: []
  type: TYPE_NORMAL
  zh: 作为其设计和目的的一个结果，事件过滤器必须依赖于用户界面，并且必须知道如何处理用户界面事件接口。
- en: Practical Example
  id: totrans-650
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际示例
- en: The [](GLOSSARY.html) Qt [](GLOSSARY.html) toolkit [](GLOSSARY.html) offers
    [](GLOSSARY.html) a [](GLOSSARY.html) clear [](GLOSSARY.html) example [](GLOSSARY.html)
    of [](GLOSSARY.html) an [](GLOSSARY.html) Event [](GLOSSARY.html) Filter. To [](GLOSSARY.html)
    define [](GLOSSARY.html) an `EventFilter` class, it [](GLOSSARY.html) is [](GLOSSARY.html)
    sufficient [](GLOSSARY.html) to [](GLOSSARY.html) use `QObject` as [](GLOSSARY.html)
    a [](GLOSSARY.html) base [](GLOSSARY.html) class, implementing [](GLOSSARY.html)
    the [](GLOSSARY.html) method `QObject.eventFilter()`. This [](GLOSSARY.html) method
    [](GLOSSARY.html) will [](GLOSSARY.html) be responsible [](GLOSSARY.html) for
    [](GLOSSARY.html) the [](GLOSSARY.html) processing [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) events. An [](GLOSSARY.html) instance [](GLOSSARY.html)
    of `EventFilter` is [](GLOSSARY.html) then [](GLOSSARY.html) installed [](GLOSSARY.html)
    onto [](GLOSSARY.html) a [](GLOSSARY.html) target [](GLOSSARY.html) object [](GLOSSARY.html)
    through `installEventFilter()`. Qt implementation [](GLOSSARY.html) is [](GLOSSARY.html)
    very [](GLOSSARY.html) flexible, and [](GLOSSARY.html) allows [](GLOSSARY.html)
    any [](GLOSSARY.html) object [](GLOSSARY.html) to [](GLOSSARY.html) hold [](GLOSSARY.html)
    event [](GLOSSARY.html) filters, not [](GLOSSARY.html) only [](GLOSSARY.html)
    UI [](GLOSSARY.html) components.
  id: totrans-651
  prefs: []
  type: TYPE_NORMAL
  zh: Qt工具包提供了一个清晰的事件过滤器示例。要定义一个`EventFilter`类，只需将`QObject`用作基类，实现方法`QObject.eventFilter()`即可。这个方法将负责处理事件。然后通过`installEventFilter()`将`EventFilter`的实例安装到目标对象上。Qt的实现非常灵活，允许任何对象持有事件过滤器，不仅限于UI组件。
- en: The [](GLOSSARY.html) following [](GLOSSARY.html) program [](GLOSSARY.html)
    illustrates [](GLOSSARY.html) the [](GLOSSARY.html) concept
  id: totrans-652
  prefs: []
  type: TYPE_NORMAL
  zh: 以下程序说明了这个概念
- en: '[PRE54]'
  id: totrans-653
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: The [](GLOSSARY.html) example [](GLOSSARY.html) creates [](GLOSSARY.html) a
    `QPushButton` widget [](GLOSSARY.html) and [](GLOSSARY.html) installs [](GLOSSARY.html)
    an `EventFilter` instance [](GLOSSARY.html) on [](GLOSSARY.html) it. UI [](GLOSSARY.html)
    events (mouse [](GLOSSARY.html) movements [](GLOSSARY.html) and [](GLOSSARY.html)
    clicks, key [](GLOSSARY.html) presses, show/hide, resize, repaint [](GLOSSARY.html)
    etc.) that [](GLOSSARY.html) are [](GLOSSARY.html) meant [](GLOSSARY.html) for
    [](GLOSSARY.html) the `QPushButton` are [](GLOSSARY.html) first [](GLOSSARY.html)
    dispatched [](GLOSSARY.html) to `EventFilter.eventFilter()`, then [](GLOSSARY.html)
    to [](GLOSSARY.html) the `QPushButton` if [](GLOSSARY.html) and [](GLOSSARY.html)
    only [](GLOSSARY.html) if [](GLOSSARY.html) the `eventFilter` method [](GLOSSARY.html)
    returns `False`.
  id: totrans-654
  prefs: []
  type: TYPE_NORMAL
  zh: 示例创建一个`QPushButton`小部件，并在其上安装一个`EventFilter`实例。UI事件（鼠标移动和点击，键盘按键，显示/隐藏，调整大小，重绘等）首先被分派到`EventFilter.eventFilter()`，然后再传递给`QPushButton`，仅当`eventFilter`方法返回`False`时才会传递给`QPushButton`。
- en: Mediating Controller
  id: totrans-655
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 调解控制器
- en: Mediating controller
  id: totrans-656
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 调解控制器
- en: Motivation
  id: totrans-657
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: Connects [](GLOSSARY.html) one [](GLOSSARY.html) specific [](GLOSSARY.html)
    widget [](GLOSSARY.html) with [](GLOSSARY.html) one [](GLOSSARY.html) specific
    [](GLOSSARY.html) property. Very [](GLOSSARY.html) reusable. Non-declarative [](GLOSSARY.html)
    form [](GLOSSARY.html) of [](GLOSSARY.html) data [](GLOSSARY.html) binding. Can
    [](GLOSSARY.html) do [](GLOSSARY.html) validation.
  id: totrans-658
  prefs: []
  type: TYPE_NORMAL
  zh: 将一个特定的小部件与一个特定的属性连接起来。非常可重用。数据绑定的非声明形式。可以进行验证。
- en: 'FIXME: We [](GLOSSARY.html) should [](GLOSSARY.html) already [](GLOSSARY.html)
    have [](GLOSSARY.html) it [](GLOSSARY.html) somewhere [](GLOSSARY.html) in [](GLOSSARY.html)
    the [](GLOSSARY.html) notes [](GLOSSARY.html) or [](GLOSSARY.html) the [](GLOSSARY.html)
    coarse [](GLOSSARY.html) vs. fine [](GLOSSARY.html) view.'
  id: totrans-659
  prefs: []
  type: TYPE_NORMAL
  zh: FIXME：我们应该在笔记或粗略与精细视图中的某处已经有它。
- en: Practical Examples
  id: totrans-660
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际示例
- en: NSController [](GLOSSARY.html) and [](GLOSSARY.html) Cocoa [](GLOSSARY.html)
    bindings.
  id: totrans-661
  prefs: []
  type: TYPE_NORMAL
  zh: NSController和Cocoa绑定。
- en: References
  id: totrans-662
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 参考资料
- en: '[Mediating Controllers in OSX](https://developer.apple.com/library/mac/documentation/General/Conceptual/DevPedia-CocoaCore/ControllerObject.html#//apple_ref/doc/uid/TP40008195-CH11-SW1)'
  id: totrans-663
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[在OSX中的中介控制器](https://developer.apple.com/library/mac/documentation/General/Conceptual/DevPedia-CocoaCore/ControllerObject.html#//apple_ref/doc/uid/TP40008195-CH11-SW1)'
- en: Coordinating controller
  id: totrans-664
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 协调控制器
- en: Coordinating controller
  id: totrans-665
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 协调控制器
- en: Motivation
  id: totrans-666
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: Overall [](GLOSSARY.html) controller [](GLOSSARY.html) that [](GLOSSARY.html)
    oversees [](GLOSSARY.html) the [](GLOSSARY.html) application, its [](GLOSSARY.html)
    life [](GLOSSARY.html) cycle, other [](GLOSSARY.html) controllers, setting [](GLOSSARY.html)
    up [](GLOSSARY.html) connections [](GLOSSARY.html) and [](GLOSSARY.html) so [](GLOSSARY.html)
    on.
  id: totrans-667
  prefs: []
  type: TYPE_NORMAL
  zh: 负责监督应用程序、其生命周期、其他控制器、建立连接等的整体控制器。
- en: Action
  id: totrans-668
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 操作
- en: Action
  id: totrans-669
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 操作
- en: Motivation
  id: totrans-670
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: 'User [](GLOSSARY.html) interfaces [](GLOSSARY.html) often [](GLOSSARY.html)
    require [](GLOSSARY.html) a [](GLOSSARY.html) given [](GLOSSARY.html) operation
    [](GLOSSARY.html) to [](GLOSSARY.html) be [](GLOSSARY.html) available [](GLOSSARY.html)
    from [](GLOSSARY.html) different [](GLOSSARY.html) points [](GLOSSARY.html) of
    access: the [](GLOSSARY.html) menubar, contextual [](GLOSSARY.html) menus, toolbars,
    and [](GLOSSARY.html) keyboard [](GLOSSARY.html) accelerators. An [](GLOSSARY.html)
    effective [](GLOSSARY.html) design [](GLOSSARY.html) choice [](GLOSSARY.html)
    to [](GLOSSARY.html) handle [](GLOSSARY.html) this [](GLOSSARY.html) use [](GLOSSARY.html)
    case [](GLOSSARY.html) is [](GLOSSARY.html) to [](GLOSSARY.html) define [](GLOSSARY.html)
    an **Action**, a [](GLOSSARY.html) pluggable [](GLOSSARY.html) entity [](GLOSSARY.html)
    encapsulating [](GLOSSARY.html) Command [](GLOSSARY.html) behavior [](GLOSSARY.html)
    and [](GLOSSARY.html) visual/UI [](GLOSSARY.html) related [](GLOSSARY.html) information,
    such [](GLOSSARY.html) as [](GLOSSARY.html) its [](GLOSSARY.html) icon, tooltip,
    keyboard [](GLOSSARY.html) accelerator, enabled [](GLOSSARY.html) status [](GLOSSARY.html)
    and [](GLOSSARY.html) so [](GLOSSARY.html) on.'
  id: totrans-671
  prefs: []
  type: TYPE_NORMAL
  zh: 用户界面通常需要从不同的访问点（菜单栏、上下文菜单、工具栏和键盘快捷键）中提供特定操作。处理这种用例的有效设计选择是定义一个**操作**，一个可插拔的实体，封装了命令行为和与视觉/UI相关的信息，如图标、工具提示、键盘快捷键、启用状态等。
- en: Design
  id: totrans-672
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: An [](GLOSSARY.html) Action [](GLOSSARY.html) is [](GLOSSARY.html) peculiar
    [](GLOSSARY.html) in [](GLOSSARY.html) design [](GLOSSARY.html) characteristic,
    combining [](GLOSSARY.html) design [](GLOSSARY.html) features [](GLOSSARY.html)
    of Command, Controller, and [](GLOSSARY.html) Model.
  id: totrans-673
  prefs: []
  type: TYPE_NORMAL
  zh: 操作在设计特性上是独特的，结合了命令、控制器和模型的设计特征。
- en: Like [](GLOSSARY.html) a [](GLOSSARY.html) Command, an [](GLOSSARY.html) Action
    [](GLOSSARY.html) normally [](GLOSSARY.html) provides [](GLOSSARY.html) an [](GLOSSARY.html)
    abstract [](GLOSSARY.html) method `triggered()` to [](GLOSSARY.html) reimplement
    [](GLOSSARY.html) with [](GLOSSARY.html) the [](GLOSSARY.html) required [](GLOSSARY.html)
    behavior. Alternative [](GLOSSARY.html) strategies [](GLOSSARY.html) not requiring
    [](GLOSSARY.html) subclassing [](GLOSSARY.html) allow [](GLOSSARY.html) to [](GLOSSARY.html)
    register [](GLOSSARY.html) a [](GLOSSARY.html) callback [](GLOSSARY.html) that
    [](GLOSSARY.html) is [](GLOSSARY.html) executed [](GLOSSARY.html) when [](GLOSSARY.html)
    the action [](GLOSSARY.html) is [](GLOSSARY.html) triggered. Differently [](GLOSSARY.html)
    from [](GLOSSARY.html) a [](GLOSSARY.html) Command, the [](GLOSSARY.html) Action
    [](GLOSSARY.html) is [](GLOSSARY.html) more [](GLOSSARY.html) liberal [](GLOSSARY.html)
    in performing [](GLOSSARY.html) UI [](GLOSSARY.html) operations, such [](GLOSSARY.html)
    as [](GLOSSARY.html) showing [](GLOSSARY.html) a [](GLOSSARY.html) dialog, while
    [](GLOSSARY.html) Commands [](GLOSSARY.html) generally act [](GLOSSARY.html) exclusively
    [](GLOSSARY.html) on [](GLOSSARY.html) Models.
  id: totrans-674
  prefs: []
  type: TYPE_NORMAL
  zh: 像[](GLOSSARY.html)一个[](GLOSSARY.html)命令，一个[](GLOSSARY.html)操作通常提供一个抽象方法`triggered()`来重新实现所需的行为。不需要子类化的替代策略允许注册一个回调，当触发操作时执行。与命令不同，操作在执行UI操作时更加自由，比如显示对话框，而命令通常仅对模型进行操作。
- en: 'Actions [](GLOSSARY.html) are [](GLOSSARY.html) also [](GLOSSARY.html) both
    [](GLOSSARY.html) Controllers [](GLOSSARY.html) and [](GLOSSARY.html) visual [](GLOSSARY.html)
    Models: different [](GLOSSARY.html) Views [](GLOSSARY.html) accept [](GLOSSARY.html)
    the same [](GLOSSARY.html) Action [](GLOSSARY.html) and [](GLOSSARY.html) visually
    [](GLOSSARY.html) represent [](GLOSSARY.html) it [](GLOSSARY.html) in [](GLOSSARY.html)
    a [](GLOSSARY.html) different [](GLOSSARY.html) way. For [](GLOSSARY.html) example,
    a MenuBar [](GLOSSARY.html) might [](GLOSSARY.html) represent [](GLOSSARY.html)
    it [](GLOSSARY.html) as [](GLOSSARY.html) an [](GLOSSARY.html) icon [](GLOSSARY.html)
    followed [](GLOSSARY.html) by [](GLOSSARY.html) a [](GLOSSARY.html) title, a [](GLOSSARY.html)
    ToolBar [](GLOSSARY.html) might display [](GLOSSARY.html) just [](GLOSSARY.html)
    the [](GLOSSARY.html) icon [](GLOSSARY.html) and [](GLOSSARY.html) a [](GLOSSARY.html)
    tooltip, and [](GLOSSARY.html) the [](GLOSSARY.html) application [](GLOSSARY.html)
    as [](GLOSSARY.html) a [](GLOSSARY.html) whole [](GLOSSARY.html) might [](GLOSSARY.html)
    not represent [](GLOSSARY.html) it [](GLOSSARY.html) visually, but [](GLOSSARY.html)
    activate [](GLOSSARY.html) it [](GLOSSARY.html) when [](GLOSSARY.html) its [](GLOSSARY.html)
    keyboard [](GLOSSARY.html) shortcut accelerator [](GLOSSARY.html) is [](GLOSSARY.html)
    invoked. Information [](GLOSSARY.html) about [](GLOSSARY.html) the [](GLOSSARY.html)
    visual [](GLOSSARY.html) aspect [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    Action [](GLOSSARY.html) are contained [](GLOSSARY.html) in [](GLOSSARY.html)
    the [](GLOSSARY.html) Action [](GLOSSARY.html) itself, fulfilling [](GLOSSARY.html)
    a [](GLOSSARY.html) Model-like [](GLOSSARY.html) role [](GLOSSARY.html) for [](GLOSSARY.html)
    this information.'
  id: totrans-675
  prefs: []
  type: TYPE_NORMAL
  zh: 操作[](GLOSSARY.html)也同时是控制器和视觉模型：不同的视图接受相同的操作，并以不同的方式在视觉上表示它。例如，菜单栏可能将其表示为图标，后跟标题，工具栏可能仅显示图标和工具提示，整个应用程序可能在视觉上不表示它，但在调用其键盘快捷键加速器时激活它。有关操作的视觉方面的信息包含在操作本身中，为这些信息提供了类似模型的角色。
- en: Views [](GLOSSARY.html) supporting [](GLOSSARY.html) Actions [](GLOSSARY.html)
    are [](GLOSSARY.html) generally [](GLOSSARY.html) a [](GLOSSARY.html) form [](GLOSSARY.html)
    of [](GLOSSARY.html) visual [](GLOSSARY.html) container (e.g. Menubar, Toolbar)
    and [](GLOSSARY.html) provide [](GLOSSARY.html) an [](GLOSSARY.html) interface
    [](GLOSSARY.html) to [](GLOSSARY.html) add [](GLOSSARY.html) and [](GLOSSARY.html)
    remove [](GLOSSARY.html) them.
  id: totrans-676
  prefs: []
  type: TYPE_NORMAL
  zh: 视图[](GLOSSARY.html)支持[](GLOSSARY.html)操作[](GLOSSARY.html)通常是一种视觉容器（例如菜单栏、工具栏），并提供一个界面来添加和删除它们。
- en: Practical Example
  id: totrans-677
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际示例
- en: Qt [](GLOSSARY.html) supports [](GLOSSARY.html) a [](GLOSSARY.html) regular
    [](GLOSSARY.html) example [](GLOSSARY.html) of [](GLOSSARY.html) Action [](GLOSSARY.html)
    with [](GLOSSARY.html) the [](GLOSSARY.html) QAction [](GLOSSARY.html) class.
    QAction [](GLOSSARY.html) exposes [](GLOSSARY.html) a `triggered` Signal [](GLOSSARY.html)
    that [](GLOSSARY.html) is [](GLOSSARY.html) emitted [](GLOSSARY.html) when [](GLOSSARY.html)
    the [](GLOSSARY.html) Action [](GLOSSARY.html) is activated. This [](GLOSSARY.html)
    Signal [](GLOSSARY.html) can [](GLOSSARY.html) then [](GLOSSARY.html) connected
    [](GLOSSARY.html) to [](GLOSSARY.html) any [](GLOSSARY.html) slot [](GLOSSARY.html)
    callback, where [](GLOSSARY.html) actual Controller [](GLOSSARY.html) behavior
    [](GLOSSARY.html) takes [](GLOSSARY.html) place.
  id: totrans-678
  prefs: []
  type: TYPE_NORMAL
  zh: Qt支持使用QAction类的常规操作示例。 QAction公开了一个`triggered`信号，当操作被激活时发出。然后可以将此信号连接到任何槽回调，其中实际的控制器行为发生。
- en: '[PRE55]'
  id: totrans-679
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: In [](GLOSSARY.html) this [](GLOSSARY.html) example, we [](GLOSSARY.html) created
    [](GLOSSARY.html) an [](GLOSSARY.html) Action [](GLOSSARY.html) for [](GLOSSARY.html)
    quitting [](GLOSSARY.html) the [](GLOSSARY.html) application, then [](GLOSSARY.html)
    add [](GLOSSARY.html) it to [](GLOSSARY.html) both [](GLOSSARY.html) the [](GLOSSARY.html)
    File [](GLOSSARY.html) menu [](GLOSSARY.html) entry [](GLOSSARY.html) and [](GLOSSARY.html)
    the [](GLOSSARY.html) toolbar. Clicking [](GLOSSARY.html) on [](GLOSSARY.html)
    either [](GLOSSARY.html) entry, or [](GLOSSARY.html) using the [](GLOSSARY.html)
    Ctrl+Q [](GLOSSARY.html) accelerator, will [](GLOSSARY.html) invoke [](GLOSSARY.html)
    qApp.quit() and [](GLOSSARY.html) quit [](GLOSSARY.html) the [](GLOSSARY.html)
    application.
  id: totrans-680
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，我们为退出应用程序创建了一个操作，然后将其添加到文件菜单条目和工具栏中。单击任一条目，或使用Ctrl+Q加速器，将调用qApp.quit()并退出应用程序。
- en: Variations on the Triad
  id: totrans-681
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 三元组的变体
- en: Variations on the Triad
  id: totrans-682
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 三元组的变体
- en: '[Model View Adapter](10_model_view_adapter.html)'
  id: totrans-683
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[模型视图适配器](10_model_view_adapter.html)'
- en: '[Model GUI Mediator](11_model_gui_mediator.html)'
  id: totrans-684
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Model GUI Mediator](11_model_gui_mediator.html)'
- en: '[Application Controller](16_application_controller.html)'
  id: totrans-685
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[应用程序控制器](16_application_controller.html)'
- en: '[Push vs. Pull](19_push_vs_pull.html)'
  id: totrans-686
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[推送 vs. 拉取](19_push_vs_pull.html)'
- en: '[Reenskaug MVC](20_reenskaug_mvc.html)'
  id: totrans-687
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Reenskaug MVC](20_reenskaug_mvc.html)'
- en: '[Dolphin MVP](21_dolphin_mvp.html): Rationalize [](GLOSSARY.html) Application
    [](GLOSSARY.html) model [](GLOSSARY.html) into [](GLOSSARY.html) a [](GLOSSARY.html)
    more [](GLOSSARY.html) active [](GLOSSARY.html) role.'
  id: totrans-688
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Dolphin MVP](21_dolphin_mvp.html): 将应用程序模型合理化为更积极的角色。'
- en: '[Presenter First](22_presenter_first.html)'
  id: totrans-689
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Presenter First](22_presenter_first.html)'
- en: '[Taligent MVP](23_taligent_mvp.html): Defines [](GLOSSARY.html) a [](GLOSSARY.html)
    broad [](GLOSSARY.html) set [](GLOSSARY.html) of [](GLOSSARY.html) protagonists
    [](GLOSSARY.html) to [](GLOSSARY.html) define [](GLOSSARY.html) the [](GLOSSARY.html)
    most [](GLOSSARY.html) common [](GLOSSARY.html) needs [](GLOSSARY.html) of [](GLOSSARY.html)
    a [](GLOSSARY.html) generic [](GLOSSARY.html) application.'
  id: totrans-690
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Taligent MVP](23_taligent_mvp.html): 定义了一组广泛的主角来定义通用应用程序的最常见需求。'
- en: '[Presenter Adapter View](24_presenter_adapter_view.html)'
  id: totrans-691
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Presenter适配器视图](24_presenter_adapter_view.html)'
- en: '[Model View Viewmodel](25_model_view_viewmodel.html)'
  id: totrans-692
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[模型视图视图模型](25_model_view_viewmodel.html)'
- en: '[View Controller View](26_view_controller_view.html)'
  id: totrans-693
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[视图控制器视图](26_view_controller_view.html)'
- en: '[Commands](29_commands.html)'
  id: totrans-694
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[命令](29_commands.html)'
- en: '[Visual Editor](36_visual_editor.html)'
  id: totrans-695
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[可视化编辑器](36_visual_editor.html)'
- en: '[Command Notification](37_command_notification.html)'
  id: totrans-696
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[命令通知](37_command_notification.html)'
- en: '[Qt MVC](45_Qt_MVC.html)'
  id: totrans-697
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Qt MVC](45_Qt_MVC.html)'
- en: '[Supervising Presenter](43_supervising_presenter.html)'
  id: totrans-698
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[监督型Presenter](43_supervising_presenter.html)'
- en: '[Presentation Model](44_presentation_model.html)'
  id: totrans-699
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[演示模型](44_presentation_model.html)'
- en: '[Data Binding](46_data_binding.html)'
  id: totrans-700
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[数据绑定](46_data_binding.html)'
- en: Model View Adapter
  id: totrans-701
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 模型视图适配器
- en: Model-View-Adapter (MVA, Mediated MVC, Model-Mediator-View)
  id: totrans-702
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Model-View-Adapter（MVA，调解MVC，模型-中介者-视图）
- en: Motivation
  id: totrans-703
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: Model-View-Adapter [](GLOSSARY.html) is [](GLOSSARY.html) a [](GLOSSARY.html)
    variation [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) Triad [](GLOSSARY.html)
    where [](GLOSSARY.html) all [](GLOSSARY.html) communication [](GLOSSARY.html)
    between Model [](GLOSSARY.html) and [](GLOSSARY.html) View [](GLOSSARY.html) must
    [](GLOSSARY.html) flow [](GLOSSARY.html) through [](GLOSSARY.html) a [](GLOSSARY.html)
    Controller, instead [](GLOSSARY.html) of [](GLOSSARY.html) interacting [](GLOSSARY.html)
    directly as [](GLOSSARY.html) in [](GLOSSARY.html) a [](GLOSSARY.html) Traditional
    [](GLOSSARY.html) MVC [](GLOSSARY.html) Triad. The [](GLOSSARY.html) Controller
    [](GLOSSARY.html) becomes [](GLOSSARY.html) a [](GLOSSARY.html) communication
    [](GLOSSARY.html) hub, accepting [](GLOSSARY.html) change [](GLOSSARY.html) notifications
    [](GLOSSARY.html) from [](GLOSSARY.html) Model [](GLOSSARY.html) objects [](GLOSSARY.html)
    and [](GLOSSARY.html) UI [](GLOSSARY.html) events [](GLOSSARY.html) from [](GLOSSARY.html)
    the [](GLOSSARY.html) View.
  id: totrans-704
  prefs: []
  type: TYPE_NORMAL
  zh: Model-View-Adapter [链接](GLOSSARY.html) 是三者模式的一种变体，其中模型和视图之间的所有通信必须通过控制器流动，而不是像传统的MVC三者模式中直接交互。控制器成为通信中心，接受来自模型对象的变更通知和来自视图的UI事件。
- en: 'This [](GLOSSARY.html) approach [](GLOSSARY.html) might [](GLOSSARY.html) appear
    [](GLOSSARY.html) excessively [](GLOSSARY.html) strict, but [](GLOSSARY.html)
    has [](GLOSSARY.html) some [](GLOSSARY.html) advantages: the communication [](GLOSSARY.html)
    network [](GLOSSARY.html) is [](GLOSSARY.html) artificially [](GLOSSARY.html)
    constrained, making [](GLOSSARY.html) it [](GLOSSARY.html) easier [](GLOSSARY.html)
    to [](GLOSSARY.html) evaluate and [](GLOSSARY.html) debug. All [](GLOSSARY.html)
    action [](GLOSSARY.html) happens [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html)
    Controller, and [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html)
    can [](GLOSSARY.html) be [](GLOSSARY.html) created from [](GLOSSARY.html) off-the-shelf
    [](GLOSSARY.html) widgets [](GLOSSARY.html) without [](GLOSSARY.html) any [](GLOSSARY.html)
    Model-specific [](GLOSSARY.html) variation.'
  id: totrans-705
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法可能看起来过于严格，但具有一些优势：通信网络被人为限制，使得评估和调试更容易。所有操作都发生在控制器中，视图可以从现成的小部件中创建，而无需任何特定于模型的变化。
- en: Design
  id: totrans-706
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设计
- en: MVA [](GLOSSARY.html) is [](GLOSSARY.html) an [](GLOSSARY.html) implementation
    [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) Mediator [](GLOSSARY.html)
    pattern. Controllers [](GLOSSARY.html) are generally [](GLOSSARY.html) referred
    [](GLOSSARY.html) as [](GLOSSARY.html) Adapters [](GLOSSARY.html) or [](GLOSSARY.html)
    Mediators. The [](GLOSSARY.html) Model [](GLOSSARY.html) and [](GLOSSARY.html)
    the [](GLOSSARY.html) View do [](GLOSSARY.html) not [](GLOSSARY.html) hold [](GLOSSARY.html)
    references [](GLOSSARY.html) to [](GLOSSARY.html) each [](GLOSSARY.html) other,
    they [](GLOSSARY.html) do [](GLOSSARY.html) not [](GLOSSARY.html) exchange [](GLOSSARY.html)
    data [](GLOSSARY.html) nor interact [](GLOSSARY.html) directly.
  id: totrans-707
  prefs: []
  type: TYPE_NORMAL
  zh: MVA [链接](GLOSSARY.html) 是中介者模式的一种实现。控制器通常被称为适配器或中介者。模型和视图不持有彼此的引用，它们不交换数据，也不直接交互。
- en: '![](ModelViewAdapter.png)'
  id: totrans-708
  prefs: []
  type: TYPE_IMG
  zh: '![](ModelViewAdapter.png)'
- en: The [](GLOSSARY.html) pattern [](GLOSSARY.html) of [](GLOSSARY.html) communication
    [](GLOSSARY.html) in [](GLOSSARY.html) MVA [](GLOSSARY.html) can [](GLOSSARY.html)
    be [](GLOSSARY.html) represented [](GLOSSARY.html) with [](GLOSSARY.html) the
    [](GLOSSARY.html) following interaction [](GLOSSARY.html) diagram
  id: totrans-709
  prefs: []
  type: TYPE_NORMAL
  zh: MVA中的通信模式可以用以下交互图表示
- en: '![](MVA_Communication.png)'
  id: totrans-710
  prefs: []
  type: TYPE_IMG
  zh: '![](MVA_Communication.png)'
- en: which [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html) described
    [](GLOSSARY.html) as
  id: totrans-711
  prefs: []
  type: TYPE_NORMAL
  zh: 可以描述为
- en: The [](GLOSSARY.html) View [](GLOSSARY.html) receives [](GLOSSARY.html) a [](GLOSSARY.html)
    UI [](GLOSSARY.html) event. It [](GLOSSARY.html) calls [](GLOSSARY.html) an [](GLOSSARY.html)
    appropriate [](GLOSSARY.html) method [](GLOSSARY.html) on [](GLOSSARY.html) the
    [](GLOSSARY.html) Controller.
  id: totrans-712
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 视图[](GLOSSARY.html)接收UI事件。它在控制器上调用适当的方法。
- en: The [](GLOSSARY.html) Controller [](GLOSSARY.html) sets [](GLOSSARY.html) the
    [](GLOSSARY.html) value [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html)
    Model.
  id: totrans-713
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 控制器[](GLOSSARY.html)在模型上设置值。
- en: The [](GLOSSARY.html) Model [](GLOSSARY.html) notifies [](GLOSSARY.html) its
    [](GLOSSARY.html) listeners [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    change, among [](GLOSSARY.html) which [](GLOSSARY.html) is [](GLOSSARY.html) the
    [](GLOSSARY.html) Controller [](GLOSSARY.html) itself. As [](GLOSSARY.html) already
    [](GLOSSARY.html) pointed [](GLOSSARY.html) out, in [](GLOSSARY.html) a [](GLOSSARY.html)
    MVC [](GLOSSARY.html) approach [](GLOSSARY.html) this [](GLOSSARY.html) notification
    [](GLOSSARY.html) would [](GLOSSARY.html) be [](GLOSSARY.html) sent [](GLOSSARY.html)
    to [](GLOSSARY.html) the [](GLOSSARY.html) View.
  id: totrans-714
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 模型通知其监听器发生的变化，其中包括控制器本身。正如已经指出的，在MVC方法中，此通知将发送到视图。
- en: The [](GLOSSARY.html) notified [](GLOSSARY.html) Controller [](GLOSSARY.html)
    fetches [](GLOSSARY.html) information [](GLOSSARY.html) from [](GLOSSARY.html)
    the [](GLOSSARY.html) Model [](GLOSSARY.html) and [](GLOSSARY.html) updates [](GLOSSARY.html)
    the [](GLOSSARY.html) View.
  id: totrans-715
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通知的控制器从模型中获取信息并更新视图。
- en: 'With [](GLOSSARY.html) the [](GLOSSARY.html) Controller [](GLOSSARY.html) in
    [](GLOSSARY.html) full [](GLOSSARY.html) control [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) dialog [](GLOSSARY.html) between [](GLOSSARY.html) the [](GLOSSARY.html)
    two [](GLOSSARY.html) remaining parties, smart [](GLOSSARY.html) tricks [](GLOSSARY.html)
    can [](GLOSSARY.html) be [](GLOSSARY.html) performed [](GLOSSARY.html) on [](GLOSSARY.html)
    the “in [](GLOSSARY.html) transit” data: for [](GLOSSARY.html) example, the [](GLOSSARY.html)
    Controller [](GLOSSARY.html) could [](GLOSSARY.html) be [](GLOSSARY.html) responsible
    [](GLOSSARY.html) for [](GLOSSARY.html) formatting, translating [](GLOSSARY.html)
    or [](GLOSSARY.html) ordering the [](GLOSSARY.html) data [](GLOSSARY.html) from
    [](GLOSSARY.html) the [](GLOSSARY.html) Model.'
  id: totrans-716
  prefs: []
  type: TYPE_NORMAL
  zh: 有了控制器[](GLOSSARY.html)完全控制两个剩余方之间的对话，可以对“在途”数据执行智能技巧：例如，控制器[](GLOSSARY.html)可以负责格式化、翻译或对模型中的数据进行排序。
- en: 'Practical Example 1: With Subclassing of the Views'
  id: totrans-717
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际示例1：通过对视图进行子类化
- en: common [](GLOSSARY.html) in [](GLOSSARY.html) Apple [](GLOSSARY.html) OSX [](GLOSSARY.html)
    Cocoa [](GLOSSARY.html) Framework.
  id: totrans-718
  prefs: []
  type: TYPE_NORMAL
  zh: 在苹果OSX Cocoa框架中很常见。
- en: We [](GLOSSARY.html) examine [](GLOSSARY.html) a [](GLOSSARY.html) MVA [](GLOSSARY.html)
    implementation [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) Engine
    [](GLOSSARY.html) example [](GLOSSARY.html) in [](GLOSSARY.html) two [](GLOSSARY.html)
    steps. In [](GLOSSARY.html) the [](GLOSSARY.html) first [](GLOSSARY.html) step,
    we [](GLOSSARY.html) will [](GLOSSARY.html) keep [](GLOSSARY.html) subclassing
    [](GLOSSARY.html) the [](GLOSSARY.html) Views, to [](GLOSSARY.html) present [](GLOSSARY.html)
    the [](GLOSSARY.html) general [](GLOSSARY.html) concept. In [](GLOSSARY.html)
    the [](GLOSSARY.html) second [](GLOSSARY.html) step, we [](GLOSSARY.html) will
    [](GLOSSARY.html) remove [](GLOSSARY.html) the [](GLOSSARY.html) need [](GLOSSARY.html)
    for [](GLOSSARY.html) subclassing [](GLOSSARY.html) the [](GLOSSARY.html) Views.
  id: totrans-719
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在两个步骤中检查了 MVA 实现的引擎示例。在第一步中，我们将保持对 Views 的子类化，以呈现一般概念。在第二步中，我们将消除对 Views 进行子类化的需要。
- en: 'The [](GLOSSARY.html) Model [](GLOSSARY.html) is [](GLOSSARY.html) unchanged:
    it [](GLOSSARY.html) stores [](GLOSSARY.html) rotations [](GLOSSARY.html) per
    [](GLOSSARY.html) minute [](GLOSSARY.html) information [](GLOSSARY.html) and [](GLOSSARY.html)
    notifies [](GLOSSARY.html) about [](GLOSSARY.html) changes'
  id: totrans-720
  prefs: []
  type: TYPE_NORMAL
  zh: Model 未更改：它存储每分钟旋转信息并通知有关更改。
- en: '[PRE56]'
  id: totrans-721
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: The [](GLOSSARY.html) two [](GLOSSARY.html) View [](GLOSSARY.html) classes,
    `Dial` and `Slider`, are [](GLOSSARY.html) now [](GLOSSARY.html) unaware [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) Model. Instead, they [](GLOSSARY.html)
    know [](GLOSSARY.html) about [](GLOSSARY.html) the [](GLOSSARY.html) Controller,
    and [](GLOSSARY.html) accept [](GLOSSARY.html) changes [](GLOSSARY.html) to [](GLOSSARY.html)
    their [](GLOSSARY.html) content [](GLOSSARY.html) through [](GLOSSARY.html) the
    `setRpmValue()` method. A [](GLOSSARY.html) matter [](GLOSSARY.html) of [](GLOSSARY.html)
    taste [](GLOSSARY.html) can [](GLOSSARY.html) decide [](GLOSSARY.html) the [](GLOSSARY.html)
    semantic [](GLOSSARY.html) level [](GLOSSARY.html) of [](GLOSSARY.html) this method.
    Should [](GLOSSARY.html) it [](GLOSSARY.html) talk “domain [](GLOSSARY.html) language”
    (i.e. Rpm) or [](GLOSSARY.html) not (i.e. the [](GLOSSARY.html) method should
    [](GLOSSARY.html) just [](GLOSSARY.html) be [](GLOSSARY.html) named [](GLOSSARY.html)
    setValue). In [](GLOSSARY.html) any [](GLOSSARY.html) case, Views [](GLOSSARY.html)
    behave [](GLOSSARY.html) differently [](GLOSSARY.html) with respect [](GLOSSARY.html)
    to [](GLOSSARY.html) the [](GLOSSARY.html) issued [](GLOSSARY.html) value (the
    [](GLOSSARY.html) Slider [](GLOSSARY.html) needs [](GLOSSARY.html) its [](GLOSSARY.html)
    value [](GLOSSARY.html) scaled [](GLOSSARY.html) appropriately). One [](GLOSSARY.html)
    could [](GLOSSARY.html) handle [](GLOSSARY.html) this [](GLOSSARY.html) difference
    [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html) Controller, but [](GLOSSARY.html)
    this [](GLOSSARY.html) will [](GLOSSARY.html) be [](GLOSSARY.html) considered
    in [](GLOSSARY.html) the [](GLOSSARY.html) next [](GLOSSARY.html) step.
  id: totrans-722
  prefs: []
  type: TYPE_NORMAL
  zh: 两个 View 类，`Dial` 和 `Slider`，现在不知道 Model。相反，它们了解 Controller，并通过 `setRpmValue()`
    方法接受其内容的更改。此方法的语义级别可以由品味决定。它应该谈论“领域语言”（即 Rpm）还是不应该（即该方法只应该命名为 setValue）。无论如何，Views
    对发出的值（Slider 需要适当地缩放其值）的行为不同。可以在 Controller 中处理此差异，但这将在下一步中考虑。
- en: When [](GLOSSARY.html) the [](GLOSSARY.html) user [](GLOSSARY.html) interacts
    [](GLOSSARY.html) with [](GLOSSARY.html) the `Dial`, the [](GLOSSARY.html) Controller
    `changeRpm()` method [](GLOSSARY.html) is [](GLOSSARY.html) directly [](GLOSSARY.html)
    invoked, in [](GLOSSARY.html) this [](GLOSSARY.html) case [](GLOSSARY.html) via
    [](GLOSSARY.html) the [](GLOSSARY.html) Qt [](GLOSSARY.html) Signal/Slot mechanism
  id: totrans-723
  prefs: []
  type: TYPE_NORMAL
  zh: 当用户与 `Dial` 交互时，`Controller` 的 `changeRpm()` 方法会直接被调用，此时通过 Qt 信号/槽机制进行。
- en: '[PRE57]'
  id: totrans-724
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: For [](GLOSSARY.html) the `Slider`, the [](GLOSSARY.html) interface [](GLOSSARY.html)
    is [](GLOSSARY.html) the [](GLOSSARY.html) same, but [](GLOSSARY.html) the [](GLOSSARY.html)
    internal [](GLOSSARY.html) implementation [](GLOSSARY.html) is different. Again,
    the `setRpmValue` allows [](GLOSSARY.html) the [](GLOSSARY.html) Controller [](GLOSSARY.html)
    to [](GLOSSARY.html) change [](GLOSSARY.html) the View [](GLOSSARY.html) contents.
    In [](GLOSSARY.html) this [](GLOSSARY.html) case [](GLOSSARY.html) however, a
    [](GLOSSARY.html) proper [](GLOSSARY.html) transformation [](GLOSSARY.html) of
    [](GLOSSARY.html) the [](GLOSSARY.html) data [](GLOSSARY.html) is performed [](GLOSSARY.html)
    to [](GLOSSARY.html) deal [](GLOSSARY.html) with [](GLOSSARY.html) the [](GLOSSARY.html)
    specifics [](GLOSSARY.html) of [](GLOSSARY.html) the `Slider` behavior, whose
    [](GLOSSARY.html) range [](GLOSSARY.html) is from [](GLOSSARY.html) 0 [](GLOSSARY.html)
    to [](GLOSSARY.html) 10\. Similarly, when [](GLOSSARY.html) the [](GLOSSARY.html)
    User [](GLOSSARY.html) interact [](GLOSSARY.html) with [](GLOSSARY.html) the `Slider`,
    the [](GLOSSARY.html) method `_valueChanged` will [](GLOSSARY.html) be [](GLOSSARY.html)
    invoked, which [](GLOSSARY.html) in [](GLOSSARY.html) turn [](GLOSSARY.html) will
    [](GLOSSARY.html) issue [](GLOSSARY.html) a [](GLOSSARY.html) call [](GLOSSARY.html)
    to [](GLOSSARY.html) the Controller `changeRpm()` method, after [](GLOSSARY.html)
    transformation [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) parameter
  id: totrans-725
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 `Slider`，接口是相同的，但内部实现不同。同样，`setRpmValue` 允许 `Controller` 改变 `View` 的内容。然而，在这种情况下，将对数据进行适当的转换以处理
    `Slider` 行为的特定情况，其范围从 0 到 10。类似地，当用户与 `Slider` 交互时，方法 `_valueChanged` 将被调用，然后将调用
    `Controller` 的 `changeRpm()` 方法，参数经过转换。
- en: '[PRE58]'
  id: totrans-726
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: The [](GLOSSARY.html) Controller [](GLOSSARY.html) class [](GLOSSARY.html) handles
    [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) and [](GLOSSARY.html)
    the [](GLOSSARY.html) two [](GLOSSARY.html) Views [](GLOSSARY.html) accordingly.
    It registers [](GLOSSARY.html) for [](GLOSSARY.html) notifications [](GLOSSARY.html)
    on [](GLOSSARY.html) the [](GLOSSARY.html) Model, and [](GLOSSARY.html) it [](GLOSSARY.html)
    receives [](GLOSSARY.html) notification [](GLOSSARY.html) from [](GLOSSARY.html)
    the Views [](GLOSSARY.html) on [](GLOSSARY.html) its `changeRpm()` method, where
    [](GLOSSARY.html) it [](GLOSSARY.html) modifies [](GLOSSARY.html) the [](GLOSSARY.html)
    contents [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) Model. When
    [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) communicates [](GLOSSARY.html)
    a [](GLOSSARY.html) change, it [](GLOSSARY.html) pushes [](GLOSSARY.html) the
    [](GLOSSARY.html) new [](GLOSSARY.html) value [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) Views
  id: totrans-727
  prefs: []
  type: TYPE_NORMAL
  zh: '`Controller` 类负责处理 `Model` 和两个 `Views`。它会在 `Model` 上注册通知，并从 `Views` 接收关于其 `changeRpm()`
    方法的通知，在那里它修改 `Model` 的内容。当 `Model` 通知发生变化时，它会将新值推送给 `Views`。'
- en: '[PRE59]'
  id: totrans-728
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'Practical Example 2: With generic Views'
  id: totrans-729
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际示例2：使用通用 Views
- en: In [](GLOSSARY.html) the [](GLOSSARY.html) previous [](GLOSSARY.html) example,
    removing [](GLOSSARY.html) the [](GLOSSARY.html) dependency [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) Views [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) Model [](GLOSSARY.html) did [](GLOSSARY.html) not [](GLOSSARY.html)
    allow [](GLOSSARY.html) us [](GLOSSARY.html) to [](GLOSSARY.html) use [](GLOSSARY.html)
    generic [](GLOSSARY.html) Views. In [](GLOSSARY.html) this [](GLOSSARY.html) example
    [](GLOSSARY.html) we [](GLOSSARY.html) will [](GLOSSARY.html) move [](GLOSSARY.html)
    the [](GLOSSARY.html) value [](GLOSSARY.html) translation [](GLOSSARY.html) logic
    from [](GLOSSARY.html) the [](GLOSSARY.html) Views [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) Controller, thus [](GLOSSARY.html) removing [](GLOSSARY.html)
    the [](GLOSSARY.html) need [](GLOSSARY.html) for [](GLOSSARY.html) subclassing
    [](GLOSSARY.html) the [](GLOSSARY.html) Views, an [](GLOSSARY.html) important
    [](GLOSSARY.html) advantage [](GLOSSARY.html) of [](GLOSSARY.html) MVA.
  id: totrans-730
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的示例中，移除 Views 对 Model 的依赖并不允许我们使用通用 Views。在这个示例中，我们将值转换逻辑从 Views 移动到 Controller，从而消除了对
    Views 子类化的需要，这是 MVA 的一个重要优势。
- en: '[PRE60]'
  id: totrans-731
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'Practical Example 3: With forwarding of Model events'
  id: totrans-732
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 实际示例3：转发 Model 事件
- en: If [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) emits [](GLOSSARY.html)
    qualified [](GLOSSARY.html) events, the [](GLOSSARY.html) Controller [](GLOSSARY.html)
    could [](GLOSSARY.html) simply [](GLOSSARY.html) forward [](GLOSSARY.html) them
    to [](GLOSSARY.html) the [](GLOSSARY.html) View.
  id: totrans-733
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 Model 发出合格的事件，Controller 可以简单地将它们转发给 View。
- en: Model GUI Mediator
  id: totrans-734
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Model GUI 中介器
- en: Model-GUI-Mediator
  id: totrans-735
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Model-GUI-Mediator
- en: One [](GLOSSARY.html) problem [](GLOSSARY.html) with [](GLOSSARY.html) Model-View-Adapter
    [](GLOSSARY.html) is [](GLOSSARY.html) that [](GLOSSARY.html) it [](GLOSSARY.html)
    assumes [](GLOSSARY.html) Views [](GLOSSARY.html) are [](GLOSSARY.html) derived
    classes, each [](GLOSSARY.html) implementing [](GLOSSARY.html) specific [](GLOSSARY.html)
    behavior.
  id: totrans-736
  prefs: []
  type: TYPE_NORMAL
  zh: 一个问题是 Model-View-Adapter 假设 Views 是派生类，每个实现特定行为。
- en: 'In [](GLOSSARY.html) the [](GLOSSARY.html) previous [](GLOSSARY.html) example,
    each View [](GLOSSARY.html) performed [](GLOSSARY.html) a [](GLOSSARY.html) specific
    [](GLOSSARY.html) transformation [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    data [](GLOSSARY.html) before [](GLOSSARY.html) displaying: the Dial [](GLOSSARY.html)
    left [](GLOSSARY.html) it [](GLOSSARY.html) as [](GLOSSARY.html) is, while [](GLOSSARY.html)
    the [](GLOSSARY.html) Slider [](GLOSSARY.html) divided [](GLOSSARY.html) it [](GLOSSARY.html)
    by [](GLOSSARY.html) 1000\.'
  id: totrans-737
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的示例中，每个 View 在显示数据之前执行特定的转换：Dial 将其保持不变，而 Slider 将其除以 1000。
- en: 'In [](GLOSSARY.html) the [](GLOSSARY.html) Model-GUI-Mediator, the [](GLOSSARY.html)
    desire [](GLOSSARY.html) is [](GLOSSARY.html) not [](GLOSSARY.html) to [](GLOSSARY.html)
    subclass [](GLOSSARY.html) the [](GLOSSARY.html) toolkit''s [](GLOSSARY.html)
    widgets, because [](GLOSSARY.html) it [](GLOSSARY.html) generally [](GLOSSARY.html)
    leads [](GLOSSARY.html) to [](GLOSSARY.html) proliferation [](GLOSSARY.html) of
    [](GLOSSARY.html) View [](GLOSSARY.html) classes. Instead, widgets are [](GLOSSARY.html)
    used [](GLOSSARY.html) as [](GLOSSARY.html) they [](GLOSSARY.html) are, off-the-shelf
    [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) toolkit. The [](GLOSSARY.html)
    obvious [](GLOSSARY.html) consequence is [](GLOSSARY.html) that [](GLOSSARY.html)
    logic [](GLOSSARY.html) that [](GLOSSARY.html) is [](GLOSSARY.html) pertinent
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) conversion [](GLOSSARY.html)
    of [](GLOSSARY.html) data [](GLOSSARY.html) for [](GLOSSARY.html) visualization
    must [](GLOSSARY.html) go [](GLOSSARY.html) somewhere [](GLOSSARY.html) else.
    The [](GLOSSARY.html) Controller [](GLOSSARY.html) seems [](GLOSSARY.html) the
    [](GLOSSARY.html) obvious [](GLOSSARY.html) choice, however keeping [](GLOSSARY.html)
    the [](GLOSSARY.html) same [](GLOSSARY.html) design [](GLOSSARY.html) as [](GLOSSARY.html)
    in [](GLOSSARY.html) MVA [](GLOSSARY.html) would [](GLOSSARY.html) be [](GLOSSARY.html)
    cumbersome: the [](GLOSSARY.html) single [](GLOSSARY.html) Controller would [](GLOSSARY.html)
    have [](GLOSSARY.html) to [](GLOSSARY.html) differentiate [](GLOSSARY.html) the
    [](GLOSSARY.html) Views, and [](GLOSSARY.html) submit [](GLOSSARY.html) properly
    [](GLOSSARY.html) transformed [](GLOSSARY.html) data [](GLOSSARY.html) to each
    [](GLOSSARY.html) View. A [](GLOSSARY.html) better [](GLOSSARY.html) solution
    [](GLOSSARY.html) is [](GLOSSARY.html) to [](GLOSSARY.html) have [](GLOSSARY.html)
    different [](GLOSSARY.html) Controllers, one [](GLOSSARY.html) per [](GLOSSARY.html)
    each View, doing [](GLOSSARY.html) the [](GLOSSARY.html) relevant [](GLOSSARY.html)
    transformation. The [](GLOSSARY.html) code [](GLOSSARY.html) would [](GLOSSARY.html)
    therefore [](GLOSSARY.html) be [](GLOSSARY.html) like [](GLOSSARY.html) the following:
    The [](GLOSSARY.html) View [](GLOSSARY.html) being [](GLOSSARY.html) an [](GLOSSARY.html)
    off-the-shelf [](GLOSSARY.html) component [](GLOSSARY.html) means [](GLOSSARY.html)
    it [](GLOSSARY.html) does [](GLOSSARY.html) not [](GLOSSARY.html) know anything
    [](GLOSSARY.html) about [](GLOSSARY.html) the [](GLOSSARY.html) Controller. All
    [](GLOSSARY.html) the [](GLOSSARY.html) signal [](GLOSSARY.html) setup [](GLOSSARY.html)
    is [](GLOSSARY.html) done [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html)
    individual Controllers. Also, off-the-shelf [](GLOSSARY.html) classes [](GLOSSARY.html)
    are [](GLOSSARY.html) not [](GLOSSARY.html) implementing [](GLOSSARY.html) the
    [](GLOSSARY.html) Observer pattern'
  id: totrans-738
  prefs: []
  type: TYPE_NORMAL
  zh: 在[](GLOSSARY.html) Model-GUI-Mediator中，[](GLOSSARY.html)的愿望是不要对工具包的小部件进行子类化，因为这通常会导致View类的增多。相反，小部件应该按原样使用，直接从工具包中获取。明显的结果是与数据转换相关的逻辑必须放在其他地方进行可视化。控制器似乎是一个明显的选择，然而保持与MVA中相同的设计将会很麻烦：单个控制器必须区分视图，并向每个视图提交适当转换的数据。更好的解决方案是有不同的控制器，每个视图一个，进行相关的转换。因此，代码将如下所示：视图作为现成的组件意味着它对控制器一无所知。所有信号设置都由各个控制器完成。此外，现成的类不实现观察者模式。
- en: '[PRE61]'
  id: totrans-739
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: And [](GLOSSARY.html) for [](GLOSSARY.html) the [](GLOSSARY.html) Slider [](GLOSSARY.html)
    it [](GLOSSARY.html) would [](GLOSSARY.html) be
  id: totrans-740
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 [](GLOSSARY.html) 滑块 [](GLOSSARY.html) 将会 [](GLOSSARY.html) 是
- en: '[PRE62]'
  id: totrans-741
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: The [](GLOSSARY.html) setup [](GLOSSARY.html) now [](GLOSSARY.html) can [](GLOSSARY.html)
    simply [](GLOSSARY.html) make [](GLOSSARY.html) use [](GLOSSARY.html) of [](GLOSSARY.html)
    off-the-shelf [](GLOSSARY.html) QDial [](GLOSSARY.html) and [](GLOSSARY.html)
    QSlider [](GLOSSARY.html) instances
  id: totrans-742
  prefs: []
  type: TYPE_NORMAL
  zh: 现在 [](GLOSSARY.html) 设置 [](GLOSSARY.html) 可以 [](GLOSSARY.html) 简单地 [](GLOSSARY.html)
    使用 [](GLOSSARY.html) 现成的 [](GLOSSARY.html) QDial [](GLOSSARY.html) 和 [](GLOSSARY.html)
    QSlider [](GLOSSARY.html) 实例
- en: '[PRE63]'
  id: totrans-743
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: The [](GLOSSARY.html) Model-GUI-Mediator [](GLOSSARY.html) approach [](GLOSSARY.html)
    basically [](GLOSSARY.html) has [](GLOSSARY.html) the [](GLOSSARY.html) Controller
    [](GLOSSARY.html) adapt [](GLOSSARY.html) the off-the-shelf [](GLOSSARY.html)
    widget [](GLOSSARY.html) to [](GLOSSARY.html) be [](GLOSSARY.html) aware [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) Model. This [](GLOSSARY.html) requires
    [](GLOSSARY.html) no [](GLOSSARY.html) subclassing. In a [](GLOSSARY.html) sense,
    Model-GUI-Mediator [](GLOSSARY.html) is [](GLOSSARY.html) similar [](GLOSSARY.html)
    to [](GLOSSARY.html) Document-View, but [](GLOSSARY.html) it [](GLOSSARY.html)
    reorganizes competences [](GLOSSARY.html) in [](GLOSSARY.html) a [](GLOSSARY.html)
    different [](GLOSSARY.html) way [](GLOSSARY.html) and [](GLOSSARY.html) splits
    [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html) into [](GLOSSARY.html)
    off-the-shelf functionality [](GLOSSARY.html) and [](GLOSSARY.html) application-contextual
    [](GLOSSARY.html) functionality.
  id: totrans-744
  prefs: []
  type: TYPE_NORMAL
  zh: '[](GLOSSARY.html) 模型-GUI-中介者 [](GLOSSARY.html) 方法 [](GLOSSARY.html) 基本上 [](GLOSSARY.html)
    使 [](GLOSSARY.html) 控制器 [](GLOSSARY.html) 适应 [](GLOSSARY.html) 现成的 [](GLOSSARY.html)
    小部件 [](GLOSSARY.html) 以便 [](GLOSSARY.html) 意识到 [](GLOSSARY.html) 模型。这 [](GLOSSARY.html)
    不需要 [](GLOSSARY.html) 子类化。在 [](GLOSSARY.html) 某种意义上，模型-GUI-中介者 [](GLOSSARY.html)
    类似于 [](GLOSSARY.html) 文档-视图，但 [](GLOSSARY.html) 它 [](GLOSSARY.html) 以 [](GLOSSARY.html)
    不同的方式 [](GLOSSARY.html) 重新组织了能力，并 [](GLOSSARY.html) 将 [](GLOSSARY.html) 视图 [](GLOSSARY.html)
    分为 [](GLOSSARY.html) 现成的功能 [](GLOSSARY.html) 和 [](GLOSSARY.html) 应用上下文功能。'
- en: Application Controller
  id: totrans-745
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 应用控制器
- en: Application Controller
  id: totrans-746
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 应用控制器
- en: Push vs. Pull
  id: totrans-747
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 推送 vs. 拉取
- en: Push vs. pull
  id: totrans-748
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 推送 vs. 拉取
- en: Defining “push-vs-pull” within [](GLOSSARY.html) the [](GLOSSARY.html) realm
    [](GLOSSARY.html) of [](GLOSSARY.html) MVC [](GLOSSARY.html) can [](GLOSSARY.html)
    lead [](GLOSSARY.html) to [](GLOSSARY.html) confusion, because [](GLOSSARY.html)
    it [](GLOSSARY.html) is [](GLOSSARY.html) an [](GLOSSARY.html) overloaded [](GLOSSARY.html)
    term. We [](GLOSSARY.html) will [](GLOSSARY.html) talk [](GLOSSARY.html) here
    [](GLOSSARY.html) about [](GLOSSARY.html) the We [](GLOSSARY.html) will [](GLOSSARY.html)
    discuss [](GLOSSARY.html) of [](GLOSSARY.html) the “Push-pull” model [](GLOSSARY.html)
    for [](GLOSSARY.html) MVC [](GLOSSARY.html) also [](GLOSSARY.html) in [](GLOSSARY.html)
    the [](GLOSSARY.html) context [](GLOSSARY.html) of [](GLOSSARY.html) web [](GLOSSARY.html)
    frameworks.
  id: totrans-749
  prefs: []
  type: TYPE_NORMAL
  zh: 在 [](GLOSSARY.html) MVC [](GLOSSARY.html) 领域内 [](GLOSSARY.html) 定义 “推-vs-拉”
    可能会 [](GLOSSARY.html) 导致 [](GLOSSARY.html) 混淆，因为 [](GLOSSARY.html) 它 [](GLOSSARY.html)
    是 [](GLOSSARY.html) 一个 [](GLOSSARY.html) 过载的 [](GLOSSARY.html) 术语。我们 [](GLOSSARY.html)
    将 [](GLOSSARY.html) 在这里 [](GLOSSARY.html) 讨论 [](GLOSSARY.html) 关于 [](GLOSSARY.html)
    我们 [](GLOSSARY.html) 将 [](GLOSSARY.html) 讨论 [](GLOSSARY.html) MVC [](GLOSSARY.html)
    的 “推-拉” 模型 [](GLOSSARY.html) 也 [](GLOSSARY.html) 在 [](GLOSSARY.html) web [](GLOSSARY.html)
    框架的 [](GLOSSARY.html) 上下文中。
- en: This [](GLOSSARY.html) is [](GLOSSARY.html) known [](GLOSSARY.html) as [](GLOSSARY.html)
    the “pull” model. The [](GLOSSARY.html) view [](GLOSSARY.html) is [](GLOSSARY.html)
    informed [](GLOSSARY.html) of [](GLOSSARY.html) its [](GLOSSARY.html) outdated
    [](GLOSSARY.html) state, and [](GLOSSARY.html) pulls [](GLOSSARY.html) information
    [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) model. The [](GLOSSARY.html)
    alternative [](GLOSSARY.html) is [](GLOSSARY.html) the “push” model, where [](GLOSSARY.html)
    the [](GLOSSARY.html) model [](GLOSSARY.html) notifies [](GLOSSARY.html) the [](GLOSSARY.html)
    view [](GLOSSARY.html) and [](GLOSSARY.html) passes [](GLOSSARY.html) its [](GLOSSARY.html)
    new [](GLOSSARY.html) state [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    view.
  id: totrans-750
  prefs: []
  type: TYPE_NORMAL
  zh: 这被称为“拉取”模型。视图被告知其过时的状态，并从模型中拉取信息。另一种选择是“推送”模型，其中模型通知视图并将其新状态传递给视图。
- en: 'Push [](GLOSSARY.html) model: the [](GLOSSARY.html) view [](GLOSSARY.html)
    register [](GLOSSARY.html) with [](GLOSSARY.html) the [](GLOSSARY.html) model
    [](GLOSSARY.html) and [](GLOSSARY.html) receives [](GLOSSARY.html) notification
    [](GLOSSARY.html) of [](GLOSSARY.html) changes. Pull [](GLOSSARY.html) model:
    the [](GLOSSARY.html) view [](GLOSSARY.html) fetches [](GLOSSARY.html) the [](GLOSSARY.html)
    new [](GLOSSARY.html) state [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html)
    model.'
  id: totrans-751
  prefs: []
  type: TYPE_NORMAL
  zh: 推送模型：视图向模型注册并接收更改通知。拉取模型：视图从模型中获取新状态。
- en: 'Note: unclear. Also [](GLOSSARY.html) possible [](GLOSSARY.html) mixup [](GLOSSARY.html)
    between [](GLOSSARY.html) overloaded [](GLOSSARY.html) meaning [](GLOSSARY.html)
    in [](GLOSSARY.html) GUI [](GLOSSARY.html) MVC [](GLOSSARY.html) and [](GLOSSARY.html)
    Web [](GLOSSARY.html) MVC.'
  id: totrans-752
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：不清楚。在 GUI MVC 和 Web MVC 之间可能存在混淆。
- en: Reenskaug MVC
  id: totrans-753
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Reenskaug MVC
- en: Reenskaug MVC
  id: totrans-754
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Reenskaug MVC
- en: Motivation
  id: totrans-755
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: Trygve [](GLOSSARY.html) Reenskaug [](GLOSSARY.html) formulated [](GLOSSARY.html)
    MVC [](GLOSSARY.html) first [](GLOSSARY.html) in [](GLOSSARY.html) 1979\. His
    [](GLOSSARY.html) original [](GLOSSARY.html) approach [](GLOSSARY.html) is different
    [](GLOSSARY.html) from [](GLOSSARY.html) modern [](GLOSSARY.html) forms [](GLOSSARY.html)
    of [](GLOSSARY.html) MVC, and [](GLOSSARY.html) for [](GLOSSARY.html) all [](GLOSSARY.html)
    purposes [](GLOSSARY.html) obsolete. It [](GLOSSARY.html) is presented [](GLOSSARY.html)
    here [](GLOSSARY.html) to [](GLOSSARY.html) explain [](GLOSSARY.html) the [](GLOSSARY.html)
    historical [](GLOSSARY.html) formulation [](GLOSSARY.html) of [](GLOSSARY.html)
    MVC [](GLOSSARY.html) and [](GLOSSARY.html) its motivations.
  id: totrans-756
  prefs: []
  type: TYPE_NORMAL
  zh: Trygve Reenskaug 在 1979 年首次制定了 MVC。他的原始方法与现代形式的 MVC 不同，基本上已经过时。这里介绍它是为了解释 MVC
    的历史制定和动机。
- en: Design
  id: totrans-757
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设计
- en: 'The [](GLOSSARY.html) best [](GLOSSARY.html) way [](GLOSSARY.html) to [](GLOSSARY.html)
    present [](GLOSSARY.html) Reenskaug [](GLOSSARY.html) MVC [](GLOSSARY.html) is
    [](GLOSSARY.html) to [](GLOSSARY.html) compare [](GLOSSARY.html) it [](GLOSSARY.html)
    against [](GLOSSARY.html) a Traditional [](GLOSSARY.html) MVC [](GLOSSARY.html)
    design. Like [](GLOSSARY.html) in [](GLOSSARY.html) Traditional [](GLOSSARY.html)
    MVC, Reenskaug [](GLOSSARY.html) MVC [](GLOSSARY.html) has:'
  id: totrans-758
  prefs: []
  type: TYPE_NORMAL
  zh: 最佳展示 Reenskaug MVC 的方式是将其与传统 MVC 设计进行比较。就像在传统 MVC 中一样，Reenskaug MVC 具有：
- en: A [](GLOSSARY.html) Model [](GLOSSARY.html) representing [](GLOSSARY.html) knowledge
    [](GLOSSARY.html) about [](GLOSSARY.html) our [](GLOSSARY.html) data.
  id: totrans-759
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 表示有关我们数据的知识的模型。
- en: The [](GLOSSARY.html) View [](GLOSSARY.html) visually [](GLOSSARY.html) represents
    [](GLOSSARY.html) the [](GLOSSARY.html) Model, obtaining [](GLOSSARY.html) information
    [](GLOSSARY.html) by [](GLOSSARY.html) invoking its [](GLOSSARY.html) methods.
  id: totrans-760
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 视图通过调用其方法来直观地表示模型并获取信息。
- en: The [](GLOSSARY.html) Controller [](GLOSSARY.html) has [](GLOSSARY.html) UI
    [](GLOSSARY.html) event [](GLOSSARY.html) handling [](GLOSSARY.html) duties, but
    [](GLOSSARY.html) for [](GLOSSARY.html) different [](GLOSSARY.html) reasons.
  id: totrans-761
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 控制器负责处理 UI 事件，但出于不同的原因。
- en: 'Crucial [](GLOSSARY.html) differences [](GLOSSARY.html) exist [](GLOSSARY.html)
    in [](GLOSSARY.html) the [](GLOSSARY.html) Controller, the [](GLOSSARY.html) View,
    and [](GLOSSARY.html) in [](GLOSSARY.html) a [](GLOSSARY.html) specialized object
    [](GLOSSARY.html) absent [](GLOSSARY.html) from [](GLOSSARY.html) Traditional
    [](GLOSSARY.html) MVC, the [](GLOSSARY.html) Editor:'
  id: totrans-762
  prefs: []
  type: TYPE_NORMAL
  zh: 在控制器、视图和一个传统 MVC 中缺少的专门对象编辑器之间存在关键差异：
- en: Reenskaug [](GLOSSARY.html) Controller [](GLOSSARY.html) handles [](GLOSSARY.html)
    UI [](GLOSSARY.html) visual [](GLOSSARY.html) layouting [](GLOSSARY.html) and
    [](GLOSSARY.html) UI [](GLOSSARY.html) primary [](GLOSSARY.html) events, converting
    [](GLOSSARY.html) these [](GLOSSARY.html) events [](GLOSSARY.html) into [](GLOSSARY.html)
    operations [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) View.
    In [](GLOSSARY.html) Traditional [](GLOSSARY.html) MVC, this [](GLOSSARY.html)
    is [](GLOSSARY.html) done [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html)
    View.
  id: totrans-763
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Reenskaug [控制器](GLOSSARY.html) 处理 UI 可视布局和 UI 主要事件，将这些事件转换为对视图的操作。在传统 MVC 中，这是由视图完成的。
- en: Reenskaug [](GLOSSARY.html) View [](GLOSSARY.html) directly [](GLOSSARY.html)
    modifies [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) through
    [](GLOSSARY.html) Model [](GLOSSARY.html) methods [](GLOSSARY.html) calls. It
    [](GLOSSARY.html) does [](GLOSSARY.html) so [](GLOSSARY.html) with [](GLOSSARY.html)
    the [](GLOSSARY.html) assistance [](GLOSSARY.html) of [](GLOSSARY.html) an [](GLOSSARY.html)
    Editor. In [](GLOSSARY.html) Traditional [](GLOSSARY.html) MVC, this is [](GLOSSARY.html)
    done [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html) Controller.
  id: totrans-764
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Reenskaug 视图通过调用模型方法直接修改模型。它在编辑器的帮助下这样做。在传统 MVC 中，这是由控制器完成的。
- en: 'This [](GLOSSARY.html) design [](GLOSSARY.html) is [](GLOSSARY.html) a [](GLOSSARY.html)
    consequence [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) technical
    [](GLOSSARY.html) environment [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    time: Views'' widgets were [](GLOSSARY.html) simple [](GLOSSARY.html) renderings
    [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) screen, with [](GLOSSARY.html)
    no [](GLOSSARY.html) functionality [](GLOSSARY.html) to [](GLOSSARY.html) receive
    [](GLOSSARY.html) and process [](GLOSSARY.html) events [](GLOSSARY.html) from
    [](GLOSSARY.html) input [](GLOSSARY.html) devices. This [](GLOSSARY.html) task
    [](GLOSSARY.html) was [](GLOSSARY.html) assigned [](GLOSSARY.html) to [](GLOSSARY.html)
    Controllers. At [](GLOSSARY.html) any [](GLOSSARY.html) given [](GLOSSARY.html)
    time, only [](GLOSSARY.html) one [](GLOSSARY.html) Controller [](GLOSSARY.html)
    was [](GLOSSARY.html) considered [](GLOSSARY.html) active and [](GLOSSARY.html)
    would [](GLOSSARY.html) receive [](GLOSSARY.html) UI [](GLOSSARY.html) events
    [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) event [](GLOSSARY.html)
    loop. Controllers [](GLOSSARY.html) were organized [](GLOSSARY.html) in [](GLOSSARY.html)
    a [](GLOSSARY.html) hierarchy [](GLOSSARY.html) and [](GLOSSARY.html) had [](GLOSSARY.html)
    to [](GLOSSARY.html) negotiate [](GLOSSARY.html) the [](GLOSSARY.html) active
    [](GLOSSARY.html) status [](GLOSSARY.html) among themselves [](GLOSSARY.html)
    in [](GLOSSARY.html) response [](GLOSSARY.html) to [](GLOSSARY.html) UI [](GLOSSARY.html)
    events [](GLOSSARY.html) and [](GLOSSARY.html) the [](GLOSSARY.html) expectations
    [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) User/UI interaction.
    If [](GLOSSARY.html) a [](GLOSSARY.html) Controller [](GLOSSARY.html) found [](GLOSSARY.html)
    itself [](GLOSSARY.html) not [](GLOSSARY.html) authoritative [](GLOSSARY.html)
    to [](GLOSSARY.html) handle a [](GLOSSARY.html) specific [](GLOSSARY.html) event,
    it [](GLOSSARY.html) would [](GLOSSARY.html) delegate [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) Controller [](GLOSSARY.html) above [](GLOSSARY.html) in
    [](GLOSSARY.html) the [](GLOSSARY.html) hierarchy.'
  id: totrans-765
  prefs: []
  type: TYPE_NORMAL
  zh: 这种设计是当时技术环境的结果：视图小部件只是屏幕上简单的渲染，没有功能来接收和处理来自输入设备的事件。这项任务被分配给控制器。在任何给定时间，只有一个控制器被视为活动的，并且会从事件循环中接收UI事件。控制器按层次结构组织，并且必须根据UI事件和用户/界面交互的期望来协商其活动状态。如果控制器发现自己无权处理特定事件，则会委托给层次结构中的上级控制器。
- en: With [](GLOSSARY.html) the [](GLOSSARY.html) Controller [](GLOSSARY.html) performing
    [](GLOSSARY.html) layout/event [](GLOSSARY.html) handling [](GLOSSARY.html) duties,
    the responsibility [](GLOSSARY.html) for [](GLOSSARY.html) Model [](GLOSSARY.html)
    modification [](GLOSSARY.html) was [](GLOSSARY.html) handled [](GLOSSARY.html)
    through [](GLOSSARY.html) an [](GLOSSARY.html) additional player, the [](GLOSSARY.html)
    Editor, with [](GLOSSARY.html) cross-functional [](GLOSSARY.html) demands [](GLOSSARY.html)
    and [](GLOSSARY.html) dependencies.
  id: totrans-766
  prefs: []
  type: TYPE_NORMAL
  zh: 通过[GLOSSARY.html](https://wiki.example.org/GLOSSARY.html)执行布局/事件处理职责的控制器，模型修改的责任通过另一个参与者，即编辑器，处理，具有跨功能需求和依赖关系。
- en: 'An [](GLOSSARY.html) Editor [](GLOSSARY.html) is [](GLOSSARY.html) brought
    [](GLOSSARY.html) into [](GLOSSARY.html) existence [](GLOSSARY.html) on [](GLOSSARY.html)
    demand: the [](GLOSSARY.html) Controller [](GLOSSARY.html) asks [](GLOSSARY.html)
    the View [](GLOSSARY.html) for [](GLOSSARY.html) an [](GLOSSARY.html) Editor,
    which [](GLOSSARY.html) is [](GLOSSARY.html) presented [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) User. UI [](GLOSSARY.html) events [](GLOSSARY.html) from
    [](GLOSSARY.html) the Controller [](GLOSSARY.html) are [](GLOSSARY.html) routed
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) Editor, which [](GLOSSARY.html)
    converts [](GLOSSARY.html) these [](GLOSSARY.html) events [](GLOSSARY.html) in
    method [](GLOSSARY.html) invocations [](GLOSSARY.html) onto [](GLOSSARY.html)
    the [](GLOSSARY.html) View''s [](GLOSSARY.html) API. Finally, the [](GLOSSARY.html)
    View [](GLOSSARY.html) modifies the [](GLOSSARY.html) Model.'
  id: totrans-767
  prefs: []
  type: TYPE_NORMAL
  zh: 编辑器是按需创建的：控制器向视图请求一个编辑器，然后呈现给用户。来自控制器的 UI 事件被路由到编辑器，编辑器将这些事件转换为对视图 API 的方法调用。最后，视图修改模型。
- en: Reenskaug Controller
  id: totrans-768
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Reenskaug 控制器
- en: With [](GLOSSARY.html) the [](GLOSSARY.html) introduction [](GLOSSARY.html)
    of [](GLOSSARY.html) smarter [](GLOSSARY.html) Views [](GLOSSARY.html) able [](GLOSSARY.html)
    to [](GLOSSARY.html) handle [](GLOSSARY.html) events,
  id: totrans-769
  prefs: []
  type: TYPE_NORMAL
  zh: 随着[GLOSSARY.html](https://wiki.example.org/glossary)更智能的视图的引入，能够处理事件，
- en: The [](GLOSSARY.html) third [](GLOSSARY.html) difference [](GLOSSARY.html) is
    [](GLOSSARY.html) the [](GLOSSARY.html) presence [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) Editor [](GLOSSARY.html) as [](GLOSSARY.html) a “View-extension
    [](GLOSSARY.html) helper” that [](GLOSSARY.html) the [](GLOSSARY.html) Controller
    [](GLOSSARY.html) uses [](GLOSSARY.html) in [](GLOSSARY.html) order [](GLOSSARY.html)
    to [](GLOSSARY.html) perform [](GLOSSARY.html) its [](GLOSSARY.html) task. The
    [](GLOSSARY.html) reason [](GLOSSARY.html) for [](GLOSSARY.html) this [](GLOSSARY.html)
    design [](GLOSSARY.html) is [](GLOSSARY.html) that [](GLOSSARY.html) the [](GLOSSARY.html)
    Controller [](GLOSSARY.html) must [](GLOSSARY.html) have [](GLOSSARY.html) a [](GLOSSARY.html)
    View-contextual entity [](GLOSSARY.html) to [](GLOSSARY.html) present [](GLOSSARY.html)
    to [](GLOSSARY.html) the [](GLOSSARY.html) User. For [](GLOSSARY.html) example,
    a [](GLOSSARY.html) GUI [](GLOSSARY.html) Label [](GLOSSARY.html) might [](GLOSSARY.html)
    require [](GLOSSARY.html) a TextEdit [](GLOSSARY.html) field [](GLOSSARY.html)
    as [](GLOSSARY.html) an [](GLOSSARY.html) Editor, if [](GLOSSARY.html) the [](GLOSSARY.html)
    text [](GLOSSARY.html) is “free [](GLOSSARY.html) form”, but [](GLOSSARY.html)
    a [](GLOSSARY.html) ComboBox [](GLOSSARY.html) if [](GLOSSARY.html) the label
    [](GLOSSARY.html) can [](GLOSSARY.html) only [](GLOSSARY.html) contain [](GLOSSARY.html)
    discrete [](GLOSSARY.html) values. Only [](GLOSSARY.html) the [](GLOSSARY.html)
    View [](GLOSSARY.html) part [](GLOSSARY.html) can [](GLOSSARY.html) know [](GLOSSARY.html)
    its appropriate [](GLOSSARY.html) Editor.
  id: totrans-770
  prefs: []
  type: TYPE_NORMAL
  zh: 第三个区别是编辑器作为“视图扩展助手”的存在，控制器使用它来执行任务。这种设计的原因是控制器必须有一个视图上下文实体呈现给用户。例如，GUI 标签可能需要一个文本编辑字段作为编辑器，如果文本是“自由形式”的，但如果标签只能包含离散值，则可能需要一个组合框。只有视图部分才能知道适当的编辑器。
- en: into [](GLOSSARY.html) operations [](GLOSSARY.html) on [](GLOSSARY.html) the
    [](GLOSSARY.html) View. The [](GLOSSARY.html) View [](GLOSSARY.html) is [](GLOSSARY.html)
    not [](GLOSSARY.html) supposed [](GLOSSARY.html) to [](GLOSSARY.html) know [](GLOSSARY.html)
    about [](GLOSSARY.html) primary events.
  id: totrans-771
  prefs: []
  type: TYPE_NORMAL
  zh: 转换为 [](GLOSSARY.html) View 上的操作。 [](GLOSSARY.html) View 不应该 知道 主要事件。
- en: Since [](GLOSSARY.html) then, widgets [](GLOSSARY.html) gained [](GLOSSARY.html)
    ability [](GLOSSARY.html) to [](GLOSSARY.html) handle [](GLOSSARY.html) events
    In [](GLOSSARY.html) other [](GLOSSARY.html) words, most [](GLOSSARY.html) of
    [](GLOSSARY.html) the [](GLOSSARY.html) task [](GLOSSARY.html) initially [](GLOSSARY.html)
    assigned [](GLOSSARY.html) to [](GLOSSARY.html) a [](GLOSSARY.html) Reenskaug's
    Controller [](GLOSSARY.html) are [](GLOSSARY.html) now [](GLOSSARY.html) taken
    [](GLOSSARY.html) care [](GLOSSARY.html) of [](GLOSSARY.html) by [](GLOSSARY.html)
    an [](GLOSSARY.html) underlying [](GLOSSARY.html) GUI [](GLOSSARY.html) framework.
  id: totrans-772
  prefs: []
  type: TYPE_NORMAL
  zh: 自从 [](GLOSSARY.html) 那时，部件 [](GLOSSARY.html) 获得了 处理 [](GLOSSARY.html) 事件的能力
    换句话说，最初 [](GLOSSARY.html) 分配给 [](GLOSSARY.html) Reenskaug 的控制器 的大部分任务 现在 被 底层的
    GUI 框架 处理了。
- en: Dolphin MVP
  id: totrans-773
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Dolphin MVP
- en: Dolphin Model-View-Presenter
  id: totrans-774
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Dolphin Model-View-Presenter
- en: '![](images/ModelViewPresenter/mvc_vs_mvp.png)'
  id: totrans-775
  prefs: []
  type: TYPE_IMG
  zh: '![](images/ModelViewPresenter/mvc_vs_mvp.png)'
- en: The [](GLOSSARY.html) Dolphin [](GLOSSARY.html) Model-View-Presenter (MVP) schema
    [](GLOSSARY.html) is [](GLOSSARY.html) an [](GLOSSARY.html) evolution [](GLOSSARY.html)
    of the [](GLOSSARY.html) Application [](GLOSSARY.html) Model [](GLOSSARY.html)
    approach. Although [](GLOSSARY.html) it [](GLOSSARY.html) is [](GLOSSARY.html)
    derived [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) Taligent/IBM
    strategy [](GLOSSARY.html) with [](GLOSSARY.html) the [](GLOSSARY.html) same [](GLOSSARY.html)
    name, we [](GLOSSARY.html) will [](GLOSSARY.html) examine [](GLOSSARY.html) Dolphin
    [](GLOSSARY.html) first [](GLOSSARY.html) as [](GLOSSARY.html) it [](GLOSSARY.html)
    is [](GLOSSARY.html) simpler [](GLOSSARY.html) to describe [](GLOSSARY.html) within
    [](GLOSSARY.html) the [](GLOSSARY.html) concepts [](GLOSSARY.html) we [](GLOSSARY.html)
    already [](GLOSSARY.html) introduced. The [](GLOSSARY.html) Dolphin [](GLOSSARY.html)
    strategy [](GLOSSARY.html) is also [](GLOSSARY.html) the [](GLOSSARY.html) one
    [](GLOSSARY.html) most [](GLOSSARY.html) often [](GLOSSARY.html) referred [](GLOSSARY.html)
    as "Model [](GLOSSARY.html) View [](GLOSSARY.html) Presenter" without [](GLOSSARY.html)
    additional clarification. To [](GLOSSARY.html) add [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) nomenclature, Fowler [](GLOSSARY.html) identifies [](GLOSSARY.html)
    the [](GLOSSARY.html) Presenter with [](GLOSSARY.html) the [](GLOSSARY.html) more
    [](GLOSSARY.html) appropriate "Supervising [](GLOSSARY.html) Controller".
  id: totrans-776
  prefs: []
  type: TYPE_NORMAL
  zh: '[](GLOSSARY.html) Dolphin [](GLOSSARY.html) Model-View-Presenter (MVP) 模式 [](GLOSSARY.html)
    是 [](GLOSSARY.html) 应用模型的一个 [](GLOSSARY.html) 演进。尽管 [](GLOSSARY.html) 它 [](GLOSSARY.html)
    源自 [](GLOSSARY.html) Taligent/IBM 的同名战略，我们 [](GLOSSARY.html) 首先 [](GLOSSARY.html)
    将 [](GLOSSARY.html) 从 [](GLOSSARY.html) 已经 [](GLOSSARY.html) 介绍的概念中更容易描述的角度来 [](GLOSSARY.html)
    研究 [](GLOSSARY.html) Dolphin 。 Dolphin [](GLOSSARY.html) 策略也是 [](GLOSSARY.html)
    最经常 [](GLOSSARY.html) 被称为 "Model [](GLOSSARY.html) View [](GLOSSARY.html) Presenter"
    的一种，没有 [](GLOSSARY.html) 额外的解释。 [](GLOSSARY.html) 另外，Fowler [](GLOSSARY.html)
    将 [](GLOSSARY.html) Presenter [](GLOSSARY.html) 更恰当地标识为 "Supervising [](GLOSSARY.html)
    Controller"。'
- en: 'As [](GLOSSARY.html) we [](GLOSSARY.html) introduced [](GLOSSARY.html) in [](GLOSSARY.html)
    the [](GLOSSARY.html) Application [](GLOSSARY.html) Model [](GLOSSARY.html) section,
    the [](GLOSSARY.html) main [](GLOSSARY.html) purpose [](GLOSSARY.html) of [](GLOSSARY.html)
    this Model [](GLOSSARY.html) is [](GLOSSARY.html) to [](GLOSSARY.html) hold [](GLOSSARY.html)
    visual [](GLOSSARY.html) state, acting [](GLOSSARY.html) as [](GLOSSARY.html)
    an [](GLOSSARY.html) intermediate [](GLOSSARY.html) between [](GLOSSARY.html)
    the [](GLOSSARY.html) Domain Model [](GLOSSARY.html) and [](GLOSSARY.html) the
    [](GLOSSARY.html) View/Controller [](GLOSSARY.html) pair. The [](GLOSSARY.html)
    Application [](GLOSSARY.html) Model [](GLOSSARY.html) was [](GLOSSARY.html) a
    [](GLOSSARY.html) model [](GLOSSARY.html) in [](GLOSSARY.html) every respect [](GLOSSARY.html)
    in [](GLOSSARY.html) terms [](GLOSSARY.html) of [](GLOSSARY.html) design: it [](GLOSSARY.html)
    performs [](GLOSSARY.html) notifications, remains [](GLOSSARY.html) oblivious
    [](GLOSSARY.html) of its [](GLOSSARY.html) listeners, is [](GLOSSARY.html) directly
    [](GLOSSARY.html) accessed [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html)
    View [](GLOSSARY.html) and [](GLOSSARY.html) modified [](GLOSSARY.html) by [](GLOSSARY.html)
    the [](GLOSSARY.html) Controller. Yet, due [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) strictly [](GLOSSARY.html) specific [](GLOSSARY.html) nature
    [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) visual [](GLOSSARY.html)
    state, it [](GLOSSARY.html) would [](GLOSSARY.html) be convenient [](GLOSSARY.html)
    if [](GLOSSARY.html) the [](GLOSSARY.html) Application [](GLOSSARY.html) Model
    [](GLOSSARY.html) could [](GLOSSARY.html) handle [](GLOSSARY.html) visual [](GLOSSARY.html)
    logic [](GLOSSARY.html) and [](GLOSSARY.html) refer [](GLOSSARY.html) to [](GLOSSARY.html)
    the View [](GLOSSARY.html) directly, like [](GLOSSARY.html) the [](GLOSSARY.html)
    Controller [](GLOSSARY.html) does, while [](GLOSSARY.html) still [](GLOSSARY.html)
    keeping [](GLOSSARY.html) and [](GLOSSARY.html) handling [](GLOSSARY.html) View
    state.'
  id: totrans-777
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在应用模型部分介绍的那样，这个模型的主要目的是保存视觉状态，充当领域模型和视图/控制器对之间的中间层。应用模型在设计方面在各个方面都是一个模型：它执行通知，对其监听者一无所知，被视图直接访问并由控制器修改。然而，由于视觉状态的严格特性，如果应用模型能够处理视觉逻辑并直接引用视图，就会很方便，就像控制器所做的那样，同时仍然保持和处理视图状态。
- en: 'Let''s [](GLOSSARY.html) analyze [](GLOSSARY.html) the [](GLOSSARY.html) Controller:
    with [](GLOSSARY.html) widgets [](GLOSSARY.html) of [](GLOSSARY.html) modern [](GLOSSARY.html)
    GUI [](GLOSSARY.html) toolkits [](GLOSSARY.html) handling low-level [](GLOSSARY.html)
    events (e.g. physical [](GLOSSARY.html) keyboard [](GLOSSARY.html) presses), the
    [](GLOSSARY.html) controller [](GLOSSARY.html) has [](GLOSSARY.html) only [](GLOSSARY.html)
    the duty [](GLOSSARY.html) of [](GLOSSARY.html) modifying [](GLOSSARY.html) the
    [](GLOSSARY.html) models [](GLOSSARY.html) according [](GLOSSARY.html) to [](GLOSSARY.html)
    higher [](GLOSSARY.html) level [](GLOSSARY.html) events (e.g. textlabel content
    [](GLOSSARY.html) modified). These [](GLOSSARY.html) events [](GLOSSARY.html)
    are [](GLOSSARY.html) then [](GLOSSARY.html) transformed [](GLOSSARY.html) by
    [](GLOSSARY.html) Controller [](GLOSSARY.html) logic [](GLOSSARY.html) in actual
    [](GLOSSARY.html) Model [](GLOSSARY.html) changes, some [](GLOSSARY.html) of [](GLOSSARY.html)
    which [](GLOSSARY.html) may [](GLOSSARY.html) have [](GLOSSARY.html) an [](GLOSSARY.html)
    impact [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) visual [](GLOSSARY.html)
    state, which [](GLOSSARY.html) is [](GLOSSARY.html) stored [](GLOSSARY.html) in
    [](GLOSSARY.html) the [](GLOSSARY.html) Application [](GLOSSARY.html) Model. It
    [](GLOSSARY.html) seems [](GLOSSARY.html) like [](GLOSSARY.html) a [](GLOSSARY.html)
    good [](GLOSSARY.html) idea [](GLOSSARY.html) to [](GLOSSARY.html) have [](GLOSSARY.html)
    an Application [](GLOSSARY.html) Model [](GLOSSARY.html) containing [](GLOSSARY.html)
    this [](GLOSSARY.html) visual [](GLOSSARY.html) state [](GLOSSARY.html) if [](GLOSSARY.html)
    the [](GLOSSARY.html) assumption [](GLOSSARY.html) is [](GLOSSARY.html) that [](GLOSSARY.html)
    this state (e.g. a [](GLOSSARY.html) field [](GLOSSARY.html) being [](GLOSSARY.html)
    red) is [](GLOSSARY.html) shared [](GLOSSARY.html) among [](GLOSSARY.html) Views.
    Once [](GLOSSARY.html) again, this [](GLOSSARY.html) state is [](GLOSSARY.html)
    almost [](GLOSSARY.html) never [](GLOSSARY.html) shared [](GLOSSARY.html) and
    [](GLOSSARY.html) mostly [](GLOSSARY.html) tied [](GLOSSARY.html) to [](GLOSSARY.html)
    a [](GLOSSARY.html) specific [](GLOSSARY.html) View.'
  id: totrans-778
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来分析控制器：使用现代 GUI 工具包的小部件处理低级事件（例如物理键盘按键），控制器只负责根据更高级事件（例如文本标签内容修改）修改模型。这些事件然后由控制器逻辑转换为实际模型更改，其中一些可能会对视觉状态产生影响，这些状态存储在应用程序模型中。如果假设这种状态（例如字段变为红色）在视图之间共享，那么拥有包含这种视觉状态的应用程序模型似乎是一个好主意。再次强调，这种状态几乎从不共享，大多数情况下与特定视图相关联。
- en: Summing [](GLOSSARY.html) up, the [](GLOSSARY.html) roundabout [](GLOSSARY.html)
    mechanism [](GLOSSARY.html) the [](GLOSSARY.html) Controller [](GLOSSARY.html)
    uses [](GLOSSARY.html) to [](GLOSSARY.html) take [](GLOSSARY.html) care of [](GLOSSARY.html)
    purely [](GLOSSARY.html) visual [](GLOSSARY.html) state [](GLOSSARY.html) would
    [](GLOSSARY.html) be [](GLOSSARY.html) considerably [](GLOSSARY.html) simplified
    [](GLOSSARY.html) if [](GLOSSARY.html) we [](GLOSSARY.html) define a [](GLOSSARY.html)
    new [](GLOSSARY.html) role, the **Presenter**, which [](GLOSSARY.html) combines
    [](GLOSSARY.html) the [](GLOSSARY.html) Application [](GLOSSARY.html) Model [](GLOSSARY.html)
    and [](GLOSSARY.html) the Controller [](GLOSSARY.html) in [](GLOSSARY.html) a
    [](GLOSSARY.html) single [](GLOSSARY.html) entity.
  id: totrans-779
  prefs: []
  type: TYPE_NORMAL
  zh: 总结一下，[](GLOSSARY.html) 控制器使用的迂回机制来处理纯粹的视觉状态，如果我们定义一个新的角色，**Presenter**，将[](GLOSSARY.html)
    应用程序模型和[](GLOSSARY.html) 控制器合并为一个单一实体，将会大大简化。
- en: 'Like [](GLOSSARY.html) the [](GLOSSARY.html) Application [](GLOSSARY.html)
    Model, the [](GLOSSARY.html) Presenter:'
  id: totrans-780
  prefs: []
  type: TYPE_NORMAL
  zh: 像[](GLOSSARY.html) 应用程序[](GLOSSARY.html) 模型一样，[](GLOSSARY.html) Presenter：
- en: holds [](GLOSSARY.html) visual [](GLOSSARY.html) state, and [](GLOSSARY.html)
    keeps [](GLOSSARY.html) it [](GLOSSARY.html) synchronized [](GLOSSARY.html) against
    [](GLOSSARY.html) changes [](GLOSSARY.html) in [](GLOSSARY.html) the Domain [](GLOSSARY.html)
    Model
  id: totrans-781
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 保持视觉状态，并使其与领域模型的变化同步
- en: converts [](GLOSSARY.html) business [](GLOSSARY.html) rules (e.g. engine [](GLOSSARY.html)
    rpm [](GLOSSARY.html) number [](GLOSSARY.html) too [](GLOSSARY.html) high) into
    [](GLOSSARY.html) visual [](GLOSSARY.html) representation (e.g. label [](GLOSSARY.html)
    becomes [](GLOSSARY.html) red)
  id: totrans-782
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将业务规则（例如，发动机转速过高）转换为视觉表示（例如，标签变为红色）
- en: eventually [](GLOSSARY.html) handles [](GLOSSARY.html) state [](GLOSSARY.html)
    for [](GLOSSARY.html) selection, and [](GLOSSARY.html) application [](GLOSSARY.html)
    of [](GLOSSARY.html) actions to [](GLOSSARY.html) the [](GLOSSARY.html) subset
    [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html)
    specified [](GLOSSARY.html) by [](GLOSSARY.html) this [](GLOSSARY.html) selection.
  id: totrans-783
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最终处理了[](GLOSSARY.html) 选择的状态，并将操作应用于由此选择指定的[](GLOSSARY.html) 模型的子集。
- en: 'and [](GLOSSARY.html) like [](GLOSSARY.html) the [](GLOSSARY.html) Controller,
    the [](GLOSSARY.html) Presenter:'
  id: totrans-784
  prefs: []
  type: TYPE_NORMAL
  zh: 而且像[](GLOSSARY.html) 控制器一样，[](GLOSSARY.html) Presenter：
- en: it [](GLOSSARY.html) is [](GLOSSARY.html) tightly [](GLOSSARY.html) coupled
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) View
  id: totrans-785
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与[](GLOSSARY.html) 视图[](GLOSSARY.html) 紧密耦合
- en: refers [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html)
    directly, and [](GLOSSARY.html) can [](GLOSSARY.html) act [](GLOSSARY.html) on
    [](GLOSSARY.html) it [](GLOSSARY.html) to [](GLOSSARY.html) alter [](GLOSSARY.html)
    its visual [](GLOSSARY.html) aspect.
  id: totrans-786
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 直接引用视图，并可以对其进行操作以改变其视觉方面。
- en: handles [](GLOSSARY.html) events [](GLOSSARY.html) forwarded [](GLOSSARY.html)
    by [](GLOSSARY.html) the [](GLOSSARY.html) View, converting [](GLOSSARY.html)
    them [](GLOSSARY.html) into [](GLOSSARY.html) action [](GLOSSARY.html) through
    [](GLOSSARY.html) proper [](GLOSSARY.html) logic.
  id: totrans-787
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 处理由视图转发的事件，通过适当的逻辑将其转换为操作。
- en: modifies [](GLOSSARY.html) the [](GLOSSARY.html) Domain [](GLOSSARY.html) Model,
    which [](GLOSSARY.html) contains [](GLOSSARY.html) no [](GLOSSARY.html) visual
    [](GLOSSARY.html) state
  id: totrans-788
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修改不包含视觉状态的领域模型
- en: handles [](GLOSSARY.html) View [](GLOSSARY.html) logic [](GLOSSARY.html) according
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html)
    state [](GLOSSARY.html) it [](GLOSSARY.html) contains
  id: totrans-789
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 处理[](GLOSSARY.html)根据其包含的View状态的逻辑
- en: The [](GLOSSARY.html) Domain [](GLOSSARY.html) Model [](GLOSSARY.html) is [](GLOSSARY.html)
    a [](GLOSSARY.html) strict [](GLOSSARY.html) domain [](GLOSSARY.html) model [](GLOSSARY.html)
    and [](GLOSSARY.html) is [](GLOSSARY.html) unchanged, and [](GLOSSARY.html) is
    [](GLOSSARY.html) still [](GLOSSARY.html) accessed [](GLOSSARY.html) by [](GLOSSARY.html)
    the [](GLOSSARY.html) View [](GLOSSARY.html) for [](GLOSSARY.html) data extraction
    [](GLOSSARY.html) and [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html)
    Presenter [](GLOSSARY.html) for [](GLOSSARY.html) data [](GLOSSARY.html) modification.
    The [](GLOSSARY.html) View is [](GLOSSARY.html) an [](GLOSSARY.html) aggregation
    [](GLOSSARY.html) of [](GLOSSARY.html) widget, fetches [](GLOSSARY.html) data
    [](GLOSSARY.html) directly [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html)
    Domain [](GLOSSARY.html) Model, instead [](GLOSSARY.html) of [](GLOSSARY.html)
    having [](GLOSSARY.html) to [](GLOSSARY.html) rely on [](GLOSSARY.html) the [](GLOSSARY.html)
    Application [](GLOSSARY.html) Model [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html)
    forwarder. The [](GLOSSARY.html) View [](GLOSSARY.html) behavior [](GLOSSARY.html)
    is [](GLOSSARY.html) now [](GLOSSARY.html) hybrid Active/Passive, fetching [](GLOSSARY.html)
    Domain [](GLOSSARY.html) data [](GLOSSARY.html) directly [](GLOSSARY.html) from
    [](GLOSSARY.html) the [](GLOSSARY.html) Domain [](GLOSSARY.html) Model [](GLOSSARY.html)
    but [](GLOSSARY.html) with visual [](GLOSSARY.html) aspects [](GLOSSARY.html)
    applied [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html) Presenter
    (Passive) directly [](GLOSSARY.html) acting [](GLOSSARY.html) on [](GLOSSARY.html)
    the widgets. A [](GLOSSARY.html) variant [](GLOSSARY.html) with [](GLOSSARY.html)
    a [](GLOSSARY.html) fully [](GLOSSARY.html) Passive [](GLOSSARY.html) View [](GLOSSARY.html)
    is [](GLOSSARY.html) possible, and [](GLOSSARY.html) is [](GLOSSARY.html) known
    [](GLOSSARY.html) as **Presenter [](GLOSSARY.html) First**.
  id: totrans-790
  prefs: []
  type: TYPE_NORMAL
  zh: 领域模型是严格的领域模型，不变，仍由View访问以进行数据提取，并由Presenter进行数据修改。View是小部件的聚合，直接从领域模型获取数据，而不必依赖应用模型作为转发器。现在View行为是混合的主动/被动，直接从领域模型获取领域数据，但由Presenter（被动）应用视觉方面的影响直接作用于小部件。可能存在一种完全被动的View变体，被称为**Presenter
    First**。
- en: If [](GLOSSARY.html) the [](GLOSSARY.html) user [](GLOSSARY.html) changes [](GLOSSARY.html)
    the [](GLOSSARY.html) content [](GLOSSARY.html) of [](GLOSSARY.html) a [](GLOSSARY.html)
    widget, the [](GLOSSARY.html) presenter [](GLOSSARY.html) is [](GLOSSARY.html)
    informed, it [](GLOSSARY.html) fetches [](GLOSSARY.html) the [](GLOSSARY.html)
    value from [](GLOSSARY.html) the [](GLOSSARY.html) widget, and [](GLOSSARY.html)
    acts [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) model. The [](GLOSSARY.html)
    model [](GLOSSARY.html) is [](GLOSSARY.html) listened [](GLOSSARY.html) to [](GLOSSARY.html)
    by [](GLOSSARY.html) the [](GLOSSARY.html) view, which [](GLOSSARY.html) updates
    itself [](GLOSSARY.html) accordingly, and [](GLOSSARY.html) by [](GLOSSARY.html)
    the [](GLOSSARY.html) presenter [](GLOSSARY.html) itself, which [](GLOSSARY.html)
    now [](GLOSSARY.html) sets [](GLOSSARY.html) the [](GLOSSARY.html) color.
  id: totrans-791
  prefs: []
  type: TYPE_NORMAL
  zh: 如果用户更改小部件的内容，主持人会被通知，它从小部件中获取值，并对模型进行操作。视图监听模型，相应地更新自身，以及主持人本身，现在设置颜色。
- en: The [](GLOSSARY.html) view [](GLOSSARY.html) may [](GLOSSARY.html) manipulate
    [](GLOSSARY.html) its [](GLOSSARY.html) own [](GLOSSARY.html) logic [](GLOSSARY.html)
    and [](GLOSSARY.html) aspect [](GLOSSARY.html) internally [](GLOSSARY.html) if
    [](GLOSSARY.html) it [](GLOSSARY.html) does [](GLOSSARY.html) not [](GLOSSARY.html)
    need [](GLOSSARY.html) to [](GLOSSARY.html) modify [](GLOSSARY.html) the model.
  id: totrans-792
  prefs: []
  type: TYPE_NORMAL
  zh: 视图[](GLOSSARY.html)可以在内部操纵自己的逻辑和外观，如果不需要修改模型。
- en: every [](GLOSSARY.html) view [](GLOSSARY.html) has [](GLOSSARY.html) a [](GLOSSARY.html)
    specific [](GLOSSARY.html) presenter. There's [](GLOSSARY.html) a [](GLOSSARY.html)
    strict [](GLOSSARY.html) relationship [](GLOSSARY.html) between [](GLOSSARY.html)
    the [](GLOSSARY.html) two
  id: totrans-793
  prefs: []
  type: TYPE_NORMAL
  zh: 每个视图都有一个特定的主持人。两者之间有严格的关系。
- en: Each [](GLOSSARY.html) triad [](GLOSSARY.html) is [](GLOSSARY.html) independent
    [](GLOSSARY.html) and [](GLOSSARY.html) does [](GLOSSARY.html) not [](GLOSSARY.html)
    know [](GLOSSARY.html) about [](GLOSSARY.html) the [](GLOSSARY.html) other [](GLOSSARY.html)
    ones. in [](GLOSSARY.html) general, if [](GLOSSARY.html) the [](GLOSSARY.html)
    triads [](GLOSSARY.html) must [](GLOSSARY.html) coordinate [](GLOSSARY.html) each
    [](GLOSSARY.html) other, they [](GLOSSARY.html) can [](GLOSSARY.html) rely [](GLOSSARY.html)
    on [](GLOSSARY.html) an "application model". When [](GLOSSARY.html) the [](GLOSSARY.html)
    application [](GLOSSARY.html) Model [](GLOSSARY.html) for [](GLOSSARY.html) a
    [](GLOSSARY.html) given [](GLOSSARY.html) triad [](GLOSSARY.html) is [](GLOSSARY.html)
    requested [](GLOSSARY.html) to [](GLOSSARY.html) perform [](GLOSSARY.html) a change,
    it [](GLOSSARY.html) signals [](GLOSSARY.html) its [](GLOSSARY.html) intention
    [](GLOSSARY.html) to [](GLOSSARY.html) an [](GLOSSARY.html) application [](GLOSSARY.html)
    coordinator. This coordinator [](GLOSSARY.html) can [](GLOSSARY.html) eventually
    [](GLOSSARY.html) decide [](GLOSSARY.html) to [](GLOSSARY.html) create [](GLOSSARY.html)
    a [](GLOSSARY.html) new [](GLOSSARY.html) triad, if [](GLOSSARY.html) needed.
  id: totrans-794
  prefs: []
  type: TYPE_NORMAL
  zh: 每个三元组都是独立的，不知道其他的。一般来说，如果三元组必须协调彼此，它们可以依赖于"应用模型"。当请求给定三元组的应用模型执行更改时，它会向应用协调器发出意图信号。这个协调器最终可以决定创建一个新的三元组，如果需要的话。
- en: 'FIXME: Add [](GLOSSARY.html) Picture FIXME: reformulate [](GLOSSARY.html) in
    [](GLOSSARY.html) general'
  id: totrans-795
  prefs: []
  type: TYPE_NORMAL
  zh: 'FIXME: 添加[](GLOSSARY.html)图片 FIXME: 重新表述一般情况'
- en: 'FIXME: Write [](GLOSSARY.html) something [](GLOSSARY.html) about [](GLOSSARY.html)
    data [](GLOSSARY.html) transfer [](GLOSSARY.html) objects [](GLOSSARY.html) as
    [](GLOSSARY.html) a [](GLOSSARY.html) transferring [](GLOSSARY.html) entity [](GLOSSARY.html)
    of [](GLOSSARY.html) data [](GLOSSARY.html) between [](GLOSSARY.html) the model
    [](GLOSSARY.html) and [](GLOSSARY.html) the [](GLOSSARY.html) presenter. It [](GLOSSARY.html)
    is [](GLOSSARY.html) possible [](GLOSSARY.html) to [](GLOSSARY.html) add [](GLOSSARY.html)
    a [](GLOSSARY.html) service [](GLOSSARY.html) layer [](GLOSSARY.html) between
    [](GLOSSARY.html) the model [](GLOSSARY.html) and [](GLOSSARY.html) the [](GLOSSARY.html)
    presenter [](GLOSSARY.html) that [](GLOSSARY.html) is [](GLOSSARY.html) responsible
    [](GLOSSARY.html) for [](GLOSSARY.html) packing [](GLOSSARY.html) the [](GLOSSARY.html)
    data [](GLOSSARY.html) from [](GLOSSARY.html) the [](GLOSSARY.html) model into
    [](GLOSSARY.html) a [](GLOSSARY.html) DTO [](GLOSSARY.html) that [](GLOSSARY.html)
    the [](GLOSSARY.html) presenter [](GLOSSARY.html) then [](GLOSSARY.html) uses
    [](GLOSSARY.html) to [](GLOSSARY.html) set [](GLOSSARY.html) the [](GLOSSARY.html)
    view''s [](GLOSSARY.html) contents.'
  id: totrans-796
  prefs: []
  type: TYPE_NORMAL
  zh: 'FIXME: 写一些关于数据传输对象作为数据在模型和展示器之间传输的实体的内容。可以在模型和展示器之间添加一个服务层，负责将数据从模型打包成展示器后使用的
    DTO 来设置视图的内容。'
- en: 'FIXME: The [](GLOSSARY.html) application [](GLOSSARY.html) model [](GLOSSARY.html)
    approach [](GLOSSARY.html) assumes [](GLOSSARY.html) that [](GLOSSARY.html) there
    [](GLOSSARY.html) are [](GLOSSARY.html) multiple [](GLOSSARY.html) View/Controllers
    [](GLOSSARY.html) acting [](GLOSSARY.html) on [](GLOSSARY.html) the same [](GLOSSARY.html)
    application [](GLOSSARY.html) model, but [](GLOSSARY.html) in [](GLOSSARY.html)
    practice [](GLOSSARY.html) it''s [](GLOSSARY.html) very [](GLOSSARY.html) rare
    [](GLOSSARY.html) that [](GLOSSARY.html) an [](GLOSSARY.html) application [](GLOSSARY.html)
    model [](GLOSSARY.html) is [](GLOSSARY.html) generic [](GLOSSARY.html) enough
    to [](GLOSSARY.html) be [](GLOSSARY.html) applicable [](GLOSSARY.html) to [](GLOSSARY.html)
    multiple [](GLOSSARY.html) views [](GLOSSARY.html) or [](GLOSSARY.html) controllers,
    exactly [](GLOSSARY.html) because [](GLOSSARY.html) its [](GLOSSARY.html) state
    [](GLOSSARY.html) is [](GLOSSARY.html) designed [](GLOSSARY.html) to [](GLOSSARY.html)
    satisfy the [](GLOSSARY.html) visual [](GLOSSARY.html) needs [](GLOSSARY.html)
    of [](GLOSSARY.html) a [](GLOSSARY.html) specific [](GLOSSARY.html) View.'
  id: totrans-797
  prefs: []
  type: TYPE_NORMAL
  zh: 'FIXME: [应用模型方法](https://wiki.example.org/glossary.html)假设存在多个在同一应用模型上起作用的视图/控制器，但实际上很少有应用模型足够通用，适用于多个视图或控制器，正是因为其状态被设计来满足特定视图的视觉需求。'
- en: 'FIXME: Add [](GLOSSARY.html) the [](GLOSSARY.html) fact [](GLOSSARY.html) that
    [](GLOSSARY.html) the [](GLOSSARY.html) controller [](GLOSSARY.html) is [](GLOSSARY.html)
    talking [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) view [](GLOSSARY.html)
    as [](GLOSSARY.html) a [](GLOSSARY.html) generic [](GLOSSARY.html) object [](GLOSSARY.html)
    that [](GLOSSARY.html) generates events. This [](GLOSSARY.html) allows [](GLOSSARY.html)
    easy [](GLOSSARY.html) repleaceability [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) view, not [](GLOSSARY.html) only [](GLOSSARY.html) with
    [](GLOSSARY.html) a [](GLOSSARY.html) mock, but [](GLOSSARY.html) also [](GLOSSARY.html)
    with [](GLOSSARY.html) a [](GLOSSARY.html) different renderer. As [](GLOSSARY.html)
    long [](GLOSSARY.html) as [](GLOSSARY.html) it [](GLOSSARY.html) generates [](GLOSSARY.html)
    the [](GLOSSARY.html) same [](GLOSSARY.html) events [](GLOSSARY.html) and [](GLOSSARY.html)
    responds [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) same [](GLOSSARY.html)
    interface. this [](GLOSSARY.html) may [](GLOSSARY.html) seem trivial, but [](GLOSSARY.html)
    if [](GLOSSARY.html) the [](GLOSSARY.html) difference [](GLOSSARY.html) in [](GLOSSARY.html)
    interface [](GLOSSARY.html) is [](GLOSSARY.html) large, this [](GLOSSARY.html)
    replaceability [](GLOSSARY.html) is [](GLOSSARY.html) not [](GLOSSARY.html) achievable.'
  id: totrans-798
  prefs: []
  type: TYPE_NORMAL
  zh: 'FIXME: 添加[](GLOSSARY.html)控制器正在与视图交流的事实，视图被视为生成事件的通用对象。这使得视图的易替换性变得容易，不仅可以使用模拟对象，还可以使用不同的渲染器。只要它生成相同的事件并响应相同的接口。这可能看起来微不足道，但如果接口的差异很大，这种可替换性就无法实现。'
- en: 'FIXME: Division [](GLOSSARY.html) of [](GLOSSARY.html) functionality [](GLOSSARY.html)
    in [](GLOSSARY.html) the [](GLOSSARY.html) presenter [](GLOSSARY.html) must [](GLOSSARY.html)
    keep [](GLOSSARY.html) into [](GLOSSARY.html) account [](GLOSSARY.html) if [](GLOSSARY.html)
    the [](GLOSSARY.html) functionality [](GLOSSARY.html) would [](GLOSSARY.html)
    make the [](GLOSSARY.html) presenter [](GLOSSARY.html) grow [](GLOSSARY.html)
    too [](GLOSSARY.html) much [](GLOSSARY.html) and [](GLOSSARY.html) act [](GLOSSARY.html)
    as [](GLOSSARY.html) a [](GLOSSARY.html) data [](GLOSSARY.html) bottleneck. Sometimes
    [](GLOSSARY.html) if [](GLOSSARY.html) the [](GLOSSARY.html) logic [](GLOSSARY.html)
    is [](GLOSSARY.html) complex [](GLOSSARY.html) and [](GLOSSARY.html) the [](GLOSSARY.html)
    view [](GLOSSARY.html) is intrinsically [](GLOSSARY.html) complex, it [](GLOSSARY.html)
    pays [](GLOSSARY.html) off [](GLOSSARY.html) to [](GLOSSARY.html) let [](GLOSSARY.html)
    this [](GLOSSARY.html) logic [](GLOSSARY.html) live [](GLOSSARY.html) in [](GLOSSARY.html)
    the [](GLOSSARY.html) View [](GLOSSARY.html) and [](GLOSSARY.html) have [](GLOSSARY.html)
    a [](GLOSSARY.html) simple [](GLOSSARY.html) presenter.'
  id: totrans-799
  prefs: []
  type: TYPE_NORMAL
  zh: 'FIXME: 在Presenter中功能的划分必须考虑到如果功能使Presenter变得过于庞大并充当数据瓶颈。有时，如果逻辑复杂且视图本质上复杂，让这种逻辑存在于视图中并拥有一个简单的Presenter是值得的。'
- en: 'FIXME: In [](GLOSSARY.html) a [](GLOSSARY.html) large [](GLOSSARY.html) application,
    a [](GLOSSARY.html) presenter [](GLOSSARY.html) normally [](GLOSSARY.html) handles
    [](GLOSSARY.html) only [](GLOSSARY.html) one [](GLOSSARY.html) view, but [](GLOSSARY.html)
    it [](GLOSSARY.html) could handle [](GLOSSARY.html) multiple [](GLOSSARY.html)
    views [](GLOSSARY.html) if [](GLOSSARY.html) they [](GLOSSARY.html) are [](GLOSSARY.html)
    closely [](GLOSSARY.html) related.'
  id: totrans-800
  prefs: []
  type: TYPE_NORMAL
  zh: 'FIXME: 在一个大型应用程序中，一个Presenter通常只处理一个视图，但如果它们密切相关，它可以处理多个视图。'
- en: 'FIXME: Communication [](GLOSSARY.html) choices. 1) View [](GLOSSARY.html) holds
    [](GLOSSARY.html) reference [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    Presenter. View [](GLOSSARY.html) invokes [](GLOSSARY.html) directly [](GLOSSARY.html)
    methods [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) presenter,
    instead [](GLOSSARY.html) of [](GLOSSARY.html) sending [](GLOSSARY.html) events.
    or 2) View [](GLOSSARY.html) emits [](GLOSSARY.html) events. Presenter [](GLOSSARY.html)
    listens'
  id: totrans-801
  prefs: []
  type: TYPE_NORMAL
  zh: 'FIXME: 通信[](GLOSSARY.html)选择。1）查看[](GLOSSARY.html)保存对[](GLOSSARY.html)Presenter的引用。View[](GLOSSARY.html)直接调用[](GLOSSARY.html)Presenter的方法，而不是发送事件。或2）View[](GLOSSARY.html)发出事件。Presenter[](GLOSSARY.html)监听'
- en: Presenter [](GLOSSARY.html) holds [](GLOSSARY.html) a [](GLOSSARY.html) reference
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) View. directly [](GLOSSARY.html)
    invokes [](GLOSSARY.html) its [](GLOSSARY.html) methods.
  id: totrans-802
  prefs: []
  type: TYPE_NORMAL
  zh: Presenter[](GLOSSARY.html)保存对View的引用。直接调用其方法。
- en: In [](GLOSSARY.html) the [](GLOSSARY.html) original [](GLOSSARY.html) MVC, the
    [](GLOSSARY.html) controller [](GLOSSARY.html) was [](GLOSSARY.html) mainly [](GLOSSARY.html)
    responsible [](GLOSSARY.html) for [](GLOSSARY.html) handling [](GLOSSARY.html)
    user [](GLOSSARY.html) events. in [](GLOSSARY.html) MVP, the [](GLOSSARY.html)
    Presenter [](GLOSSARY.html) is [](GLOSSARY.html) responsible [](GLOSSARY.html)
    for [](GLOSSARY.html) handling [](GLOSSARY.html) Model [](GLOSSARY.html) changes.
  id: totrans-803
  prefs: []
  type: TYPE_NORMAL
  zh: 在[](GLOSSARY.html)原始[](GLOSSARY.html)MVC中，控制器主要负责处理用户事件。在MVP中，Presenter负责处理Model的更改。
- en: Composed [](GLOSSARY.html) of [](GLOSSARY.html) supervising [](GLOSSARY.html)
    controller, passive [](GLOSSARY.html) view.
  id: totrans-804
  prefs: []
  type: TYPE_NORMAL
  zh: 由监督控制器、被动视图组成。
- en: Moves [](GLOSSARY.html) presentation [](GLOSSARY.html) logic [](GLOSSARY.html)
    from [](GLOSSARY.html) the [](GLOSSARY.html) Model (as [](GLOSSARY.html) in [](GLOSSARY.html)
    aplication [](GLOSSARY.html) model) to [](GLOSSARY.html) the [](GLOSSARY.html)
    presenter.
  id: totrans-805
  prefs: []
  type: TYPE_NORMAL
  zh: 将展示逻辑从Model（如应用程序模型中）移动到Presenter。
- en: 'MVC [](GLOSSARY.html) vs. MVP:'
  id: totrans-806
  prefs: []
  type: TYPE_NORMAL
  zh: MVC与MVP：
- en: 'Controller [](GLOSSARY.html) in [](GLOSSARY.html) MVC: main [](GLOSSARY.html)
    objective [](GLOSSARY.html) is [](GLOSSARY.html) to [](GLOSSARY.html) handle [](GLOSSARY.html)
    user [](GLOSSARY.html) events. Model [](GLOSSARY.html) modification [](GLOSSARY.html)
    is [](GLOSSARY.html) a [](GLOSSARY.html) consequence [](GLOSSARY.html) of [](GLOSSARY.html)
    it. With [](GLOSSARY.html) smart [](GLOSSARY.html) widgets, user [](GLOSSARY.html)
    events [](GLOSSARY.html) are [](GLOSSARY.html) handled [](GLOSSARY.html) by [](GLOSSARY.html)
    the [](GLOSSARY.html) widgets, and [](GLOSSARY.html) then [](GLOSSARY.html) forwarded
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) controller. MVP:
    Presenter [](GLOSSARY.html) main [](GLOSSARY.html) objetive [](GLOSSARY.html)
    is [](GLOSSARY.html) updating [](GLOSSARY.html) the [](GLOSSARY.html) model, and
    [](GLOSSARY.html) keeping [](GLOSSARY.html) the [](GLOSSARY.html) visual [](GLOSSARY.html)
    state (as [](GLOSSARY.html) in [](GLOSSARY.html) application [](GLOSSARY.html)
    model) handling [](GLOSSARY.html) events [](GLOSSARY.html) passed [](GLOSSARY.html)
    by [](GLOSSARY.html) the [](GLOSSARY.html) view [](GLOSSARY.html) is [](GLOSSARY.html)
    a [](GLOSSARY.html) consequence [](GLOSSARY.html) of [](GLOSSARY.html) it.'
  id: totrans-807
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MVC 中的控制器 [](GLOSSARY.html)：主要目标是处理用户事件。 模型 [](GLOSSARY.html) 修改是其结果。 使用 [](GLOSSARY.html)
    智能小部件，用户 [](GLOSSARY.html) 事件由小部件处理，然后转发给 [](GLOSSARY.html) 控制器。 MVP：展示者 [](GLOSSARY.html)
    的主要目标是更新模型，并保持视觉状态（如应用程序 [](GLOSSARY.html) 模型中）处理由视图传递的 [](GLOSSARY.html) 事件是其结果。
- en: The [](GLOSSARY.html) presenter [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html)
    instantiated [](GLOSSARY.html) either [](GLOSSARY.html) by [](GLOSSARY.html) the
    [](GLOSSARY.html) client [](GLOSSARY.html) code, or [](GLOSSARY.html) directly
    [](GLOSSARY.html) by [](GLOSSARY.html) the view. If [](GLOSSARY.html) this [](GLOSSARY.html)
    is [](GLOSSARY.html) the [](GLOSSARY.html) case, the [](GLOSSARY.html) View [](GLOSSARY.html)
    must [](GLOSSARY.html) know [](GLOSSARY.html) the [](GLOSSARY.html) model, so
    [](GLOSSARY.html) that [](GLOSSARY.html) it [](GLOSSARY.html) can instantiate
    [](GLOSSARY.html) the [](GLOSSARY.html) Presenter [](GLOSSARY.html) and [](GLOSSARY.html)
    pass [](GLOSSARY.html) both [](GLOSSARY.html) the [](GLOSSARY.html) model [](GLOSSARY.html)
    and [](GLOSSARY.html) itself [](GLOSSARY.html) to [](GLOSSARY.html) it.
  id: totrans-808
  prefs: []
  type: TYPE_NORMAL
  zh: 展示者 [](GLOSSARY.html) 可以由客户端代码实例化，也可以直接由视图实例化。 如果 [](GLOSSARY.html) 是这种情况，视图必须了解模型，以便它可以实例化展示者并将模型和自身都传递给它。
- en: Concerning [](GLOSSARY.html) callability [](GLOSSARY.html) on [](GLOSSARY.html)
    sone [](GLOSSARY.html) side [](GLOSSARY.html) or [](GLOSSARY.html) the [](GLOSSARY.html)
    other (e.g. event [](GLOSSARY.html) vs. method [](GLOSSARY.html) call)
  id: totrans-809
  prefs: []
  type: TYPE_NORMAL
  zh: 有关 [](GLOSSARY.html) 在某一方面或另一方面的可调用性（例如，事件 [](GLOSSARY.html) 对 方法 [](GLOSSARY.html)
    的调用）
- en: 'write [](GLOSSARY.html) that [](GLOSSARY.html) the [](GLOSSARY.html) view [](GLOSSARY.html)
    has [](GLOSSARY.html) two [](GLOSSARY.html) ways [](GLOSSARY.html) to [](GLOSSARY.html)
    interact [](GLOSSARY.html) with [](GLOSSARY.html) the [](GLOSSARY.html) controller
    [](GLOSSARY.html) and [](GLOSSARY.html) forward events: strong [](GLOSSARY.html)
    coupling [](GLOSSARY.html) through [](GLOSSARY.html) direct [](GLOSSARY.html)
    invocation, or [](GLOSSARY.html) loose [](GLOSSARY.html) coupling [](GLOSSARY.html)
    through [](GLOSSARY.html) raising events [](GLOSSARY.html) at [](GLOSSARY.html)
    a [](GLOSSARY.html) higher [](GLOSSARY.html) semantic [](GLOSSARY.html) level.
    forwarding [](GLOSSARY.html) is [](GLOSSARY.html) done [](GLOSSARY.html) depends
    [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) degree [](GLOSSARY.html)
    of [](GLOSSARY.html) coupling [](GLOSSARY.html) you [](GLOSSARY.html) allow [](GLOSSARY.html)
    between [](GLOSSARY.html) the [](GLOSSARY.html) View and [](GLOSSARY.html) the
    [](GLOSSARY.html) Presenter. If [](GLOSSARY.html) the [](GLOSSARY.html) view [](GLOSSARY.html)
    must [](GLOSSARY.html) invoke [](GLOSSARY.html) directly [](GLOSSARY.html) a [](GLOSSARY.html)
    Presenter''s [](GLOSSARY.html) method, obviously [](GLOSSARY.html) it [](GLOSSARY.html)
    must [](GLOSSARY.html) know [](GLOSSARY.html) its [](GLOSSARY.html) interface,
    so [](GLOSSARY.html) it [](GLOSSARY.html) must [](GLOSSARY.html) hold [](GLOSSARY.html)
    a [](GLOSSARY.html) reference [](GLOSSARY.html) to [](GLOSSARY.html) it [](GLOSSARY.html)
    and know [](GLOSSARY.html) its [](GLOSSARY.html) interface. The [](GLOSSARY.html)
    alternative [](GLOSSARY.html) is [](GLOSSARY.html) that [](GLOSSARY.html) the
    [](GLOSSARY.html) view [](GLOSSARY.html) is [](GLOSSARY.html) oblivious [](GLOSSARY.html)
    to [](GLOSSARY.html) who [](GLOSSARY.html) is listening, and [](GLOSSARY.html)
    just [](GLOSSARY.html) broadcasts [](GLOSSARY.html) events (commands) to [](GLOSSARY.html)
    report [](GLOSSARY.html) the [](GLOSSARY.html) button [](GLOSSARY.html) press.
    The [](GLOSSARY.html) presenter [](GLOSSARY.html) observes [](GLOSSARY.html) these
    [](GLOSSARY.html) events [](GLOSSARY.html) and [](GLOSSARY.html) take [](GLOSSARY.html)
    appropriate [](GLOSSARY.html) action [](GLOSSARY.html) when [](GLOSSARY.html)
    triggered. As [](GLOSSARY.html) you [](GLOSSARY.html) can [](GLOSSARY.html) see,
    the [](GLOSSARY.html) difference [](GLOSSARY.html) is [](GLOSSARY.html) subtle,
    and [](GLOSSARY.html) apparently [](GLOSSARY.html) irrelevant, but [](GLOSSARY.html)
    it [](GLOSSARY.html) can be [](GLOSSARY.html) useful [](GLOSSARY.html) depending
    [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) degree [](GLOSSARY.html)
    of [](GLOSSARY.html) coupling [](GLOSSARY.html) and [](GLOSSARY.html) self-containment
    [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) view vs. the [](GLOSSARY.html)
    controller (Presenter)'
  id: totrans-810
  prefs: []
  type: TYPE_NORMAL
  zh: 编写[](GLOSSARY.html)以说明视图与控制器之间有两种交互方式：通过直接调用进行强耦合，或通过在更高语义级别上引发事件进行松散耦合。如何进行转发取决于您允许视图和Presenter之间耦合程度。如果视图必须直接调用Presenter的方法，显然它必须了解其接口，因此必须持有对其的引用并了解其接口。另一种选择是视图对谁在监听毫不知情，只是广播事件（命令）以报告按钮按下。Presenter观察这些事件，并在触发时采取适当的行动。正如您所看到的，差异微妙，显然无关紧要，但根据耦合程度和视图与控制器（Presenter）的自包含性，它可能会很有用。
- en: Presenter First
  id: totrans-811
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Presenter First
- en: Presenter First
  id: totrans-812
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Presenter First
- en: More [](GLOSSARY.html) than [](GLOSSARY.html) a [](GLOSSARY.html) design, **Presenter
    [](GLOSSARY.html) First** is [](GLOSSARY.html) a [](GLOSSARY.html) discipline
    [](GLOSSARY.html) for [](GLOSSARY.html) coding [](GLOSSARY.html) a [](GLOSSARY.html)
    Dolphin MVP. As [](GLOSSARY.html) briefly [](GLOSSARY.html) stated [](GLOSSARY.html)
    in [](GLOSSARY.html) the [](GLOSSARY.html) closing [](GLOSSARY.html) remarks [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) previous [](GLOSSARY.html) section,
    it [](GLOSSARY.html) is [](GLOSSARY.html) possible to [](GLOSSARY.html) deploy
    [](GLOSSARY.html) a [](GLOSSARY.html) Dolphin [](GLOSSARY.html) MVP [](GLOSSARY.html)
    variation [](GLOSSARY.html) where [](GLOSSARY.html) the [](GLOSSARY.html) View
    [](GLOSSARY.html) is [](GLOSSARY.html) fully [](GLOSSARY.html) passive.
  id: totrans-813
  prefs: []
  type: TYPE_NORMAL
  zh: '**Presenter [](GLOSSARY.html)首先**不仅仅是一种设计，它是一种为编写Dolphin MVP的纪律。正如前一节的结束语中简要提到的那样，可以部署一种Dolphin
    MVP变体，其中View是完全被动的。'
- en: The [](GLOSSARY.html) presenter [](GLOSSARY.html) performs [](GLOSSARY.html)
    calls [](GLOSSARY.html) on [](GLOSSARY.html) both [](GLOSSARY.html) the [](GLOSSARY.html)
    model [](GLOSSARY.html) and [](GLOSSARY.html) the [](GLOSSARY.html) new, and [](GLOSSARY.html)
    receives [](GLOSSARY.html) events [](GLOSSARY.html) from either [](GLOSSARY.html)
    of [](GLOSSARY.html) them.
  id: totrans-814
  prefs: []
  type: TYPE_NORMAL
  zh: Presenter [](GLOSSARY.html)对模型和新模型进行调用，并从它们中的任何一个接收事件。
- en: Presenter [](GLOSSARY.html) First [](GLOSSARY.html) takes [](GLOSSARY.html)
    advantage [](GLOSSARY.html) of [](GLOSSARY.html) this [](GLOSSARY.html) choice
    [](GLOSSARY.html) to [](GLOSSARY.html) focus [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) Presenter [](GLOSSARY.html) as [](GLOSSARY.html) the starting
    [](GLOSSARY.html) point [](GLOSSARY.html) for [](GLOSSARY.html) development [](GLOSSARY.html)
    of [](GLOSSARY.html) a [](GLOSSARY.html) specific [](GLOSSARY.html) triad. The
    [](GLOSSARY.html) idea [](GLOSSARY.html) is [](GLOSSARY.html) that, by creating
    [](GLOSSARY.html) the [](GLOSSARY.html) Presenter [](GLOSSARY.html) under [](GLOSSARY.html)
    direction [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) customer's
    [](GLOSSARY.html) desires, there's [](GLOSSARY.html) a chance [](GLOSSARY.html)
    to [](GLOSSARY.html) progressively [](GLOSSARY.html) discover [](GLOSSARY.html)
    the [](GLOSSARY.html) required [](GLOSSARY.html) interfaces [](GLOSSARY.html)
    of [](GLOSSARY.html) both [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html)
    and the [](GLOSSARY.html) Model [](GLOSSARY.html) by [](GLOSSARY.html) coding
    [](GLOSSARY.html) against [](GLOSSARY.html) mocks [](GLOSSARY.html) and [](GLOSSARY.html)
    lastly [](GLOSSARY.html) implementing [](GLOSSARY.html) the [](GLOSSARY.html)
    discovered interfaces.
  id: totrans-815
  prefs: []
  type: TYPE_NORMAL
  zh: Presenter [](GLOSSARY.html)首先利用这种选择，将焦点放在以Presenter [](GLOSSARY.html)为起点开发特定三元组的过程中。这个想法是，通过根据客户的需求创建Presenter，逐步发现View和Model的所需接口，通过针对模拟进行编码，最后实现发现的接口。
- en: The [](GLOSSARY.html) point [](GLOSSARY.html) of [](GLOSSARY.html) presenter
    [](GLOSSARY.html) first [](GLOSSARY.html) is [](GLOSSARY.html) to [](GLOSSARY.html)
    code [](GLOSSARY.html) the [](GLOSSARY.html) presenter [](GLOSSARY.html) to [](GLOSSARY.html)
    satisfy [](GLOSSARY.html) customer [](GLOSSARY.html) needs, and [](GLOSSARY.html)
    code [](GLOSSARY.html) against [](GLOSSARY.html) it [](GLOSSARY.html) first. While
    [](GLOSSARY.html) the [](GLOSSARY.html) model [](GLOSSARY.html) provides [](GLOSSARY.html)
    a [](GLOSSARY.html) functionality [](GLOSSARY.html) and [](GLOSSARY.html) data
    [](GLOSSARY.html) oriented access, the [](GLOSSARY.html) presenter [](GLOSSARY.html)
    describes [](GLOSSARY.html) the [](GLOSSARY.html) actions [](GLOSSARY.html) in
    [](GLOSSARY.html) terms [](GLOSSARY.html) the [](GLOSSARY.html) user [](GLOSSARY.html)
    understands [](GLOSSARY.html) or [](GLOSSARY.html) specifies. The [](GLOSSARY.html)
    presenter [](GLOSSARY.html) has [](GLOSSARY.html) no [](GLOSSARY.html) state.
    It [](GLOSSARY.html) relies [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html)
    view [](GLOSSARY.html) and [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html)
    model [](GLOSSARY.html) to [](GLOSSARY.html) hold [](GLOSSARY.html) state, performing
    operations [](GLOSSARY.html) on [](GLOSSARY.html) these [](GLOSSARY.html) two.
    In [](GLOSSARY.html) principle, the [](GLOSSARY.html) Presenter [](GLOSSARY.html)
    should [](GLOSSARY.html) listen [](GLOSSARY.html) to [](GLOSSARY.html) events
    from [](GLOSSARY.html) either [](GLOSSARY.html) the [](GLOSSARY.html) model [](GLOSSARY.html)
    or [](GLOSSARY.html) the [](GLOSSARY.html) view, meaning [](GLOSSARY.html) that
    [](GLOSSARY.html) it [](GLOSSARY.html) should [](GLOSSARY.html) not [](GLOSSARY.html)
    need [](GLOSSARY.html) public [](GLOSSARY.html) methods. All [](GLOSSARY.html)
    the [](GLOSSARY.html) connections [](GLOSSARY.html) between [](GLOSSARY.html)
    events [](GLOSSARY.html) and [](GLOSSARY.html) presenter [](GLOSSARY.html) methods
    [](GLOSSARY.html) are [](GLOSSARY.html) setup [](GLOSSARY.html) by [](GLOSSARY.html)
    the [](GLOSSARY.html) presenter [](GLOSSARY.html) itself.
  id: totrans-816
  prefs: []
  type: TYPE_NORMAL
  zh: '[](GLOSSARY.html)演示者的首要目标是编写演示者以满足客户需求，并首先针对其进行编码。虽然模型提供功能和数据导向访问，演示者描述用户理解或指定的操作。演示者没有状态。它依赖于视图和模型来保存状态，在这两者上执行操作。原则上，演示者应该监听来自模型或视图的事件，这意味着它不应该需要公共方法。所有事件和演示者方法之间的连接由演示者自己设置。'
- en: The [](GLOSSARY.html) Presenter [](GLOSSARY.html) should [](GLOSSARY.html) be
    [](GLOSSARY.html) tested [](GLOSSARY.html) strenously. The [](GLOSSARY.html) View,
    being [](GLOSSARY.html) a [](GLOSSARY.html) Humble [](GLOSSARY.html) View, can
    be [](GLOSSARY.html) left [](GLOSSARY.html) untested.
  id: totrans-817
  prefs: []
  type: TYPE_NORMAL
  zh: '[](GLOSSARY.html)演示者应该经受严格测试。作为谦卑的视图，视图可以不经过测试。'
- en: Taligent MVP
  id: totrans-818
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Taligent MVP
- en: Taligent/IBM Model-View-Presenter (MVP)
  id: totrans-819
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Taligent/IBM Model-View-Presenter (MVP)
- en: Until [](GLOSSARY.html) now, we [](GLOSSARY.html) saw [](GLOSSARY.html) several
    [](GLOSSARY.html) strategies [](GLOSSARY.html) to [](GLOSSARY.html) address [](GLOSSARY.html)
    modern [](GLOSSARY.html) requirements [](GLOSSARY.html) such [](GLOSSARY.html)
    as undo/redo, selection, and [](GLOSSARY.html) View-related [](GLOSSARY.html)
    state. Taligent, a [](GLOSSARY.html) subsidiary [](GLOSSARY.html) company [](GLOSSARY.html)
    of IBM, formalized [](GLOSSARY.html) these [](GLOSSARY.html) strategies [](GLOSSARY.html)
    into [](GLOSSARY.html) the [](GLOSSARY.html) so-called [](GLOSSARY.html) Taligent
    Model-View-Presenter [](GLOSSARY.html) architecture. An [](GLOSSARY.html) equally
    [](GLOSSARY.html) named, but [](GLOSSARY.html) different [](GLOSSARY.html) strategy
    [](GLOSSARY.html) is the [](GLOSSARY.html) Dolphin [](GLOSSARY.html) Model-View-Presenter,
    which [](GLOSSARY.html) will [](GLOSSARY.html) be [](GLOSSARY.html) introduced
    [](GLOSSARY.html) later. At [](GLOSSARY.html) first, MVP [](GLOSSARY.html) seems
    [](GLOSSARY.html) complex, but [](GLOSSARY.html) in [](GLOSSARY.html) reality
    [](GLOSSARY.html) is [](GLOSSARY.html) a [](GLOSSARY.html) little [](GLOSSARY.html)
    step [](GLOSSARY.html) from [](GLOSSARY.html) what [](GLOSSARY.html) already [](GLOSSARY.html)
    introduced in [](GLOSSARY.html) the [](GLOSSARY.html) previous [](GLOSSARY.html)
    sections.
  id: totrans-820
  prefs: []
  type: TYPE_NORMAL
  zh: 直到现在，我们看到了几种应对现代需求的策略，比如撤销/重做、选择和与视图相关的状态。IBM的子公司Taligent将这些策略正式化为所谓的Taligent
    Model-View-Presenter架构。同样命名但不同的策略是Dolphin Model-View-Presenter，稍后将介绍。起初，MVP看起来复杂，但实际上只是在前几节已经介绍过的内容上迈出了一小步。
- en: '![](taligent_mvp.png)'
  id: totrans-821
  prefs: []
  type: TYPE_IMG
  zh: '![](taligent_mvp.png)'
- en: The [](GLOSSARY.html) aim [](GLOSSARY.html) is [](GLOSSARY.html) to [](GLOSSARY.html)
    divide [](GLOSSARY.html) responsibilities [](GLOSSARY.html) in [](GLOSSARY.html)
    simple, testable [](GLOSSARY.html) entities [](GLOSSARY.html) while [](GLOSSARY.html)
    moving all [](GLOSSARY.html) logic [](GLOSSARY.html) away [](GLOSSARY.html) from
    [](GLOSSARY.html) the [](GLOSSARY.html) part [](GLOSSARY.html) that [](GLOSSARY.html)
    is [](GLOSSARY.html) most [](GLOSSARY.html) difficult [](GLOSSARY.html) to [](GLOSSARY.html)
    test, which [](GLOSSARY.html) is [](GLOSSARY.html) the [](GLOSSARY.html) View.
  id: totrans-822
  prefs: []
  type: TYPE_NORMAL
  zh: 目标是将责任划分为简单、可测试的实体，同时将所有逻辑从最难测试的部分（即视图）中移开。
- en: 'Taligent [](GLOSSARY.html) MVP [](GLOSSARY.html) organizes [](GLOSSARY.html)
    entities [](GLOSSARY.html) so [](GLOSSARY.html) that [](GLOSSARY.html) they [](GLOSSARY.html)
    can [](GLOSSARY.html) be [](GLOSSARY.html) divided [](GLOSSARY.html) into [](GLOSSARY.html)
    three [](GLOSSARY.html) classes: A [](GLOSSARY.html) data [](GLOSSARY.html) oriented
    [](GLOSSARY.html) class, a [](GLOSSARY.html) GUI [](GLOSSARY.html) oriented [](GLOSSARY.html)
    class, and [](GLOSSARY.html) the [](GLOSSARY.html) Presenter. The [](GLOSSARY.html)
    Data [](GLOSSARY.html) oriented [](GLOSSARY.html) class [](GLOSSARY.html) is [](GLOSSARY.html)
    composed [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) following
    [](GLOSSARY.html) parts:'
  id: totrans-823
  prefs: []
  type: TYPE_NORMAL
  zh: Taligent MVP将实体组织起来，使它们可以分为三类：一个面向数据的类，一个面向GUI的类，以及Presenter。面向数据的类由以下部分组成：
- en: A **Model**, whose [](GLOSSARY.html) role [](GLOSSARY.html) is [](GLOSSARY.html)
    purely [](GLOSSARY.html) of [](GLOSSARY.html) business.
  id: totrans-824
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个**模型**，其角色纯粹是业务。
- en: A **Selection**, holding [](GLOSSARY.html) information [](GLOSSARY.html) about
    [](GLOSSARY.html) the [](GLOSSARY.html) subset [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) Model [](GLOSSARY.html) that [](GLOSSARY.html) will [](GLOSSARY.html)
    be [](GLOSSARY.html) affected [](GLOSSARY.html) by [](GLOSSARY.html) user's [](GLOSSARY.html)
    actions
  id: totrans-825
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个**选择**，保存有关用户操作影响的模型子集的信息
- en: A [](GLOSSARY.html) set [](GLOSSARY.html) of **Commands**, encapsulating [](GLOSSARY.html)
    operations [](GLOSSARY.html) that [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html)
    performed [](GLOSSARY.html) on the [](GLOSSARY.html) Model [](GLOSSARY.html) according
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) Selection, and [](GLOSSARY.html)
    supporting [](GLOSSARY.html) undo/redo [](GLOSSARY.html) semantics.
  id: totrans-826
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一组**命令**，封装了根据选择在模型上执行的操作，并支持撤销/重做语义。
- en: The [](GLOSSARY.html) GUI [](GLOSSARY.html) oriented [](GLOSSARY.html) class
    [](GLOSSARY.html) is [](GLOSSARY.html) instead [](GLOSSARY.html) composed [](GLOSSARY.html)
    of
  id: totrans-827
  prefs: []
  type: TYPE_NORMAL
  zh: GUI导向的类实际上是由
- en: a [](GLOSSARY.html) View, representing [](GLOSSARY.html) the [](GLOSSARY.html)
    content [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) Model, and
    [](GLOSSARY.html) accessing [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html)
    directly.
  id: totrans-828
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 视图，表示模型的内容，并直接访问模型。
- en: Interactors, mapping [](GLOSSARY.html) UI [](GLOSSARY.html) events [](GLOSSARY.html)
    at [](GLOSSARY.html) either [](GLOSSARY.html) low (mouse [](GLOSSARY.html) click,
    keyboard press) or [](GLOSSARY.html) high [](GLOSSARY.html) level (menu [](GLOSSARY.html)
    entry [](GLOSSARY.html) choice, click [](GLOSSARY.html) and [](GLOSSARY.html)
    drag [](GLOSSARY.html) selection) into [](GLOSSARY.html) actual commands [](GLOSSARY.html)
    to [](GLOSSARY.html) execute [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html)
    model.
  id: totrans-829
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 交互器，将界面事件（[GLOSSARY.html](https://example.org/glossary.html)）映射为低级（鼠标点击，键盘按键）或高级（菜单项选择，点击并拖动选择）命令以在模型上执行。
- en: Finally, the [](GLOSSARY.html) Presenter [](GLOSSARY.html) class [](GLOSSARY.html)
    only [](GLOSSARY.html) contains [](GLOSSARY.html) the [](GLOSSARY.html) Presenter,
    which [](GLOSSARY.html) is [](GLOSSARY.html) an overarching [](GLOSSARY.html)
    director [](GLOSSARY.html) object [](GLOSSARY.html) orchestrating [](GLOSSARY.html)
    the [](GLOSSARY.html) interaction [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    above [](GLOSSARY.html) objects. Generally, there's [](GLOSSARY.html) a [](GLOSSARY.html)
    Presenter [](GLOSSARY.html) for [](GLOSSARY.html) every [](GLOSSARY.html) View.
  id: totrans-830
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，Presenter类仅包含Presenter，它是一个总体指导对象，指导上述对象的交互。通常，每个视图都有一个Presenter。
- en: Having [](GLOSSARY.html) this [](GLOSSARY.html) structure [](GLOSSARY.html)
    has [](GLOSSARY.html) the [](GLOSSARY.html) advantage [](GLOSSARY.html) of [](GLOSSARY.html)
    distinguishing [](GLOSSARY.html) the [](GLOSSARY.html) range [](GLOSSARY.html)
    of [](GLOSSARY.html) application of [](GLOSSARY.html) a [](GLOSSARY.html) given
    [](GLOSSARY.html) operation [](GLOSSARY.html) vs. the [](GLOSSARY.html) operation
    [](GLOSSARY.html) itself, through [](GLOSSARY.html) the [](GLOSSARY.html) Selection/Command
    [](GLOSSARY.html) distinction. This [](GLOSSARY.html) simplifies [](GLOSSARY.html)
    the [](GLOSSARY.html) code, and [](GLOSSARY.html) solves [](GLOSSARY.html) notification
    [](GLOSSARY.html) issues [](GLOSSARY.html) so [](GLOSSARY.html) that [](GLOSSARY.html)
    notification [](GLOSSARY.html) is sent [](GLOSSARY.html) only [](GLOSSARY.html)
    when [](GLOSSARY.html) the [](GLOSSARY.html) full [](GLOSSARY.html) operation
    [](GLOSSARY.html) is [](GLOSSARY.html) performed [](GLOSSARY.html) on [](GLOSSARY.html)
    all [](GLOSSARY.html) members [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    selection.
  id: totrans-831
  prefs: []
  type: TYPE_NORMAL
  zh: 拥有这种结构的优势在于通过选择/命令区分来区分给定操作的应用范围与操作本身。这简化了代码，并解决了通知问题，使得只有在对选择的所有成员执行完整操作时才发送通知。
- en: Note [](GLOSSARY.html) that [](GLOSSARY.html) the [](GLOSSARY.html) MVP [](GLOSSARY.html)
    selection [](GLOSSARY.html) is [](GLOSSARY.html) not [](GLOSSARY.html) a [](GLOSSARY.html)
    Selection [](GLOSSARY.html) Model. It [](GLOSSARY.html) describes [](GLOSSARY.html)
    the [](GLOSSARY.html) selected items [](GLOSSARY.html) in [](GLOSSARY.html) the
    [](GLOSSARY.html) Model [](GLOSSARY.html) on [](GLOSSARY.html) which [](GLOSSARY.html)
    a [](GLOSSARY.html) command [](GLOSSARY.html) is [](GLOSSARY.html) applied, but
    [](GLOSSARY.html) the [](GLOSSARY.html) visual [](GLOSSARY.html) representation
    of [](GLOSSARY.html) this [](GLOSSARY.html) selection [](GLOSSARY.html) is [](GLOSSARY.html)
    in [](GLOSSARY.html) charge [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    View. The [](GLOSSARY.html) Presenter [](GLOSSARY.html) is [](GLOSSARY.html) in
    [](GLOSSARY.html) charge [](GLOSSARY.html) of [](GLOSSARY.html) obtaining that
    [](GLOSSARY.html) representation [](GLOSSARY.html) from [](GLOSSARY.html) the
    [](GLOSSARY.html) View, convert [](GLOSSARY.html) it [](GLOSSARY.html) into [](GLOSSARY.html)
    a [](GLOSSARY.html) MVP [](GLOSSARY.html) selection, and [](GLOSSARY.html) operate
    the [](GLOSSARY.html) commands [](GLOSSARY.html) with [](GLOSSARY.html) it. This
    [](GLOSSARY.html) results [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html)
    impossibility [](GLOSSARY.html) to [](GLOSSARY.html) share [](GLOSSARY.html) the
    [](GLOSSARY.html) visual Selection [](GLOSSARY.html) among [](GLOSSARY.html) Presenters.
  id: totrans-832
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，MVP选择不是选择模型。它描述了模型中选定的项目，对其应用命令，但这种选择的视觉表示由视图负责。Presenter负责从视图获取该表示，将其转换为MVP选择，并使用它执行命令。这导致无法在Presenter之间共享视觉选择。
- en: FIXME [](GLOSSARY.html) excessive [](GLOSSARY.html) confusion [](GLOSSARY.html)
    and [](GLOSSARY.html) overload [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    terms "class", "object", "entity"
  id: totrans-833
  prefs: []
  type: TYPE_NORMAL
  zh: 修复过多的混乱和术语"class"、"object"、"entity"的过载。
- en: Presenter [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html) coordinator
    [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) process. One [](GLOSSARY.html)
    presenter [](GLOSSARY.html) per [](GLOSSARY.html) each [](GLOSSARY.html) view.
  id: totrans-834
  prefs: []
  type: TYPE_NORMAL
  zh: 主持人[](GLOSSARY.html)作为[](GLOSSARY.html)流程的[](GLOSSARY.html)协调者。每个视图对应一个主持人。
- en: 'FIXME: widgets [](GLOSSARY.html) including [](GLOSSARY.html) both [](GLOSSARY.html)
    view [](GLOSSARY.html) and [](GLOSSARY.html) controller [](GLOSSARY.html) role.
    Presenter [](GLOSSARY.html) performs the [](GLOSSARY.html) active [](GLOSSARY.html)
    role [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html) model [](GLOSSARY.html)
    modification. presenter [](GLOSSARY.html) is [](GLOSSARY.html) basically [](GLOSSARY.html)
    an [](GLOSSARY.html) application [](GLOSSARY.html) model.'
  id: totrans-835
  prefs: []
  type: TYPE_NORMAL
  zh: 修复：小部件包括视图和控制器角色。主持人在模型修改中扮演着积极的角色。主持人基本上是一个应用程序模型。
- en: chopped [](GLOSSARY.html) up [](GLOSSARY.html) the [](GLOSSARY.html) old [](GLOSSARY.html)
    MVC [](GLOSSARY.html) roles [](GLOSSARY.html) and [](GLOSSARY.html) reassigned.
    It [](GLOSSARY.html) seems [](GLOSSARY.html) like [](GLOSSARY.html) MVC, but [](GLOSSARY.html)
    its [](GLOSSARY.html) objects aggregate [](GLOSSARY.html) different [](GLOSSARY.html)
    responsibilities.
  id: totrans-836
  prefs: []
  type: TYPE_NORMAL
  zh: 分解了旧的MVC角色并重新分配。看起来像MVC，但其对象聚合了不同的责任。
- en: Presenter Adapter View
  id: totrans-837
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 主持人 适配器 视图
- en: Presenter-Adapter-View
  id: totrans-838
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 主持人-适配器-视图
- en: Sometimes, in [](GLOSSARY.html) the [](GLOSSARY.html) management [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) visual [](GLOSSARY.html) aspect [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) view, it [](GLOSSARY.html) pays [](GLOSSARY.html)
    off [](GLOSSARY.html) to [](GLOSSARY.html) extract [](GLOSSARY.html) some [](GLOSSARY.html)
    of the [](GLOSSARY.html) code [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    presenter [](GLOSSARY.html) and [](GLOSSARY.html) isolate [](GLOSSARY.html) it
    [](GLOSSARY.html) into [](GLOSSARY.html) a [](GLOSSARY.html) separate [](GLOSSARY.html)
    adapter [](GLOSSARY.html) object. This [](GLOSSARY.html) adapter object [](GLOSSARY.html)
    encapsulates [](GLOSSARY.html) the [](GLOSSARY.html) logic [](GLOSSARY.html) for
    [](GLOSSARY.html) some [](GLOSSARY.html) visual [](GLOSSARY.html) representation.
    The [](GLOSSARY.html) presenter, instead [](GLOSSARY.html) of [](GLOSSARY.html)
    talking [](GLOSSARY.html) directly [](GLOSSARY.html) to [](GLOSSARY.html) the
    [](GLOSSARY.html) View, talks [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html)
    Adapter [](GLOSSARY.html) that [](GLOSSARY.html) transforms [](GLOSSARY.html)
    this request [](GLOSSARY.html) into [](GLOSSARY.html) a [](GLOSSARY.html) proper
    [](GLOSSARY.html) rendering [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html)
    view.
  id: totrans-839
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，在视图的视觉方面的管理中，将主持人的一些代码提取出来并将其隔离到一个单独的适配器对象中是值得的。这个适配器对象封装了一些视觉表示的逻辑。主持人，而不是直接与视图交谈，与将这个请求转换为视图上的适当渲染的适配器交谈。
- en: For [](GLOSSARY.html) example, if [](GLOSSARY.html) we [](GLOSSARY.html) want
    [](GLOSSARY.html) to [](GLOSSARY.html) color [](GLOSSARY.html) a [](GLOSSARY.html)
    label [](GLOSSARY.html) red [](GLOSSARY.html) when [](GLOSSARY.html) a [](GLOSSARY.html)
    value [](GLOSSARY.html) is [](GLOSSARY.html) too [](GLOSSARY.html) high, the [](GLOSSARY.html)
    presenter can [](GLOSSARY.html) use [](GLOSSARY.html) an [](GLOSSARY.html) adapter
    [](GLOSSARY.html) where [](GLOSSARY.html) the [](GLOSSARY.html) logic [](GLOSSARY.html)
    for [](GLOSSARY.html) setting [](GLOSSARY.html) something [](GLOSSARY.html) to
    [](GLOSSARY.html) red [](GLOSSARY.html) is [](GLOSSARY.html) according [](GLOSSARY.html)
    to [](GLOSSARY.html) the [](GLOSSARY.html) value. the [](GLOSSARY.html) presenter
    [](GLOSSARY.html) sets [](GLOSSARY.html) the [](GLOSSARY.html) value [](GLOSSARY.html)
    on [](GLOSSARY.html) the [](GLOSSARY.html) adapter, which [](GLOSSARY.html) in
    [](GLOSSARY.html) turns [](GLOSSARY.html) sets [](GLOSSARY.html) the [](GLOSSARY.html)
    value [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) view and [](GLOSSARY.html)
    changes [](GLOSSARY.html) the [](GLOSSARY.html) color [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) label [](GLOSSARY.html) appropriately.
  id: totrans-840
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果我们想在值过高时将标签标记为红色，主持人可以使用一个适配器，其中设置某些东西为红色的逻辑是根据值来的。主持人在适配器上设置值，适配器反过来在视图上设置值并相应地更改标签的颜色。
- en: The [](GLOSSARY.html) adapter [](GLOSSARY.html) needs [](GLOSSARY.html) not
    [](GLOSSARY.html) to [](GLOSSARY.html) know [](GLOSSARY.html) the [](GLOSSARY.html)
    business [](GLOSSARY.html) rules. The [](GLOSSARY.html) adapter [](GLOSSARY.html)
    can [](GLOSSARY.html) query [](GLOSSARY.html) the [](GLOSSARY.html) model to [](GLOSSARY.html)
    ask [](GLOSSARY.html) if [](GLOSSARY.html) a [](GLOSSARY.html) given [](GLOSSARY.html)
    value [](GLOSSARY.html) is [](GLOSSARY.html) above [](GLOSSARY.html) or [](GLOSSARY.html)
    below [](GLOSSARY.html) a [](GLOSSARY.html) certain [](GLOSSARY.html) range, and
    [](GLOSSARY.html) choose [](GLOSSARY.html) the [](GLOSSARY.html) color [](GLOSSARY.html)
    appropriately.
  id: totrans-841
  prefs: []
  type: TYPE_NORMAL
  zh: 适配器不需要了解业务规则。适配器可以查询模型，询问给定值是否在某个范围之上或之下，并相应地选择颜色。
- en: Once [](GLOSSARY.html) again, the [](GLOSSARY.html) adaptor [](GLOSSARY.html)
    is [](GLOSSARY.html) simple [](GLOSSARY.html) to [](GLOSSARY.html) test.
  id: totrans-842
  prefs: []
  type: TYPE_NORMAL
  zh: 再次强调，适配器很容易测试。
- en: In [](GLOSSARY.html) addition, one [](GLOSSARY.html) can [](GLOSSARY.html) extract
    [](GLOSSARY.html) an "adapter [](GLOSSARY.html) model" and [](GLOSSARY.html) have
    [](GLOSSARY.html) the [](GLOSSARY.html) presenter [](GLOSSARY.html) push [](GLOSSARY.html)
    data [](GLOSSARY.html) into [](GLOSSARY.html) the [](GLOSSARY.html) adapter model.
    The [](GLOSSARY.html) adapter [](GLOSSARY.html) then [](GLOSSARY.html) takes [](GLOSSARY.html)
    these [](GLOSSARY.html) data, and [](GLOSSARY.html) push [](GLOSSARY.html) them
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) specific [](GLOSSARY.html)
    part [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) view.
  id: totrans-843
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，可以提取“适配器模型”，并让主持人将数据推送到适配器模型中。然后适配器获取这些数据，并将它们推送到视图的特定部分。
- en: Model View Viewmodel
  id: totrans-844
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 模型 视图 视图模型
- en: Model-View-ViewModel (Model-View-Binder)
  id: totrans-845
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 模型-视图-视图模型（模型-视图-绑定器）
- en: The [](GLOSSARY.html) MVVM [](GLOSSARY.html) is [](GLOSSARY.html) a [](GLOSSARY.html)
    specialization [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) Presentation
    [](GLOSSARY.html) Model. It [](GLOSSARY.html) is [](GLOSSARY.html) rather [](GLOSSARY.html)
    popular [](GLOSSARY.html) in the [](GLOSSARY.html) Windows [](GLOSSARY.html) world,
    particularly [](GLOSSARY.html) WPF [](GLOSSARY.html) and [](GLOSSARY.html) Silverlight.
  id: totrans-846
  prefs: []
  type: TYPE_NORMAL
  zh: '[MVVM](GLOSSARY.html)是演示模型的一种专业化。它在Windows世界中相当流行，特别是在WPF和Silverlight中。'
- en: MVVM [](GLOSSARY.html) has [](GLOSSARY.html) a [](GLOSSARY.html) traditional
    [](GLOSSARY.html) model, an [](GLOSSARY.html) active [](GLOSSARY.html) view (generally
    [](GLOSSARY.html) declared [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html)
    XAML description) that [](GLOSSARY.html) handles [](GLOSSARY.html) its [](GLOSSARY.html)
    own [](GLOSSARY.html) events [](GLOSSARY.html) internally [](GLOSSARY.html) and
    [](GLOSSARY.html) acts [](GLOSSARY.html) both [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) Model and [](GLOSSARY.html) the [](GLOSSARY.html) ViewModel.
    The [](GLOSSARY.html) View [](GLOSSARY.html) and [](GLOSSARY.html) the [](GLOSSARY.html)
    ViewModel [](GLOSSARY.html) contents [](GLOSSARY.html) are [](GLOSSARY.html) bound
    [](GLOSSARY.html) together [](GLOSSARY.html) in [](GLOSSARY.html) a direct [](GLOSSARY.html)
    simple [](GLOSSARY.html) relationship [](GLOSSARY.html) through [](GLOSSARY.html)
    bindings. A [](GLOSSARY.html) checkbox [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) view [](GLOSSARY.html) can [](GLOSSARY.html) be bound [](GLOSSARY.html)
    to [](GLOSSARY.html) a [](GLOSSARY.html) boolean [](GLOSSARY.html) field [](GLOSSARY.html)
    in [](GLOSSARY.html) the [](GLOSSARY.html) ViewModel. In [](GLOSSARY.html) other
    [](GLOSSARY.html) words, the [](GLOSSARY.html) ViewModel [](GLOSSARY.html) is
    [](GLOSSARY.html) the “Model [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    View” intended [](GLOSSARY.html) for [](GLOSSARY.html) the [](GLOSSARY.html) representation
    [](GLOSSARY.html) the [](GLOSSARY.html) view [](GLOSSARY.html) has [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) data. The [](GLOSSARY.html) Model,
    in [](GLOSSARY.html) fact, might [](GLOSSARY.html) contain [](GLOSSARY.html) a
    [](GLOSSARY.html) different [](GLOSSARY.html) representation [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) values (for example, in [](GLOSSARY.html)
    the [](GLOSSARY.html) Model [](GLOSSARY.html) vision [](GLOSSARY.html) of [](GLOSSARY.html)
    things, that [](GLOSSARY.html) checkbox [](GLOSSARY.html) could [](GLOSSARY.html)
    represent [](GLOSSARY.html) the existence [](GLOSSARY.html) of [](GLOSSARY.html)
    a [](GLOSSARY.html) reference [](GLOSSARY.html) between [](GLOSSARY.html) two
    [](GLOSSARY.html) Model [](GLOSSARY.html) objects). The [](GLOSSARY.html) ViewModel
    [](GLOSSARY.html) is responsible [](GLOSSARY.html) of [](GLOSSARY.html) mapping
    [](GLOSSARY.html) its [](GLOSSARY.html) state (the [](GLOSSARY.html) boolean)
    to [](GLOSSARY.html) setting [](GLOSSARY.html) the [](GLOSSARY.html) reference,
    and vice-versa.
  id: totrans-847
  prefs: []
  type: TYPE_NORMAL
  zh: MVVM [模型-视图-视图模型](GLOSSARY.html) 有一个传统的模型，一个活跃的视图（通常声明为 XAML 描述），它在内部处理自己的事件，并且同时作用于模型和视图模型。视图和视图模型的内容通过绑定直接简单的关系绑定在一起。视图上的复选框可以绑定到视图模型中的布尔字段。换句话说，视图模型是“视图的模型”，用于表示视图对数据的看法。实际上，模型可能包含对值的不同表示（例如，在模型的视觉中，该复选框可以表示两个模型对象之间的引用的存在）。视图模型负责将其状态（布尔值）映射到设置引用，并反之。
- en: Similar [](GLOSSARY.html) to [](GLOSSARY.html) Presentation [](GLOSSARY.html)
    Model/Application [](GLOSSARY.html) Model, however, the [](GLOSSARY.html) ViewModel
    [](GLOSSARY.html) has no [](GLOSSARY.html) explicit [](GLOSSARY.html) reference
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) View, nor [](GLOSSARY.html)
    explicit [](GLOSSARY.html) code [](GLOSSARY.html) to [](GLOSSARY.html) direct
    [](GLOSSARY.html) the [](GLOSSARY.html) View. Instead, it [](GLOSSARY.html) uses
    [](GLOSSARY.html) data [](GLOSSARY.html) binding, which [](GLOSSARY.html) offloads
    [](GLOSSARY.html) the [](GLOSSARY.html) sync [](GLOSSARY.html) task [](GLOSSARY.html)
    from [](GLOSSARY.html) the [](GLOSSARY.html) developer.
  id: totrans-848
  prefs: []
  type: TYPE_NORMAL
  zh: 与[展示模型/应用模型](GLOSSARY.html)类似，但是[视图模型](GLOSSARY.html)没有明确的对[视图](GLOSSARY.html)的引用，也没有明确的代码来指导[视图](GLOSSARY.html)。相反，它使用数据绑定，将同步任务从开发人员身上卸载。
- en: View Controller View
  id: totrans-849
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 视图控制器视图
- en: View-Controller-View
  id: totrans-850
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 视图-控制器-视图
- en: A [](GLOSSARY.html) View-Controller-View [](GLOSSARY.html) is [](GLOSSARY.html)
    basically [](GLOSSARY.html) a [](GLOSSARY.html) Model-Controller-View [](GLOSSARY.html)
    where [](GLOSSARY.html) one [](GLOSSARY.html) of [](GLOSSARY.html) the Views [](GLOSSARY.html)
    is [](GLOSSARY.html) playing [](GLOSSARY.html) the [](GLOSSARY.html) part [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) Model [](GLOSSARY.html) for [](GLOSSARY.html)
    a [](GLOSSARY.html) specific [](GLOSSARY.html) interaction. This [](GLOSSARY.html)
    occurs when [](GLOSSARY.html) a [](GLOSSARY.html) View [](GLOSSARY.html) must
    [](GLOSSARY.html) interact [](GLOSSARY.html) with [](GLOSSARY.html) another [](GLOSSARY.html)
    View [](GLOSSARY.html) to [](GLOSSARY.html) orchestrate [](GLOSSARY.html) its
    [](GLOSSARY.html) behavior. A simple [](GLOSSARY.html) practical [](GLOSSARY.html)
    example [](GLOSSARY.html) is [](GLOSSARY.html) a [](GLOSSARY.html) Dialog [](GLOSSARY.html)
    for [](GLOSSARY.html) a [](GLOSSARY.html) Search [](GLOSSARY.html) functionality,
    and [](GLOSSARY.html) an [](GLOSSARY.html) Editor providing [](GLOSSARY.html)
    methods [](GLOSSARY.html) for [](GLOSSARY.html) this [](GLOSSARY.html) functionality.
    The [](GLOSSARY.html) two [](GLOSSARY.html) Views [](GLOSSARY.html) must [](GLOSSARY.html)
    interact [](GLOSSARY.html) so [](GLOSSARY.html) that when [](GLOSSARY.html) the
    [](GLOSSARY.html) user [](GLOSSARY.html) clicks [](GLOSSARY.html) on [](GLOSSARY.html)
    the “Search” button [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    Dialog, the [](GLOSSARY.html) Editor [](GLOSSARY.html) is directed [](GLOSSARY.html)
    to [](GLOSSARY.html) perform [](GLOSSARY.html) the [](GLOSSARY.html) search.
  id: totrans-851
  prefs: []
  type: TYPE_NORMAL
  zh: 视图-控制器-视图基本上是一个模型-控制器-视图，其中一个视图扮演特定交互的模型角色。当一个视图必须与另一个视图交互以编排其行为时，就会发生这种情况。一个简单的实际例子是用于搜索功能的对话框，以及为此功能提供方法的编辑器。这两个视图必须相互交互，以便当用户点击对话框的“搜索”按钮时，编辑器被指示执行搜索。
- en: Commands
  id: totrans-852
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 命令
- en: Commands
  id: totrans-853
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 命令
- en: Graphical [](GLOSSARY.html) interfaces [](GLOSSARY.html) generally [](GLOSSARY.html)
    provide [](GLOSSARY.html) Undo/Redo [](GLOSSARY.html) capabilities. This [](GLOSSARY.html)
    is generally [](GLOSSARY.html) and [](GLOSSARY.html) easily [](GLOSSARY.html)
    implemented [](GLOSSARY.html) with [](GLOSSARY.html) the [](GLOSSARY.html) Command
    [](GLOSSARY.html) pattern. The [](GLOSSARY.html) controller, instead [](GLOSSARY.html)
    of [](GLOSSARY.html) directly [](GLOSSARY.html) performing [](GLOSSARY.html) an
    [](GLOSSARY.html) operation [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html)
    Model, will [](GLOSSARY.html) instantiate [](GLOSSARY.html) a Command [](GLOSSARY.html)
    object [](GLOSSARY.html) out [](GLOSSARY.html) of [](GLOSSARY.html) a [](GLOSSARY.html)
    palette [](GLOSSARY.html) of [](GLOSSARY.html) possible [](GLOSSARY.html) Commands.
    The [](GLOSSARY.html) command [](GLOSSARY.html) object [](GLOSSARY.html) will
    be [](GLOSSARY.html) instantiated [](GLOSSARY.html) by [](GLOSSARY.html) passing
    [](GLOSSARY.html) a [](GLOSSARY.html) reference [](GLOSSARY.html) to [](GLOSSARY.html)
    the [](GLOSSARY.html) Model. This [](GLOSSARY.html) object [](GLOSSARY.html) will
    [](GLOSSARY.html) normally have [](GLOSSARY.html) two [](GLOSSARY.html) methods
    [](GLOSSARY.html) execute(), and [](GLOSSARY.html) undo(). The [](GLOSSARY.html)
    Controller [](GLOSSARY.html) will [](GLOSSARY.html) instantiate [](GLOSSARY.html)
    the command, and [](GLOSSARY.html) submit [](GLOSSARY.html) it [](GLOSSARY.html)
    to [](GLOSSARY.html) a [](GLOSSARY.html) Tracking [](GLOSSARY.html) object. The
    [](GLOSSARY.html) tracking [](GLOSSARY.html) object [](GLOSSARY.html) will [](GLOSSARY.html)
    call execute() on [](GLOSSARY.html) the [](GLOSSARY.html) Command, and [](GLOSSARY.html)
    immediately [](GLOSSARY.html) push [](GLOSSARY.html) it [](GLOSSARY.html) into
    [](GLOSSARY.html) a [](GLOSSARY.html) stack. The [](GLOSSARY.html) Tracking will
    [](GLOSSARY.html) have [](GLOSSARY.html) two [](GLOSSARY.html) stacks, one [](GLOSSARY.html)
    for [](GLOSSARY.html) undo, and [](GLOSSARY.html) the [](GLOSSARY.html) other
    [](GLOSSARY.html) for [](GLOSSARY.html) redo. When [](GLOSSARY.html) the [](GLOSSARY.html)
    user selects [](GLOSSARY.html) undo, the [](GLOSSARY.html) Tracker [](GLOSSARY.html)
    will [](GLOSSARY.html) be [](GLOSSARY.html) requested [](GLOSSARY.html) to [](GLOSSARY.html)
    pop [](GLOSSARY.html) one [](GLOSSARY.html) command [](GLOSSARY.html) from [](GLOSSARY.html)
    the [](GLOSSARY.html) undo stack, call [](GLOSSARY.html) its [](GLOSSARY.html)
    redo() method, and [](GLOSSARY.html) push [](GLOSSARY.html) the [](GLOSSARY.html)
    command [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html) redo [](GLOSSARY.html)
    stack. Redo can [](GLOSSARY.html) be [](GLOSSARY.html) implemented [](GLOSSARY.html)
    by [](GLOSSARY.html) undoing [](GLOSSARY.html) the [](GLOSSARY.html) actual [](GLOSSARY.html)
    process, or [](GLOSSARY.html) by [](GLOSSARY.html) storing [](GLOSSARY.html) the
    [](GLOSSARY.html) old [](GLOSSARY.html) state and [](GLOSSARY.html) reverting
    [](GLOSSARY.html) it. The [](GLOSSARY.html) memento [](GLOSSARY.html) pattern
    [](GLOSSARY.html) is [](GLOSSARY.html) here [](GLOSSARY.html) useful [](GLOSSARY.html)
    to [](GLOSSARY.html) save [](GLOSSARY.html) the [](GLOSSARY.html) state [](GLOSSARY.html)
    of [](GLOSSARY.html) the Model [](GLOSSARY.html) before [](GLOSSARY.html) modification,
    but [](GLOSSARY.html) of [](GLOSSARY.html) course [](GLOSSARY.html) it [](GLOSSARY.html)
    can [](GLOSSARY.html) be [](GLOSSARY.html) demanding [](GLOSSARY.html) in [](GLOSSARY.html)
    memory occupation.
  id: totrans-854
  prefs: []
  type: TYPE_NORMAL
  zh: 图形界面通常提供撤销/重做功能。这通常可以很容易地通过命令模式实现。控制器不直接在模型上执行操作，而是从可能的命令列表中实例化一个命令对象。命令对象将通过向模型传递引用来实例化。该对象通常会有两个方法execute()和undo()。控制器将实例化命令，并将其提交给跟踪对象。跟踪对象将在命令上调用execute()，并立即将其推入堆栈。跟踪将有两个堆栈，一个用于撤销，另一个用于重做。当用户选择撤销时，跟踪器将被要求从撤销堆栈中弹出一个命令，调用其redo()方法，并将命令推入重做堆栈。重做可以通过撤销实际过程或存储旧状态并恢复来实现。这里的备忘录模式对于在修改之前保存模型状态很有用，但当然在内存占用方面可能要求较高。
- en: 'Using [](GLOSSARY.html) the [](GLOSSARY.html) command [](GLOSSARY.html) pattern
    [](GLOSSARY.html) to [](GLOSSARY.html) modify [](GLOSSARY.html) the [](GLOSSARY.html)
    model. The [](GLOSSARY.html) model [](GLOSSARY.html) can [](GLOSSARY.html) be
    [](GLOSSARY.html) a [](GLOSSARY.html) factory [](GLOSSARY.html) for the [](GLOSSARY.html)
    commands. The [](GLOSSARY.html) command [](GLOSSARY.html) can [](GLOSSARY.html)
    perform [](GLOSSARY.html) notification [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) listeners [](GLOSSARY.html) instead [](GLOSSARY.html) of
    the [](GLOSSARY.html) model. Another [](GLOSSARY.html) form [](GLOSSARY.html)
    of [](GLOSSARY.html) qualification: the [](GLOSSARY.html) model [](GLOSSARY.html)
    forwards [](GLOSSARY.html) the [](GLOSSARY.html) command [](GLOSSARY.html) after
    execution [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) View. Views
    [](GLOSSARY.html) can [](GLOSSARY.html) analyze [](GLOSSARY.html) the [](GLOSSARY.html)
    command [](GLOSSARY.html) to [](GLOSSARY.html) respons [](GLOSSARY.html) appropriately.'
  id: totrans-855
  prefs: []
  type: TYPE_NORMAL
  zh: 使用命令模式来修改模型。模型可以是命令的工厂。命令可以通知监听器而不是模型。另一种资格形式：模型在执行后将命令转发给视图。视图可以分析命令以做出相应的响应。
- en: a [](GLOSSARY.html) command [](GLOSSARY.html) class [](GLOSSARY.html) normally
    [](GLOSSARY.html) has [](GLOSSARY.html) execute() and [](GLOSSARY.html) undo()
    methods. it's [](GLOSSARY.html) a [](GLOSSARY.html) functor.
  id: totrans-856
  prefs: []
  type: TYPE_NORMAL
  zh: 一个[命令](GLOSSARY.html)类通常具有execute()和undo()方法。它是一个函数对象。
- en: execute [](GLOSSARY.html) does [](GLOSSARY.html) a [](GLOSSARY.html) given [](GLOSSARY.html)
    action. undo [](GLOSSARY.html) restores [](GLOSSARY.html) the [](GLOSSARY.html)
    state [](GLOSSARY.html) as [](GLOSSARY.html) it [](GLOSSARY.html) was [](GLOSSARY.html)
    before. undo [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html) done
    [](GLOSSARY.html) either [](GLOSSARY.html) by [](GLOSSARY.html) algorithmic [](GLOSSARY.html)
    rollback, or [](GLOSSARY.html) by [](GLOSSARY.html) just [](GLOSSARY.html) restoring
    [](GLOSSARY.html) a memento [](GLOSSARY.html) saved [](GLOSSARY.html) at [](GLOSSARY.html)
    execute [](GLOSSARY.html) time.
  id: totrans-857
  prefs: []
  type: TYPE_NORMAL
  zh: execute执行给定的动作。undo将状态恢复到之前的状态。撤销可以通过算法回滚或者仅恢复在执行时保存的备忘录来完成。
- en: The [](GLOSSARY.html) parameters [](GLOSSARY.html) are [](GLOSSARY.html) defined
    [](GLOSSARY.html) at [](GLOSSARY.html) instantiation [](GLOSSARY.html) time. execute
    [](GLOSSARY.html) accepts [](GLOSSARY.html) no [](GLOSSARY.html) parameters but
    [](GLOSSARY.html) it [](GLOSSARY.html) may [](GLOSSARY.html) return [](GLOSSARY.html)
    a [](GLOSSARY.html) state (success, failure). This [](GLOSSARY.html) state [](GLOSSARY.html)
    will [](GLOSSARY.html) be [](GLOSSARY.html) needed [](GLOSSARY.html) to [](GLOSSARY.html)
    decide what [](GLOSSARY.html) to [](GLOSSARY.html) do [](GLOSSARY.html) with [](GLOSSARY.html)
    the [](GLOSSARY.html) executed [](GLOSSARY.html) command (add [](GLOSSARY.html)
    to [](GLOSSARY.html) the [](GLOSSARY.html) undo [](GLOSSARY.html) queue [](GLOSSARY.html)
    or [](GLOSSARY.html) not).
  id: totrans-858
  prefs: []
  type: TYPE_NORMAL
  zh: 参数在实例化时定义。execute接受无参数，但可能返回状态（成功，失败）。这个状态将被需要来决定对执行的命令该做什么（添加到撤销队列还是不添加）。
- en: 'two [](GLOSSARY.html) stacks: undo [](GLOSSARY.html) queue [](GLOSSARY.html)
    and [](GLOSSARY.html) redo [](GLOSSARY.html) queue.'
  id: totrans-859
  prefs: []
  type: TYPE_NORMAL
  zh: 两个栈：撤销队列和重做队列。
- en: execute() push [](GLOSSARY.html) into [](GLOSSARY.html) undo
  id: totrans-860
  prefs: []
  type: TYPE_NORMAL
  zh: execute()将操作推入撤销队列。
- en: 'at [](GLOSSARY.html) undo: pop [](GLOSSARY.html) from [](GLOSSARY.html) undo
    command.undo() push [](GLOSSARY.html) into [](GLOSSARY.html) redo'
  id: totrans-861
  prefs: []
  type: TYPE_NORMAL
  zh: '在 [](GLOSSARY.html) 撤销: 从 [](GLOSSARY.html) 撤销命令 `pop` [](GLOSSARY.html) 到
    [](GLOSSARY.html) redo 的命令.undo() 压入 [](GLOSSARY.html) 到 [](GLOSSARY.html) redo'
- en: at [](GLOSSARY.html) redo pop [](GLOSSARY.html) from [](GLOSSARY.html) redo
    command.execute() push [](GLOSSARY.html) into [](GLOSSARY.html) undo
  id: totrans-862
  prefs: []
  type: TYPE_NORMAL
  zh: 在 [](GLOSSARY.html) 重新执行 `pop` [](GLOSSARY.html) 命令的时候，从 [](GLOSSARY.html) 重新执行命令的命令
    `pop` [](GLOSSARY.html) 到 [](GLOSSARY.html) redo 的命令执行() 压入 [](GLOSSARY.html)
    到 [](GLOSSARY.html) undo
- en: 'Association [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) command
    [](GLOSSARY.html) to [](GLOSSARY.html) the [](GLOSSARY.html) model: the [](GLOSSARY.html)
    model [](GLOSSARY.html) defines [](GLOSSARY.html) and [](GLOSSARY.html) offers
    [](GLOSSARY.html) creation [](GLOSSARY.html) of [](GLOSSARY.html) commands. The
    [](GLOSSARY.html) command [](GLOSSARY.html) can [](GLOSSARY.html) also [](GLOSSARY.html)
    acts [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html) notification [](GLOSSARY.html)
    agent (e.g. syncs [](GLOSSARY.html) the [](GLOSSARY.html) view) instead [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) model and [](GLOSSARY.html) can [](GLOSSARY.html)
    also [](GLOSSARY.html) act [](GLOSSARY.html) as [](GLOSSARY.html) a [](GLOSSARY.html)
    change [](GLOSSARY.html) object.'
  id: totrans-863
  prefs: []
  type: TYPE_NORMAL
  zh: '命令 [](GLOSSARY.html) 与 [](GLOSSARY.html) 模型 [](GLOSSARY.html) 的关联: 模型 [](GLOSSARY.html)
    定义 [](GLOSSARY.html) 并 [](GLOSSARY.html) 提供 [](GLOSSARY.html) 命令的创建。 命令 [](GLOSSARY.html)
    还可以充当通知代理（例如同步 [](GLOSSARY.html) 视图）而不是 [](GLOSSARY.html) 模型，并且 [](GLOSSARY.html)
    还可以充当变更对象。'
- en: FIXME [](GLOSSARY.html) Command [](GLOSSARY.html) is [](GLOSSARY.html) a [](GLOSSARY.html)
    general [](GLOSSARY.html) design [](GLOSSARY.html) pattern, we [](GLOSSARY.html)
    will [](GLOSSARY.html) present [](GLOSSARY.html) it [](GLOSSARY.html) here [](GLOSSARY.html)
    in [](GLOSSARY.html) the [](GLOSSARY.html) context [](GLOSSARY.html) of [](GLOSSARY.html)
    a [](GLOSSARY.html) MVC [](GLOSSARY.html) need.
  id: totrans-864
  prefs: []
  type: TYPE_NORMAL
  zh: FIXME [](GLOSSARY.html) 命令 [](GLOSSARY.html) 是 [](GLOSSARY.html) 一种 [](GLOSSARY.html)
    通用的 [](GLOSSARY.html) 设计 [](GLOSSARY.html) 模式，我们将 [](GLOSSARY.html) 在这里 [](GLOSSARY.html)
    在 [](GLOSSARY.html) MVC [](GLOSSARY.html) 需要的 [](GLOSSARY.html) 上下文中 [](GLOSSARY.html)
    展示 [](GLOSSARY.html) 它。
- en: Visual Editor
  id: totrans-865
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 可视化编辑器
- en: Visual Editor
  id: totrans-866
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 可视化编辑器
- en: Visual [](GLOSSARY.html) editor, or [](GLOSSARY.html) Qt [](GLOSSARY.html) delegate,
    is [](GLOSSARY.html) a [](GLOSSARY.html) factory [](GLOSSARY.html) class [](GLOSSARY.html)
    to [](GLOSSARY.html) create [](GLOSSARY.html) an [](GLOSSARY.html) editor [](GLOSSARY.html)
    for [](GLOSSARY.html) a [](GLOSSARY.html) proper [](GLOSSARY.html) editable [](GLOSSARY.html)
    entity.
  id: totrans-867
  prefs: []
  type: TYPE_NORMAL
  zh: 可视化 [](GLOSSARY.html) 编辑器，或者 [](GLOSSARY.html) Qt [](GLOSSARY.html) 代理，是 [](GLOSSARY.html)
    用于创建 [](GLOSSARY.html) 适当的可编辑 [](GLOSSARY.html) 实体的编辑器的工厂 [](GLOSSARY.html) 类。.
- en: Command Notification
  id: totrans-868
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 命令通知
- en: Command notifications
  id: totrans-869
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 命令通知
- en: Notification [](GLOSSARY.html) performed [](GLOSSARY.html) by [](GLOSSARY.html)
    the [](GLOSSARY.html) altering [](GLOSSARY.html) entities (commands) similar [](GLOSSARY.html)
    to [](GLOSSARY.html) passive [](GLOSSARY.html) model, where [](GLOSSARY.html)
    the [](GLOSSARY.html) altering [](GLOSSARY.html) entity [](GLOSSARY.html) is [](GLOSSARY.html)
    the [](GLOSSARY.html) plain [](GLOSSARY.html) controller.
  id: totrans-870
  prefs: []
  type: TYPE_NORMAL
  zh: 通知 [](GLOSSARY.html) 由 [](GLOSSARY.html) 修改 [](GLOSSARY.html) 实体（命令）执行，类似于 [](GLOSSARY.html)
    被动 [](GLOSSARY.html) 模型，其中 [](GLOSSARY.html) 修改 [](GLOSSARY.html) 实体 [](GLOSSARY.html)
    是 [](GLOSSARY.html) 简单的 [](GLOSSARY.html) 控制器。
- en: Qt MVC
  id: totrans-871
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Qt MVC
- en: Nokia Qt
  id: totrans-872
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 诺基亚 Qt
- en: Qt [](GLOSSARY.html) provides [](GLOSSARY.html) Views [](GLOSSARY.html) and
    [](GLOSSARY.html) associated [](GLOSSARY.html) Models, who [](GLOSSARY.html) are
    [](GLOSSARY.html) either [](GLOSSARY.html) tabular [](GLOSSARY.html) or [](GLOSSARY.html)
    hierarchical in [](GLOSSARY.html) nature. The [](GLOSSARY.html) framework [](GLOSSARY.html)
    also [](GLOSSARY.html) provides [](GLOSSARY.html) derived [](GLOSSARY.html) classes
    [](GLOSSARY.html) for [](GLOSSARY.html) Views, called Widgets. Widgets [](GLOSSARY.html)
    combine [](GLOSSARY.html) View [](GLOSSARY.html) and [](GLOSSARY.html) Model [](GLOSSARY.html)
    in [](GLOSSARY.html) a [](GLOSSARY.html) single [](GLOSSARY.html) class, allowing
    [](GLOSSARY.html) to [](GLOSSARY.html) store data [](GLOSSARY.html) directly [](GLOSSARY.html)
    into [](GLOSSARY.html) the [](GLOSSARY.html) view. This [](GLOSSARY.html) approach
    [](GLOSSARY.html) loses [](GLOSSARY.html) flexibility [](GLOSSARY.html) and [](GLOSSARY.html)
    ease [](GLOSSARY.html) of [](GLOSSARY.html) reuse of [](GLOSSARY.html) the [](GLOSSARY.html)
    data [](GLOSSARY.html) contents, but [](GLOSSARY.html) it [](GLOSSARY.html) can
    [](GLOSSARY.html) be [](GLOSSARY.html) convenient [](GLOSSARY.html) for [](GLOSSARY.html)
    some [](GLOSSARY.html) specific [](GLOSSARY.html) cases (for example, if [](GLOSSARY.html)
    you [](GLOSSARY.html) want [](GLOSSARY.html) to [](GLOSSARY.html) control [](GLOSSARY.html)
    addition [](GLOSSARY.html) and [](GLOSSARY.html) removal [](GLOSSARY.html) directly
    [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) widget). Qt [](GLOSSARY.html)
    has [](GLOSSARY.html) delegates, that [](GLOSSARY.html) are [](GLOSSARY.html)
    associated [](GLOSSARY.html) to [](GLOSSARY.html) views. Delegates [](GLOSSARY.html)
    are [](GLOSSARY.html) responsible [](GLOSSARY.html) for handling [](GLOSSARY.html)
    controller [](GLOSSARY.html) tasks, and [](GLOSSARY.html) in [](GLOSSARY.html)
    addition [](GLOSSARY.html) control [](GLOSSARY.html) rendering [](GLOSSARY.html)
    and [](GLOSSARY.html) editing [](GLOSSARY.html) of these [](GLOSSARY.html) views.
    A [](GLOSSARY.html) delegate [](GLOSSARY.html) renders [](GLOSSARY.html) data
    [](GLOSSARY.html) into [](GLOSSARY.html) the [](GLOSSARY.html) view [](GLOSSARY.html)
    with [](GLOSSARY.html) the [](GLOSSARY.html) paint() method, and creates [](GLOSSARY.html)
    editors [](GLOSSARY.html) for [](GLOSSARY.html) the [](GLOSSARY.html) data [](GLOSSARY.html)
    with [](GLOSSARY.html) createEditor(). Default [](GLOSSARY.html) Delegates [](GLOSSARY.html)
    are installed [](GLOSSARY.html) on [](GLOSSARY.html) every [](GLOSSARY.html) view.
    The [](GLOSSARY.html) model [](GLOSSARY.html) contains [](GLOSSARY.html) data
    [](GLOSSARY.html) classified [](GLOSSARY.html) in [](GLOSSARY.html) roles. Some
    roles [](GLOSSARY.html) are [](GLOSSARY.html) purely [](GLOSSARY.html) data [](GLOSSARY.html)
    oriented, while [](GLOSSARY.html) other [](GLOSSARY.html) roles (FontRole) are
    [](GLOSSARY.html) view-level information. The [](GLOSSARY.html) model [](GLOSSARY.html)
    is [](GLOSSARY.html) therefore [](GLOSSARY.html) responsible [](GLOSSARY.html)
    for [](GLOSSARY.html) influencing [](GLOSSARY.html) the [](GLOSSARY.html) visual
    appearance [](GLOSSARY.html) of [](GLOSSARY.html) thje [](GLOSSARY.html) view
    [](GLOSSARY.html) through [](GLOSSARY.html) the [](GLOSSARY.html) Role [](GLOSSARY.html)
    mechanism. Of [](GLOSSARY.html) course, this [](GLOSSARY.html) mechanism can [](GLOSSARY.html)
    also [](GLOSSARY.html) be [](GLOSSARY.html) implemented [](GLOSSARY.html) by [](GLOSSARY.html)
    a [](GLOSSARY.html) specialized [](GLOSSARY.html) delegate [](GLOSSARY.html) who
    [](GLOSSARY.html) translates [](GLOSSARY.html) the [](GLOSSARY.html) Data semantic
    [](GLOSSARY.html) into [](GLOSSARY.html) visual [](GLOSSARY.html) semantic.
  id: totrans-873
  prefs: []
  type: TYPE_NORMAL
  zh: Qt [提供](GLOSSARY.html) 视图 和 关联 模型，它们 可以 是 表格 或 分层 的 自然模式。 框架 还 提供了 视图 的 派生 类，称为小部件。
    小部件 将 视图 和 模型 结合在 一个 单独 的 类 中，允许 将 数据 直接 存储 到 视图 中。 这 种 方法 会 丧失 灵活性 和 数据 内容 的
    方便重复 使用，但 对 一些 特定 情况 可能 是 方便 的（例如，如果 您 想 直接 在 小部件 上 控制 添加 和 删除）。 Qt 有 委托，它们 与
    视图 相关联。 委托 负责 处理 控制器 任务，并 控制 这些 视图 的 渲染 和 编辑。 委托 通过 paint() 方法 将 数据 渲染 到 视图 中，并
    使用 createEditor() 创建 数据 的 编辑器。 默认 委托 安装 在 每个 视图 上。 模型 包含 根据 角色 分类 的 数据。 一些 角色
    是 纯粹 的 数据 导向，而 其他 角色（FontRole）是 视图级 信息。 因此，模型 负责 通过 角色 机制 影响 视图 的 视觉外观。 当然，这 种
    机制 也 可以 由 专门 的 委托 实现，该 委托 将 数据 语义 转换 为 视觉 语义。
- en: 'FIXME: For [](GLOSSARY.html) example, the [](GLOSSARY.html) QListView [](GLOSSARY.html)
    is [](GLOSSARY.html) a [](GLOSSARY.html) MV [](GLOSSARY.html) counterpart [](GLOSSARY.html)
    of [](GLOSSARY.html) QListWidget. There''s [](GLOSSARY.html) no [](GLOSSARY.html)
    controller [](GLOSSARY.html) in [](GLOSSARY.html) Qt, it [](GLOSSARY.html) doesn''t
    [](GLOSSARY.html) need [](GLOSSARY.html) any. In [](GLOSSARY.html) practice, Qt
    [](GLOSSARY.html) is [](GLOSSARY.html) a Model [](GLOSSARY.html) Delegate [](GLOSSARY.html)
    Editor [](GLOSSARY.html) design, except [](GLOSSARY.html) that [](GLOSSARY.html)
    the [](GLOSSARY.html) Delegate [](GLOSSARY.html) is [](GLOSSARY.html) called [](GLOSSARY.html)
    View, and the [](GLOSSARY.html) Editor [](GLOSSARY.html) is [](GLOSSARY.html)
    called [](GLOSSARY.html) Delegate. Such [](GLOSSARY.html) is [](GLOSSARY.html)
    life.'
  id: totrans-874
  prefs: []
  type: TYPE_NORMAL
  zh: 'FIXME: 例如，[QListView](GLOSSARY.html)是[QListWidget](GLOSSARY.html)的MV对应物。在Qt中没有控制器，也不需要。实际上，Qt是一个模型委托编辑器设计，除了委托被称为视图，编辑器被称为委托。这就是生活。'
- en: 'MVC [](GLOSSARY.html) model: modification [](GLOSSARY.html) through [](GLOSSARY.html)
    slots. Notification [](GLOSSARY.html) via [](GLOSSARY.html) signals.'
  id: totrans-875
  prefs: []
  type: TYPE_NORMAL
  zh: MVC模型：通过槽进行修改。通过信号进行通知。
- en: Emitting [](GLOSSARY.html) before [](GLOSSARY.html) changing [](GLOSSARY.html)
    the [](GLOSSARY.html) data [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html)
    model, to [](GLOSSARY.html) track [](GLOSSARY.html) changes. But [](GLOSSARY.html)
    careful if [](GLOSSARY.html) the [](GLOSSARY.html) calling [](GLOSSARY.html) code
    [](GLOSSARY.html) is [](GLOSSARY.html) in [](GLOSSARY.html) another [](GLOSSARY.html)
    thread.
  id: totrans-876
  prefs: []
  type: TYPE_NORMAL
  zh: 在修改模型数据之前发出信号，以跟踪更改。但是要小心，如果调用代码在另一个线程中。
- en: Qt [](GLOSSARY.html) model [](GLOSSARY.html) sort [](GLOSSARY.html) of [](GLOSSARY.html)
    a [](GLOSSARY.html) value [](GLOSSARY.html) model, but [](GLOSSARY.html) provides
    [](GLOSSARY.html) both [](GLOSSARY.html) visual [](GLOSSARY.html) and [](GLOSSARY.html)
    business [](GLOSSARY.html) data. The [](GLOSSARY.html) data [](GLOSSARY.html)
    structure [](GLOSSARY.html) is [](GLOSSARY.html) flexible [](GLOSSARY.html) to
    [](GLOSSARY.html) accommodate [](GLOSSARY.html) tabular [](GLOSSARY.html) and
    [](GLOSSARY.html) tree [](GLOSSARY.html) data [](GLOSSARY.html) on [](GLOSSARY.html)
    the [](GLOSSARY.html) same [](GLOSSARY.html) model structure.
  id: totrans-877
  prefs: []
  type: TYPE_NORMAL
  zh: Qt模型类似于值模型，但提供了视觉和业务数据。数据结构灵活，可以容纳表格和树状数据在同一模型结构中。
- en: Specialized [](GLOSSARY.html) models [](GLOSSARY.html) provide [](GLOSSARY.html)
    access [](GLOSSARY.html) to [](GLOSSARY.html) specific [](GLOSSARY.html) data
    (e.g. sql [](GLOSSARY.html) table, filesystem [](GLOSSARY.html) directory). Views
    [](GLOSSARY.html) are [](GLOSSARY.html) oblivious [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) data [](GLOSSARY.html) provider [](GLOSSARY.html) as [](GLOSSARY.html)
    long [](GLOSSARY.html) as [](GLOSSARY.html) it [](GLOSSARY.html) fulfills [](GLOSSARY.html)
    the [](GLOSSARY.html) AbstractModel [](GLOSSARY.html) interface.
  id: totrans-878
  prefs: []
  type: TYPE_NORMAL
  zh: 专门的模型提供对特定数据的访问（例如SQL表，文件系统目录）。只要满足抽象模型接口，视图对数据提供者毫不知情。
- en: '[PRE64]'
  id: totrans-879
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: Model [](GLOSSARY.html) indexes [](GLOSSARY.html) are [](GLOSSARY.html) created
    [](GLOSSARY.html) on [](GLOSSARY.html) the [](GLOSSARY.html) model, acting [](GLOSSARY.html)
    as [](GLOSSARY.html) a [](GLOSSARY.html) factory. Indexes [](GLOSSARY.html) can
    [](GLOSSARY.html) mutate [](GLOSSARY.html) as [](GLOSSARY.html) new [](GLOSSARY.html)
    elements are [](GLOSSARY.html) added [](GLOSSARY.html) or [](GLOSSARY.html) removed.
    A [](GLOSSARY.html) Persistent [](GLOSSARY.html) index [](GLOSSARY.html) is [](GLOSSARY.html)
    available [](GLOSSARY.html) to [](GLOSSARY.html) refer [](GLOSSARY.html) to [](GLOSSARY.html)
    a [](GLOSSARY.html) specific [](GLOSSARY.html) entry [](GLOSSARY.html) regardless
    of [](GLOSSARY.html) modifications [](GLOSSARY.html) to [](GLOSSARY.html) the
    [](GLOSSARY.html) model.
  id: totrans-880
  prefs: []
  type: TYPE_NORMAL
  zh: 模型索引在模型上创建，充当工厂。随着新元素的添加或移除，索引可能会发生变化。持久索引可用于引用特定条目，而不受对模型的修改影响。
- en: Model [](GLOSSARY.html) defines [](GLOSSARY.html) row, column [](GLOSSARY.html)
    and [](GLOSSARY.html) parent. Views [](GLOSSARY.html) don't [](GLOSSARY.html)
    necessarily [](GLOSSARY.html) use [](GLOSSARY.html) all [](GLOSSARY.html) the
    [](GLOSSARY.html) degrees [](GLOSSARY.html) of [](GLOSSARY.html) freedom. For
    [](GLOSSARY.html) example, a [](GLOSSARY.html) table [](GLOSSARY.html) may [](GLOSSARY.html)
    not [](GLOSSARY.html) need [](GLOSSARY.html) the [](GLOSSARY.html) parent, or
    [](GLOSSARY.html) a [](GLOSSARY.html) listView [](GLOSSARY.html) may [](GLOSSARY.html)
    not [](GLOSSARY.html) need [](GLOSSARY.html) the [](GLOSSARY.html) column, but
    [](GLOSSARY.html) the treeview [](GLOSSARY.html) needs [](GLOSSARY.html) all [](GLOSSARY.html)
    of [](GLOSSARY.html) them
  id: totrans-881
  prefs: []
  type: TYPE_NORMAL
  zh: 模型定义了行、列和父级。视图不一定使用所有自由度。例如，表格可能不需要父级，或者列表视图可能不需要列，但树视图需要它们全部。
- en: The [](GLOSSARY.html) view [](GLOSSARY.html) requests [](GLOSSARY.html) only
    [](GLOSSARY.html) the [](GLOSSARY.html) data [](GLOSSARY.html) that [](GLOSSARY.html)
    it [](GLOSSARY.html) needs [](GLOSSARY.html) to [](GLOSSARY.html) show. This [](GLOSSARY.html)
    can [](GLOSSARY.html) save [](GLOSSARY.html) considerable [](GLOSSARY.html) time,
    and [](GLOSSARY.html) allows [](GLOSSARY.html) the [](GLOSSARY.html) model [](GLOSSARY.html)
    to [](GLOSSARY.html) do [](GLOSSARY.html) caching [](GLOSSARY.html) strategies
    [](GLOSSARY.html) or [](GLOSSARY.html) pre-fetching.
  id: totrans-882
  prefs: []
  type: TYPE_NORMAL
  zh: 视图[](GLOSSARY.html)仅请求它需要显示的数据。这可以节省大量时间，并允许模型执行缓存策略或预取。
- en: Qt [](GLOSSARY.html) also [](GLOSSARY.html) provides [](GLOSSARY.html) sort/filter
    (Pipe).
  id: totrans-883
  prefs: []
  type: TYPE_NORMAL
  zh: Qt还提供排序/过滤（管道）。
- en: Model [](GLOSSARY.html) is [](GLOSSARY.html) a [](GLOSSARY.html) Presentation
    [](GLOSSARY.html) model.
  id: totrans-884
  prefs: []
  type: TYPE_NORMAL
  zh: 模型[](GLOSSARY.html)是一个演示模型。
- en: Complex [](GLOSSARY.html) application [](GLOSSARY.html) models [](GLOSSARY.html)
    need [](GLOSSARY.html) to [](GLOSSARY.html) be [](GLOSSARY.html) adapted [](GLOSSARY.html)
    into [](GLOSSARY.html) Qt [](GLOSSARY.html) models [](GLOSSARY.html) if [](GLOSSARY.html)
    needed. In [](GLOSSARY.html) a [](GLOSSARY.html) sense, the [](GLOSSARY.html)
    Qt [](GLOSSARY.html) model [](GLOSSARY.html) is [](GLOSSARY.html) an [](GLOSSARY.html)
    adaptor [](GLOSSARY.html) to [](GLOSSARY.html) a [](GLOSSARY.html) data [](GLOSSARY.html)
    representation (both [](GLOSSARY.html) visual [](GLOSSARY.html) and business)
    that [](GLOSSARY.html) is [](GLOSSARY.html) appreciated [](GLOSSARY.html) by [](GLOSSARY.html)
    the [](GLOSSARY.html) Views [](GLOSSARY.html) provided [](GLOSSARY.html) by [](GLOSSARY.html)
    qt. With [](GLOSSARY.html) more [](GLOSSARY.html) complex [](GLOSSARY.html) views,
    or [](GLOSSARY.html) models, the [](GLOSSARY.html) Qt [](GLOSSARY.html) mechanism
    [](GLOSSARY.html) breaks [](GLOSSARY.html) down, because [](GLOSSARY.html) it's
    finalized [](GLOSSARY.html) at [](GLOSSARY.html) a [](GLOSSARY.html) very [](GLOSSARY.html)
    specific [](GLOSSARY.html) data [](GLOSSARY.html) organization [](GLOSSARY.html)
    and [](GLOSSARY.html) visualization [](GLOSSARY.html) mechanism.
  id: totrans-885
  prefs: []
  type: TYPE_NORMAL
  zh: 复杂的应用程序模型需要根据需要适应Qt模型。在某种意义上，Qt模型是对数据表示（视觉和业务）的适配器，被Qt提供的视图所赞赏。对于更复杂的视图或模型，Qt机制会崩溃，因为它是针对非常特定的数据组织和可视化机制而定稿的。
- en: Provides [](GLOSSARY.html) the [](GLOSSARY.html) following [](GLOSSARY.html)
    Models
  id: totrans-886
  prefs: []
  type: TYPE_NORMAL
  zh: 提供以下的模型
- en: 'QStringListModel: Stores [](GLOSSARY.html) a [](GLOSSARY.html) list [](GLOSSARY.html)
    of [](GLOSSARY.html) strings QStandardItemModel: Stores [](GLOSSARY.html) arbitrary
    [](GLOSSARY.html) hierarchical [](GLOSSARY.html) items QFileSystemModel: Encapsulate
    [](GLOSSARY.html) the [](GLOSSARY.html) local [](GLOSSARY.html) file [](GLOSSARY.html)
    system QSqlQueryModel: Encapsulate [](GLOSSARY.html) an [](GLOSSARY.html) SQL
    [](GLOSSARY.html) result [](GLOSSARY.html) set QSqlTableModel: Encapsulates [](GLOSSARY.html)
    an [](GLOSSARY.html) SQL [](GLOSSARY.html) table QSqlRelationalTableModel: Encapsulates
    [](GLOSSARY.html) an [](GLOSSARY.html) SQL [](GLOSSARY.html) table [](GLOSSARY.html)
    with [](GLOSSARY.html) foreign [](GLOSSARY.html) keys QSortFilterProxyModel: Sorts
    [](GLOSSARY.html) and/or [](GLOSSARY.html) filters [](GLOSSARY.html) another [](GLOSSARY.html)
    model'
  id: totrans-887
  prefs: []
  type: TYPE_NORMAL
  zh: QStringListModel：存储字符串列表 QStandardItemModel：存储任意层次的项目 QFileSystemModel：封装本地文件系统
    QSqlQueryModel：封装SQL结果集 QSqlTableModel：封装SQL表 QSqlRelationalTableModel：封装带外键的SQL表
    QSortFilterProxyModel：对另一个模型进行排序和/或过滤
- en: QAbstractItemModel
  id: totrans-888
  prefs: []
  type: TYPE_NORMAL
  zh: QAbstractItemModel
- en: and [](GLOSSARY.html) the [](GLOSSARY.html) following [](GLOSSARY.html) Views
  id: totrans-889
  prefs: []
  type: TYPE_NORMAL
  zh: 和[GLOSSARY.html](https://wiki.example.org/glossary)以下的视图
- en: QColumnView, QHeaderView, QListView, QTableView, and [](GLOSSARY.html) QTreeView.
    QAbstractItemView
  id: totrans-890
  prefs: []
  type: TYPE_NORMAL
  zh: QColumnView、QHeaderView、QListView、QTableView和QTreeView。QAbstractItemView
- en: The [](GLOSSARY.html) Qt [](GLOSSARY.html) MVC [](GLOSSARY.html) is [](GLOSSARY.html)
    simple [](GLOSSARY.html) and [](GLOSSARY.html) aimed [](GLOSSARY.html) at [](GLOSSARY.html)
    specific [](GLOSSARY.html) data [](GLOSSARY.html) representation [](GLOSSARY.html)
    and visualization. It's [](GLOSSARY.html) not [](GLOSSARY.html) a [](GLOSSARY.html)
    general [](GLOSSARY.html) framework [](GLOSSARY.html) for [](GLOSSARY.html) MVC.
  id: totrans-891
  prefs: []
  type: TYPE_NORMAL
  zh: Qt MVC是简单的，旨在特定数据表示和可视化。它不是MVC的通用框架。
- en: 'Delegates:'
  id: totrans-892
  prefs: []
  type: TYPE_NORMAL
  zh: 代理：
- en: 'Factories [](GLOSSARY.html) for [](GLOSSARY.html) editors. createEditor() method
    [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html) reimplemented [](GLOSSARY.html)
    to [](GLOSSARY.html) return a [](GLOSSARY.html) specific [](GLOSSARY.html) widget
    [](GLOSSARY.html) that [](GLOSSARY.html) can [](GLOSSARY.html) edit [](GLOSSARY.html)
    a [](GLOSSARY.html) given [](GLOSSARY.html) cell [](GLOSSARY.html) in [](GLOSSARY.html)
    the [](GLOSSARY.html) model. It [](GLOSSARY.html) also [](GLOSSARY.html) has [](GLOSSARY.html)
    the [](GLOSSARY.html) gateway [](GLOSSARY.html) routines [](GLOSSARY.html) model->editor
    [](GLOSSARY.html) and [](GLOSSARY.html) editor->model [](GLOSSARY.html) for [](GLOSSARY.html)
    the [](GLOSSARY.html) data transit: setEditorData [](GLOSSARY.html) and [](GLOSSARY.html)
    setModelData. They [](GLOSSARY.html) are [](GLOSSARY.html) called [](GLOSSARY.html)
    at [](GLOSSARY.html) the [](GLOSSARY.html) beginning [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) edit and [](GLOSSARY.html) at [](GLOSSARY.html) the [](GLOSSARY.html)
    end. It [](GLOSSARY.html) also [](GLOSSARY.html) provides [](GLOSSARY.html) the
    [](GLOSSARY.html) rendering [](GLOSSARY.html) logic [](GLOSSARY.html) for [](GLOSSARY.html)
    the [](GLOSSARY.html) element: method [](GLOSSARY.html) paint()'
  id: totrans-893
  prefs: []
  type: TYPE_NORMAL
  zh: 编辑器的工厂。createEditor()方法可以重新实现为返回一个特定的小部件，可以编辑模型中的给定单元格。它还具有数据传输的网关例程model->editor和editor->model：setEditorData和setModelData。它们在编辑开始时和结束时被调用。它还为元素提供了渲染逻辑：方法paint()
- en: Supervising Presenter
  id: totrans-894
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监督演示者
- en: Supervising presenter
  id: totrans-895
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监督演示者
- en: Supervising [](GLOSSARY.html) presenter [](GLOSSARY.html) is [](GLOSSARY.html)
    a [](GLOSSARY.html) simple [](GLOSSARY.html) partition [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) Smart [](GLOSSARY.html) UI [](GLOSSARY.html) into [](GLOSSARY.html)
    logic [](GLOSSARY.html) and [](GLOSSARY.html) state [](GLOSSARY.html) classes.
    All [](GLOSSARY.html) state [](GLOSSARY.html) stays [](GLOSSARY.html) in [](GLOSSARY.html)
    the [](GLOSSARY.html) View, and [](GLOSSARY.html) all [](GLOSSARY.html) logic
    [](GLOSSARY.html) stays [](GLOSSARY.html) in [](GLOSSARY.html) the [](GLOSSARY.html)
    Supervising [](GLOSSARY.html) Presenter. The [](GLOSSARY.html) presenter [](GLOSSARY.html)
    observes [](GLOSSARY.html) the [](GLOSSARY.html) View [](GLOSSARY.html) for [](GLOSSARY.html)
    notification [](GLOSSARY.html) of [](GLOSSARY.html) GUI [](GLOSSARY.html) events,
    and [](GLOSSARY.html) updates [](GLOSSARY.html) the [](GLOSSARY.html) View through
    [](GLOSSARY.html) direct [](GLOSSARY.html) call. The [](GLOSSARY.html) View [](GLOSSARY.html)
    stays [](GLOSSARY.html) oblivious [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html)
    presenter, and [](GLOSSARY.html) acts [](GLOSSARY.html) therefore as [](GLOSSARY.html)
    a [](GLOSSARY.html) passive [](GLOSSARY.html) view. Testing [](GLOSSARY.html)
    is [](GLOSSARY.html) simplified [](GLOSSARY.html) because [](GLOSSARY.html) the
    [](GLOSSARY.html) View [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html)
    replaced [](GLOSSARY.html) with [](GLOSSARY.html) a [](GLOSSARY.html) mock.
  id: totrans-896
  prefs: []
  type: TYPE_NORMAL
  zh: 监督[](GLOSSARY.html)演示者[](GLOSSARY.html)是[](GLOSSARY.html)智能[](GLOSSARY.html)UI[](GLOSSARY.html)的一个简单[](GLOSSARY.html)分区，分为逻辑和状态类。所有状态都保留在视图中，所有逻辑都保留在监督演示者中。演示者观察视图以获取GUI事件的通知，并通过直接调用更新视图。视图对演示者一无所知，因此充当被动视图。测试变得简化，因为视图可以被模拟替换。
- en: The [](GLOSSARY.html) state [](GLOSSARY.html) remaining [](GLOSSARY.html) in
    [](GLOSSARY.html) the [](GLOSSARY.html) view [](GLOSSARY.html) is [](GLOSSARY.html)
    visual [](GLOSSARY.html) state. The [](GLOSSARY.html) supervising [](GLOSSARY.html)
    presenter [](GLOSSARY.html) extracts [](GLOSSARY.html) only [](GLOSSARY.html)
    visual [](GLOSSARY.html) logic.
  id: totrans-897
  prefs: []
  type: TYPE_NORMAL
  zh: 在视图中剩余的[](GLOSSARY.html)状态是视觉状态。监督者提取的只是视觉逻辑。
- en: FIXME [](GLOSSARY.html) integrate [](GLOSSARY.html) this [](GLOSSARY.html) pattern
    [](GLOSSARY.html) into [](GLOSSARY.html) the [](GLOSSARY.html) others, as [](GLOSSARY.html)
    it's [](GLOSSARY.html) clearly [](GLOSSARY.html) a [](GLOSSARY.html) duplication
    [](GLOSSARY.html) and [](GLOSSARY.html) can [](GLOSSARY.html) be [](GLOSSARY.html)
    rendered [](GLOSSARY.html) as [](GLOSSARY.html) part [](GLOSSARY.html) of [](GLOSSARY.html)
    Passive [](GLOSSARY.html) View [](GLOSSARY.html) or [](GLOSSARY.html) MVP.
  id: totrans-898
  prefs: []
  type: TYPE_NORMAL
  zh: FIXME 将此模式整合到其他模式中，因为这显然是重复的，可以作为被动视图或MVP的一部分呈现。
- en: 'FIXME: Difference [](GLOSSARY.html) with [](GLOSSARY.html) passive [](GLOSSARY.html)
    view [](GLOSSARY.html) is [](GLOSSARY.html) that [](GLOSSARY.html) in [](GLOSSARY.html)
    passive [](GLOSSARY.html) view [](GLOSSARY.html) the [](GLOSSARY.html) view [](GLOSSARY.html)
    is [](GLOSSARY.html) completely [](GLOSSARY.html) under [](GLOSSARY.html) control
    of [](GLOSSARY.html) the [](GLOSSARY.html) presenter, which [](GLOSSARY.html)
    drives [](GLOSSARY.html) all [](GLOSSARY.html) changes. In [](GLOSSARY.html) supervising
    [](GLOSSARY.html) presenter, the [](GLOSSARY.html) view [](GLOSSARY.html) can
    [](GLOSSARY.html) observe visual [](GLOSSARY.html) state [](GLOSSARY.html) provided
    [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html) presenter [](GLOSSARY.html)
    and [](GLOSSARY.html) react [](GLOSSARY.html) accordingly. It''s [](GLOSSARY.html)
    a [](GLOSSARY.html) matter [](GLOSSARY.html) of [](GLOSSARY.html) degrees.'
  id: totrans-899
  prefs: []
  type: TYPE_NORMAL
  zh: 'FIXME: 与被动视图的区别在于，在被动视图中，视图完全受控于主持人，主持人驱动所有变化。在监督者主持人中，视图可以观察主持人提供的视觉状态并相应地做出反应。这是一个程度的问题。'
- en: Presentation Model
  id: totrans-900
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 展示模型
- en: Presentation Model
  id: totrans-901
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 展示模型
- en: A [](GLOSSARY.html) model, non [](GLOSSARY.html) visual [](GLOSSARY.html) representation
    [](GLOSSARY.html) of [](GLOSSARY.html) the [](GLOSSARY.html) view. It [](GLOSSARY.html)
    incorporates [](GLOSSARY.html) logic [](GLOSSARY.html) and [](GLOSSARY.html) state
    [](GLOSSARY.html) of [](GLOSSARY.html) the View. The [](GLOSSARY.html) View [](GLOSSARY.html)
    observes [](GLOSSARY.html) the [](GLOSSARY.html) Presentation [](GLOSSARY.html)
    Model [](GLOSSARY.html) and [](GLOSSARY.html) updates [](GLOSSARY.html) accordingly
    [](GLOSSARY.html) when [](GLOSSARY.html) events [](GLOSSARY.html) are reported.
    The [](GLOSSARY.html) model [](GLOSSARY.html) is [](GLOSSARY.html) unaware [](GLOSSARY.html)
    of [](GLOSSARY.html) the [](GLOSSARY.html) view.
  id: totrans-902
  prefs: []
  type: TYPE_NORMAL
  zh: 视图的非视觉表示。它包含视图的逻辑和状态。视图观察展示模型，并在报告事件时相应地更新。模型不知道视图。
- en: Very [](GLOSSARY.html) similar [](GLOSSARY.html) in [](GLOSSARY.html) idea [](GLOSSARY.html)
    to [](GLOSSARY.html) Application [](GLOSSARY.html) Model. In [](GLOSSARY.html)
    practice, it [](GLOSSARY.html) is [](GLOSSARY.html) the [](GLOSSARY.html) same,
    just [](GLOSSARY.html) formalized.
  id: totrans-903
  prefs: []
  type: TYPE_NORMAL
  zh: 在概念上与应用程序模型非常相似。实际上，它是一样的，只是形式化了。
- en: 'FIXME: Integrate [](GLOSSARY.html) somewhere [](GLOSSARY.html) else?'
  id: totrans-904
  prefs: []
  type: TYPE_NORMAL
  zh: 'FIXME: 在其他地方整合[](GLOSSARY.html)？'
- en: Data Binding
  id: totrans-905
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据绑定
- en: Data binding
  id: totrans-906
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据绑定
- en: Motivation
  id: totrans-907
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 动机
- en: We [](GLOSSARY.html) want [](GLOSSARY.html) to [](GLOSSARY.html) reduce [](GLOSSARY.html)
    boilerplate [](GLOSSARY.html) code [](GLOSSARY.html) to [](GLOSSARY.html) synchronize
    [](GLOSSARY.html) changes [](GLOSSARY.html) the [](GLOSSARY.html) bidirectional
    communication [](GLOSSARY.html) between [](GLOSSARY.html) the [](GLOSSARY.html)
    Model [](GLOSSARY.html) and [](GLOSSARY.html) the [](GLOSSARY.html) View.
  id: totrans-908
  prefs: []
  type: TYPE_NORMAL
  zh: 我们想要减少模型[](GLOSSARY.html)和视图之间的双向通信，以同步变化的样板代码[](GLOSSARY.html)。
- en: The [](GLOSSARY.html) Model [](GLOSSARY.html) is [](GLOSSARY.html) a [](GLOSSARY.html)
    one-to-one [](GLOSSARY.html) representation [](GLOSSARY.html) of [](GLOSSARY.html)
    the [](GLOSSARY.html) View [](GLOSSARY.html) widgets. Changes [](GLOSSARY.html)
    in [](GLOSSARY.html) the [](GLOSSARY.html) content of [](GLOSSARY.html) the [](GLOSSARY.html)
    Model [](GLOSSARY.html) immediately [](GLOSSARY.html) propagates [](GLOSSARY.html)
    to [](GLOSSARY.html) the [](GLOSSARY.html) widget, and [](GLOSSARY.html) vice-versa,
    changes [](GLOSSARY.html) in [](GLOSSARY.html) the Widget [](GLOSSARY.html) are
    [](GLOSSARY.html) immediately [](GLOSSARY.html) propagated [](GLOSSARY.html) to
    [](GLOSSARY.html) the [](GLOSSARY.html) Model.
  id: totrans-909
  prefs: []
  type: TYPE_NORMAL
  zh: 模型是视图小部件的一对一表示。模型内容的更改立即传播到小部件，反之亦然，小部件中的更改立即传播到模型。
- en: The [](GLOSSARY.html) code [](GLOSSARY.html) is [](GLOSSARY.html) declarative.
  id: totrans-910
  prefs: []
  type: TYPE_NORMAL
  zh: 代码是声明式的。
- en: Validation [](GLOSSARY.html) is [](GLOSSARY.html) possible, but [](GLOSSARY.html)
    only [](GLOSSARY.html) for [](GLOSSARY.html) individual [](GLOSSARY.html) values.
    The [](GLOSSARY.html) Model [](GLOSSARY.html) can [](GLOSSARY.html) inform [](GLOSSARY.html)
    the [](GLOSSARY.html) View that [](GLOSSARY.html) the [](GLOSSARY.html) value
    [](GLOSSARY.html) is [](GLOSSARY.html) incorrect [](GLOSSARY.html) and [](GLOSSARY.html)
    raise [](GLOSSARY.html) an [](GLOSSARY.html) exception. This [](GLOSSARY.html)
    is [](GLOSSARY.html) interpreted [](GLOSSARY.html) by [](GLOSSARY.html) the [](GLOSSARY.html)
    View [](GLOSSARY.html) by coloring [](GLOSSARY.html) the [](GLOSSARY.html) cell
    [](GLOSSARY.html) red, for [](GLOSSARY.html) example.
  id: totrans-911
  prefs: []
  type: TYPE_NORMAL
  zh: 验证是可能的，但只针对单个值。模型可以通知视图值不正确并引发异常。例如，视图通过将单元格标为红色来解释此异常。
- en: synchronization [](GLOSSARY.html) can [](GLOSSARY.html) also [](GLOSSARY.html)
    be [](GLOSSARY.html) one-directional. Diretionality [](GLOSSARY.html) is [](GLOSSARY.html)
    important [](GLOSSARY.html) if [](GLOSSARY.html) we [](GLOSSARY.html) want [](GLOSSARY.html)
    to [](GLOSSARY.html) elimate [](GLOSSARY.html) coercion [](GLOSSARY.html) problems.
  id: totrans-912
  prefs: []
  type: TYPE_NORMAL
  zh: 同步[](GLOSSARY.html)也可以是单向的。方向性[](GLOSSARY.html)很重要，如果我们想要消除强制问题。
- en: Data [](GLOSSARY.html) binding [](GLOSSARY.html) basically [](GLOSSARY.html)
    connects [](GLOSSARY.html) specific [](GLOSSARY.html) widgets [](GLOSSARY.html)
    with [](GLOSSARY.html) specific [](GLOSSARY.html) model [](GLOSSARY.html) attributes
    [](GLOSSARY.html) through a [](GLOSSARY.html) trivial, off [](GLOSSARY.html) the
    [](GLOSSARY.html) shelf [](GLOSSARY.html) controller [](GLOSSARY.html) that [](GLOSSARY.html)
    is [](GLOSSARY.html) invisible [](GLOSSARY.html) to [](GLOSSARY.html) us.
  id: totrans-913
  prefs: []
  type: TYPE_NORMAL
  zh: 数据绑定[](GLOSSARY.html)基本上通过一种微不足道的、我们看不见的现成控制器将特定的小部件[](GLOSSARY.html)与特定的模型属性[](GLOSSARY.html)连接起来。
- en: Possibility [](GLOSSARY.html) to [](GLOSSARY.html) say [](GLOSSARY.html) how
    [](GLOSSARY.html) to [](GLOSSARY.html) transform [](GLOSSARY.html) the [](GLOSSARY.html)
    data [](GLOSSARY.html) as [](GLOSSARY.html) they [](GLOSSARY.html) go [](GLOSSARY.html)
    back [](GLOSSARY.html) and [](GLOSSARY.html) forth. Backbone.js [](GLOSSARY.html)
    stickit [](GLOSSARY.html) onSet/onGet
  id: totrans-914
  prefs: []
  type: TYPE_NORMAL
  zh: '-   在数据来回传输时，有可能**定义**如何转换数据。Backbone.js的stickit onSet/onGet'
- en: The [](GLOSSARY.html) triad [](GLOSSARY.html) becomes [](GLOSSARY.html) a [](GLOSSARY.html)
    1:1 [](GLOSSARY.html) connection [](GLOSSARY.html) between [](GLOSSARY.html) view
    [](GLOSSARY.html) and [](GLOSSARY.html) model, with [](GLOSSARY.html) the [](GLOSSARY.html)
    controller being [](GLOSSARY.html) invisible [](GLOSSARY.html) and [](GLOSSARY.html)
    generic.
  id: totrans-915
  prefs: []
  type: TYPE_NORMAL
  zh: '-   这种三元关系变成了视图和模型之间的一对一连接，控制器则是**隐形**且**通用**的。'
- en: Practical Examples
  id: totrans-916
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '-   实际示例'
- en: Cocoa [](GLOSSARY.html) Bindings, TraitsUI
  id: totrans-917
  prefs: []
  type: TYPE_NORMAL
  zh: '-   Cocoa绑定，TraitsUI'
