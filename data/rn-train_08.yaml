- en: 8 Integration (draft)
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8 é›†æˆï¼ˆè‰ç¨¿ï¼‰
- en: 8 Integration
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8 é›†æˆ
- en: Most of the time we are not starting a new app, we just want to use react-native
    to develop some new features, so integration should be a necessary skill for react-native
    developers.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯è¦å¯åŠ¨ä¸€ä¸ªæ–°åº”ç”¨ç¨‹åºï¼Œè€Œæ˜¯æƒ³è¦ä½¿ç”¨ react-native æ¥å¼€å‘ä¸€äº›æ–°åŠŸèƒ½ï¼Œå› æ­¤é›†æˆåº”è¯¥æ˜¯ react-native å¼€å‘äººå‘˜çš„å¿…å¤‡æŠ€èƒ½ã€‚
- en: Assume that you have create some features in the AwesomeProject, you want to
    create an exactly same environment for your current project.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾æ‚¨å·²ç»åœ¨ AwesomeProject ä¸­åˆ›å»ºäº†ä¸€äº›åŠŸèƒ½ï¼Œæ‚¨æƒ³è¦ä¸ºå½“å‰é¡¹ç›®åˆ›å»ºå®Œå…¨ç›¸åŒçš„ç¯å¢ƒã€‚
- en: '![](integrationdemo.png)'
  id: totrans-4
  prefs: []
  type: TYPE_IMG
  zh: '![](integrationdemo.png)'
- en: '**Notice that** version is very important after your app published. If you
    want to upgrade react-native and package codes, that almost means you don''t want
    to maintain the old version any longer.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¯·æ³¨æ„**ï¼Œç‰ˆæœ¬åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºå‘å¸ƒåéå¸¸é‡è¦ã€‚å¦‚æœæ‚¨æƒ³è¦å‡çº§ react-native å¹¶æ‰“åŒ…ä»£ç ï¼Œé‚£å‡ ä¹æ„å‘³ç€æ‚¨ä¸æƒ³å†ç»´æŠ¤æ—§ç‰ˆæœ¬äº†ã€‚'
- en: 8.1 iOS
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8.1 iOS
- en: 8.1 iOS
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8.1 iOS
- en: Cocoapods with local path
  id: totrans-8
  prefs:
  - PREF_UL
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä½¿ç”¨æœ¬åœ°è·¯å¾„çš„ Cocoapods
- en: 'Requirement : [CocoaPods](https://cocoapods.org/)'
  id: totrans-9
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è¦æ±‚ï¼š[CocoaPods](https://cocoapods.org/)
- en: 'After pod **version > 1.0**, you need to identify the target. Create ''Podfile''
    in project root folder :'
  id: totrans-10
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: åœ¨ pod **ç‰ˆæœ¬ > 1.0** ä¹‹åï¼Œæ‚¨éœ€è¦è¯†åˆ«ç›®æ ‡ã€‚åœ¨é¡¹ç›®æ ¹æ–‡ä»¶å¤¹ä¸­åˆ›å»º 'Podfile'ï¼š
- en: '[PRE0]'
  id: totrans-11
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: then `pod install`
  id: totrans-12
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç„¶å `pod install`
- en: '![](pod_integration.png)'
  id: totrans-13
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![](pod_integration.png)'
- en: 8.1.1 Package
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8.1.1 åŒ…
- en: 9.1.1 Package
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 9.1.1 åŒ…
- en: '[PRE1]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 8.1.2 Image
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8.1.2 å›¾åƒ
- en: 9.1.2 Image
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 9.1.2 å›¾åƒ
- en: Cache path
  id: totrans-19
  prefs:
  - PREF_UL
  - PREF_H3
  type: TYPE_NORMAL
  zh: ç¼“å­˜è·¯å¾„
- en: 8.2 Android
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8.2 Android
- en: 8.2 Android
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8.2 Android
- en: At first I followed the official instruction (which seems very simple) but lots
    of build or runtime error occurs ğŸ˜‚.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: èµ·åˆæˆ‘éµå¾ªå®˜æ–¹è¯´æ˜ï¼ˆçœ‹èµ·æ¥éå¸¸ç®€å•ï¼‰ï¼Œä½†å‡ºç°äº†è®¸å¤šæ„å»ºæˆ–è¿è¡Œæ—¶é”™è¯¯ ğŸ˜‚ã€‚
- en: 'Such as:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼š
- en: '`Can''t find variable: __fbBatchedBridge (<unknown file>:1)`'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '`Can''t find variable: __fbBatchedBridge (<unknown file>:1)`'
- en: '`java.lang.UnsatisfiedLinkError: could find DSO to load: libreactnativejni.so`'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '`java.lang.UnsatisfiedLinkError: could find DSO to load: libreactnativejni.so`'
- en: '`android.view.WindowManager$BadTokenException: Unable to add window android.view.ViewRootImpl$W@5d992cf
    -- permission denied for this window type`'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '`android.view.WindowManager$BadTokenException: Unable to add window android.view.ViewRootImpl$W@5d992cf
    -- permission denied for this window type`'
- en: 'But the demo works corrcetly, so I decided to copy the build settings of it.
    And finally it works normally on my Nexus 5X. Steps:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†æ¼”ç¤ºæ­£å¸¸è¿è¡Œï¼Œæ‰€ä»¥æˆ‘å†³å®šå¤åˆ¶å®ƒçš„æ„å»ºè®¾ç½®ã€‚æœ€ååœ¨æˆ‘çš„ Nexus 5X ä¸Šæ­£å¸¸å·¥ä½œã€‚æ­¥éª¤ï¼š
- en: Add the path to the root gradle file, ![](integration_android_step11.png)
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ·»åŠ è·¯å¾„åˆ°æ ¹ gradle æ–‡ä»¶ï¼Œ![](integration_android_step11.png)
- en: Modify the app gradle file, ![](integration_android_step22.png)
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¿®æ”¹åº”ç”¨ gradle æ–‡ä»¶ï¼Œ![](integration_android_step22.png)
- en: '*1\. Official demo use this variable to control wheather building different
    apps for cpus, that will reduce the size of each app, I just ignore it here.'
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*1\. å®˜æ–¹æ¼”ç¤ºä½¿ç”¨æ­¤å˜é‡æ¥æ§åˆ¶æ˜¯å¦ä¸ºä¸åŒçš„ cpu æ„å»ºä¸åŒçš„åº”ç”¨ç¨‹åºï¼Œè¿™å°†å‡å°æ¯ä¸ªåº”ç”¨ç¨‹åºçš„å¤§å°ï¼Œæˆ‘åœ¨è¿™é‡Œåªæ˜¯å¿½ç•¥å®ƒã€‚'
- en: '*2\. The version support package matters.. As react-native Android use many
    open source projects, if you use some of them already, you should check the version
    or exclude the from dependencies. [The list currently](https://github.com/facebook/react-native/blob/master/ReactAndroid/build.gradle)'
  id: totrans-31
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*2\. ç‰ˆæœ¬æ”¯æŒåŒ…å¾ˆé‡è¦ã€‚ç”±äº react-native Android ä½¿ç”¨è®¸å¤šå¼€æºé¡¹ç›®ï¼Œå¦‚æœæ‚¨å·²ç»ä½¿ç”¨äº†å…¶ä¸­ä¸€äº›ï¼Œæ‚¨åº”è¯¥æ£€æŸ¥ç‰ˆæœ¬æˆ–ä»ä¾èµ–é¡¹ä¸­æ’é™¤å®ƒä»¬ã€‚[å½“å‰åˆ—è¡¨](https://github.com/facebook/react-native/blob/master/ReactAndroid/build.gradle)'
- en: '[PRE2]'
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Modify root gradle.properties, ![](integration_android_step3.png)
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¿®æ”¹æ ¹ gradle.propertiesï¼Œ![](integration_android_step3.png)
- en: Add proguard rules, ![](integration_android_step4.png)
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ·»åŠ  proguard è§„åˆ™ï¼Œ![](integration_android_step4.png)
- en: AndroidManifest.xml, you can remove the permission if you don't need debug mode.
    ![](integration_android_step5.png)
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: AndroidManifest.xmlï¼Œå¦‚æœä¸éœ€è¦è°ƒè¯•æ¨¡å¼ï¼Œåˆ™å¯ä»¥åˆ é™¤æƒé™ã€‚![](integration_android_step5.png)
- en: 8.2.1 Package
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8.2.1 åŒ…
- en: 9.2.1 Package
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 9.2.1 åŒ…
- en: '[PRE3]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 8.3 Before publishing
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8.3 å‘å¸ƒå‰
- en: 8.3 Before publishing
  id: totrans-40
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8.3 å‘å¸ƒå‰
- en: Turn off debug Settings.
  id: totrans-41
  prefs:
  - PREF_UL
  - PREF_H3
  type: TYPE_NORMAL
  zh: å…³é—­è°ƒè¯•è®¾ç½®ã€‚
- en: Implementation of exception handler.
  id: totrans-42
  prefs:
  - PREF_UL
  - PREF_H3
  type: TYPE_NORMAL
  zh: å¼‚å¸¸å¤„ç†ç¨‹åºçš„å®ç°ã€‚
- en: 8.4 Resources
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8.4 èµ„æº
- en: 8.3 Resources
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 8.3 èµ„æº
- en: '[Integrating with Existing Apps - iOS](https://facebook.github.io/react-native/docs/embedded-app-ios.html)'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[ä¸ç°æœ‰åº”ç”¨ç¨‹åºé›†æˆ - iOS](https://facebook.github.io/react-native/docs/embedded-app-ios.html)'
- en: '[Integrating with Existing Apps - Android](https://facebook.github.io/react-native/docs/embedded-app-android.html)'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[ä¸ç°æœ‰åº”ç”¨ç¨‹åºé›†æˆ - Android](https://facebook.github.io/react-native/docs/embedded-app-android.html)'
- en: 9.3 Resources
  id: totrans-47
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 9.3 èµ„æº
- en: 9.3 Resources
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 9.3 èµ„æº
- en: '[React Native Module for CodePush](http://microsoft.github.io/code-push/)'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[React Native CodePush æ¨¡å—](http://microsoft.github.io/code-push/)'
- en: '[JSPatch](https://github.com/bang590/JSPatch)'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[JSPatch](https://github.com/bang590/JSPatch)'
