- en: 'Lab 04: Donation 3.0 - Donation Object Model'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Lab 04: Donation 3.0 - Donation Object Model'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Objectives
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Objectives
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Evolve the Donation android app to include a Donation Object Model and Base
    class
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Use a CustomAdapter in the Report View.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Refactor our menus with xml driven event handling
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Step 01
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Donation Model & Base Class
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In order to keep our application design coherent, we now bring in an Base class
    and a Donation class to manage our Donations. You can continue with your own version
    of the app or start with the solution from the previous lab - [Donation.2.0](../archives/Donation.2.0.zip)
  prefs: []
  type: TYPE_NORMAL
- en: But before we do anything, it's probably a good idea to rename/copy or project
    to **Donation.3.0** like we did in the previous lab - so go ahead and do that
    now (just make sure it's not open Android Studio!)
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, first, create a new package called ''ie.app.models'' in ''main'' and bring
    in this class here:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Next, Create a new class called ''Base'' and add it to the ''ie.app.activities''
    package: (and fix the errors obviously :-) )'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Notice our List of Donations in the Base class - we will use this list to display
    our Donations in the Report.
  prefs: []
  type: TYPE_NORMAL
- en: There is still one error remaining, can you work out why, and more importantly,
    how to fix it?
  prefs: []
  type: TYPE_NORMAL
- en: Hint - it relates to class inheritance, and some refactoring that needs to be
    done.
  prefs: []
  type: TYPE_NORMAL
- en: 'Your project should now look as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](lab4s101.png)'
  prefs: []
  type: TYPE_IMG
- en: Also, pay particular attention to the 'settings', 'report' and 'donate' methods
    - these will be triggered directly by our menu options via xml, which we'll look
    at in Step 05.
  prefs: []
  type: TYPE_NORMAL
- en: Step 02
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Refactored Donate
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The Donate activity can now be completely refactored to make use of the Base
    class.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Replace your version with this and execute it - fix any missing import statements
    necessary.
  prefs: []
  type: TYPE_NORMAL
- en: Look carefully at the changes to this version over the previous attempt.
  prefs: []
  type: TYPE_NORMAL
- en: Step 03
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Refactored Report - New 'Layout'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We now rework Report to render the actual donations - held in the Base class
    list.
  prefs: []
  type: TYPE_NORMAL
- en: First some layout additions. Include these new string resources in strings.xml
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: This is a new layout - to be called 'row_donate.xml'. Place this in the 'layout'
    folder.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: Step 04
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Refactored Report - New 'Class'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Finally, rework the Report class to remove the hard coded values - and use a
    different 'adapter'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'This is the new adapter - DonationAdapter. You can place this at the end of
    the Report class (outside the closing brace) if you like:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: If all goes well - then you should be able to make donations, and then see a
    list of them in the report activity.
  prefs: []
  type: TYPE_NORMAL
- en: '![](lab4s401.png) ![](lab4s402.png)'
  prefs: []
  type: TYPE_IMG
- en: Step 05
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Refactored Menu - New 'Event Handling'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: If you recall from Step 01, our Base class has 3 particular methods that we
    haven't made use of - yet
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: We will now use these methods, and using the **onClick** attribute in our MenuItems,
    we will 'bind' these methods to our menu options.
  prefs: []
  type: TYPE_NORMAL
- en: 'Firstly, edit your menu_donate.xml and ensure it now looks as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: '**note the added onClick attributes for each MenuItem, it directly corresponds
    to the method names in our Base class**'
  prefs: []
  type: TYPE_NORMAL
- en: We can now refactor our Donate & Report classes and **Remove** the menu inflation
    and event handling code in both classes.
  prefs: []
  type: TYPE_NORMAL
- en: 'So, both classes should look as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Donate**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: '**Report**'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: Run your app once more, to confirm the changes and that your menu still works
    as it should.
  prefs: []
  type: TYPE_NORMAL
- en: Solution
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Exercise & Solution
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: As a final exercise, try and add some event handling to the Report Activity
    - i.e. when the user selects a row in Report List, display a simple toast detailing
    which row was selected and the donation data from that row.
  prefs: []
  type: TYPE_NORMAL
- en: 'Something like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](lab4s701.png)'
  prefs: []
  type: TYPE_IMG
- en: You may find the following useful if you need to refactor your Donation model
  prefs: []
  type: TYPE_NORMAL
- en: '![](lab4s702.png)'
  prefs: []
  type: TYPE_IMG
- en: and
  prefs: []
  type: TYPE_NORMAL
- en: '![](lab4s703.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Project Solution (and Starter for the next lab):'
  prefs: []
  type: TYPE_NORMAL
- en: '[Donation.4.0.Starter](../archives/Donation.4.0.Starter.zip)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
