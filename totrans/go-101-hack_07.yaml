- en: init function
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: init function
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'There is a `init()` function, as the name suggests, it will do some initialization
    work, such as initializing variables which may not be expressed easily, or calibrating
    program state. A file can contain one or more `init()` functions, as shown here:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'The execution result is like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Since one package can contain multiple files, there may be many `init()` functions.
    You **should not** presume which file's `init()` functions are executed first.
    The only thing which is guaranteed is that the variables declared in package will
    be evaluated before all `init()` functions are executed in this package.
  prefs: []
  type: TYPE_NORMAL
- en: 'See another example. The `$GOROOT/src` directory is like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'There are `2` simple packages: `foo` and `play`. The `foo/foo.go` is here:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'While the `play/main.go` is:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'Build `play` command:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'The cause of this error is that `main.go` doesn''t use any functions or variables
    exported by `foo` package. So if you just want an imported package''s `init()`
    function is executed, and don''t want to use package''s other stuff, you should
    modify "`import "foo"`" to "`import _ "foo"`":'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'Now the build process will success, and the output of `play` command is like
    this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'References:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Effective Go](https://golang.org/doc/effective_go.html#init);'
  prefs: []
  type: TYPE_NORMAL
- en: '[When is the init() function in go (golang) run?](http://stackoverflow.com/questions/24790175/when-is-the-init-function-in-go-golang-run).'
  prefs: []
  type: TYPE_NORMAL
