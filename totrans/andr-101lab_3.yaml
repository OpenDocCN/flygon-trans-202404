- en: 'Lab 03: Donation 2.0 - Multi Screen App & Menus'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Lab 03: Donation 2.0 - Multi Screen App & Menus'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Objectives
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Objectives
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Introduce simple menu handling
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Evolve the Donation android app to include a report view
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Use a simple ArrayAdapter
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Step 01
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Package Name
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'This is the current version of the **Donation** app:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Donation.1.5.zip](Donation.1.51.zip)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: To continue using this project we need to 'refactor' it to **Donation.2.0**.
    At the time of writing, Android Studio's refactoring features and tools are a
    bit iffy :-) so we'll need to manually copy our project.
  prefs: []
  type: TYPE_NORMAL
- en: Ensure you don't have **Donation.1.5** open in Android Studio - if you do, close
    it now
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to the folder where you downloaded and unzipped **Donation.1.5**
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Rename (or copy if you wish) the folder to **Donation.2.0**
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Rename the file **Donation.1.5.iml** to ***Donation.2.0.iml***
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Edit ***Donation.2.0.iml*** and change any references to **Donation.1.5** to
    **Donation.2.0**
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Navigate to the **.idea** folder (it might be a hidden folder) open the **.name**
    file and rename the project name to **Donation.2.0**
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Launch Android Studio and open up the **Donation.2.0** project
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: We should also take this opportunity to change the name of the 'ie.app' package
    to 'ie.app.activities', as we will be introducing other packages later on.
  prefs: []
  type: TYPE_NORMAL
- en: So create a new Package (in the 'main' folder)
  prefs: []
  type: TYPE_NORMAL
- en: '![](lab3s101.png)'
  prefs: []
  type: TYPE_IMG
- en: and drag in your **Donate.java** into this new package. You can delete the empty
    package (if Android Studio hasn't done it already)
  prefs: []
  type: TYPE_NORMAL
- en: Do the same for the **ApplicationTest** class.
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, check that the import statement in Donate.java is as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: '![](lab3s102.png)'
  prefs: []
  type: TYPE_IMG
- en: So make sure your project structure looks like the above before continuing.
  prefs: []
  type: TYPE_NORMAL
- en: Also, don't forget to change the **app_name** string resource in your strings.xml.
  prefs: []
  type: TYPE_NORMAL
- en: You should 'Clean' your project at this stage "Build->Clean Project", and then
    Rebuild & finally run your app, to make sure everything is ok.
  prefs: []
  type: TYPE_NORMAL
- en: 'This is the current version of the **Donation** app (Your Starter Code for
    this lab, after you''ve completed the above):'
  prefs: []
  type: TYPE_NORMAL
- en: '[Donation.2.0.zip](Donation.2.0.Starter.zip)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Step 02
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Menu
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Open **res/values/strings.xml** and introduce a new String resource like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'We have a menu resource called ''menu_donate.xml'' in the res/menu folder.
    Modify this file by adding this new menu item:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: (Make sure it is within the **'menu'** element)
  prefs: []
  type: TYPE_NORMAL
- en: 'In Donate.java, change the onOptionsItemSelected method to look like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: Run the app and when you press the menu button (or the overflow menu) and select
    'Report', you should see the toast message appear.
  prefs: []
  type: TYPE_NORMAL
- en: '![](lab3s103.png)![](lab3s104.png)'
  prefs: []
  type: TYPE_IMG
- en: Step 03
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Reports Activity
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Before we start to design a new activity, Add a string resource in res/values/strings.xml:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'Design a new layout called **activity_report**. Do this by locating the res/layout
    folder and selecting new->layout resource file:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](lab3s301.png)'
  prefs: []
  type: TYPE_IMG
- en: You can choose all the defaults for this layout.
  prefs: []
  type: TYPE_NORMAL
- en: '![](lab3s302.png)'
  prefs: []
  type: TYPE_IMG
- en: '''Morph'' our layout from Linear to Relative, like so,'
  prefs: []
  type: TYPE_NORMAL
- en: '![](lab3s303.png)'
  prefs: []
  type: TYPE_IMG
- en: 'and build a layout similar to the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](lab3s304.png)'
  prefs: []
  type: TYPE_IMG
- en: 'This is the layout file itself:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'Introduce a new Empty Activity into ie.app.activities to render this activity:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](lab3s305.png)'
  prefs: []
  type: TYPE_IMG
- en: 'and replace it with the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: This will display a hard-coded lists of donations.
  prefs: []
  type: TYPE_NORMAL
- en: 'Change Donation activity to load this view when ''Report'' selected from menu:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'Confirm that the activity specification has been added to the AndroidManifest.xml
    file:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: Try it all now - it should load (like below)
  prefs: []
  type: TYPE_NORMAL
- en: '![](lab3s306.png)'
  prefs: []
  type: TYPE_IMG
- en: Step 04
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Menu Revisited
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: When you navigate from the Donate activity to reports, there will be no menu
    available. So we need to first inflate the menu like so
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: Bring in a new menu item, 'Donate' - Donate should bring you back to the main
    Donate Screen.
  prefs: []
  type: TYPE_NORMAL
- en: 'This is a very similar approach to what you did in Step 02, so revisit this
    step and see if you can end up with something like the following for the ''Report''
    Screen:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](lab3s401.png)'
  prefs: []
  type: TYPE_IMG
- en: We'll look at populating the list with actual donations in the next lab.
  prefs: []
  type: TYPE_NORMAL
- en: Solution
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Solution
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Solution so far:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Donation.2.0.zip](Donation.2.0.zip)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
