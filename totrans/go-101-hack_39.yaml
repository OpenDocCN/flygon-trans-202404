- en: nil channel VS closed channel
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: nil channel VS closed channel
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: 'The zero value of channel type is `nil`, and the send and receive operations
    on a `nil` channel will always block. Check the following example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'The running result is like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: We can see the `main` and `func` goroutines are both blocked.
  prefs: []
  type: TYPE_NORMAL
- en: 'The `Go`''s built-in `close` function can be used to close the channel which
    must not be receive-only, and it should always be executed by sender, not receiver.
    Closing a `nil` channel will cause panic. See the following example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'The running result is like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'Furthermore, there are also some subtleties of operating an already-closed
    channel:'
  prefs: []
  type: TYPE_NORMAL
- en: '(1) Close an already channel also cause panic:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'The running result is like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: '(2) Send on a closed channel will also introduce panic:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'The running result is like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: '(3) Receive on a closed channel will return the zero value for the channel''s
    type without blocking:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'The executing result is like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'The following is a summary of "`nil` channel VS closed channel":'
  prefs: []
  type: TYPE_NORMAL
- en: '| Operation type | Nil channel | Closed channel |'
  prefs: []
  type: TYPE_TB
- en: '| Send | Block | Panic |'
  prefs: []
  type: TYPE_TB
- en: '| Receive | Block | Not block, return zero value of channel''s type |'
  prefs: []
  type: TYPE_TB
- en: '| Close | Panic | Panic |'
  prefs: []
  type: TYPE_TB
- en: 'References:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Package builtin](https://golang.org/pkg/builtin/#close);'
  prefs: []
  type: TYPE_NORMAL
- en: '[Is it OK to leave a channel open?](http://stackoverflow.com/questions/8593645/is-it-ok-to-leave-a-channel-open);'
  prefs: []
  type: TYPE_NORMAL
- en: '[The Go Programming Language Specification](https://golang.org/ref/spec).'
  prefs: []
  type: TYPE_NORMAL
