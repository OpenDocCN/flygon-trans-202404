- en: The internals of slice
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The internals of slice
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: 'There are `3` components of slice:'
  prefs: []
  type: TYPE_NORMAL
- en: 'a) `Pointer`: Points to the start position of slice in the underlying array;'
  prefs: []
  type: TYPE_NORMAL
- en: 'b) `length` (type is `int`): the number of the valid elements of the slice;'
  prefs: []
  type: TYPE_NORMAL
- en: 'b) `capacity` (type is `int`): the total number of slots of the slice.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Check the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: The result is `24` on my `64-bit` system (The `pointer` and `int` both occupy
    `8` bytes).
  prefs: []
  type: TYPE_NORMAL
- en: 'In the next example, I will use `gdb` to poke the internals of slice. The code
    is like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Use `gdb` to step into the code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Before executing "`s1 = append(s1, 4)`", `fmt.Println` outputs the length(`3`),
    capacity(`5`) and the starting element address(`0xc820010240`) of the slice, let''s
    check the memory layout of `s1`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: Through examining the memory content of `s1`(the start memory address is `0xc82003fe40`),
    we can see its content matches the output of `fmt.Println`.
  prefs: []
  type: TYPE_NORMAL
- en: 'Continue executing, and check the result before "`s2 := s1[1:]`":'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: We can see after appending a new element(`s1 = append(s1, 4)`), the length of
    `s1` is changed to `4`, but the capacity remains the original value.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s check the internals of `s2`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: The element start address of `s2` is `0xc820010248`, actually the second element
    of `s1`(`0xc82003fe40`), and the length(`3`) and capacity(`4`) are both one less
    than the counterparts of `s1`(`4` and `5` respectively).
  prefs: []
  type: TYPE_NORMAL
